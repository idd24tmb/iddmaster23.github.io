function FB(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function cd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var LL={exports:{}},my={},DL={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp=Symbol.for("react.element"),zB=Symbol.for("react.portal"),BB=Symbol.for("react.fragment"),HB=Symbol.for("react.strict_mode"),VB=Symbol.for("react.profiler"),GB=Symbol.for("react.provider"),WB=Symbol.for("react.context"),$B=Symbol.for("react.forward_ref"),jB=Symbol.for("react.suspense"),XB=Symbol.for("react.memo"),YB=Symbol.for("react.lazy"),p2=Symbol.iterator;function KB(n){return n===null||typeof n!="object"?null:(n=p2&&n[p2]||n["@@iterator"],typeof n=="function"?n:null)}var OL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NL=Object.assign,kL={};function ud(n,e,t){this.props=n,this.context=e,this.refs=kL,this.updater=t||OL}ud.prototype.isReactComponent={};ud.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ud.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function UL(){}UL.prototype=ud.prototype;function rT(n,e,t){this.props=n,this.context=e,this.refs=kL,this.updater=t||OL}var sT=rT.prototype=new UL;sT.constructor=rT;NL(sT,ud.prototype);sT.isPureReactComponent=!0;var m2=Array.isArray,FL=Object.prototype.hasOwnProperty,oT={current:null},zL={key:!0,ref:!0,__self:!0,__source:!0};function BL(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)FL.call(e,i)&&!zL.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Yp,type:n,key:s,ref:o,props:r,_owner:oT.current}}function qB(n,e){return{$$typeof:Yp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function aT(n){return typeof n=="object"&&n!==null&&n.$$typeof===Yp}function ZB(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var g2=/\/+/g;function bx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ZB(""+n.key):e.toString(36)}function F0(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Yp:case zB:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+bx(o,0):i,m2(r)?(t="",n!=null&&(t=n.replace(g2,"$&/")+"/"),F0(r,e,t,"",function(c){return c})):r!=null&&(aT(r)&&(r=qB(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(g2,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",m2(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+bx(s,a);o+=F0(s,e,t,l,r)}else if(l=KB(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+bx(s,a++),o+=F0(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gg(n,e,t){if(n==null)return n;var i=[],r=0;return F0(n,i,"","",function(s){return e.call(t,s,r++)}),i}function QB(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var cr={current:null},z0={transition:null},JB={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:z0,ReactCurrentOwner:oT};Ft.Children={map:gg,forEach:function(n,e,t){gg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return gg(n,function(){e++}),e},toArray:function(n){return gg(n,function(e){return e})||[]},only:function(n){if(!aT(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ft.Component=ud;Ft.Fragment=BB;Ft.Profiler=VB;Ft.PureComponent=rT;Ft.StrictMode=HB;Ft.Suspense=jB;Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JB;Ft.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=NL({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=oT.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)FL.call(e,l)&&!zL.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Yp,type:n.type,key:r,ref:s,props:i,_owner:o}};Ft.createContext=function(n){return n={$$typeof:WB,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:GB,_context:n},n.Consumer=n};Ft.createElement=BL;Ft.createFactory=function(n){var e=BL.bind(null,n);return e.type=n,e};Ft.createRef=function(){return{current:null}};Ft.forwardRef=function(n){return{$$typeof:$B,render:n}};Ft.isValidElement=aT;Ft.lazy=function(n){return{$$typeof:YB,_payload:{_status:-1,_result:n},_init:QB}};Ft.memo=function(n,e){return{$$typeof:XB,type:n,compare:e===void 0?null:e}};Ft.startTransition=function(n){var e=z0.transition;z0.transition={};try{n()}finally{z0.transition=e}};Ft.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ft.useCallback=function(n,e){return cr.current.useCallback(n,e)};Ft.useContext=function(n){return cr.current.useContext(n)};Ft.useDebugValue=function(){};Ft.useDeferredValue=function(n){return cr.current.useDeferredValue(n)};Ft.useEffect=function(n,e){return cr.current.useEffect(n,e)};Ft.useId=function(){return cr.current.useId()};Ft.useImperativeHandle=function(n,e,t){return cr.current.useImperativeHandle(n,e,t)};Ft.useInsertionEffect=function(n,e){return cr.current.useInsertionEffect(n,e)};Ft.useLayoutEffect=function(n,e){return cr.current.useLayoutEffect(n,e)};Ft.useMemo=function(n,e){return cr.current.useMemo(n,e)};Ft.useReducer=function(n,e,t){return cr.current.useReducer(n,e,t)};Ft.useRef=function(n){return cr.current.useRef(n)};Ft.useState=function(n){return cr.current.useState(n)};Ft.useSyncExternalStore=function(n,e,t){return cr.current.useSyncExternalStore(n,e,t)};Ft.useTransition=function(){return cr.current.useTransition()};Ft.version="18.2.0";DL.exports=Ft;var P=DL.exports;const X=cd(P),HL=FB({__proto__:null,default:X},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e4=P,t4=Symbol.for("react.element"),n4=Symbol.for("react.fragment"),i4=Object.prototype.hasOwnProperty,r4=e4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s4={key:!0,ref:!0,__self:!0,__source:!0};function VL(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)i4.call(e,i)&&!s4.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:t4,type:n,key:s,ref:o,props:r,_owner:r4.current}}my.Fragment=n4;my.jsx=VL;my.jsxs=VL;LL.exports=my;var ae=LL.exports,wS={},GL={exports:{}},Jr={},WL={exports:{}},$L={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,V){var W=N.length;N.push(V);e:for(;0<W;){var Q=W-1>>>1,ie=N[Q];if(0<r(ie,V))N[Q]=V,N[W]=ie,W=Q;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var V=N[0],W=N.pop();if(W!==V){N[0]=W;e:for(var Q=0,ie=N.length,Me=ie>>>1;Q<Me;){var te=2*(Q+1)-1,ue=N[te],xe=te+1,Re=N[xe];if(0>r(ue,W))xe<ie&&0>r(Re,ue)?(N[Q]=Re,N[xe]=W,Q=xe):(N[Q]=ue,N[te]=W,Q=te);else if(xe<ie&&0>r(Re,W))N[Q]=Re,N[xe]=W,Q=xe;else break e}}return V}function r(N,V){var W=N.sortIndex-V.sortIndex;return W!==0?W:N.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(N){for(var V=t(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=N)i(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(c)}}function E(N){if(_=!1,S(N),!v)if(t(l)!==null)v=!0,q(b);else{var V=t(c);V!==null&&ee(E,V.startTime-N)}}function b(N,V){v=!1,_&&(_=!1,g(D),D=-1),m=!0;var W=p;try{for(S(V),f=t(l);f!==null&&(!(f.expirationTime>V)||N&&!I());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,p=f.priorityLevel;var ie=Q(f.expirationTime<=V);V=n.unstable_now(),typeof ie=="function"?f.callback=ie:f===t(l)&&i(l),S(V)}else i(l);f=t(l)}if(f!==null)var Me=!0;else{var te=t(c);te!==null&&ee(E,te.startTime-V),Me=!1}return Me}finally{f=null,p=W,m=!1}}var A=!1,R=null,D=-1,O=5,M=-1;function I(){return!(n.unstable_now()-M<O)}function U(){if(R!==null){var N=n.unstable_now();M=N;var V=!0;try{V=R(!0,N)}finally{V?j():(A=!1,R=null)}}else A=!1}var j;if(typeof x=="function")j=function(){x(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,K=z.port2;z.port1.onmessage=U,j=function(){K.postMessage(null)}}else j=function(){y(U,0)};function q(N){R=N,A||(A=!0,j())}function ee(N,V){D=y(function(){N(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,q(b))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var W=p;p=V;try{return N()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=p;p=N;try{return V()}finally{p=W}},n.unstable_scheduleCallback=function(N,V,W){var Q=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Q+W:Q):W=Q,N){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=W+ie,N={id:u++,callback:V,priorityLevel:N,startTime:W,expirationTime:ie,sortIndex:-1},W>Q?(N.sortIndex=W,e(c,N),t(l)===null&&N===t(c)&&(_?(g(D),D=-1):_=!0,ee(E,W-Q))):(N.sortIndex=ie,e(l,N),v||m||(v=!0,q(b))),N},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(N){var V=p;return function(){var W=p;p=V;try{return N.apply(this,arguments)}finally{p=W}}}})($L);WL.exports=$L;var o4=WL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jL=P,Zr=o4;function Ce(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XL=new Set,tp={};function nu(n,e){Bf(n,e),Bf(n+"Capture",e)}function Bf(n,e){for(tp[n]=e,n=0;n<e.length;n++)XL.add(e[n])}var aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ES=Object.prototype.hasOwnProperty,a4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v2={},y2={};function l4(n){return ES.call(y2,n)?!0:ES.call(v2,n)?!1:a4.test(n)?y2[n]=!0:(v2[n]=!0,!1)}function c4(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function u4(n,e,t,i){if(e===null||typeof e>"u"||c4(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ur(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Pi[n]=new ur(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Pi[e]=new ur(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Pi[n]=new ur(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Pi[n]=new ur(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Pi[n]=new ur(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Pi[n]=new ur(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Pi[n]=new ur(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Pi[n]=new ur(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Pi[n]=new ur(n,5,!1,n.toLowerCase(),null,!1,!1)});var lT=/[\-:]([a-z])/g;function cT(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(lT,cT);Pi[e]=new ur(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(lT,cT);Pi[e]=new ur(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(lT,cT);Pi[e]=new ur(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Pi[n]=new ur(n,1,!1,n.toLowerCase(),null,!1,!1)});Pi.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Pi[n]=new ur(n,1,!1,n.toLowerCase(),null,!0,!0)});function uT(n,e,t,i){var r=Pi.hasOwnProperty(e)?Pi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(u4(e,t,r,i)&&(t=null),i||r===null?l4(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var xa=jL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vg=Symbol.for("react.element"),sf=Symbol.for("react.portal"),of=Symbol.for("react.fragment"),fT=Symbol.for("react.strict_mode"),TS=Symbol.for("react.profiler"),YL=Symbol.for("react.provider"),KL=Symbol.for("react.context"),dT=Symbol.for("react.forward_ref"),MS=Symbol.for("react.suspense"),bS=Symbol.for("react.suspense_list"),hT=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),qL=Symbol.for("react.offscreen"),_2=Symbol.iterator;function Jd(n){return n===null||typeof n!="object"?null:(n=_2&&n[_2]||n["@@iterator"],typeof n=="function"?n:null)}var Dn=Object.assign,Ax;function Ah(n){if(Ax===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Ax=e&&e[1]||""}return`
`+Ax+n}var Cx=!1;function Rx(n,e){if(!n||Cx)return"";Cx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Cx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ah(n):""}function f4(n){switch(n.tag){case 5:return Ah(n.type);case 16:return Ah("Lazy");case 13:return Ah("Suspense");case 19:return Ah("SuspenseList");case 0:case 2:case 15:return n=Rx(n.type,!1),n;case 11:return n=Rx(n.type.render,!1),n;case 1:return n=Rx(n.type,!0),n;default:return""}}function AS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case of:return"Fragment";case sf:return"Portal";case TS:return"Profiler";case fT:return"StrictMode";case MS:return"Suspense";case bS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case KL:return(n.displayName||"Context")+".Consumer";case YL:return(n._context.displayName||"Context")+".Provider";case dT:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case hT:return e=n.displayName||null,e!==null?e:AS(n.type)||"Memo";case $a:e=n._payload,n=n._init;try{return AS(n(e))}catch{}}return null}function d4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return AS(e);case 8:return e===fT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _l(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ZL(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function h4(n){var e=ZL(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function yg(n){n._valueTracker||(n._valueTracker=h4(n))}function QL(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=ZL(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function uv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function CS(n,e){var t=e.checked;return Dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function x2(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=_l(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JL(n,e){e=e.checked,e!=null&&uT(n,"checked",e,!1)}function RS(n,e){JL(n,e);var t=_l(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?PS(n,e.type,t):e.hasOwnProperty("defaultValue")&&PS(n,e.type,_l(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function S2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function PS(n,e,t){(e!=="number"||uv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ch=Array.isArray;function Mf(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+_l(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function IS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Dn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function w2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ce(92));if(Ch(t)){if(1<t.length)throw Error(Ce(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:_l(t)}}function e3(n,e){var t=_l(e.value),i=_l(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function E2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function t3(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function LS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?t3(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var _g,n3=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(_g=_g||document.createElement("div"),_g.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_g.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function np(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Nh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},p4=["Webkit","ms","Moz","O"];Object.keys(Nh).forEach(function(n){p4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Nh[e]=Nh[n]})});function i3(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Nh.hasOwnProperty(n)&&Nh[n]?(""+e).trim():e+"px"}function r3(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=i3(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var m4=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function DS(n,e){if(e){if(m4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function OS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NS=null;function pT(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var kS=null,bf=null,Af=null;function T2(n){if(n=Zp(n)){if(typeof kS!="function")throw Error(Ce(280));var e=n.stateNode;e&&(e=xy(e),kS(n.stateNode,n.type,e))}}function s3(n){bf?Af?Af.push(n):Af=[n]:bf=n}function o3(){if(bf){var n=bf,e=Af;if(Af=bf=null,T2(n),e)for(n=0;n<e.length;n++)T2(e[n])}}function a3(n,e){return n(e)}function l3(){}var Px=!1;function c3(n,e,t){if(Px)return n(e,t);Px=!0;try{return a3(n,e,t)}finally{Px=!1,(bf!==null||Af!==null)&&(l3(),o3())}}function ip(n,e){var t=n.stateNode;if(t===null)return null;var i=xy(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ce(231,e,typeof t));return t}var US=!1;if(aa)try{var eh={};Object.defineProperty(eh,"passive",{get:function(){US=!0}}),window.addEventListener("test",eh,eh),window.removeEventListener("test",eh,eh)}catch{US=!1}function g4(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var kh=!1,fv=null,dv=!1,FS=null,v4={onError:function(n){kh=!0,fv=n}};function y4(n,e,t,i,r,s,o,a,l){kh=!1,fv=null,g4.apply(v4,arguments)}function _4(n,e,t,i,r,s,o,a,l){if(y4.apply(this,arguments),kh){if(kh){var c=fv;kh=!1,fv=null}else throw Error(Ce(198));dv||(dv=!0,FS=c)}}function iu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function u3(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function M2(n){if(iu(n)!==n)throw Error(Ce(188))}function x4(n){var e=n.alternate;if(!e){if(e=iu(n),e===null)throw Error(Ce(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return M2(r),n;if(s===i)return M2(r),e;s=s.sibling}throw Error(Ce(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(t.alternate!==i)throw Error(Ce(190))}if(t.tag!==3)throw Error(Ce(188));return t.stateNode.current===t?n:e}function f3(n){return n=x4(n),n!==null?d3(n):null}function d3(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=d3(n);if(e!==null)return e;n=n.sibling}return null}var h3=Zr.unstable_scheduleCallback,b2=Zr.unstable_cancelCallback,S4=Zr.unstable_shouldYield,w4=Zr.unstable_requestPaint,Xn=Zr.unstable_now,E4=Zr.unstable_getCurrentPriorityLevel,mT=Zr.unstable_ImmediatePriority,p3=Zr.unstable_UserBlockingPriority,hv=Zr.unstable_NormalPriority,T4=Zr.unstable_LowPriority,m3=Zr.unstable_IdlePriority,gy=null,So=null;function M4(n){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(gy,n,void 0,(n.current.flags&128)===128)}catch{}}var Gs=Math.clz32?Math.clz32:C4,b4=Math.log,A4=Math.LN2;function C4(n){return n>>>=0,n===0?32:31-(b4(n)/A4|0)|0}var xg=64,Sg=4194304;function Rh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function pv(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Rh(a):(s&=o,s!==0&&(i=Rh(s)))}else o=t&~r,o!==0?i=Rh(o):s!==0&&(i=Rh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Gs(e),r=1<<t,i|=n[t],e&=~r;return i}function R4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P4(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Gs(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=R4(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function zS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function g3(){var n=xg;return xg<<=1,!(xg&4194240)&&(xg=64),n}function Ix(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Kp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Gs(e),n[e]=t}function I4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Gs(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function gT(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Gs(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Qt=0;function v3(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var y3,vT,_3,x3,S3,BS=!1,wg=[],sl=null,ol=null,al=null,rp=new Map,sp=new Map,Ya=[],L4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A2(n,e){switch(n){case"focusin":case"focusout":sl=null;break;case"dragenter":case"dragleave":ol=null;break;case"mouseover":case"mouseout":al=null;break;case"pointerover":case"pointerout":rp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sp.delete(e.pointerId)}}function th(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Zp(e),e!==null&&vT(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function D4(n,e,t,i,r){switch(e){case"focusin":return sl=th(sl,n,e,t,i,r),!0;case"dragenter":return ol=th(ol,n,e,t,i,r),!0;case"mouseover":return al=th(al,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return rp.set(s,th(rp.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,sp.set(s,th(sp.get(s)||null,n,e,t,i,r)),!0}return!1}function w3(n){var e=vc(n.target);if(e!==null){var t=iu(e);if(t!==null){if(e=t.tag,e===13){if(e=u3(t),e!==null){n.blockedOn=e,S3(n.priority,function(){_3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function B0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=HS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);NS=i,t.target.dispatchEvent(i),NS=null}else return e=Zp(t),e!==null&&vT(e),n.blockedOn=t,!1;e.shift()}return!0}function C2(n,e,t){B0(n)&&t.delete(e)}function O4(){BS=!1,sl!==null&&B0(sl)&&(sl=null),ol!==null&&B0(ol)&&(ol=null),al!==null&&B0(al)&&(al=null),rp.forEach(C2),sp.forEach(C2)}function nh(n,e){n.blockedOn===e&&(n.blockedOn=null,BS||(BS=!0,Zr.unstable_scheduleCallback(Zr.unstable_NormalPriority,O4)))}function op(n){function e(r){return nh(r,n)}if(0<wg.length){nh(wg[0],n);for(var t=1;t<wg.length;t++){var i=wg[t];i.blockedOn===n&&(i.blockedOn=null)}}for(sl!==null&&nh(sl,n),ol!==null&&nh(ol,n),al!==null&&nh(al,n),rp.forEach(e),sp.forEach(e),t=0;t<Ya.length;t++)i=Ya[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Ya.length&&(t=Ya[0],t.blockedOn===null);)w3(t),t.blockedOn===null&&Ya.shift()}var Cf=xa.ReactCurrentBatchConfig,mv=!0;function N4(n,e,t,i){var r=Qt,s=Cf.transition;Cf.transition=null;try{Qt=1,yT(n,e,t,i)}finally{Qt=r,Cf.transition=s}}function k4(n,e,t,i){var r=Qt,s=Cf.transition;Cf.transition=null;try{Qt=4,yT(n,e,t,i)}finally{Qt=r,Cf.transition=s}}function yT(n,e,t,i){if(mv){var r=HS(n,e,t,i);if(r===null)Hx(n,e,i,gv,t),A2(n,i);else if(D4(r,n,e,t,i))i.stopPropagation();else if(A2(n,i),e&4&&-1<L4.indexOf(n)){for(;r!==null;){var s=Zp(r);if(s!==null&&y3(s),s=HS(n,e,t,i),s===null&&Hx(n,e,i,gv,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Hx(n,e,i,null,t)}}var gv=null;function HS(n,e,t,i){if(gv=null,n=pT(i),n=vc(n),n!==null)if(e=iu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=u3(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return gv=n,null}function E3(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E4()){case mT:return 1;case p3:return 4;case hv:case T4:return 16;case m3:return 536870912;default:return 16}default:return 16}}var Qa=null,_T=null,H0=null;function T3(){if(H0)return H0;var n,e=_T,t=e.length,i,r="value"in Qa?Qa.value:Qa.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return H0=r.slice(n,1<i?1-i:void 0)}function V0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Eg(){return!0}function R2(){return!1}function es(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Eg:R2,this.isPropagationStopped=R2,this}return Dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Eg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Eg)},persist:function(){},isPersistent:Eg}),e}var fd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xT=es(fd),qp=Dn({},fd,{view:0,detail:0}),U4=es(qp),Lx,Dx,ih,vy=Dn({},qp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ST,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ih&&(ih&&n.type==="mousemove"?(Lx=n.screenX-ih.screenX,Dx=n.screenY-ih.screenY):Dx=Lx=0,ih=n),Lx)},movementY:function(n){return"movementY"in n?n.movementY:Dx}}),P2=es(vy),F4=Dn({},vy,{dataTransfer:0}),z4=es(F4),B4=Dn({},qp,{relatedTarget:0}),Ox=es(B4),H4=Dn({},fd,{animationName:0,elapsedTime:0,pseudoElement:0}),V4=es(H4),G4=Dn({},fd,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),W4=es(G4),$4=Dn({},fd,{data:0}),I2=es($4),j4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Y4[n])?!!e[n]:!1}function ST(){return K4}var q4=Dn({},qp,{key:function(n){if(n.key){var e=j4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=V0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?X4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ST,charCode:function(n){return n.type==="keypress"?V0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?V0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Z4=es(q4),Q4=Dn({},vy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L2=es(Q4),J4=Dn({},qp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ST}),e5=es(J4),t5=Dn({},fd,{propertyName:0,elapsedTime:0,pseudoElement:0}),n5=es(t5),i5=Dn({},vy,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),r5=es(i5),s5=[9,13,27,32],wT=aa&&"CompositionEvent"in window,Uh=null;aa&&"documentMode"in document&&(Uh=document.documentMode);var o5=aa&&"TextEvent"in window&&!Uh,M3=aa&&(!wT||Uh&&8<Uh&&11>=Uh),D2=" ",O2=!1;function b3(n,e){switch(n){case"keyup":return s5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A3(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var af=!1;function a5(n,e){switch(n){case"compositionend":return A3(e);case"keypress":return e.which!==32?null:(O2=!0,D2);case"textInput":return n=e.data,n===D2&&O2?null:n;default:return null}}function l5(n,e){if(af)return n==="compositionend"||!wT&&b3(n,e)?(n=T3(),H0=_T=Qa=null,af=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return M3&&e.locale!=="ko"?null:e.data;default:return null}}var c5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!c5[n.type]:e==="textarea"}function C3(n,e,t,i){s3(i),e=vv(e,"onChange"),0<e.length&&(t=new xT("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Fh=null,ap=null;function u5(n){z3(n,0)}function yy(n){var e=uf(n);if(QL(e))return n}function f5(n,e){if(n==="change")return e}var R3=!1;if(aa){var Nx;if(aa){var kx="oninput"in document;if(!kx){var k2=document.createElement("div");k2.setAttribute("oninput","return;"),kx=typeof k2.oninput=="function"}Nx=kx}else Nx=!1;R3=Nx&&(!document.documentMode||9<document.documentMode)}function U2(){Fh&&(Fh.detachEvent("onpropertychange",P3),ap=Fh=null)}function P3(n){if(n.propertyName==="value"&&yy(ap)){var e=[];C3(e,ap,n,pT(n)),c3(u5,e)}}function d5(n,e,t){n==="focusin"?(U2(),Fh=e,ap=t,Fh.attachEvent("onpropertychange",P3)):n==="focusout"&&U2()}function h5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yy(ap)}function p5(n,e){if(n==="click")return yy(e)}function m5(n,e){if(n==="input"||n==="change")return yy(e)}function g5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var js=typeof Object.is=="function"?Object.is:g5;function lp(n,e){if(js(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!ES.call(e,r)||!js(n[r],e[r]))return!1}return!0}function F2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function z2(n,e){var t=F2(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=F2(t)}}function I3(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?I3(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function L3(){for(var n=window,e=uv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=uv(n.document)}return e}function ET(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function v5(n){var e=L3(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&I3(t.ownerDocument.documentElement,t)){if(i!==null&&ET(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=z2(t,s);var o=z2(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var y5=aa&&"documentMode"in document&&11>=document.documentMode,lf=null,VS=null,zh=null,GS=!1;function B2(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;GS||lf==null||lf!==uv(i)||(i=lf,"selectionStart"in i&&ET(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zh&&lp(zh,i)||(zh=i,i=vv(VS,"onSelect"),0<i.length&&(e=new xT("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=lf)))}function Tg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var cf={animationend:Tg("Animation","AnimationEnd"),animationiteration:Tg("Animation","AnimationIteration"),animationstart:Tg("Animation","AnimationStart"),transitionend:Tg("Transition","TransitionEnd")},Ux={},D3={};aa&&(D3=document.createElement("div").style,"AnimationEvent"in window||(delete cf.animationend.animation,delete cf.animationiteration.animation,delete cf.animationstart.animation),"TransitionEvent"in window||delete cf.transitionend.transition);function _y(n){if(Ux[n])return Ux[n];if(!cf[n])return n;var e=cf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in D3)return Ux[n]=e[t];return n}var O3=_y("animationend"),N3=_y("animationiteration"),k3=_y("animationstart"),U3=_y("transitionend"),F3=new Map,H2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Il(n,e){F3.set(n,e),nu(e,[n])}for(var Fx=0;Fx<H2.length;Fx++){var zx=H2[Fx],_5=zx.toLowerCase(),x5=zx[0].toUpperCase()+zx.slice(1);Il(_5,"on"+x5)}Il(O3,"onAnimationEnd");Il(N3,"onAnimationIteration");Il(k3,"onAnimationStart");Il("dblclick","onDoubleClick");Il("focusin","onFocus");Il("focusout","onBlur");Il(U3,"onTransitionEnd");Bf("onMouseEnter",["mouseout","mouseover"]);Bf("onMouseLeave",["mouseout","mouseover"]);Bf("onPointerEnter",["pointerout","pointerover"]);Bf("onPointerLeave",["pointerout","pointerover"]);nu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nu("onBeforeInput",["compositionend","keypress","textInput","paste"]);nu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ph));function V2(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,_4(i,e,void 0,n),n.currentTarget=null}function z3(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;V2(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;V2(r,a,c),s=l}}}if(dv)throw n=FS,dv=!1,FS=null,n}function hn(n,e){var t=e[YS];t===void 0&&(t=e[YS]=new Set);var i=n+"__bubble";t.has(i)||(B3(e,n,2,!1),t.add(i))}function Bx(n,e,t){var i=0;e&&(i|=4),B3(t,n,i,e)}var Mg="_reactListening"+Math.random().toString(36).slice(2);function cp(n){if(!n[Mg]){n[Mg]=!0,XL.forEach(function(t){t!=="selectionchange"&&(S5.has(t)||Bx(t,!1,n),Bx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Mg]||(e[Mg]=!0,Bx("selectionchange",!1,e))}}function B3(n,e,t,i){switch(E3(e)){case 1:var r=N4;break;case 4:r=k4;break;default:r=yT}t=r.bind(null,e,t,n),r=void 0,!US||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Hx(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=vc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}c3(function(){var c=s,u=pT(t),f=[];e:{var p=F3.get(n);if(p!==void 0){var m=xT,v=n;switch(n){case"keypress":if(V0(t)===0)break e;case"keydown":case"keyup":m=Z4;break;case"focusin":v="focus",m=Ox;break;case"focusout":v="blur",m=Ox;break;case"beforeblur":case"afterblur":m=Ox;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=P2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=z4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=e5;break;case O3:case N3:case k3:m=V4;break;case U3:m=n5;break;case"scroll":m=U4;break;case"wheel":m=r5;break;case"copy":case"cut":case"paste":m=W4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=L2}var _=(e&4)!==0,y=!_&&n==="scroll",g=_?p!==null?p+"Capture":null:p;_=[];for(var x=c,S;x!==null;){S=x;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=ip(x,g),E!=null&&_.push(up(x,E,S)))),y)break;x=x.return}0<_.length&&(p=new m(p,v,null,t,u),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==NS&&(v=t.relatedTarget||t.fromElement)&&(vc(v)||v[la]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?vc(v):null,v!==null&&(y=iu(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(_=P2,E="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(_=L2,E="onPointerLeave",g="onPointerEnter",x="pointer"),y=m==null?p:uf(m),S=v==null?p:uf(v),p=new _(E,x+"leave",m,t,u),p.target=y,p.relatedTarget=S,E=null,vc(u)===c&&(_=new _(g,x+"enter",v,t,u),_.target=S,_.relatedTarget=y,E=_),y=E,m&&v)t:{for(_=m,g=v,x=0,S=_;S;S=Cu(S))x++;for(S=0,E=g;E;E=Cu(E))S++;for(;0<x-S;)_=Cu(_),x--;for(;0<S-x;)g=Cu(g),S--;for(;x--;){if(_===g||g!==null&&_===g.alternate)break t;_=Cu(_),g=Cu(g)}_=null}else _=null;m!==null&&G2(f,p,m,_,!1),v!==null&&y!==null&&G2(f,y,v,_,!0)}}e:{if(p=c?uf(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var b=f5;else if(N2(p))if(R3)b=m5;else{b=h5;var A=d5}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=p5);if(b&&(b=b(n,c))){C3(f,b,t,u);break e}A&&A(n,p,c),n==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&PS(p,"number",p.value)}switch(A=c?uf(c):window,n){case"focusin":(N2(A)||A.contentEditable==="true")&&(lf=A,VS=c,zh=null);break;case"focusout":zh=VS=lf=null;break;case"mousedown":GS=!0;break;case"contextmenu":case"mouseup":case"dragend":GS=!1,B2(f,t,u);break;case"selectionchange":if(y5)break;case"keydown":case"keyup":B2(f,t,u)}var R;if(wT)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else af?b3(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(M3&&t.locale!=="ko"&&(af||D!=="onCompositionStart"?D==="onCompositionEnd"&&af&&(R=T3()):(Qa=u,_T="value"in Qa?Qa.value:Qa.textContent,af=!0)),A=vv(c,D),0<A.length&&(D=new I2(D,n,null,t,u),f.push({event:D,listeners:A}),R?D.data=R:(R=A3(t),R!==null&&(D.data=R)))),(R=o5?a5(n,t):l5(n,t))&&(c=vv(c,"onBeforeInput"),0<c.length&&(u=new I2("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=R))}z3(f,e)})}function up(n,e,t){return{instance:n,listener:e,currentTarget:t}}function vv(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ip(n,t),s!=null&&i.unshift(up(n,s,r)),s=ip(n,e),s!=null&&i.push(up(n,s,r))),n=n.return}return i}function Cu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function G2(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=ip(t,s),l!=null&&o.unshift(up(t,l,a))):r||(l=ip(t,s),l!=null&&o.push(up(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var w5=/\r\n?/g,E5=/\u0000|\uFFFD/g;function W2(n){return(typeof n=="string"?n:""+n).replace(w5,`
`).replace(E5,"")}function bg(n,e,t){if(e=W2(e),W2(n)!==e&&t)throw Error(Ce(425))}function yv(){}var WS=null,$S=null;function jS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var XS=typeof setTimeout=="function"?setTimeout:void 0,T5=typeof clearTimeout=="function"?clearTimeout:void 0,$2=typeof Promise=="function"?Promise:void 0,M5=typeof queueMicrotask=="function"?queueMicrotask:typeof $2<"u"?function(n){return $2.resolve(null).then(n).catch(b5)}:XS;function b5(n){setTimeout(function(){throw n})}function Vx(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),op(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);op(e)}function ll(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function j2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var dd=Math.random().toString(36).slice(2),mo="__reactFiber$"+dd,fp="__reactProps$"+dd,la="__reactContainer$"+dd,YS="__reactEvents$"+dd,A5="__reactListeners$"+dd,C5="__reactHandles$"+dd;function vc(n){var e=n[mo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[la]||t[mo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=j2(n);n!==null;){if(t=n[mo])return t;n=j2(n)}return e}n=t,t=n.parentNode}return null}function Zp(n){return n=n[mo]||n[la],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function uf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ce(33))}function xy(n){return n[fp]||null}var KS=[],ff=-1;function Ll(n){return{current:n}}function mn(n){0>ff||(n.current=KS[ff],KS[ff]=null,ff--)}function un(n,e){ff++,KS[ff]=n.current,n.current=e}var xl={},ji=Ll(xl),Sr=Ll(!1),Bc=xl;function Hf(n,e){var t=n.type.contextTypes;if(!t)return xl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function wr(n){return n=n.childContextTypes,n!=null}function _v(){mn(Sr),mn(ji)}function X2(n,e,t){if(ji.current!==xl)throw Error(Ce(168));un(ji,e),un(Sr,t)}function H3(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ce(108,d4(n)||"Unknown",r));return Dn({},t,i)}function xv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||xl,Bc=ji.current,un(ji,n),un(Sr,Sr.current),!0}function Y2(n,e,t){var i=n.stateNode;if(!i)throw Error(Ce(169));t?(n=H3(n,e,Bc),i.__reactInternalMemoizedMergedChildContext=n,mn(Sr),mn(ji),un(ji,n)):mn(Sr),un(Sr,t)}var Xo=null,Sy=!1,Gx=!1;function V3(n){Xo===null?Xo=[n]:Xo.push(n)}function R5(n){Sy=!0,V3(n)}function Dl(){if(!Gx&&Xo!==null){Gx=!0;var n=0,e=Qt;try{var t=Xo;for(Qt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Xo=null,Sy=!1}catch(r){throw Xo!==null&&(Xo=Xo.slice(n+1)),h3(mT,Dl),r}finally{Qt=e,Gx=!1}}return null}var df=[],hf=0,Sv=null,wv=0,vs=[],ys=0,Hc=null,Jo=1,ea="";function lc(n,e){df[hf++]=wv,df[hf++]=Sv,Sv=n,wv=e}function G3(n,e,t){vs[ys++]=Jo,vs[ys++]=ea,vs[ys++]=Hc,Hc=n;var i=Jo;n=ea;var r=32-Gs(i)-1;i&=~(1<<r),t+=1;var s=32-Gs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Jo=1<<32-Gs(e)+r|t<<r|i,ea=s+n}else Jo=1<<s|t<<r|i,ea=n}function TT(n){n.return!==null&&(lc(n,1),G3(n,1,0))}function MT(n){for(;n===Sv;)Sv=df[--hf],df[hf]=null,wv=df[--hf],df[hf]=null;for(;n===Hc;)Hc=vs[--ys],vs[ys]=null,ea=vs[--ys],vs[ys]=null,Jo=vs[--ys],vs[ys]=null}var Xr=null,Wr=null,yn=!1,Hs=null;function W3(n,e){var t=xs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function K2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Xr=n,Wr=ll(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Xr=n,Wr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Hc!==null?{id:Jo,overflow:ea}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=xs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Xr=n,Wr=null,!0):!1;default:return!1}}function qS(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ZS(n){if(yn){var e=Wr;if(e){var t=e;if(!K2(n,e)){if(qS(n))throw Error(Ce(418));e=ll(t.nextSibling);var i=Xr;e&&K2(n,e)?W3(i,t):(n.flags=n.flags&-4097|2,yn=!1,Xr=n)}}else{if(qS(n))throw Error(Ce(418));n.flags=n.flags&-4097|2,yn=!1,Xr=n}}}function q2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Xr=n}function Ag(n){if(n!==Xr)return!1;if(!yn)return q2(n),yn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!jS(n.type,n.memoizedProps)),e&&(e=Wr)){if(qS(n))throw $3(),Error(Ce(418));for(;e;)W3(n,e),e=ll(e.nextSibling)}if(q2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ce(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Wr=ll(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Wr=null}}else Wr=Xr?ll(n.stateNode.nextSibling):null;return!0}function $3(){for(var n=Wr;n;)n=ll(n.nextSibling)}function Vf(){Wr=Xr=null,yn=!1}function bT(n){Hs===null?Hs=[n]:Hs.push(n)}var P5=xa.ReactCurrentBatchConfig;function Us(n,e){if(n&&n.defaultProps){e=Dn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Ev=Ll(null),Tv=null,pf=null,AT=null;function CT(){AT=pf=Tv=null}function RT(n){var e=Ev.current;mn(Ev),n._currentValue=e}function QS(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Rf(n,e){Tv=n,AT=pf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(_r=!0),n.firstContext=null)}function bs(n){var e=n._currentValue;if(AT!==n)if(n={context:n,memoizedValue:e,next:null},pf===null){if(Tv===null)throw Error(Ce(308));pf=n,Tv.dependencies={lanes:0,firstContext:n}}else pf=pf.next=n;return e}var yc=null;function PT(n){yc===null?yc=[n]:yc.push(n)}function j3(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,PT(e)):(t.next=r.next,r.next=t),e.interleaved=t,ca(n,i)}function ca(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ja=!1;function IT(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X3(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ra(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function cl(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Wt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ca(n,t)}return r=i.interleaved,r===null?(e.next=e,PT(i)):(e.next=r.next,r.next=e),i.interleaved=e,ca(n,t)}function G0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,gT(n,t)}}function Z2(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Mv(n,e,t,i){var r=n.updateQueue;ja=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,_=a;switch(p=e,m=t,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=Dn({},f,p);break e;case 2:ja=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Gc|=o,n.lanes=o,n.memoizedState=f}}function Q2(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ce(191,r));r.call(i)}}}var Y3=new jL.Component().refs;function JS(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Dn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var wy={isMounted:function(n){return(n=n._reactInternals)?iu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=lr(),r=fl(n),s=ra(i,r);s.payload=e,t!=null&&(s.callback=t),e=cl(n,s,r),e!==null&&(Ws(e,n,r,i),G0(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=lr(),r=fl(n),s=ra(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=cl(n,s,r),e!==null&&(Ws(e,n,r,i),G0(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=lr(),i=fl(n),r=ra(t,i);r.tag=2,e!=null&&(r.callback=e),e=cl(n,r,i),e!==null&&(Ws(e,n,i,t),G0(e,n,i))}};function J2(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!lp(t,i)||!lp(r,s):!0}function K3(n,e,t){var i=!1,r=xl,s=e.contextType;return typeof s=="object"&&s!==null?s=bs(s):(r=wr(e)?Bc:ji.current,i=e.contextTypes,s=(i=i!=null)?Hf(n,r):xl),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wy,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function eC(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&wy.enqueueReplaceState(e,e.state,null)}function ew(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=Y3,IT(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=bs(s):(s=wr(e)?Bc:ji.current,r.context=Hf(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(JS(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&wy.enqueueReplaceState(r,r.state,null),Mv(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function rh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ce(309));var i=t.stateNode}if(!i)throw Error(Ce(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===Y3&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ce(284));if(!t._owner)throw Error(Ce(290,n))}return n}function Cg(n,e){throw n=Object.prototype.toString.call(e),Error(Ce(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function tC(n){var e=n._init;return e(n._payload)}function q3(n){function e(g,x){if(n){var S=g.deletions;S===null?(g.deletions=[x],g.flags|=16):S.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function i(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=dl(g,x),g.index=0,g.sibling=null,g}function s(g,x,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<x?(g.flags|=2,x):S):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,S,E){return x===null||x.tag!==6?(x=qx(S,g.mode,E),x.return=g,x):(x=r(x,S),x.return=g,x)}function l(g,x,S,E){var b=S.type;return b===of?u(g,x,S.props.children,E,S.key):x!==null&&(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$a&&tC(b)===x.type)?(E=r(x,S.props),E.ref=rh(g,x,S),E.return=g,E):(E=K0(S.type,S.key,S.props,null,g.mode,E),E.ref=rh(g,x,S),E.return=g,E)}function c(g,x,S,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Zx(S,g.mode,E),x.return=g,x):(x=r(x,S.children||[]),x.return=g,x)}function u(g,x,S,E,b){return x===null||x.tag!==7?(x=Ac(S,g.mode,E,b),x.return=g,x):(x=r(x,S),x.return=g,x)}function f(g,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=qx(""+x,g.mode,S),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vg:return S=K0(x.type,x.key,x.props,null,g.mode,S),S.ref=rh(g,null,x),S.return=g,S;case sf:return x=Zx(x,g.mode,S),x.return=g,x;case $a:var E=x._init;return f(g,E(x._payload),S)}if(Ch(x)||Jd(x))return x=Ac(x,g.mode,S,null),x.return=g,x;Cg(g,x)}return null}function p(g,x,S,E){var b=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return b!==null?null:a(g,x,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case vg:return S.key===b?l(g,x,S,E):null;case sf:return S.key===b?c(g,x,S,E):null;case $a:return b=S._init,p(g,x,b(S._payload),E)}if(Ch(S)||Jd(S))return b!==null?null:u(g,x,S,E,null);Cg(g,S)}return null}function m(g,x,S,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,a(x,g,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case vg:return g=g.get(E.key===null?S:E.key)||null,l(x,g,E,b);case sf:return g=g.get(E.key===null?S:E.key)||null,c(x,g,E,b);case $a:var A=E._init;return m(g,x,S,A(E._payload),b)}if(Ch(E)||Jd(E))return g=g.get(S)||null,u(x,g,E,b,null);Cg(x,E)}return null}function v(g,x,S,E){for(var b=null,A=null,R=x,D=x=0,O=null;R!==null&&D<S.length;D++){R.index>D?(O=R,R=null):O=R.sibling;var M=p(g,R,S[D],E);if(M===null){R===null&&(R=O);break}n&&R&&M.alternate===null&&e(g,R),x=s(M,x,D),A===null?b=M:A.sibling=M,A=M,R=O}if(D===S.length)return t(g,R),yn&&lc(g,D),b;if(R===null){for(;D<S.length;D++)R=f(g,S[D],E),R!==null&&(x=s(R,x,D),A===null?b=R:A.sibling=R,A=R);return yn&&lc(g,D),b}for(R=i(g,R);D<S.length;D++)O=m(R,g,D,S[D],E),O!==null&&(n&&O.alternate!==null&&R.delete(O.key===null?D:O.key),x=s(O,x,D),A===null?b=O:A.sibling=O,A=O);return n&&R.forEach(function(I){return e(g,I)}),yn&&lc(g,D),b}function _(g,x,S,E){var b=Jd(S);if(typeof b!="function")throw Error(Ce(150));if(S=b.call(S),S==null)throw Error(Ce(151));for(var A=b=null,R=x,D=x=0,O=null,M=S.next();R!==null&&!M.done;D++,M=S.next()){R.index>D?(O=R,R=null):O=R.sibling;var I=p(g,R,M.value,E);if(I===null){R===null&&(R=O);break}n&&R&&I.alternate===null&&e(g,R),x=s(I,x,D),A===null?b=I:A.sibling=I,A=I,R=O}if(M.done)return t(g,R),yn&&lc(g,D),b;if(R===null){for(;!M.done;D++,M=S.next())M=f(g,M.value,E),M!==null&&(x=s(M,x,D),A===null?b=M:A.sibling=M,A=M);return yn&&lc(g,D),b}for(R=i(g,R);!M.done;D++,M=S.next())M=m(R,g,D,M.value,E),M!==null&&(n&&M.alternate!==null&&R.delete(M.key===null?D:M.key),x=s(M,x,D),A===null?b=M:A.sibling=M,A=M);return n&&R.forEach(function(U){return e(g,U)}),yn&&lc(g,D),b}function y(g,x,S,E){if(typeof S=="object"&&S!==null&&S.type===of&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case vg:e:{for(var b=S.key,A=x;A!==null;){if(A.key===b){if(b=S.type,b===of){if(A.tag===7){t(g,A.sibling),x=r(A,S.props.children),x.return=g,g=x;break e}}else if(A.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$a&&tC(b)===A.type){t(g,A.sibling),x=r(A,S.props),x.ref=rh(g,A,S),x.return=g,g=x;break e}t(g,A);break}else e(g,A);A=A.sibling}S.type===of?(x=Ac(S.props.children,g.mode,E,S.key),x.return=g,g=x):(E=K0(S.type,S.key,S.props,null,g.mode,E),E.ref=rh(g,x,S),E.return=g,g=E)}return o(g);case sf:e:{for(A=S.key;x!==null;){if(x.key===A)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){t(g,x.sibling),x=r(x,S.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=Zx(S,g.mode,E),x.return=g,g=x}return o(g);case $a:return A=S._init,y(g,x,A(S._payload),E)}if(Ch(S))return v(g,x,S,E);if(Jd(S))return _(g,x,S,E);Cg(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(t(g,x.sibling),x=r(x,S),x.return=g,g=x):(t(g,x),x=qx(S,g.mode,E),x.return=g,g=x),o(g)):t(g,x)}return y}var Gf=q3(!0),Z3=q3(!1),Qp={},wo=Ll(Qp),dp=Ll(Qp),hp=Ll(Qp);function _c(n){if(n===Qp)throw Error(Ce(174));return n}function LT(n,e){switch(un(hp,e),un(dp,n),un(wo,Qp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:LS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=LS(e,n)}mn(wo),un(wo,e)}function Wf(){mn(wo),mn(dp),mn(hp)}function Q3(n){_c(hp.current);var e=_c(wo.current),t=LS(e,n.type);e!==t&&(un(dp,n),un(wo,t))}function DT(n){dp.current===n&&(mn(wo),mn(dp))}var bn=Ll(0);function bv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wx=[];function OT(){for(var n=0;n<Wx.length;n++)Wx[n]._workInProgressVersionPrimary=null;Wx.length=0}var W0=xa.ReactCurrentDispatcher,$x=xa.ReactCurrentBatchConfig,Vc=0,Ln=null,si=null,gi=null,Av=!1,Bh=!1,pp=0,I5=0;function Ni(){throw Error(Ce(321))}function NT(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!js(n[t],e[t]))return!1;return!0}function kT(n,e,t,i,r,s){if(Vc=s,Ln=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,W0.current=n===null||n.memoizedState===null?N5:k5,n=t(i,r),Bh){s=0;do{if(Bh=!1,pp=0,25<=s)throw Error(Ce(301));s+=1,gi=si=null,e.updateQueue=null,W0.current=U5,n=t(i,r)}while(Bh)}if(W0.current=Cv,e=si!==null&&si.next!==null,Vc=0,gi=si=Ln=null,Av=!1,e)throw Error(Ce(300));return n}function UT(){var n=pp!==0;return pp=0,n}function ho(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?Ln.memoizedState=gi=n:gi=gi.next=n,gi}function As(){if(si===null){var n=Ln.alternate;n=n!==null?n.memoizedState:null}else n=si.next;var e=gi===null?Ln.memoizedState:gi.next;if(e!==null)gi=e,si=n;else{if(n===null)throw Error(Ce(310));si=n,n={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},gi===null?Ln.memoizedState=gi=n:gi=gi.next=n}return gi}function mp(n,e){return typeof e=="function"?e(n):e}function jx(n){var e=As(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var i=si,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Vc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Ln.lanes|=u,Gc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,js(i,e.memoizedState)||(_r=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Ln.lanes|=s,Gc|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Xx(n){var e=As(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);js(s,e.memoizedState)||(_r=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function J3(){}function eD(n,e){var t=Ln,i=As(),r=e(),s=!js(i.memoizedState,r);if(s&&(i.memoizedState=r,_r=!0),i=i.queue,FT(iD.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||gi!==null&&gi.memoizedState.tag&1){if(t.flags|=2048,gp(9,nD.bind(null,t,i,r,e),void 0,null),_i===null)throw Error(Ce(349));Vc&30||tD(t,e,r)}return r}function tD(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ln.updateQueue,e===null?(e={lastEffect:null,stores:null},Ln.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function nD(n,e,t,i){e.value=t,e.getSnapshot=i,rD(e)&&sD(n)}function iD(n,e,t){return t(function(){rD(e)&&sD(n)})}function rD(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!js(n,t)}catch{return!0}}function sD(n){var e=ca(n,1);e!==null&&Ws(e,n,1,-1)}function nC(n){var e=ho();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mp,lastRenderedState:n},e.queue=n,n=n.dispatch=O5.bind(null,Ln,n),[e.memoizedState,n]}function gp(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Ln.updateQueue,e===null?(e={lastEffect:null,stores:null},Ln.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function oD(){return As().memoizedState}function $0(n,e,t,i){var r=ho();Ln.flags|=n,r.memoizedState=gp(1|e,t,void 0,i===void 0?null:i)}function Ey(n,e,t,i){var r=As();i=i===void 0?null:i;var s=void 0;if(si!==null){var o=si.memoizedState;if(s=o.destroy,i!==null&&NT(i,o.deps)){r.memoizedState=gp(e,t,s,i);return}}Ln.flags|=n,r.memoizedState=gp(1|e,t,s,i)}function iC(n,e){return $0(8390656,8,n,e)}function FT(n,e){return Ey(2048,8,n,e)}function aD(n,e){return Ey(4,2,n,e)}function lD(n,e){return Ey(4,4,n,e)}function cD(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function uD(n,e,t){return t=t!=null?t.concat([n]):null,Ey(4,4,cD.bind(null,e,n),t)}function zT(){}function fD(n,e){var t=As();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&NT(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function dD(n,e){var t=As();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&NT(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function hD(n,e,t){return Vc&21?(js(t,e)||(t=g3(),Ln.lanes|=t,Gc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,_r=!0),n.memoizedState=t)}function L5(n,e){var t=Qt;Qt=t!==0&&4>t?t:4,n(!0);var i=$x.transition;$x.transition={};try{n(!1),e()}finally{Qt=t,$x.transition=i}}function pD(){return As().memoizedState}function D5(n,e,t){var i=fl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},mD(n))gD(e,t);else if(t=j3(n,e,t,i),t!==null){var r=lr();Ws(t,n,i,r),vD(t,e,i)}}function O5(n,e,t){var i=fl(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(mD(n))gD(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,js(a,o)){var l=e.interleaved;l===null?(r.next=r,PT(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=j3(n,e,r,i),t!==null&&(r=lr(),Ws(t,n,i,r),vD(t,e,i))}}function mD(n){var e=n.alternate;return n===Ln||e!==null&&e===Ln}function gD(n,e){Bh=Av=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function vD(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,gT(n,t)}}var Cv={readContext:bs,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},N5={readContext:bs,useCallback:function(n,e){return ho().memoizedState=[n,e===void 0?null:e],n},useContext:bs,useEffect:iC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,$0(4194308,4,cD.bind(null,e,n),t)},useLayoutEffect:function(n,e){return $0(4194308,4,n,e)},useInsertionEffect:function(n,e){return $0(4,2,n,e)},useMemo:function(n,e){var t=ho();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=ho();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=D5.bind(null,Ln,n),[i.memoizedState,n]},useRef:function(n){var e=ho();return n={current:n},e.memoizedState=n},useState:nC,useDebugValue:zT,useDeferredValue:function(n){return ho().memoizedState=n},useTransition:function(){var n=nC(!1),e=n[0];return n=L5.bind(null,n[1]),ho().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Ln,r=ho();if(yn){if(t===void 0)throw Error(Ce(407));t=t()}else{if(t=e(),_i===null)throw Error(Ce(349));Vc&30||tD(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,iC(iD.bind(null,i,s,n),[n]),i.flags|=2048,gp(9,nD.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=ho(),e=_i.identifierPrefix;if(yn){var t=ea,i=Jo;t=(i&~(1<<32-Gs(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=pp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=I5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},k5={readContext:bs,useCallback:fD,useContext:bs,useEffect:FT,useImperativeHandle:uD,useInsertionEffect:aD,useLayoutEffect:lD,useMemo:dD,useReducer:jx,useRef:oD,useState:function(){return jx(mp)},useDebugValue:zT,useDeferredValue:function(n){var e=As();return hD(e,si.memoizedState,n)},useTransition:function(){var n=jx(mp)[0],e=As().memoizedState;return[n,e]},useMutableSource:J3,useSyncExternalStore:eD,useId:pD,unstable_isNewReconciler:!1},U5={readContext:bs,useCallback:fD,useContext:bs,useEffect:FT,useImperativeHandle:uD,useInsertionEffect:aD,useLayoutEffect:lD,useMemo:dD,useReducer:Xx,useRef:oD,useState:function(){return Xx(mp)},useDebugValue:zT,useDeferredValue:function(n){var e=As();return si===null?e.memoizedState=n:hD(e,si.memoizedState,n)},useTransition:function(){var n=Xx(mp)[0],e=As().memoizedState;return[n,e]},useMutableSource:J3,useSyncExternalStore:eD,useId:pD,unstable_isNewReconciler:!1};function $f(n,e){try{var t="",i=e;do t+=f4(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Yx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function tw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var F5=typeof WeakMap=="function"?WeakMap:Map;function yD(n,e,t){t=ra(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Pv||(Pv=!0,fw=i),tw(n,e)},t}function _D(n,e,t){t=ra(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){tw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){tw(n,e),typeof i!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function rC(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new F5;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=Q5.bind(null,n,e,t),e.then(n,n))}function sC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function oC(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ra(-1,1),e.tag=2,cl(t,e,1))),t.lanes|=1),n)}var z5=xa.ReactCurrentOwner,_r=!1;function er(n,e,t,i){e.child=n===null?Z3(e,null,t,i):Gf(e,n.child,t,i)}function aC(n,e,t,i,r){t=t.render;var s=e.ref;return Rf(e,r),i=kT(n,e,t,i,s,r),t=UT(),n!==null&&!_r?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ua(n,e,r)):(yn&&t&&TT(e),e.flags|=1,er(n,e,i,r),e.child)}function lC(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!XT(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,xD(n,e,s,i,r)):(n=K0(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:lp,t(o,i)&&n.ref===e.ref)return ua(n,e,r)}return e.flags|=1,n=dl(s,i),n.ref=e.ref,n.return=e,e.child=n}function xD(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(lp(s,i)&&n.ref===e.ref)if(_r=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(_r=!0);else return e.lanes=n.lanes,ua(n,e,r)}return nw(n,e,t,i,r)}function SD(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(gf,Ur),Ur|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,un(gf,Ur),Ur|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,un(gf,Ur),Ur|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,un(gf,Ur),Ur|=i;return er(n,e,r,t),e.child}function wD(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function nw(n,e,t,i,r){var s=wr(t)?Bc:ji.current;return s=Hf(e,s),Rf(e,r),t=kT(n,e,t,i,s,r),i=UT(),n!==null&&!_r?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ua(n,e,r)):(yn&&i&&TT(e),e.flags|=1,er(n,e,t,r),e.child)}function cC(n,e,t,i,r){if(wr(t)){var s=!0;xv(e)}else s=!1;if(Rf(e,r),e.stateNode===null)j0(n,e),K3(e,t,i),ew(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=bs(c):(c=wr(t)?Bc:ji.current,c=Hf(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&eC(e,o,i,c),ja=!1;var p=e.memoizedState;o.state=p,Mv(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Sr.current||ja?(typeof u=="function"&&(JS(e,t,u,i),l=e.memoizedState),(a=ja||J2(e,t,a,i,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,X3(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Us(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=bs(l):(l=wr(t)?Bc:ji.current,l=Hf(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&eC(e,o,i,l),ja=!1,p=e.memoizedState,o.state=p,Mv(e,i,o,r);var v=e.memoizedState;a!==f||p!==v||Sr.current||ja?(typeof m=="function"&&(JS(e,t,m,i),v=e.memoizedState),(c=ja||J2(e,t,c,i,p,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return iw(n,e,t,i,s,r)}function iw(n,e,t,i,r,s){wD(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Y2(e,t,!1),ua(n,e,s);i=e.stateNode,z5.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Gf(e,n.child,null,s),e.child=Gf(e,null,a,s)):er(n,e,a,s),e.memoizedState=i.state,r&&Y2(e,t,!0),e.child}function ED(n){var e=n.stateNode;e.pendingContext?X2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&X2(n,e.context,!1),LT(n,e.containerInfo)}function uC(n,e,t,i,r){return Vf(),bT(r),e.flags|=256,er(n,e,t,i),e.child}var rw={dehydrated:null,treeContext:null,retryLane:0};function sw(n){return{baseLanes:n,cachePool:null,transitions:null}}function TD(n,e,t){var i=e.pendingProps,r=bn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),un(bn,r&1),n===null)return ZS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=by(o,i,0,null),n=Ac(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=sw(t),e.memoizedState=rw,n):BT(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return B5(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=dl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=dl(a,s):(s=Ac(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?sw(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=rw,i}return s=n.child,n=s.sibling,i=dl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function BT(n,e){return e=by({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Rg(n,e,t,i){return i!==null&&bT(i),Gf(e,n.child,null,t),n=BT(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function B5(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Yx(Error(Ce(422))),Rg(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=by({mode:"visible",children:i.children},r,0,null),s=Ac(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Gf(e,n.child,null,o),e.child.memoizedState=sw(o),e.memoizedState=rw,s);if(!(e.mode&1))return Rg(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ce(419)),i=Yx(s,i,void 0),Rg(n,e,o,i)}if(a=(o&n.childLanes)!==0,_r||a){if(i=_i,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ca(n,r),Ws(i,n,r,-1))}return jT(),i=Yx(Error(Ce(421))),Rg(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=J5.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Wr=ll(r.nextSibling),Xr=e,yn=!0,Hs=null,n!==null&&(vs[ys++]=Jo,vs[ys++]=ea,vs[ys++]=Hc,Jo=n.id,ea=n.overflow,Hc=e),e=BT(e,i.children),e.flags|=4096,e)}function fC(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),QS(n.return,e,t)}function Kx(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function MD(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(er(n,e,i.children,t),i=bn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fC(n,t,e);else if(n.tag===19)fC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(un(bn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&bv(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Kx(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&bv(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Kx(e,!0,t,null,s);break;case"together":Kx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function j0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ua(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Gc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ce(153));if(e.child!==null){for(n=e.child,t=dl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=dl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function H5(n,e,t){switch(e.tag){case 3:ED(e),Vf();break;case 5:Q3(e);break;case 1:wr(e.type)&&xv(e);break;case 4:LT(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;un(Ev,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(un(bn,bn.current&1),e.flags|=128,null):t&e.child.childLanes?TD(n,e,t):(un(bn,bn.current&1),n=ua(n,e,t),n!==null?n.sibling:null);un(bn,bn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return MD(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),un(bn,bn.current),i)break;return null;case 22:case 23:return e.lanes=0,SD(n,e,t)}return ua(n,e,t)}var bD,ow,AD,CD;bD=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};ow=function(){};AD=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,_c(wo.current);var s=null;switch(t){case"input":r=CS(n,r),i=CS(n,i),s=[];break;case"select":r=Dn({},r,{value:void 0}),i=Dn({},i,{value:void 0}),s=[];break;case"textarea":r=IS(n,r),i=IS(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=yv)}DS(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tp.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&hn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};CD=function(n,e,t,i){t!==i&&(e.flags|=4)};function sh(n,e){if(!yn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ki(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function V5(n,e,t){var i=e.pendingProps;switch(MT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ki(e),null;case 1:return wr(e.type)&&_v(),ki(e),null;case 3:return i=e.stateNode,Wf(),mn(Sr),mn(ji),OT(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Ag(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hs!==null&&(pw(Hs),Hs=null))),ow(n,e),ki(e),null;case 5:DT(e);var r=_c(hp.current);if(t=e.type,n!==null&&e.stateNode!=null)AD(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ce(166));return ki(e),null}if(n=_c(wo.current),Ag(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[mo]=e,i[fp]=s,n=(e.mode&1)!==0,t){case"dialog":hn("cancel",i),hn("close",i);break;case"iframe":case"object":case"embed":hn("load",i);break;case"video":case"audio":for(r=0;r<Ph.length;r++)hn(Ph[r],i);break;case"source":hn("error",i);break;case"img":case"image":case"link":hn("error",i),hn("load",i);break;case"details":hn("toggle",i);break;case"input":x2(i,s),hn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},hn("invalid",i);break;case"textarea":w2(i,s),hn("invalid",i)}DS(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&bg(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bg(i.textContent,a,n),r=["children",""+a]):tp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&hn("scroll",i)}switch(t){case"input":yg(i),S2(i,s,!0);break;case"textarea":yg(i),E2(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=yv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=t3(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[mo]=e,n[fp]=i,bD(n,e,!1,!1),e.stateNode=n;e:{switch(o=OS(t,i),t){case"dialog":hn("cancel",n),hn("close",n),r=i;break;case"iframe":case"object":case"embed":hn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Ph.length;r++)hn(Ph[r],n);r=i;break;case"source":hn("error",n),r=i;break;case"img":case"image":case"link":hn("error",n),hn("load",n),r=i;break;case"details":hn("toggle",n),r=i;break;case"input":x2(n,i),r=CS(n,i),hn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Dn({},i,{value:void 0}),hn("invalid",n);break;case"textarea":w2(n,i),r=IS(n,i),hn("invalid",n);break;default:r=i}DS(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?r3(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&n3(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&np(n,l):typeof l=="number"&&np(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&hn("scroll",n):l!=null&&uT(n,s,l,o))}switch(t){case"input":yg(n),S2(n,i,!1);break;case"textarea":yg(n),E2(n);break;case"option":i.value!=null&&n.setAttribute("value",""+_l(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Mf(n,!!i.multiple,s,!1):i.defaultValue!=null&&Mf(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=yv)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ki(e),null;case 6:if(n&&e.stateNode!=null)CD(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ce(166));if(t=_c(hp.current),_c(wo.current),Ag(e)){if(i=e.stateNode,t=e.memoizedProps,i[mo]=e,(s=i.nodeValue!==t)&&(n=Xr,n!==null))switch(n.tag){case 3:bg(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&bg(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[mo]=e,e.stateNode=i}return ki(e),null;case 13:if(mn(bn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yn&&Wr!==null&&e.mode&1&&!(e.flags&128))$3(),Vf(),e.flags|=98560,s=!1;else if(s=Ag(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[mo]=e}else Vf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ki(e),s=!1}else Hs!==null&&(pw(Hs),Hs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||bn.current&1?oi===0&&(oi=3):jT())),e.updateQueue!==null&&(e.flags|=4),ki(e),null);case 4:return Wf(),ow(n,e),n===null&&cp(e.stateNode.containerInfo),ki(e),null;case 10:return RT(e.type._context),ki(e),null;case 17:return wr(e.type)&&_v(),ki(e),null;case 19:if(mn(bn),s=e.memoizedState,s===null)return ki(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)sh(s,!1);else{if(oi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=bv(n),o!==null){for(e.flags|=128,sh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return un(bn,bn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Xn()>jf&&(e.flags|=128,i=!0,sh(s,!1),e.lanes=4194304)}else{if(!i)if(n=bv(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),sh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!yn)return ki(e),null}else 2*Xn()-s.renderingStartTime>jf&&t!==1073741824&&(e.flags|=128,i=!0,sh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xn(),e.sibling=null,t=bn.current,un(bn,i?t&1|2:t&1),e):(ki(e),null);case 22:case 23:return $T(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ur&1073741824&&(ki(e),e.subtreeFlags&6&&(e.flags|=8192)):ki(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function G5(n,e){switch(MT(e),e.tag){case 1:return wr(e.type)&&_v(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Wf(),mn(Sr),mn(ji),OT(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return DT(e),null;case 13:if(mn(bn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));Vf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return mn(bn),null;case 4:return Wf(),null;case 10:return RT(e.type._context),null;case 22:case 23:return $T(),null;case 24:return null;default:return null}}var Pg=!1,Bi=!1,W5=typeof WeakSet=="function"?WeakSet:Set,je=null;function mf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Un(n,e,i)}else t.current=null}function aw(n,e,t){try{t()}catch(i){Un(n,e,i)}}var dC=!1;function $5(n,e){if(WS=mv,n=L3(),ET(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++u===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for($S={focusedElem:n,selectionRange:t},mv=!1,je=e;je!==null;)if(e=je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,je=n;else for(;je!==null;){e=je;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,y=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:Us(e.type,_),y);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(E){Un(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}return v=dC,dC=!1,v}function Hh(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&aw(e,t,s)}r=r.next}while(r!==i)}}function Ty(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function lw(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function RD(n){var e=n.alternate;e!==null&&(n.alternate=null,RD(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[mo],delete e[fp],delete e[YS],delete e[A5],delete e[C5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function PD(n){return n.tag===5||n.tag===3||n.tag===4}function hC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||PD(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function cw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=yv));else if(i!==4&&(n=n.child,n!==null))for(cw(n,e,t),n=n.sibling;n!==null;)cw(n,e,t),n=n.sibling}function uw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(uw(n,e,t),n=n.sibling;n!==null;)uw(n,e,t),n=n.sibling}var bi=null,Bs=!1;function La(n,e,t){for(t=t.child;t!==null;)ID(n,e,t),t=t.sibling}function ID(n,e,t){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(gy,t)}catch{}switch(t.tag){case 5:Bi||mf(t,e);case 6:var i=bi,r=Bs;bi=null,La(n,e,t),bi=i,Bs=r,bi!==null&&(Bs?(n=bi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):bi.removeChild(t.stateNode));break;case 18:bi!==null&&(Bs?(n=bi,t=t.stateNode,n.nodeType===8?Vx(n.parentNode,t):n.nodeType===1&&Vx(n,t),op(n)):Vx(bi,t.stateNode));break;case 4:i=bi,r=Bs,bi=t.stateNode.containerInfo,Bs=!0,La(n,e,t),bi=i,Bs=r;break;case 0:case 11:case 14:case 15:if(!Bi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&aw(t,e,o),r=r.next}while(r!==i)}La(n,e,t);break;case 1:if(!Bi&&(mf(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Un(t,e,a)}La(n,e,t);break;case 21:La(n,e,t);break;case 22:t.mode&1?(Bi=(i=Bi)||t.memoizedState!==null,La(n,e,t),Bi=i):La(n,e,t);break;default:La(n,e,t)}}function pC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new W5),e.forEach(function(i){var r=eH.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Ds(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bi=a.stateNode,Bs=!1;break e;case 3:bi=a.stateNode.containerInfo,Bs=!0;break e;case 4:bi=a.stateNode.containerInfo,Bs=!0;break e}a=a.return}if(bi===null)throw Error(Ce(160));ID(s,o,r),bi=null,Bs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Un(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LD(e,n),e=e.sibling}function LD(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ds(e,n),co(n),i&4){try{Hh(3,n,n.return),Ty(3,n)}catch(_){Un(n,n.return,_)}try{Hh(5,n,n.return)}catch(_){Un(n,n.return,_)}}break;case 1:Ds(e,n),co(n),i&512&&t!==null&&mf(t,t.return);break;case 5:if(Ds(e,n),co(n),i&512&&t!==null&&mf(t,t.return),n.flags&32){var r=n.stateNode;try{np(r,"")}catch(_){Un(n,n.return,_)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&JL(r,s),OS(a,o);var c=OS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?r3(r,f):u==="dangerouslySetInnerHTML"?n3(r,f):u==="children"?np(r,f):uT(r,u,f,c)}switch(a){case"input":RS(r,s);break;case"textarea":e3(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Mf(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Mf(r,!!s.multiple,s.defaultValue,!0):Mf(r,!!s.multiple,s.multiple?[]:"",!1))}r[fp]=s}catch(_){Un(n,n.return,_)}}break;case 6:if(Ds(e,n),co(n),i&4){if(n.stateNode===null)throw Error(Ce(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(_){Un(n,n.return,_)}}break;case 3:if(Ds(e,n),co(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{op(e.containerInfo)}catch(_){Un(n,n.return,_)}break;case 4:Ds(e,n),co(n);break;case 13:Ds(e,n),co(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(GT=Xn())),i&4&&pC(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Bi=(c=Bi)||u,Ds(e,n),Bi=c):Ds(e,n),co(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(je=n,u=n.child;u!==null;){for(f=je=u;je!==null;){switch(p=je,m=p.child,p.tag){case 0:case 11:case 14:case 15:Hh(4,p,p.return);break;case 1:mf(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Un(i,t,_)}}break;case 5:mf(p,p.return);break;case 22:if(p.memoizedState!==null){gC(f);continue}}m!==null?(m.return=p,je=m):gC(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=i3("display",o))}catch(_){Un(n,n.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){Un(n,n.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ds(e,n),co(n),i&4&&pC(n);break;case 21:break;default:Ds(e,n),co(n)}}function co(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(PD(t)){var i=t;break e}t=t.return}throw Error(Ce(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(np(r,""),i.flags&=-33);var s=hC(n);uw(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=hC(n);cw(n,a,o);break;default:throw Error(Ce(161))}}catch(l){Un(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function j5(n,e,t){je=n,DD(n)}function DD(n,e,t){for(var i=(n.mode&1)!==0;je!==null;){var r=je,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Pg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Bi;a=Pg;var c=Bi;if(Pg=o,(Bi=l)&&!c)for(je=r;je!==null;)o=je,l=o.child,o.tag===22&&o.memoizedState!==null?vC(r):l!==null?(l.return=o,je=l):vC(r);for(;s!==null;)je=s,DD(s),s=s.sibling;je=r,Pg=a,Bi=c}mC(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,je=s):mC(n)}}function mC(n){for(;je!==null;){var e=je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bi||Ty(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Bi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Us(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Q2(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Q2(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&op(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}Bi||e.flags&512&&lw(e)}catch(p){Un(e,e.return,p)}}if(e===n){je=null;break}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}}function gC(n){for(;je!==null;){var e=je;if(e===n){je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,je=t;break}je=e.return}}function vC(n){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ty(4,e)}catch(l){Un(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Un(e,r,l)}}var s=e.return;try{lw(e)}catch(l){Un(e,s,l)}break;case 5:var o=e.return;try{lw(e)}catch(l){Un(e,o,l)}}}catch(l){Un(e,e.return,l)}if(e===n){je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,je=a;break}je=e.return}}var X5=Math.ceil,Rv=xa.ReactCurrentDispatcher,HT=xa.ReactCurrentOwner,Ms=xa.ReactCurrentBatchConfig,Wt=0,_i=null,ti=null,Ci=0,Ur=0,gf=Ll(0),oi=0,vp=null,Gc=0,My=0,VT=0,Vh=null,yr=null,GT=0,jf=1/0,$o=null,Pv=!1,fw=null,ul=null,Ig=!1,Ja=null,Iv=0,Gh=0,dw=null,X0=-1,Y0=0;function lr(){return Wt&6?Xn():X0!==-1?X0:X0=Xn()}function fl(n){return n.mode&1?Wt&2&&Ci!==0?Ci&-Ci:P5.transition!==null?(Y0===0&&(Y0=g3()),Y0):(n=Qt,n!==0||(n=window.event,n=n===void 0?16:E3(n.type)),n):1}function Ws(n,e,t,i){if(50<Gh)throw Gh=0,dw=null,Error(Ce(185));Kp(n,t,i),(!(Wt&2)||n!==_i)&&(n===_i&&(!(Wt&2)&&(My|=t),oi===4&&Ka(n,Ci)),Er(n,i),t===1&&Wt===0&&!(e.mode&1)&&(jf=Xn()+500,Sy&&Dl()))}function Er(n,e){var t=n.callbackNode;P4(n,e);var i=pv(n,n===_i?Ci:0);if(i===0)t!==null&&b2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&b2(t),e===1)n.tag===0?R5(yC.bind(null,n)):V3(yC.bind(null,n)),M5(function(){!(Wt&6)&&Dl()}),t=null;else{switch(v3(i)){case 1:t=mT;break;case 4:t=p3;break;case 16:t=hv;break;case 536870912:t=m3;break;default:t=hv}t=HD(t,OD.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function OD(n,e){if(X0=-1,Y0=0,Wt&6)throw Error(Ce(327));var t=n.callbackNode;if(Pf()&&n.callbackNode!==t)return null;var i=pv(n,n===_i?Ci:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Lv(n,i);else{e=i;var r=Wt;Wt|=2;var s=kD();(_i!==n||Ci!==e)&&($o=null,jf=Xn()+500,bc(n,e));do try{q5();break}catch(a){ND(n,a)}while(!0);CT(),Rv.current=s,Wt=r,ti!==null?e=0:(_i=null,Ci=0,e=oi)}if(e!==0){if(e===2&&(r=zS(n),r!==0&&(i=r,e=hw(n,r))),e===1)throw t=vp,bc(n,0),Ka(n,i),Er(n,Xn()),t;if(e===6)Ka(n,i);else{if(r=n.current.alternate,!(i&30)&&!Y5(r)&&(e=Lv(n,i),e===2&&(s=zS(n),s!==0&&(i=s,e=hw(n,s))),e===1))throw t=vp,bc(n,0),Ka(n,i),Er(n,Xn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ce(345));case 2:cc(n,yr,$o);break;case 3:if(Ka(n,i),(i&130023424)===i&&(e=GT+500-Xn(),10<e)){if(pv(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){lr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=XS(cc.bind(null,n,yr,$o),e);break}cc(n,yr,$o);break;case 4:if(Ka(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Gs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Xn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*X5(i/1960))-i,10<i){n.timeoutHandle=XS(cc.bind(null,n,yr,$o),i);break}cc(n,yr,$o);break;case 5:cc(n,yr,$o);break;default:throw Error(Ce(329))}}}return Er(n,Xn()),n.callbackNode===t?OD.bind(null,n):null}function hw(n,e){var t=Vh;return n.current.memoizedState.isDehydrated&&(bc(n,e).flags|=256),n=Lv(n,e),n!==2&&(e=yr,yr=t,e!==null&&pw(e)),n}function pw(n){yr===null?yr=n:yr.push.apply(yr,n)}function Y5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!js(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ka(n,e){for(e&=~VT,e&=~My,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Gs(e),i=1<<t;n[t]=-1,e&=~i}}function yC(n){if(Wt&6)throw Error(Ce(327));Pf();var e=pv(n,0);if(!(e&1))return Er(n,Xn()),null;var t=Lv(n,e);if(n.tag!==0&&t===2){var i=zS(n);i!==0&&(e=i,t=hw(n,i))}if(t===1)throw t=vp,bc(n,0),Ka(n,e),Er(n,Xn()),t;if(t===6)throw Error(Ce(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,cc(n,yr,$o),Er(n,Xn()),null}function WT(n,e){var t=Wt;Wt|=1;try{return n(e)}finally{Wt=t,Wt===0&&(jf=Xn()+500,Sy&&Dl())}}function Wc(n){Ja!==null&&Ja.tag===0&&!(Wt&6)&&Pf();var e=Wt;Wt|=1;var t=Ms.transition,i=Qt;try{if(Ms.transition=null,Qt=1,n)return n()}finally{Qt=i,Ms.transition=t,Wt=e,!(Wt&6)&&Dl()}}function $T(){Ur=gf.current,mn(gf)}function bc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,T5(t)),ti!==null)for(t=ti.return;t!==null;){var i=t;switch(MT(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&_v();break;case 3:Wf(),mn(Sr),mn(ji),OT();break;case 5:DT(i);break;case 4:Wf();break;case 13:mn(bn);break;case 19:mn(bn);break;case 10:RT(i.type._context);break;case 22:case 23:$T()}t=t.return}if(_i=n,ti=n=dl(n.current,null),Ci=Ur=e,oi=0,vp=null,VT=My=Gc=0,yr=Vh=null,yc!==null){for(e=0;e<yc.length;e++)if(t=yc[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}yc=null}return n}function ND(n,e){do{var t=ti;try{if(CT(),W0.current=Cv,Av){for(var i=Ln.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Av=!1}if(Vc=0,gi=si=Ln=null,Bh=!1,pp=0,HT.current=null,t===null||t.return===null){oi=1,vp=e,ti=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ci,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=sC(o);if(m!==null){m.flags&=-257,oC(m,o,a,s,e),m.mode&1&&rC(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){rC(s,c,e),jT();break e}l=Error(Ce(426))}}else if(yn&&a.mode&1){var y=sC(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),oC(y,o,a,s,e),bT($f(l,a));break e}}s=l=$f(l,a),oi!==4&&(oi=2),Vh===null?Vh=[s]:Vh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=yD(s,l,e);Z2(s,g);break e;case 1:a=l;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ul===null||!ul.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=_D(s,a,e);Z2(s,E);break e}}s=s.return}while(s!==null)}FD(t)}catch(b){e=b,ti===t&&t!==null&&(ti=t=t.return);continue}break}while(!0)}function kD(){var n=Rv.current;return Rv.current=Cv,n===null?Cv:n}function jT(){(oi===0||oi===3||oi===2)&&(oi=4),_i===null||!(Gc&268435455)&&!(My&268435455)||Ka(_i,Ci)}function Lv(n,e){var t=Wt;Wt|=2;var i=kD();(_i!==n||Ci!==e)&&($o=null,bc(n,e));do try{K5();break}catch(r){ND(n,r)}while(!0);if(CT(),Wt=t,Rv.current=i,ti!==null)throw Error(Ce(261));return _i=null,Ci=0,oi}function K5(){for(;ti!==null;)UD(ti)}function q5(){for(;ti!==null&&!S4();)UD(ti)}function UD(n){var e=BD(n.alternate,n,Ur);n.memoizedProps=n.pendingProps,e===null?FD(n):ti=e,HT.current=null}function FD(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=G5(t,e),t!==null){t.flags&=32767,ti=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{oi=6,ti=null;return}}else if(t=V5(t,e,Ur),t!==null){ti=t;return}if(e=e.sibling,e!==null){ti=e;return}ti=e=n}while(e!==null);oi===0&&(oi=5)}function cc(n,e,t){var i=Qt,r=Ms.transition;try{Ms.transition=null,Qt=1,Z5(n,e,t,i)}finally{Ms.transition=r,Qt=i}return null}function Z5(n,e,t,i){do Pf();while(Ja!==null);if(Wt&6)throw Error(Ce(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ce(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(I4(n,s),n===_i&&(ti=_i=null,Ci=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ig||(Ig=!0,HD(hv,function(){return Pf(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ms.transition,Ms.transition=null;var o=Qt;Qt=1;var a=Wt;Wt|=4,HT.current=null,$5(n,t),LD(t,n),v5($S),mv=!!WS,$S=WS=null,n.current=t,j5(t),w4(),Wt=a,Qt=o,Ms.transition=s}else n.current=t;if(Ig&&(Ig=!1,Ja=n,Iv=r),s=n.pendingLanes,s===0&&(ul=null),M4(t.stateNode),Er(n,Xn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Pv)throw Pv=!1,n=fw,fw=null,n;return Iv&1&&n.tag!==0&&Pf(),s=n.pendingLanes,s&1?n===dw?Gh++:(Gh=0,dw=n):Gh=0,Dl(),null}function Pf(){if(Ja!==null){var n=v3(Iv),e=Ms.transition,t=Qt;try{if(Ms.transition=null,Qt=16>n?16:n,Ja===null)var i=!1;else{if(n=Ja,Ja=null,Iv=0,Wt&6)throw Error(Ce(331));var r=Wt;for(Wt|=4,je=n.current;je!==null;){var s=je,o=s.child;if(je.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(je=c;je!==null;){var u=je;switch(u.tag){case 0:case 11:case 15:Hh(8,u,s)}var f=u.child;if(f!==null)f.return=u,je=f;else for(;je!==null;){u=je;var p=u.sibling,m=u.return;if(RD(u),u===c){je=null;break}if(p!==null){p.return=m,je=p;break}je=m}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var y=_.sibling;_.sibling=null,_=y}while(_!==null)}}je=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,je=o;else e:for(;je!==null;){if(s=je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hh(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,je=g;break e}je=s.return}}var x=n.current;for(je=x;je!==null;){o=je;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,je=S;else e:for(o=x;je!==null;){if(a=je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ty(9,a)}}catch(b){Un(a,a.return,b)}if(a===o){je=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,je=E;break e}je=a.return}}if(Wt=r,Dl(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(gy,n)}catch{}i=!0}return i}finally{Qt=t,Ms.transition=e}}return!1}function _C(n,e,t){e=$f(t,e),e=yD(n,e,1),n=cl(n,e,1),e=lr(),n!==null&&(Kp(n,1,e),Er(n,e))}function Un(n,e,t){if(n.tag===3)_C(n,n,t);else for(;e!==null;){if(e.tag===3){_C(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ul===null||!ul.has(i))){n=$f(t,n),n=_D(e,n,1),e=cl(e,n,1),n=lr(),e!==null&&(Kp(e,1,n),Er(e,n));break}}e=e.return}}function Q5(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=lr(),n.pingedLanes|=n.suspendedLanes&t,_i===n&&(Ci&t)===t&&(oi===4||oi===3&&(Ci&130023424)===Ci&&500>Xn()-GT?bc(n,0):VT|=t),Er(n,e)}function zD(n,e){e===0&&(n.mode&1?(e=Sg,Sg<<=1,!(Sg&130023424)&&(Sg=4194304)):e=1);var t=lr();n=ca(n,e),n!==null&&(Kp(n,e,t),Er(n,t))}function J5(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),zD(n,t)}function eH(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ce(314))}i!==null&&i.delete(e),zD(n,t)}var BD;BD=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Sr.current)_r=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return _r=!1,H5(n,e,t);_r=!!(n.flags&131072)}else _r=!1,yn&&e.flags&1048576&&G3(e,wv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;j0(n,e),n=e.pendingProps;var r=Hf(e,ji.current);Rf(e,t),r=kT(null,e,i,n,r,t);var s=UT();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wr(i)?(s=!0,xv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,IT(e),r.updater=wy,e.stateNode=r,r._reactInternals=e,ew(e,i,n,t),e=iw(null,e,i,!0,s,t)):(e.tag=0,yn&&s&&TT(e),er(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(j0(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=nH(i),n=Us(i,n),r){case 0:e=nw(null,e,i,n,t);break e;case 1:e=cC(null,e,i,n,t);break e;case 11:e=aC(null,e,i,n,t);break e;case 14:e=lC(null,e,i,Us(i.type,n),t);break e}throw Error(Ce(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Us(i,r),nw(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Us(i,r),cC(n,e,i,r,t);case 3:e:{if(ED(e),n===null)throw Error(Ce(387));i=e.pendingProps,s=e.memoizedState,r=s.element,X3(n,e),Mv(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=$f(Error(Ce(423)),e),e=uC(n,e,i,t,r);break e}else if(i!==r){r=$f(Error(Ce(424)),e),e=uC(n,e,i,t,r);break e}else for(Wr=ll(e.stateNode.containerInfo.firstChild),Xr=e,yn=!0,Hs=null,t=Z3(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Vf(),i===r){e=ua(n,e,t);break e}er(n,e,i,t)}e=e.child}return e;case 5:return Q3(e),n===null&&ZS(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,jS(i,r)?o=null:s!==null&&jS(i,s)&&(e.flags|=32),wD(n,e),er(n,e,o,t),e.child;case 6:return n===null&&ZS(e),null;case 13:return TD(n,e,t);case 4:return LT(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Gf(e,null,i,t):er(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Us(i,r),aC(n,e,i,r,t);case 7:return er(n,e,e.pendingProps,t),e.child;case 8:return er(n,e,e.pendingProps.children,t),e.child;case 12:return er(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,un(Ev,i._currentValue),i._currentValue=o,s!==null)if(js(s.value,o)){if(s.children===r.children&&!Sr.current){e=ua(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ra(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),QS(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ce(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),QS(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}er(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Rf(e,t),r=bs(r),i=i(r),e.flags|=1,er(n,e,i,t),e.child;case 14:return i=e.type,r=Us(i,e.pendingProps),r=Us(i.type,r),lC(n,e,i,r,t);case 15:return xD(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Us(i,r),j0(n,e),e.tag=1,wr(i)?(n=!0,xv(e)):n=!1,Rf(e,t),K3(e,i,r),ew(e,i,r,t),iw(null,e,i,!0,n,t);case 19:return MD(n,e,t);case 22:return SD(n,e,t)}throw Error(Ce(156,e.tag))};function HD(n,e){return h3(n,e)}function tH(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(n,e,t,i){return new tH(n,e,t,i)}function XT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nH(n){if(typeof n=="function")return XT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===dT)return 11;if(n===hT)return 14}return 2}function dl(n,e){var t=n.alternate;return t===null?(t=xs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function K0(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")XT(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case of:return Ac(t.children,r,s,e);case fT:o=8,r|=8;break;case TS:return n=xs(12,t,e,r|2),n.elementType=TS,n.lanes=s,n;case MS:return n=xs(13,t,e,r),n.elementType=MS,n.lanes=s,n;case bS:return n=xs(19,t,e,r),n.elementType=bS,n.lanes=s,n;case qL:return by(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case YL:o=10;break e;case KL:o=9;break e;case dT:o=11;break e;case hT:o=14;break e;case $a:o=16,i=null;break e}throw Error(Ce(130,n==null?n:typeof n,""))}return e=xs(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Ac(n,e,t,i){return n=xs(7,n,i,e),n.lanes=t,n}function by(n,e,t,i){return n=xs(22,n,i,e),n.elementType=qL,n.lanes=t,n.stateNode={isHidden:!1},n}function qx(n,e,t){return n=xs(6,n,null,e),n.lanes=t,n}function Zx(n,e,t){return e=xs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function iH(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ix(0),this.expirationTimes=Ix(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ix(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function YT(n,e,t,i,r,s,o,a,l){return n=new iH(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},IT(s),n}function rH(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sf,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function VD(n){if(!n)return xl;n=n._reactInternals;e:{if(iu(n)!==n||n.tag!==1)throw Error(Ce(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(n.tag===1){var t=n.type;if(wr(t))return H3(n,t,e)}return e}function GD(n,e,t,i,r,s,o,a,l){return n=YT(t,i,!0,n,r,s,o,a,l),n.context=VD(null),t=n.current,i=lr(),r=fl(t),s=ra(i,r),s.callback=e??null,cl(t,s,r),n.current.lanes=r,Kp(n,r,i),Er(n,i),n}function Ay(n,e,t,i){var r=e.current,s=lr(),o=fl(r);return t=VD(t),e.context===null?e.context=t:e.pendingContext=t,e=ra(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=cl(r,e,o),n!==null&&(Ws(n,r,o,s),G0(n,r,o)),o}function Dv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function KT(n,e){xC(n,e),(n=n.alternate)&&xC(n,e)}function sH(){return null}var WD=typeof reportError=="function"?reportError:function(n){console.error(n)};function qT(n){this._internalRoot=n}Cy.prototype.render=qT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ce(409));Ay(n,e,null,null)};Cy.prototype.unmount=qT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Wc(function(){Ay(null,n,null,null)}),e[la]=null}};function Cy(n){this._internalRoot=n}Cy.prototype.unstable_scheduleHydration=function(n){if(n){var e=x3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ya.length&&e!==0&&e<Ya[t].priority;t++);Ya.splice(t,0,n),t===0&&w3(n)}};function ZT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ry(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function SC(){}function oH(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Dv(o);s.call(c)}}var o=GD(e,i,n,0,null,!1,!1,"",SC);return n._reactRootContainer=o,n[la]=o.current,cp(n.nodeType===8?n.parentNode:n),Wc(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Dv(l);a.call(c)}}var l=YT(n,0,!1,null,null,!1,!1,"",SC);return n._reactRootContainer=l,n[la]=l.current,cp(n.nodeType===8?n.parentNode:n),Wc(function(){Ay(e,l,t,i)}),l}function Py(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Dv(o);a.call(l)}}Ay(e,o,n,r)}else o=oH(t,e,n,r,i);return Dv(o)}y3=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Rh(e.pendingLanes);t!==0&&(gT(e,t|1),Er(e,Xn()),!(Wt&6)&&(jf=Xn()+500,Dl()))}break;case 13:Wc(function(){var i=ca(n,1);if(i!==null){var r=lr();Ws(i,n,1,r)}}),KT(n,1)}};vT=function(n){if(n.tag===13){var e=ca(n,134217728);if(e!==null){var t=lr();Ws(e,n,134217728,t)}KT(n,134217728)}};_3=function(n){if(n.tag===13){var e=fl(n),t=ca(n,e);if(t!==null){var i=lr();Ws(t,n,e,i)}KT(n,e)}};x3=function(){return Qt};S3=function(n,e){var t=Qt;try{return Qt=n,e()}finally{Qt=t}};kS=function(n,e,t){switch(e){case"input":if(RS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=xy(i);if(!r)throw Error(Ce(90));QL(i),RS(i,r)}}}break;case"textarea":e3(n,t);break;case"select":e=t.value,e!=null&&Mf(n,!!t.multiple,e,!1)}};a3=WT;l3=Wc;var aH={usingClientEntryPoint:!1,Events:[Zp,uf,xy,s3,o3,WT]},oh={findFiberByHostInstance:vc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lH={bundleType:oh.bundleType,version:oh.version,rendererPackageName:oh.rendererPackageName,rendererConfig:oh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xa.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=f3(n),n===null?null:n.stateNode},findFiberByHostInstance:oh.findFiberByHostInstance||sH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lg.isDisabled&&Lg.supportsFiber)try{gy=Lg.inject(lH),So=Lg}catch{}}Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aH;Jr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZT(e))throw Error(Ce(200));return rH(n,e,null,t)};Jr.createRoot=function(n,e){if(!ZT(n))throw Error(Ce(299));var t=!1,i="",r=WD;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=YT(n,1,!1,null,null,t,!1,i,r),n[la]=e.current,cp(n.nodeType===8?n.parentNode:n),new qT(e)};Jr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ce(188)):(n=Object.keys(n).join(","),Error(Ce(268,n)));return n=f3(e),n=n===null?null:n.stateNode,n};Jr.flushSync=function(n){return Wc(n)};Jr.hydrate=function(n,e,t){if(!Ry(e))throw Error(Ce(200));return Py(null,n,e,!0,t)};Jr.hydrateRoot=function(n,e,t){if(!ZT(n))throw Error(Ce(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=WD;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=GD(e,null,n,1,t??null,r,!1,s,o),n[la]=e.current,cp(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Cy(e)};Jr.render=function(n,e,t){if(!Ry(e))throw Error(Ce(200));return Py(null,n,e,!1,t)};Jr.unmountComponentAtNode=function(n){if(!Ry(n))throw Error(Ce(40));return n._reactRootContainer?(Wc(function(){Py(null,null,n,!1,function(){n._reactRootContainer=null,n[la]=null})}),!0):!1};Jr.unstable_batchedUpdates=WT;Jr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Ry(t))throw Error(Ce(200));if(n==null||n._reactInternals===void 0)throw Error(Ce(38));return Py(n,e,t,!1,i)};Jr.version="18.2.0-next-9e3b772b8-20220608";function $D(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($D)}catch(n){console.error(n)}}$D(),GL.exports=Jr;var Jp=GL.exports;const cH=cd(Jp);var wC=Jp;wS.createRoot=wC.createRoot,wS.hydrateRoot=wC.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yp(){return yp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},yp.apply(this,arguments)}var el;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(el||(el={}));const EC="popstate";function uH(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return mw("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Ov(r)}return dH(e,t,null,n)}function ni(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jD(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fH(){return Math.random().toString(36).substr(2,8)}function TC(n,e){return{usr:n.state,key:n.key,idx:e}}function mw(n,e,t,i){return t===void 0&&(t=null),yp({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?hd(e):e,{state:t,key:e&&e.key||i||fH()})}function Ov(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function hd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function dH(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=el.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(yp({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=el.Pop;let y=u(),g=y==null?null:y-c;c=y,l&&l({action:a,location:_.location,delta:g})}function p(y,g){a=el.Push;let x=mw(_.location,y,g);t&&t(x,y),c=u()+1;let S=TC(x,c),E=_.createHref(x);try{o.pushState(S,"",E)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;r.location.assign(E)}s&&l&&l({action:a,location:_.location,delta:1})}function m(y,g){a=el.Replace;let x=mw(_.location,y,g);t&&t(x,y),c=u();let S=TC(x,c),E=_.createHref(x);o.replaceState(S,"",E),s&&l&&l({action:a,location:_.location,delta:0})}function v(y){let g=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof y=="string"?y:Ov(y);return x=x.replace(/ $/,"%20"),ni(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let _={get action(){return a},get location(){return n(r,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(EC,f),l=y,()=>{r.removeEventListener(EC,f),l=null}},createHref(y){return e(r,y)},createURL:v,encodeLocation(y){let g=v(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(y){return o.go(y)}};return _}var MC;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(MC||(MC={}));function hH(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?hd(e):e,r=QT(i.pathname||"/",t);if(r==null)return null;let s=XD(n);pH(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=bH(r);o=EH(s[a],l)}return o}function XD(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ni(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=hl([i,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(ni(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),XD(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:SH(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of YD(s.path))r(s,o,l)}),e}function YD(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=YD(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function pH(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:wH(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const mH=/^:[\w-]+$/,gH=3,vH=2,yH=1,_H=10,xH=-2,bC=n=>n==="*";function SH(n,e){let t=n.split("/"),i=t.length;return t.some(bC)&&(i+=xH),e&&(i+=vH),t.filter(r=>!bC(r)).reduce((r,s)=>r+(mH.test(s)?gH:s===""?yH:_H),i)}function wH(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function EH(n,e){let{routesMeta:t}=n,i={},r="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=r==="/"?e:e.slice(r.length)||"/",u=TH({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(i,u.params);let f=a.route;s.push({params:i,pathname:hl([r,u.pathname]),pathnameBase:PH(hl([r,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(r=hl([r,u.pathnameBase]))}return s}function TH(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=MH(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let _=a[f]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function MH(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),jD(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function bH(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jD(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function QT(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function AH(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?hd(n):n;return{pathname:t?t.startsWith("/")?t:CH(t,e):e,search:IH(i),hash:LH(r)}}function CH(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Qx(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RH(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function KD(n,e){let t=RH(n);return e?t.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function qD(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=hd(n):(r=yp({},n),ni(!r.pathname||!r.pathname.includes("?"),Qx("?","pathname","search",r)),ni(!r.pathname||!r.pathname.includes("#"),Qx("#","pathname","hash",r)),ni(!r.search||!r.search.includes("#"),Qx("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=AH(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const hl=n=>n.join("/").replace(/\/\/+/g,"/"),PH=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),IH=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LH=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function DH(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const ZD=["post","put","patch","delete"];new Set(ZD);const OH=["get",...ZD];new Set(OH);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _p(){return _p=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_p.apply(this,arguments)}const JT=P.createContext(null),NH=P.createContext(null),ru=P.createContext(null),Iy=P.createContext(null),Ol=P.createContext({outlet:null,matches:[],isDataRoute:!1}),QD=P.createContext(null);function kH(n,e){let{relative:t}=e===void 0?{}:e;em()||ni(!1);let{basename:i,navigator:r}=P.useContext(ru),{hash:s,pathname:o,search:a}=eO(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:hl([i,o])),r.createHref({pathname:l,search:a,hash:s})}function em(){return P.useContext(Iy)!=null}function Ly(){return em()||ni(!1),P.useContext(Iy).location}function JD(n){P.useContext(ru).static||P.useLayoutEffect(n)}function UH(){let{isDataRoute:n}=P.useContext(Ol);return n?ZH():FH()}function FH(){em()||ni(!1);let n=P.useContext(JT),{basename:e,future:t,navigator:i}=P.useContext(ru),{matches:r}=P.useContext(Ol),{pathname:s}=Ly(),o=JSON.stringify(KD(r,t.v7_relativeSplatPath)),a=P.useRef(!1);return JD(()=>{a.current=!0}),P.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=qD(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:hl([e,f.pathname])),(u.replace?i.replace:i.push)(f,u.state,u)},[e,i,o,s,n])}function zH(){let{matches:n}=P.useContext(Ol),e=n[n.length-1];return e?e.params:{}}function eO(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=P.useContext(ru),{matches:r}=P.useContext(Ol),{pathname:s}=Ly(),o=JSON.stringify(KD(r,i.v7_relativeSplatPath));return P.useMemo(()=>qD(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function BH(n,e){return HH(n,e)}function HH(n,e,t,i){em()||ni(!1);let{navigator:r}=P.useContext(ru),{matches:s}=P.useContext(Ol),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ly(),u;if(e){var f;let y=typeof e=="string"?hd(e):e;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||ni(!1),u=y}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=hH(n,{pathname:m}),_=jH(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:hl([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:hl([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,t,i);return e&&_?P.createElement(Iy.Provider,{value:{location:_p({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:el.Pop}},_):_}function VH(){let n=qH(),e=DH(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:r},t):null,null)}const GH=P.createElement(VH,null);class WH extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?P.createElement(Ol.Provider,{value:this.props.routeContext},P.createElement(QD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $H(n){let{routeContext:e,match:t,children:i}=n,r=P.useContext(JT);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(Ol.Provider,{value:e},i)}function jH(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id]));u>=0||ni(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,v=!1,_=null,y=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||GH,l&&(c<0&&p===0?(QH("route-fallback",!1),v=!0,y=null):c===p&&(v=!0,y=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),x=()=>{let S;return m?S=_:v?S=y:f.route.Component?S=P.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,P.createElement($H,{match:f,routeContext:{outlet:u,matches:g,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?P.createElement(WH,{location:t.location,revalidation:t.revalidation,component:_,error:m,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var tO=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(tO||{}),Nv=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Nv||{});function XH(n){let e=P.useContext(JT);return e||ni(!1),e}function YH(n){let e=P.useContext(NH);return e||ni(!1),e}function KH(n){let e=P.useContext(Ol);return e||ni(!1),e}function nO(n){let e=KH(),t=e.matches[e.matches.length-1];return t.route.id||ni(!1),t.route.id}function qH(){var n;let e=P.useContext(QD),t=YH(Nv.UseRouteError),i=nO(Nv.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function ZH(){let{router:n}=XH(tO.UseNavigateStable),e=nO(Nv.UseNavigateStable),t=P.useRef(!1);return JD(()=>{t.current=!0}),P.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,_p({fromRouteId:e},s)))},[n,e])}const AC={};function QH(n,e,t){!e&&!AC[n]&&(AC[n]=!0)}function gw(n){ni(!1)}function JH(n){let{basename:e="/",children:t=null,location:i,navigationType:r=el.Pop,navigator:s,static:o=!1,future:a}=n;em()&&ni(!1);let l=e.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:s,static:o,future:_p({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=hd(i));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:v="default"}=i,_=P.useMemo(()=>{let y=QT(u,l);return y==null?null:{location:{pathname:y,search:f,hash:p,state:m,key:v},navigationType:r}},[l,u,f,p,m,v,r]);return _==null?null:P.createElement(ru.Provider,{value:c},P.createElement(Iy.Provider,{children:t,value:_}))}function eV(n){let{children:e,location:t}=n;return BH(vw(e),t)}new Promise(()=>{});function vw(n,e){e===void 0&&(e=[]);let t=[];return P.Children.forEach(n,(i,r)=>{if(!P.isValidElement(i))return;let s=[...e,r];if(i.type===P.Fragment){t.push.apply(t,vw(i.props.children,s));return}i.type!==gw&&ni(!1),!i.props.index||!i.props.children||ni(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=vw(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yw(){return yw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},yw.apply(this,arguments)}function tV(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function nV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iV(n,e){return n.button===0&&(!e||e==="_self")&&!nV(n)}const rV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],sV="6";try{window.__reactRouterVersion=sV}catch{}const oV="startTransition",CC=HL[oV];function aV(n){let{basename:e,children:t,future:i,window:r}=n,s=P.useRef();s.current==null&&(s.current=uH({window:r,v5Compat:!0}));let o=s.current,[a,l]=P.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=P.useCallback(f=>{c&&CC?CC(()=>l(f)):l(f)},[l,c]);return P.useLayoutEffect(()=>o.listen(u),[o,u]),P.createElement(JH,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const lV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_w=P.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:f}=e,p=tV(e,rV),{basename:m}=P.useContext(ru),v,_=!1;if(typeof c=="string"&&cV.test(c)&&(v=c,lV))try{let S=new URL(window.location.href),E=c.startsWith("//")?new URL(S.protocol+c):new URL(c),b=QT(E.pathname,m);E.origin===S.origin&&b!=null?c=b+E.search+E.hash:_=!0}catch{}let y=kH(c,{relative:r}),g=uV(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,unstable_viewTransition:f});function x(S){i&&i(S),S.defaultPrevented||g(S)}return P.createElement("a",yw({},p,{href:v||y,onClick:_||s?i:x,ref:t,target:l}))});var RC;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(RC||(RC={}));var PC;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(PC||(PC={}));function uV(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=UH(),c=Ly(),u=eO(n,{relative:o});return P.useCallback(f=>{if(iV(f,t)){f.preventDefault();let p=i!==void 0?i:Ov(c)===Ov(u);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,i,r,t,n,s,o,a])}const fV="_backgroundContainer_19d55_1",dV="_blur_19d55_25",IC={backgroundContainer:fV,blur:dV},iO=({is3DEnabled:n})=>{const[e,t]=P.useState({x:0,y:0}),[i,r]=P.useState({x:50,y:50}),[s,o]=P.useState({x:50,y:50}),[a,l]=P.useState(!1);P.useEffect(()=>{const u=f=>{l(!0),t({x:f.clientX,y:f.clientY})};return n?window.removeEventListener("mousemove",u):window.addEventListener("mousemove",u),()=>{window.removeEventListener("mousemove",u)}},[n]),P.useEffect(()=>{const u=setTimeout(()=>{l(!1)},1e3);return()=>clearTimeout(u)},[e]),P.useEffect(()=>{let u;const f=()=>{const p=window.innerWidth,m=window.innerHeight;let v,_;if(a)v=50+(e.x-p/2)/p*10,_=50+(e.y-m/2)/m*10;else{const S=new Date().getTime();v=50+Math.sin(S/2e3)*5,_=50+Math.cos(S/2e3)*5}r({x:v,y:_});const y=.1,g=i.x-s.x,x=i.y-s.y;o({x:s.x+g*y,y:s.y+x*y}),u=requestAnimationFrame(f)};return u=requestAnimationFrame(f),()=>{cancelAnimationFrame(u)}},[e,i,s,a]);const c=`${IC.backgroundContainer} ${n?IC.blur:""}`;return ae.jsx("div",{className:c,style:{backgroundPosition:`${s.x}% ${s.y}%`}})},hV="_top__left__info_1yj3s_1",pV="_info__title_1yj3s_47",mV="_info__link_1yj3s_56",gV="_link_1yj3s_64",vV="_info__date_1yj3s_71",yV="_date__course_1yj3s_78",_V="_date__place_1yj3s_86",xV="_h2_eng_1yj3s_112",SV="_h3_eng_1yj3s_135",wV="_message_1yj3s_155",EV="_works_1yj3s_159",TV="_researchGroup_1yj3s_163",MV="_right__sns__oosugi_1yj3s_171",bV="_hidden_1yj3s_181",AV="_bottomNav_1yj3s_1",CV="_info__copyrights_1yj3s_1",RV="_flex_1yj3s_210",PV="_info_icon_tilt_1yj3s_226",IV="_info__logo_1yj3s_238",LV="_right__button_1yj3s_247",DV="_slider_1yj3s_390",OV="_messageTxt_1yj3s_480",NV="_boxMap_1yj3s_496",kV="_mapsImg_1yj3s_501",UV="_mapsTxt_1yj3s_509",Nt={top__left__info:hV,info__title:pV,info__link:mV,link:gV,info__date:vV,date__course:yV,date__place:_V,h2_eng:xV,h3_eng:SV,message:wV,works:EV,researchGroup:TV,right__sns__oosugi:MV,hidden:bV,"toggle-content":"_toggle-content_1yj3s_185",bottomNav:AV,info__copyrights:CV,flex:RV,info_icon_tilt:PV,info__logo:IV,right__button:LV,"logo-container":"_logo-container_1yj3s_258","toggle-switch":"_toggle-switch_1yj3s_375",slider:DV,messageTxt:OV,boxMap:NV,mapsImg:kV,mapsTxt:UV},FV="/assets/logo_insta-CWFRhSrY.svg",zV="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.436291'%20y='0.436291'%20width='31.1274'%20height='31.1274'%20rx='6.54436'%20fill='%23272727'/%3e%3crect%20x='0.436291'%20y='0.436291'%20width='31.1274'%20height='31.1274'%20rx='6.54436'%20stroke='black'%20stroke-width='0.872581'/%3e%3cpath%20d='M17.662%2014.7981L24.1598%208.14677H22.6205L16.9761%2013.9209L12.4713%208.14677H7.27417L14.0879%2016.8791L7.27417%2023.8532H8.8134L14.7702%2017.7543L19.5287%2023.8532H24.7258M9.36895%209.16893H11.7336L22.6194%2022.8813H20.2541'%20fill='white'/%3e%3c/svg%3e",BV="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='32'%20height='32'%20rx='10'%20fill='white'/%3e%3cpath%20d='M16.212%2030H16.2038C12.1222%2029.972%208.98438%2028.5944%206.87519%2025.9064C5.00125%2023.5124%204.03283%2020.1832%204%2016.0112V15.9916C4.03283%2011.8168%205.00125%208.4904%206.87792%206.0964C8.98438%203.4056%2012.1249%202.028%2016.2038%202H16.212H16.2202C19.3498%202.0224%2021.9679%202.8456%2024.0005%204.4472C25.9127%205.9536%2027.2586%208.0984%2028%2010.8256L25.6747%2011.4892C24.4163%206.8692%2021.232%204.5088%2016.2093%204.4724C12.8937%204.4976%2010.385%205.5644%208.75459%207.642C7.23082%209.588%206.44295%2012.3992%206.41286%2016C6.44295%2019.6008%207.23082%2022.412%208.75732%2024.358C10.3878%2026.4384%2012.8964%2027.5052%2016.212%2027.5276C19.2021%2027.5052%2021.18%2026.7912%2022.8241%2025.142C24.7008%2023.2604%2024.668%2020.9504%2024.0661%2019.5448C23.7132%2018.716%2023.0703%2018.0272%2022.2031%2017.5036C21.9843%2019.08%2021.4946%2020.3568%2020.7395%2021.32C19.7301%2022.6052%2018.2993%2023.308%2016.4883%2023.4088C15.1177%2023.4844%2013.7964%2023.154%2012.7733%2022.4736C11.5614%2021.67%2010.8528%2020.4436%2010.7762%2019.0156C10.7024%2017.6268%2011.2413%2016.35%2012.2918%2015.4204C13.2958%2014.5328%2014.7074%2014.012%2016.3762%2013.914C17.6045%2013.844%2018.7562%2013.9%2019.8176%2014.0792C19.6754%2013.214%2019.3909%2012.5252%2018.9641%2012.0296C18.3787%2011.3464%2017.4732%2010.9992%2016.2749%2010.9908C16.264%2010.9908%2016.253%2010.9908%2016.2421%2010.9908C15.2792%2010.9908%2013.9715%2011.2624%2013.1399%2012.5308L11.1374%2011.156C12.2535%209.4592%2014.0645%208.524%2016.2421%208.524C16.2585%208.524%2016.2749%208.524%2016.2913%208.524C19.9325%208.5464%2022.1019%2010.8284%2022.318%2014.81C22.4411%2014.8632%2022.5642%2014.9192%2022.6846%2014.9752C24.3835%2015.7928%2025.6254%2017.0304%2026.2793%2018.5564C27.1875%2020.6816%2027.2723%2024.1452%2024.5148%2026.9088C22.4056%2029.02%2019.8477%2029.9748%2016.2202%2030H16.212ZM17.3555%2016.3612C17.0792%2016.3612%2016.8002%2016.3696%2016.5129%2016.3864C14.4202%2016.5068%2013.1152%2017.4896%2013.1891%2018.8868C13.2657%2020.3512%2014.8442%2021.0316%2016.3625%2020.9476C17.7577%2020.872%2019.5741%2020.3148%2019.8805%2016.6188C19.1091%2016.448%2018.2638%2016.3612%2017.3555%2016.3612Z'%20fill='black'/%3e%3c/svg%3e",HV="/assets/logo_xiaohongshu-DRae0_hM.svg",VV="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0%2016.0804C0%2024.0402%205.76%2030.6331%2013.36%2032L13.615%2031.7903C13.5576%2031.7805%2013.5003%2031.7704%2013.4429%2031.76V20.4799H9.44287V15.9998H13.4429V12.4798C13.4429%208.47976%2016.0029%206.23973%2019.6829%206.23973C20.8029%206.23973%2022.0829%206.39974%2023.2029%206.55974V10.6398H21.1229C19.2029%2010.6398%2018.7229%2011.5998%2018.7229%2012.8798V15.9998H22.9629L22.2429%2020.4799H18.7229V31.76C18.6195%2031.7788%2018.5161%2031.7965%2018.4127%2031.8131L18.64%2032C26.24%2030.6331%2032%2024.0402%2032%2016.0804C32%207.23617%2024.8%200%2016%200C7.2%200%200%207.23617%200%2016.0804Z'%20fill='url(%23paint0_linear_10_207)'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_10_207'%20x1='16.0008'%20y1='31.0423'%20x2='16.0008'%20y2='-0.00592383'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%230066FF'/%3e%3cstop%20offset='1'%20stop-color='%230066FF'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",GV="/assets/maps-D6kYDo4b.png",WV="_WorkWrapper_nnw36_1",$V="_shake_nnw36_1",jV="_WorkWrapperBg_nnw36_29",XV="_workMsg_nnw36_34",YV="_authorNameEn_nnw36_68",KV="_researchThemeEn_nnw36_81",qV="_WorkWrapperOverlay_nnw36_88",ZV="_workIcon_nnw36_100",QV="_hidden_nnw36_107",JV="_show_nnw36_111",uo={WorkWrapper:WV,shake:$V,WorkWrapperBg:jV,workMsg:XV,authorNameEn:YV,researchThemeEn:KV,WorkWrapperOverlay:qV,workIcon:ZV,hidden:QV,show:JV},eG="/assets/computer-CAIdLpAO.png",rO=({id:n,authorName:e,authorNameEn:t,researchTheme:i,researchThemeEn:r,iconPhoto:s})=>{const[o,a]=P.useState(!1);return ae.jsx("div",{className:uo.workItem,children:ae.jsxs("div",{className:uo.WorkWrapper,children:[ae.jsx("img",{src:eG,alt:"Work computer background",className:uo.WorkWrapperBg}),ae.jsx("div",{className:`${uo.WorkWrapperOverlay} ${o?uo.hidden:""}`,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:ae.jsxs(_w,{to:`/work/${n}`,children:[" ",ae.jsx("img",{src:s,alt:`${e}の研究テーマ`,className:uo.workIcon})]})}),ae.jsx(_w,{to:`/work/${n}`,children:ae.jsxs("div",{className:`${uo.workMsg} ${o?uo.show:""}`,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[ae.jsx("h3",{children:e}),ae.jsx("h3",{className:uo.authorNameEn,children:t}),ae.jsx("p",{children:i}),ae.jsx("p",{className:uo.researchThemeEn,children:r})]})})]})})},tG="_worksOverview_18i8m_1",nG={worksOverview:tG},iG="/assets/icon_20240212022358859418350 - OU GA-WhBoqPL2.png",rG="/assets/レイアイコン - _ REI-B_mOx6F4.jpeg",sG="/assets/daiyihang icon-7JRQXWdd.jpg",oG="/assets/icon - 徐泽雯-2MJyXyuB.png",aG="/assets/icon6-C4UlIlYH.png",lG="/assets/icon - 沢-Bd1Dxq1P.png",cG="/assets/kabi-DyZIye5_.png",uG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAAAAAAZai4+AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAD/h4/MvwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+gDCAQ4MmyWJNcAAAX1SURBVHja7df7UxNHHABw/y/I3UEgERAtreBjrO34aKujHavtTH2No6UojiM6ow4FESgCAgkQAj4QtEASoEJICBAhPAUaXgnmSRKS+3b3AlE7tRNnEr3OfL8/hGXzvdsPu8v39raAKGPLpwYgC1nIQhaykCWSQBaykCWGQBaykCWGQBaykCWGQBaykCWGQBaykCWGQBaykCWGQBaykCWGQBayPjGLn9R2L9JG0Kyd4AFcet2QH/gJrWYzxkKw2qd7GRSyJ3R/2gD8pq5+F/3doxcuXurV0WtjyOrJSZYemQUIVWcmZ3eD97JMmlYKmp3SSOx44jidKs1spNmdX0hTfliGirTk1DwvgDNPRi+eO5oi3dkZU1Z+IsexD4GvlzNcwlWwZLKcZL8tj/RuRuIZXQrLJR5fI5N1KZFjkzrdByQcu80C3mscyzEPoZklWZdCMWTxv0gIqw4eZZBbczUwkk4G2rtUkMCy7Cbr7HMpxzHfuslCnyPZSU9ff8lwbJpp/VYSS3gDoCSpkrPBWLJyKevQzR0M+XHZDeYMyloZP5mTkyMXVKy8TRdhnRdYjv0kO+n0r2QSWVlNKMw6F3MWx0rIjZnzq7DBWgKP1bpYmURZySWg+TcWx9C/RFpKNPFiCbPy4xK8YdEoE7ove9/DEsy3/BBXFpsxBO+y2uh2Y06twPtZzMHXEF8WJ1W8yxrIJmMzB6bgP1hsliHeLDar723W9EG6dbL1NEnY8t+Q+hk8Q1ntbxaRObIQRxZLP5jD829Ytp/oyNJmIcmwlaTkkG+dh0lvSs/ryJbnmLy1uLHYz4+l0n100bPBWvblC1UrpXZ2ZsbKW3fRgnB7Ybk6lc7q9KrA+uqwsPZVcWMxpd7rlJFcvjlb1cnhRZJlZWXtqvLTmssl796bQsc/HbBTlrx38Thd50xtPFhClVeC/RQdYrt5VKjy00cjO45lJdlW4/bIqrHp3WCjVT7DDCO7SY/kO1fsqzxcSyBDtwBY9pHnXJJmmgAkX88fe+uZyGS9gsYMibCqrGRrVQichyQckzkO8DSN4Zidi4/IgyohN7ojRJQs/T6Z/ISVNLR7ZFt/tvkL0mXbq/mmLJl8MzJuB4DXnsygs5X2/R90Uuo+k6cX+Mixo2KHfFtRyHpCLtvTE9140R4D5/VGu9CY0w86ANbM/ZZ1CE3qI2H20W89Qy3376sH3UJqcNJgXqON9XHDGKnzdqN+Nsrh/t+nU2QhK46sEM9v1JxgINK10eB9kTT/R2WttTVX1ap1Qo0e04T7BkZ7F8Mtj2qdfC5pnT6Xyu6j7cDKP+/A26N7u/gg1mj+s4K7rVdXQtNjE00lE2MTPrDfsysmIcgPq9QPLirUTVPrnQ8bi89V1gyTfEfNevDdgu5/4Io9a/xax4177QX2gLb+QkPTldLnzlBRJShHTQqHY7ahce739jmXYcpnK+t80hCAgPHxmQqlQ7gyCOHF95U5Y8/y99wsLy4ykXXgK+bX79og1Hq9ESoL6l9B4HnhHIzc0YSmVTPKOw3qwpfg79PfMq76CGfB2u4xzgl3KK4diTWL7226cL8wX01vbKjXkHdnZ/eACmrosXSpY1jpemDp8YDfM9SvM5ndYDO/yC+prSOPq8nmrnGlcOj3lZvKW6PdXlGyvIMvrrcqivvN5J+QLzxro33DKlBMAU83uPqK8BLfbdA8q2szAphadOWqZRdBhOaDhhYIs9w+S3THmqhZK+0tVxXlNx53eMDT9VthwzLpG1JBnQXMHQDLNblqspFs9+xKU12baYEWCWPrxjwPVq+GWXHYW/xwVYtvVaGY8Ty62+IIdBXV/AXDTdBd1HDn5WxD2YBPU6JaaO/RNdqVXWXl9AAx2x6+sq8xrILAE2/MWSHTK/IZtFjc4fONx2QFpxWCc5YVGBuk4zn7Zhz+EU9w0d03I1yxUVe9ke0U7QJ+AOtjB7KQhSwxBLKQhSwxBLKQhSwxBLKQhSwxBLKQhSwxBLKQhSwxBLKQhSwxBLKQhSwxBLKQhSwxBLKQFa/4G4pC7e8YJx9aAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI0LTAzLTA4VDA0OjU2OjQ1KzAwOjAw6vp72gAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNC0wMy0wOFQwNDo1Njo0NSswMDowMJunw2YAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjQtMDMtMDhUMDQ6NTY6NTArMDA6MDBSIM2AAAAAAElFTkSuQmCC",fG="/assets/リ シン-Dp5P2j0w.png",dG="/assets/ 佐々木桃佳-1fxc9Ooz.jpg",hG="/assets/DAIDAI-BjtXE06q.png",pG="/assets/レイ_1 - _ REI-C9S9ld3y.jpeg",mG="/assets/レイアイヘッダー縦 - _ REI-fV3xhKLg.jpeg",LC="/assets/ouga_001 - OU GA-BvbYXbfE.jpg",gG="/assets/ouga_002 - OU GA-CULNOmTP.jpg",vG="/assets/ouga_003 - OU GA-CoKa0G0_.jpeg",yG="/assets/レイ_1 - _ REI-C9S9ld3y.jpeg",_G="/assets/レイ_02jpg - _ REI-DZE_7oVd.jpg",xG="/assets/レイ_03 - _ REI-BKLZhB1Q.jpg",SG="/assets/レイ_04 - _ REI-_rzlSype.jpeg",wG="/assets/レイ_05 - _ REI-DEQdi0FW.jpeg",EG="/assets/20240214175559709441996 - 徐泽雯-lN69yK4u.jpeg",TG="/assets/202402141758141936333206 - 徐泽雯-DWgCKhgP.jpeg",MG="/assets/202402141758592094719464 - 徐泽雯-shYRhse7.jpeg",bG="/assets/20240214181644738643145 - 徐泽雯-lnFitn4Q.jpeg",AG="/assets/20240214181855164363214 - 徐泽雯-EXlHMyDx.jpeg",CG="/assets/ゴシセイ_01 - 32247002ゴ シセイ-CjBv7q55.png",RG="/assets/ゴシセイ_02 - 32247002ゴ シセイ-BTohAcbi.png",PG="/assets/ゴシセイ_03 - 32247002ゴ シセイ-DrZy-Gvk.png",IG="/assets/ゴシセイ_04 - 32247002ゴ シセイ-CDqk8bX4.png",LG="/assets/ゴシセイ_05 - 32247002ゴ シセイ-DWlteogT.png",DG="/assets/chotakukon−1 - 沢-Bn1IN5Li.png",OG="/assets/chotakukon−2 - 沢-Cw88pS50.png",NG="/assets/chotakukon−3 - 沢-xN7bzl_y.png",kG="/assets/チンカビ　32347006 - カビ-CR0yTITa.png",UG="/assets/m-03 - カビ-DrzLjDDG.png",FG="/assets/Arwa_1 - Kihiro Tokuno-Au3KQRjs.png",zG="/assets/Arwa_2 - Kihiro Tokuno-CSPMiisr.png",BG="/assets/Arwa_3 - Kihiro Tokuno-DStAmMhq.png",HG="/assets/截屏2024-02-12 上午12.03.29 - 32347008リ シン-Dt6VGbZi.png",VG="/assets/截屏2024-02-12 上午12.03.55 - 32347008リ シン-C5AV5sR2.png",GG="/assets/截屏2024-02-12 上午12.04.03 - 32347008リ シン-BNKbZNua.png",WG="/assets/截屏2024-02-12 上午12.04.26 - 32347008リ シン-0UzU-rTK.png",$G="/assets/sasaki_01 - 佐々木桃佳-B8kk2SQN.jpg",jG="/assets/sasaki_02 - 佐々木桃佳-5bIMt-ah.jpg",XG="/assets/sasaki_03 - 佐々木桃佳-4Sn1l5iV.jpg",YG="/assets/sasaki_04 - 佐々木桃佳-CjM_NtU9.jpg",KG="/assets/未标题-1 - 21 Lcferstx-BDuErIfb.png",sO=[{id:"1",authorName:"オウガ",authorNameEn:"OUGA",researchTheme:"アルゴリズミックデザインにおけるボタニカルのメディア表現",researchThemeEn:"Media Expression of Botanicals in Algorithmic Design",researchKeywords:["Interaction design","On-screen media","Computational design","Infographics","Procedural modeling"],researchSummary:"昨今、多くのメディアアート作品において、植物に新たなテクノロジーを用いた表現を掛け合わせる手法が散見される。これらを総称してボタニカル(植物性)アートと呼ぶ。しかし、実際の植物の発芽から枯れるまでのルールを、アルゴリズミックデザインの手法を駆使して、成長規則を解析し、そして時間軸に沿ったプロシージャルモデリングでリアルタイムレンダリングCGに反映させた関連研究はまだない。そこで、本研究では、自然規則の美しさを駆使して、それらを時間軸に沿ってCGに反映させるという、新たな視覚デザインの作成方法の構築を考察する。",workIntroduction:"まずは植物の成長規則を観察・分析した上で、「L-system」を使用してさまざまな形の植物を生成できるプロシージャルモデルを作成した。そして、観るだけではない、身体性のあるインタラクティブな鑑賞ができる作品《digital ikebana》を制作した。これは、プロシージャルなデジタル植物が含まれる造花を、ロボットアームで掴んで花器に生けていくと、それがデジタル上にリアルタイムレンダリングされるという装置である。人間とロボットアームの協業による「生け花」を楽しめるものになった。本研究成果の活用先の例として、伝統的な花屋や茶室での体験をアップデートできる可能性があると考えている。",detailPageHeaderImages:[LC],workImages:[LC,gG,vG],iconPhoto:iG,snsTwitter:"https://twitter.com/magurokani95 ",snsInstagram:"https://twitter.com/maguropan"},{id:"2",authorName:"厲 万千",authorNameEn:"Li Wanqian",researchTheme:"言葉のメタファーによるメディア表現",researchThemeEn:"Media Representation Based on Language Metaphors",researchKeywords:["比喩","言語学による可視化","意味の構築","メディアデザイン"],researchSummary:"言葉は声、造形と記号など複数な特性を持っている。言葉と文化の間にある繋がりは時空、 社会の構成を跨り、表の意味よりも膨大な情報を含めている。言葉の仕組みと表現を研究し、 言葉の意味による抽象表現とイメージ作り、新しいメディアで生じた新しい文字の読み方を探るのが本研究の目的である。",workIntroduction:"《字の解体》：象形文字が持つ世界観、表現力に合わせ、タイプフェイスデザインを行い、漢字ごとにモーショングラフィックスも制作した。立体性を持つもの、毎回ランダムで生成するもの、インタラクション性を持つものといった、様々な仕組みを施し、個性を出す工夫をした。《1984:身体とタイポグラフィ》：イギリス小説家ジョージ・オーウェルの小説『1984』12 をコンテンツに、その世界観を表現するタイポグラフィの実験として、音、手の動き、顔などをインプット情報として取り入れ、文字を制御することを試みたアルゴリズミックスタイポグラフィ、インタラクティブな文字表現を試みった。",detailPageHeaderImages:[pG,mG],workImages:[yG,_G,xG,SG,wG],iconPhoto:rG,snsInstagram:"https://www.instagram.com/rrreeeiii41/"},{id:"4",authorName:"戴 怡航",authorNameEn:"DAI Yihang",researchTheme:"博物館における学習を支援するコンテンツデザイン：ROUND ZOOを用いた動物を題材とした学習支援システム",researchThemeEn:"Content design for learing support in museum Learing support system using animal-themed ROUND ZOO",researchKeywords:["学習支援システム","視覚障がい者","展示支援","情報アクセシビリティ"],researchSummary:"本研究は，日本の博物館における視覚障がい者のアクセシビリティの現状と課題を検討し，展示物に対する学習支援コンテンツデザインを提案する．動物をテーマにした「ROUND ZOO」は「触察と対話」を活用し，視覚障がい者が動物の情報を理解しやすくすることを目指す．実施したワークショップとアンケートを通じて，このボードが視覚障がい者の学習支援に有効であることを確認し，ユニバーサルデザインの可能性を示した。",workIntroduction:"本研究では、日本の博物館における情報アクセシビリティの現状と課題を明らかにし、視覚障がい者にとって鑑賞困難な展示物に対する学習支援コンテンツデザインを提案する。先行研究を参考にして、博物館におけるユニバーサルデザインの手法を検討し、動物を題材とした「手のひら動物園」と「ROUND ZOO」という体験可能なボードを制作した。これらのボードは、触れる、聞こえる、理解しやすいという特徴を持ち、視覚障がい者が動物の外形や鳴き声、特徴などの情報を得ることができる。また、博物館や盲学校と連携して、ワークショップやアンケートを実施し、ボードの効果や改善点を評価した。その結果、視覚障がい者はボードを通して動物に対する興味や知識を深めることができたと感じた。本論文は、博物館における視覚障がい者の学習支援に貢献するとともに、ユニバーサルデザインの可能性を示すものである。研究背景と目的：近年、博物館では来館者が参加しやすく、実際に体験することのできる展示物が求められている。このような展示手法の変化は博物館がより広い層の来館者にとって魅力的な場となることを目指すために行われている。しかし、従来の展示方法では、特に動物の情報など一部の展示物が子供たちに十分に伝わりにくいという問題がある。例えば、動物の標本は貴重で製作に時間とコストがかかるため、直接触れることが制限されている。博物館における展示物の情報を視覚障害者や子供に伝わらないという問題を解決するために、インタラクションデザインの展示手法に加えて、「触れる」「聞こえる」「理解しやすい」展示を中心に体験可能なROUND ZOOを用いて展示内容を面白く理解できることを目指す。",detailPageHeaderImages:[],workImages:[],iconPhoto:sG},{id:"5",authorName:"徐澤雯",authorNameEn:"XU ZEWEN",researchTheme:"子供の創造性が生まれるインタラクションの研究 ー表現と対話によるワークショップを事例としてー",researchThemeEn:"Research on interactions that generate creativity in children —A case study of a workshop with expression and dialogue—",researchKeywords:["ワークショップ","体験形","コミュニケーション","発想"],researchSummary:"教育においては、子供の創造力を引き出すことを、重要な社会的価値として実現すべきである。しかし、現在の知識を重視するだけの教育制度では、社会の潜在力を十分に引き出すことができていないと考える。最終的に社会に送り出す人材を教育しても、社会的価値として十分に発揮できていないのではないだろうか。子供にとって、中等教育に入る前に受ける教育は、試験で高得点を取ることを主とすべきではなく、感性と創造力の開発を探究し、それを加えていくべきと考える。本研究は子供の創造性が生まれることを目的に、表現と対話によるワークショップのデザインを提案した。それは体験型絵本と遊具によるワークショプで、数名の子供たちは設定された環境の中で関わり、自分の考えを自由に発想し表現していった。また親に対しては、創造性の役割と重要性を再考する機会になることをねらいとした。",workIntroduction:"本研究でデザインしたワークショップ装置『だれでもペープサート』のコンセプトは、子供たちが自ら物語の主役となり、それを演じる楽しさを体験することである（図2,3）。この装置を使うことで、子供たちは想像力を活かし、独自のキャラクターを生み出していく。さらに３つの装置「ストーリーシャッフルカードマシン」「違和感ルーレット」「キーワード単語ガチャ」を組み合わせることで、物語のアイデアが広がっていく（図4,5,6,7）。子供たちはランダムに選ばれた単語を手がかりに自由な発想で物語を構成し、それを演じることで創造力や表現力を育んでいく。このワークショップは、子供たちにとって楽しく学びながら創造力を鍛え、表現力を育む場としてデザインした。子供は自分自身の考えを表現し、他者と協力しながら独自の物語を創り出し、それを具現化するのがこの装置の役割である。最後に学びの成果としてビデオ撮影を行う。子供たちは達成感が得られ、協働で創る面白さを経験する。『だれでもペープサート』の手順は「物語の起承転結を説明し担当を決め、各自がキャラクターをデザインする」「各参加者はガチャで自分のキーワードを決める」「参加者が協働で物語を作る」「物語のシーンの設や道具を作る」「創作した物語を参加者が一緒に演じる」で進める。",detailPageHeaderImages:["path/to/headerImage1.png","path/to/headerImage2.png"],workImages:[EG,TG,MG,bG,AG],iconPhoto:oG},{id:"6",authorName:"ゴシセイ",authorNameEn:"WU SICHENG",researchTheme:"医師と患者のコミュニケーションにおける 「情報非対称性」の解決の研究",researchThemeEn:"Service Design Research on “Information Asymmetry” between Doctor and Patient Communication",researchKeywords:["情報の非対称性","オンライン医療","EMRシステム","医療電子カルテ"],researchSummary:"近年中国では、オンライン医療または遠距離医療に関する医療手段の利用について社会問題として注目されている。医師と患者との関係において、様々な問題が起きる理由には、病状への情報の格差があり、患者に対して医師が強い立場にあるため「情報の非対称性」が起きている。本研究は、遠距離医療サービス支援における、オンラインコミュニケーションのサービスとそれを支えるアプリケーションのデザイン開発を目的とする。医師がオンライン診療システムを使用する際、患者の思いや状況を理解し、医師の医療知識を患者に伝える必要がある。それは、医師と患者の間の情報の不平等問題を解決することができる。",workIntroduction:"中高齢患者の医療問題について分析し、患者用「アンシンドクター」の開発を行い使用時の実用性について検証を行った。そして、医師の視点から、日本と中国の医療専門分野の医師へインタビューとユーザーテストを行い、医師向けの専門版シミュレーションアプリをリデザインし、医師が専門情報を取り扱う際のに問題を解決した。修士研究を通じて、より具体的な医療現場における作業内容に着目すると、それぞれの医療作業特性に対してデザインしていく必要があることが明らかになった。二年間の修士研究を通じて、医師と患者のコミュニケーションの問題を実際に解決することができた。",detailPageHeaderImages:["path/to/headerImage1.png","path/to/headerImage2.png"],workImages:[CG,RG,PG,IG,LG],iconPhoto:aG,snsInstagram:"https://www.instagram.com/wsctt91/"},{id:"7",authorName:"張 沢坤",authorNameEn:"ZHANG Zekun",researchTheme:"植物をテーマとしたアプリケーションデザインの研究",researchThemeEn:"Research on Plant-themed applications Design",researchKeywords:["アプリケーションデザイン","植物","経験デザイン","ゲームデザイン"],researchSummary:"本研究では、制作した作品を通じて、アプリケーションデザインとサービスデザインをどのような形で提供するのかを検討する。そのため、一年次にはアプリケーションの研究作品「格物」を制作した。次に、植物に関するコンテンツのデジタル化についてを検討し、既存のサービスやプロダクトを体験し、これらのプロダクトが満たしていないニーズは何であるかを探り、新しいアプリケーションのデザインコンセプトを考え、インタラクティブなアプリケーションプロトタイプ「Plants and...」と「植物をめぐる冒険」を制作した。",workIntroduction:"専門家向けの植物学習ツールとコミュニティ「格物」；風に吹かれる草原のモーションを組み込んだ風景によって構成されているインターフェース「Plants and...」；ゲーミフィケーションを活用した大きな地図の中で、植物を探索して学ぶための手帳アプリケーション「植物をめぐる冒険」。",detailPageHeaderImages:["path/to/headerImage1.png","path/to/headerImage2.png"],workImages:[DG,OG,NG],iconPhoto:lG},{id:"8",authorName:"チンカビ",authorNameEn:"CHEN JIAMEI",researchTheme:"家庭における非言語的コミュニケーションに関する研究— 日常生活中の小さな痕跡を通して、家族間の絆が深まる",researchThemeEn:"A study of Non-verbal communication reflected in family relationships — Strengthening family bonds through small tiny matters of daily life",researchKeywords:["絆","家族関係","痕跡探索"],researchSummary:"自分自身を万華鏡のように考え、日常の物事をさまざまな角度から、さまざまな方法で 見ていくと、私たちの周りには常に情報があり、日々変化し、更新されていることに気づ く。注意深く観察すれば、古いものの中に必ず新しいつながりや新しい情報が見つかる。 しかし、常に慣れた家族と一緒に家で暮らしてきたため、無意識のうちに自分が持って いる印象を「家族や家庭」に押し付けてしまった。そのため、記憶や物語を含む日常の 「痕跡」を探ることを通して、固有の印象を壊し、自分と「家族・家庭」の関係を考え直 すことができるのではないかと考える。例えば、家で同じものを見ているのに違う認識を していることに、驚きや発見、そして共感が生まれるかもしれない。周囲を改めて見つめ 直し、新しい視点をもって自発的に行動することで、十分知っているつもりだった家族に 新たな情報を得ることができると考えている。",workIntroduction:"家族との関係は、他者とのつなが りを学ぶベースとなり得ると考え、家庭を入り口にして、非言語コミュニケーションで家 族間の相互理解や感情表現を促進すれば、将来、家族以外の人とよりよく関わるための基 礎になる。本研究は非言語的コミュニケーションを通して、家族の痕跡を可視化し、体験化し、理 解を相互に深め、家庭関係を最適化する活動をしている。",detailPageHeaderImages:["path/to/headerImage1.png","path/to/headerImage2.png"],workImages:[kG,UG],iconPhoto:cG},{id:"9",authorName:"アルワ",authorNameEn:"ALHARBI ARWA",researchTheme:"異文化交流を支えるコミュニケーションツールのデザイン開発",researchThemeEn:"Design and Development of Communication Tools that Support Cross-cultural Exchange",researchKeywords:["異文化コミュニケーション","留学生","日本大学"],researchSummary:"本研究は、日本の大学における外国人留学生と日本人学生間の交流活性化を目指す。これまで、交流を阻む要因に焦点を当てた研究は多数存在するが、実際に交流を支援するコミュニケーション・ツールに関する研究は限られている。そこで、お互いの文化を深く理解するための新しいアプローチとして、異文化交流を促進する協力型カードゲームを提案する。このゲームは、「みんなが書いたヒントから答えを連想する」というメカニズムを通じて、参加者が相手の文化に関する知識を深めることを目的としている。異文化間の「連想」と「対話」を促すことで、留学生と日本人学生の間における意義ある交流の橋渡しを図る。",workIntroduction:"ユーザーテストは、対話と連想を通じて交流を促進し、達成感と親密感を育む効果があることを明らかにし、進行の可視化などの改善点を提示した。これに基づき、KIZUKI異文化交流キットのブラッシュアップを行なった。プレイヤーは順番にカードを引き、互いにヒントを出し合って言葉を当てる。連想に成功すれば「文化チップ」を得られ、異なる文化背景からのヒント比較により、異文化理解を深めると同時に楽しめる。このゲームは「文化の違い」を乗り越える手法として設計されており、今後は「空気を読む」などの異文化間コミュニケーションスタイルを取り入れることを目指す。",detailPageHeaderImages:["path/to/headerImage1.png","path/to/headerImage2.png"],workImages:[FG,zG,BG],iconPhoto:uG},{id:"10",authorName:"リ シン",authorNameEn:"LI ZHEN",researchTheme:"社会問題に対するスペキュラティヴデザインの提案と研究 ——毒親問題を例として——",researchThemeEn:"To solve social problems  Proposal and research of speculative design  ——As an example of the problem of toxic parents——",researchKeywords:["スペキュラティヴデザイン","問題提起","批判性","未来学","制度","クリティカルデザイン"],researchSummary:"本研究は、法律制度、倫理、道徳に関連し、サービスやプロダクトによる解決が難しいと思われる複雑な社会問題に対して、スペキュラティヴ・デザインの態度で、人々の思索や議論を喚起する可能性を拡げることを目的にしている。そこで、「毒親」を例に挙げ、「Probable Future（起こりそうな未來）」と「Plausible Future（起こってもおかしくない未來）」の間にある「ありうる未來」のVisionを仮定した：2050年、「合格親育成法案」という草案が提出された。この法案は、親は職業と見なされ、勉強と試験を経て「親ライセンス」を取得した人のみ出産の資格を獲得し、本当の「合格親」として社会に承認される。鑑賞者はこのような「ありうる未来」の設定に基づき表現した生活空間に入り込み、体験しながら、この草案に対する投票し、自分の意見を述べることができる。",workIntroduction:"（作品タイトル「合格親育成計画2050」）毒親問題が深刻化のなる2050年、「合格親育成法案」という草案が提出された。この法案 は、親は職業と見なされ、勉強と試験を経て「 親ライセンス」を取得した人のみ出産の資格を 獲得し、本当の「合格親」として社会に承認され る。「親になるには、ライセンスを取る必要があるのか」という問いをめぐって、いろんな議論も展開された...",detailPageHeaderImages:["path/to/headerImage1.png","path/to/headerImage2.png"],workImages:[WG,VG,GG,HG],iconPhoto:fG},{id:"11",authorName:"佐々木桃佳",authorNameEn:"SASAKI MOMOKA",researchTheme:"インスタレーションにおける影表現のリアリティと想像性の研究",researchThemeEn:"Research on the reality and imagination of shadow expression in installations",researchKeywords:["インタラクションデザイン","3DCG","ライティング","プロジェクションマッピング"],researchSummary:"本研究は、インスタレーション作品の空間において生成された「偽の影」が、実在の影と同等のリアリティを持つに至る要因を明らかにし、そのような偽の影の制作手法を探求することを目的とする。加えて、影のリアリティが鑑賞者の想像性にどのような影響を及ぼすかを明らかにする。研究方法としては「偽の影」を用いたインスタレーション作品の制作を通じて、鑑賞者への影響や、「偽の影」のリアリティを高めるために必要な要素に関して考察する。",workIntroduction:"街の影を壁に投影した作品。影を見た時、我々はその影の原因になっている物体を想像する。しかし、 複数人が全く同じ物体を想像することは少ない。影の大きさや形は条件次第で可変する曖昧な現象であり、見る人によってイメージする影の原因になっているものも異なる。鑑賞者は、対となる風景と「偽の影」として映る動物を見て、街と動物の関係性や、動物の存在としてオブジェクトを想像するだろう。しかしオブジェクトを見ると、それはその街の風景そのものの形をしている。影をその土と動物の関係性を表す虚像と しても捉えることができる。",detailPageHeaderImages:["path/to/headerImage1.png","path/to/headerImage2.png"],workImages:[$G,jG,XG,YG],iconPhoto:dG,snsInstagram:"https://www.instagram.com/_mo_36/",snsTwitter:"https://twitter.com/mokael_36/"},{id:"12",authorName:"ダイダイ",authorNameEn:"DAI CHENYI",researchTheme:"視覚障害者の視点に基づいたインタラクションシステムのデザイン研究",researchThemeEn:"Multisensory Game Interaction System Design for the Visually Impaired",researchKeywords:["Tangible User Interfaces (TUI)","Visually Impairment","Game","Accessibility","Human-Computer Interaction (HCI)"],researchSummary:"本研究では、視覚障害者と晴眼者が公平に遊べる有形ビデオゲーム「SoundGift」を設計した。現在、多くのビデオゲームは主に視覚的インタラクションに依存しており、これが視覚障害者の体験に制限をもたらしている。そこで、本研究では、伝統的なインタラクションの枠を越え、アクセシビリティとゲームの公平性を基に、新しいインタラクション形式の可能性を探求する。",workIntroduction:"「Sound Gift」はTUI技術に基づいて、ESP32とUnityを用いて開発された。3Dプリントとレーザーカット技術を使って、物理的な部分の造形を行った。本研究は、触覚と聴覚のフィードバックを通じて、視覚障害者のゲーム体験を向上させ、晴眼者と視覚障害者が平等に仮想ゲーム世界を構築し、探索することを可能にした。今後、より優れたユーザー体験を実現し、さらなるテストと改良を目指している。",detailPageHeaderImages:["path/to/headerImage1.png","path/to/headerImage2.png"],workImages:[KG],iconPhoto:hG}],qG=()=>ae.jsx("div",{className:nG.worksOverview,children:sO.map((n,e)=>ae.jsx(rO,{id:n.id,authorName:n.authorName,authorNameEn:n.authorNameEn,researchTheme:n.researchTheme,researchThemeEn:n.researchThemeEn,iconPhoto:n.iconPhoto},e))}),ZG=()=>{const[n,e]=P.useState({}),t=i=>{e(r=>({...r,[i]:!r[i]}))};return ae.jsxs("nav",{className:Nt.top__left__info,children:[ae.jsxs("div",{className:Nt.info__title,children:[ae.jsxs("h1",{children:["多摩美術大学大学院",ae.jsx("br",{}),"情報デザイン研究領域",ae.jsx("br",{}),"大学院修了制作展2024"]}),ae.jsxs("p",{className:Nt.h2_eng,children:["Graduate School of Tama Art University",ae.jsx("br",{}),"Information Design Department",ae.jsx("br",{}),"Masters Works Special Exhibit 2024"]})]}),ae.jsxs("div",{className:Nt.info__link,children:[ae.jsxs("div",{className:`${Nt.link} ${Nt.message}`,children:[ae.jsxs("h2",{className:Nt.toggleTrigger,onClick:()=>t("content1"),children:["→ ",n.content1?"メッセージ":ae.jsx("s",{children:"メッセージ"})]}),ae.jsx("p",{className:Nt.h3_eng,children:"Message"}),ae.jsxs("p",{id:"content1",className:`${Nt.toggleContent} ${n.content1?"":Nt.hidden} ${Nt.messageTxt}`,children:["本展覧会は、多摩美術大学大学院デザイン専攻情報デザイン領域に所属する大学院インタラクションデザインプログラムの学生による有志の展覧会です。今年の展示のテーマは「INTER_」です。",ae.jsx("br",{}),ae.jsx("br",{}),"人々は、たくさんのヒトやコトのあいだの中で、互いにかかわりあって生きています。",ae.jsx("br",{}),ae.jsx("br",{}),"そんな人々を取り巻く世界を理解・解釈するため、わたしたちはモノとコト、芸術と科学、現実と想像、異なる分野や側面を行き来し、探求・表現することに試みました。",ae.jsx("br",{}),ae.jsx("br",{}),"本展覧会では、美術・デザイン分野にとどまらず、工学、人類学、社会学、認知科学、言語学といった異なる学科領域の間を追求することで、人々が触れる情報の体験やメディアなど創造的な「INTER_」を個々が作品として形作った成果を展示しました。",ae.jsx("br",{}),ae.jsx("br",{}),ae.jsx("br",{})]})]}),ae.jsxs("div",{className:`${Nt.link} ${Nt.researchGroup}`,children:[ae.jsxs("h2",{className:Nt.toggleTrigger,onClick:()=>t("content2"),children:["→ ",n.content2?"会場":ae.jsx("s",{children:"会場"})]}),ae.jsx("p",{className:Nt.h3_eng,children:"Place"}),ae.jsxs("div",{id:"content2",className:`${Nt.toggleContent} ${n.content2?"":Nt.hidden}`,children:[ae.jsx("div",{children:ae.jsx("div",{className:Nt.mapContainer,children:ae.jsx("img",{src:GV,className:Nt.mapsImg})})}),ae.jsxs("p",{className:Nt.mapsTxt,children:[ae.jsx("a",{href:"https://www.google.com/maps/place/BUoY+Cafe+%26+Bar/@35.7462913,139.8008161,16.6z/data=!3m1!5s0x60188e5a5d7ef6e5:0x1efc6e4692915edc!4m5!3m4!1s0x60188e5a5d7c19e7:0xa65b19b78c557ca2!8m2!3d35.7435032!4d139.8021921?shorturl=1",target:"_blank",children:"→ Google Mapで開く"}),ae.jsx("br",{}),ae.jsx("br",{}),"〒120-0036 東京都足立区千住仲町49-11",ae.jsx("br",{}),"東京メトロ千代田線・日比谷／JR常磐線／東武スカイツリーライン「北千住」駅",ae.jsx("br",{}),"出口１より徒歩6分、西口より徒歩8分"]})]})]}),ae.jsxs("div",{className:`${Nt.link} ${Nt.works}`,children:[ae.jsxs("h2",{className:Nt.toggleTrigger,onClick:()=>t("content3"),children:["→ ",n.content3?"作品":ae.jsx("s",{children:"作品"})]}),ae.jsx("p",{className:Nt.h3_eng,children:"Works"}),ae.jsx("div",{id:"content3",className:`${Nt.toggleContent} ${n.content3?"":Nt.hidden}`,children:ae.jsx(qG,{})})]})," "]}),ae.jsxs("div",{className:Nt.info__date,id:"left__info",children:[ae.jsxs("div",{className:Nt.date__course,children:[ae.jsx("h3",{children:"メディアアートコース"}),ae.jsx("h2",{children:"3.8 (金) から3.10 (日)"}),ae.jsxs("p",{className:Nt.h3_eng,children:["Media Art Course ",ae.jsx("br",{}),"Date: 8, Mar. Fri. through 10, Mar. Sun."]})]}),ae.jsxs("div",{className:Nt.date__course,children:[ae.jsx("h3",{children:"インタラクションデザインコース"}),ae.jsx("h2",{children:"3.15 (金) から3.17 (日)"}),ae.jsxs("p",{className:Nt.h3_eng,children:["Interaction Design Course ",ae.jsx("br",{}),"Date: 15, Mar. Fri. through 17, Mar. Sun."]})]})]}),ae.jsxs("div",{className:Nt.right__sns__oosugi,id:"right__sns",children:[ae.jsxs("a",{href:"https://www.instagram.com/tau_idd_master",target:"_blank",className:Nt.flex,rel:"noopener noreferrer",children:[ae.jsx("h2",{children:"→"}),ae.jsx("img",{src:FV,alt:"Instagram"})]}),ae.jsxs("a",{href:"https://x.com/tauidd_master/status/1754734958634287578",target:"_blank",className:Nt.flex,rel:"noopener noreferrer",children:[ae.jsx("h2",{children:"→"}),ae.jsx("img",{src:zV,alt:"X"})]}),ae.jsxs("a",{href:"https://www.threads.net/@tau_idd_master/post/C2_nYgJyPGN/",target:"_blank",className:Nt.flex,rel:"noopener noreferrer",children:[ae.jsx("h2",{children:"→"}),ae.jsx("img",{src:BV,alt:"Threads"})]}),ae.jsxs("a",{href:"https://www.xiaohongshu.com/discovery/item/65c1da5b0000000002012a9a",target:"_blank",className:Nt.flex,rel:"noopener noreferrer",children:[ae.jsx("h2",{children:"→"}),ae.jsx("img",{src:HV,alt:"Xiaohongshu"})]}),ae.jsxs("a",{href:"https://www.facebook.com/share/p/sWyWaysiDSUmfSUR/",target:"_blank",className:Nt.flex,rel:"noopener noreferrer",children:[ae.jsx("h2",{children:"→"}),ae.jsx("img",{src:VV,alt:"Facebook"})]})]}),ae.jsx("div",{children:ae.jsxs("p",{id:Nt.info__copyrights,children:["多摩美術大学情報デザイン学科研究室後援",ae.jsx("br",{}),"Copyright © 2024 Tama Art University",ae.jsx("br",{}),"Graduate School Information Design Field"]})})]})},QG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQcSURBVHgBxVdtaFNXGH7vubn5aNIP123Vknbripu2MKtsjlE3Cpo2xY3FQQv9s3Vr92PICpaxH2PM0cEYhbXQMfancWNDAgpDJpo0USh+i1r7p7ZKLdpErWLVJk1y05t7r+etbU0b77lpbPGBQ27O+57363w9h4MM4XK5CkRRdCkgb7ZY5DgnKAaeVzmUyTKnSiLJkZNkUpa461ar9RDFo0zscnoKTqfzdVWVv7C9JMoV1XcCO3ePBln6no5NlaGhvLrotCkKisHt8/luQDYBYMbxRLTdlivaHM03e6vqx8OwTPR8Wd3w8F4OMQlWt1ZF+Gd1zmbNxbreqb+1v7lzoG/t+qkEZIH3PgleEadMU8Frxo7yN966NDo6mhZEWgUcDkdVbmHio+88J/6GFUTXZ9s+fThhOREIBAZT+xdVADMvKIrVfrv/pAdWGO/vGh++eNTe+Jp943hqJcj8B845L8z80v7Pqf9glYBVRR/oKy2AhBRp2VJ3+3dYZbxbf6cnnojsWRQAln7Nq6Kyc/dIUM+AgVaTtr107s7S3yA2+u2jrYsuqBK98c6vh0O2vKQNfS4EACTZ0rbv9EGdsXnomP4eoK2VOrPPC+h3JW0NNIgzczp5LEOOr6668WyZdV1TU1NgzZdyQMc5P+cY9NE6p6sZRNX2iXB+oZjEtUAEQXDZN0T8LIs0qz2YJWQI1MUxLJ2KbfcD0WjURXhBLW/6cWBIS1F4UupMMl+KVlwvWkJcCxwPmwlvUAoZRkAFaIfsUcsS4qVGBLMSA3YAFZAl6FgnS24QFJ7MX6laWM7cP2OsnanAq4TACwZBMsFSoMIQZI8hplTmFEJZTJKlQ8vogyxBg7/CkidEYiVSjOgdQn7IEgpAN1NOKRxfVlZeFA8bpTe33g9rGAnRKuTTtgWWAZq9m479X0vu2bup8u5Nm0QkSTo0fK5oB8uYTC8aVW8+FzsfwjEsndDVglokr6S/v/9RZNIoDHpLWRdImBpsxKxA37kbdXEMSy8eEWLIE2e3Iafy+wL/lrUAGxjET9yT4/VgakXmdkovbY2oo+e8p7W6QaGMedb3fGdd3faOrR/f8mbCCZ4Hvj832s8fLq72eo//hv+fMqKE3DXQV/wNrDIueNe1mUy5C1O5EACuBVkyft/ZVNMMq4Tuzz/YhT5S3wiLWDGyVfu69eHBQLETWSysIDqbPmyeumc+5vf7R1L70x4mY2NjEyXFFXdPHij9dfqBaUTrfMgUOOeen9/+YSZm7l7qHKF5EyJVs1j5ljVrRaWtV5cvpgG3dR/dWbEHxmmLxdqt9TTL6HFKKGk1Ud5YSqkbiz0hjvyxoWT4zCs7IpNmA8fxf2X9OF0KJJDI4QRK4cCgvGw0K9HU53kyyckzMYNZleHycp7njwFq/6MUb8Z8pAAAAABJRU5ErkJggg==",JG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA1CAYAAADh5qNwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAR2SURBVHgB3Vo9TBRREP7QQhvNEhu0eliojQGjBbFxbQwm4kEnWtzZaCwMGG2MBdBhYuKR2GgjFGqs5MREre6otNCAiYVSeI/GjY2gNmqj873dPZf1gNu75di9L5nb38vtd9+8t/Nmpg3xwhKzxY6JKbFu75wVuGdZTHvbebFZsZJ3HAva0Dj4wDmxzA4L9j6hYWeA3QrY3+3ewH0fP+TRHQ18Flt4B7wtyXbenJc9TMElqNEAGiGlxIZ2tiN3LAPrVBYgoR0W6gLJPRNKM5PmkJ9jqJNcPaT42CPy8MODQ8DgcP1EqsHRLjESFDVlLzq5rYiGfrGikLFvTQNHe4Ft2xEr+AcdtsWF+Utt6H7/2vzmN7jjrybUqpRRZ4/C8K0nrps1C44GLh43quXl8Eot36lFKSX2vC+LfqqzR6GpoHKncsDvX+gR1WQPBawzU65HSokVL4zgwNV8/K5WK/i7dHWB9XbWuOOaxNYipeASUhdGkQhwrKEGYmuRmksSIR8BYtx7LPYzfM9qpG7LDNd7eRyJBIk5Gh3y8uaAeBm+Xm32y8lkcP/BXLzvn7jByOTcITMrDsjhdPBamJQSK86UoYKhTVLB8OrsITOuOhEYX2H3o9vZJ84gFdjVIYp9w3aZ6le4YVApJW5XvltcGYAmHXTD051mS7U0z20JXB9hUJomQgTHPeNPwbB/zldKiZVlLKWOFEG1Mnux/H3JHVu+UnZfLp2ECKrF5Q/cdV3F/bJ0vTTDe/4MP+h+ljBdKi4h1QhMGO1Uym7mUmKjQBf0eNiGlBdPpR5mYemR6trXhZaAN9EpkrKavfDbKHjidJFUKuK8CLA4+/158wctgyNtK8OklkHLklp2NFoCP9wVlYn9YkvMbzYcbTaapOY/1pz7TDY+L5qNUWrRWURLYMEV5x1JlUrTaAmwciIoGVJefSj18JQypJZZ8FpI+biiSl7hrrLyLbAelGZ4z28+/RyFJRXBcuGTWTCmDo4G+jrNrsko+UoxaTH1aAKpxIyr0iS8FNmKvJ+oVH5aTna6OQxHV4pyVfN+WgbaxL0xpAoPJyq1Ye2fC+fSqVH54RysNOQtHG3GknxCtPpHKhyl8211/tpA8t9bfD66HapU76vVpz4wzfT1C3q8REYicec68OoFOLX9V0Vbrej2Wl7GveKcHUnMNHHcT40bdU5Wu74aKZYcX8pbul+IWUkiRkL3RivjKHLNl18oJIlYiJBe7b71Wg4qxKS4ZR3s2Zy2A04K45eAR3nT9UKX02vdH6U3KS/5waFmF+UYaHM2lncRJ4VR1LBSj9Kb9EL+sUUJpbqpWueBjY08qA5nuLHzZhUxKKfyqNJeUA1RG64of0FqrO2zBUPOtPXESY5kpm4CNwbNcoLqDCBCsxURxf3CUHDdIcuCHetD9U4mJEI34/JB/iwTXMNVRqMONELKh4LbYpr1OzNJjnltqsjxF1TS0e6WyR7mRphKCHRmsjVnEg1muOIgFYTfQ0vr8o4V/u+h9ftnmfIpIeYe2r+xdnMt/pB/rgAAAABJRU5ErkJggg==",oO=()=>{const[n,e]=P.useState({x:0,y:0}),[t,i]=P.useState(!1),[r,s]=P.useState(!1),[o,a]=P.useState(null);return P.useEffect(()=>{const l=f=>{e({x:f.clientX,y:f.clientY}),s(!0),o&&clearTimeout(o),a(window.setTimeout(()=>s(!1),500))},c=()=>i(!0),u=()=>i(!1);return window.addEventListener("mousemove",l),window.addEventListener("mousedown",c),window.addEventListener("mouseup",u),()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mousedown",c),window.removeEventListener("mouseup",u),o&&clearTimeout(o)}},[o]),r?ae.jsx("div",{className:`custom-cursor ${t?"custom-cursor-clicked":""}`,style:{left:`${n.x}px`,top:`${n.y}px`,backgroundImage:`url(${t?JG:QG})`}}):null},e6="_rotate_148vz_2",t6="_right__button_148vz_1",n6="_toggleSwitch_148vz_35",i6="_slider_148vz_48",r6="_btnText_148vz_107",ah={rotate:e6,right__button:t6,toggleSwitch:n6,slider:i6,btnText:r6},s6=({onToggle:n})=>ae.jsxs("div",{className:ah.right__button,children:[ae.jsxs("label",{className:`${ah.toggleSwitch} ${ah.rotate}`,children:[ae.jsx("input",{type:"checkbox",id:"myToggleSwitch",onChange:n}),ae.jsx("span",{className:ah.slider})]}),ae.jsx("div",{className:ah.btnText,children:" ← かかわる"})]}),o6="_info__logo_19e0w_1",a6={info__logo:o6},l6="/assets/icon_logo-D9bX6Kma.svg",c6=()=>ae.jsx("div",{className:a6.info__logo,id:"info__logo",children:ae.jsx("a",{href:"",children:ae.jsx("img",{src:l6,alt:"Logo"})})});/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pd="161",uc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},fc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},aO=0,xw=1,lO=2,u6=3,cO=0,Dy=1,Wh=2,Fs=3,Xs=0,ai=1,nr=2,Yn=0,Cc=1,Sw=2,ww=3,Ew=4,uO=5,qa=100,fO=101,dO=102,Tw=103,Mw=104,hO=200,pO=201,mO=202,gO=203,kv=204,Uv=205,vO=206,yO=207,_O=208,xO=209,SO=210,wO=211,EO=212,TO=213,MO=214,bO=0,AO=1,CO=2,xp=3,RO=4,PO=5,IO=6,LO=7,tm=0,DO=1,OO=2,$s=0,NO=1,kO=2,UO=3,eM=4,FO=5,zO=6,bw="attached",BO="detached",Oy=300,fa=301,Sl=302,Sp=303,wp=304,md=306,da=1e3,Ai=1001,Xf=1002,en=1003,Ep=1004,f6=1004,Za=1005,d6=1005,Zt=1006,If=1007,h6=1007,Ss=1008,p6=1008,Kn=1009,HO=1010,VO=1011,Ny=1012,tM=1013,vo=1014,Hr=1015,$c=1016,nM=1017,iM=1018,sa=1020,GO=1021,ir=1023,WO=1024,$O=1025,pl=1026,wl=1027,jO=1028,rM=1029,XO=1030,sM=1031,oM=1033,q0=33776,Z0=33777,Q0=33778,J0=33779,Aw=35840,Cw=35841,Rw=35842,Pw=35843,aM=36196,Iw=37492,Lw=37496,Dw=37808,Ow=37809,Nw=37810,kw=37811,Uw=37812,Fw=37813,zw=37814,Bw=37815,Hw=37816,Vw=37817,Gw=37818,Ww=37819,$w=37820,jw=37821,ev=36492,Xw=36494,Yw=36495,YO=36283,Kw=36284,qw=36285,Zw=36286,KO=2200,qO=2201,ZO=2202,Yf=2300,jc=2301,tv=2302,xc=2400,Sc=2401,Tp=2402,ky=2500,lM=2501,QO=0,cM=1,Fv=2,uM=3e3,ml=3001,Po=3200,Mp=3201,Nl=0,JO=1,rr="",St="srgb",qn="srgb-linear",Uy="display-p3",nm="display-p3-linear",bp="linear",an="srgb",Ap="rec709",Cp="p3",m6=0,dc=7680,g6=7681,v6=7682,y6=7683,_6=34055,x6=34056,S6=5386,w6=512,E6=513,T6=514,M6=515,b6=516,A6=517,C6=518,Qw=519,eN=512,tN=513,nN=514,fM=515,iN=516,rN=517,sN=518,oN=519,Rp=35044,R6=35048,P6=35040,I6=35045,L6=35049,D6=35041,O6=35046,N6=35050,k6=35042,U6="100",Jw="300 es",zv=1035,yo=2e3,Pp=2001;class ts{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Ui=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let DC=1234567;const Rc=Math.PI/180,Kf=180/Math.PI;function Yr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ui[n&255]+Ui[n>>8&255]+Ui[n>>16&255]+Ui[n>>24&255]+"-"+Ui[e&255]+Ui[e>>8&255]+"-"+Ui[e>>16&15|64]+Ui[e>>24&255]+"-"+Ui[t&63|128]+Ui[t>>8&255]+"-"+Ui[t>>16&255]+Ui[t>>24&255]+Ui[i&255]+Ui[i>>8&255]+Ui[i>>16&255]+Ui[i>>24&255]).toLowerCase()}function Fn(n,e,t){return Math.max(e,Math.min(t,n))}function dM(n,e){return(n%e+e)%e}function F6(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function z6(n,e,t){return n!==e?(t-n)/(e-n):0}function $h(n,e,t){return(1-t)*n+t*e}function B6(n,e,t,i){return $h(n,e,1-Math.exp(-t*i))}function H6(n,e=1){return e-Math.abs(dM(n,e*2)-e)}function V6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function G6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function W6(n,e){return n+Math.floor(Math.random()*(e-n+1))}function $6(n,e){return n+Math.random()*(e-n)}function j6(n){return n*(.5-Math.random())}function X6(n){n!==void 0&&(DC=n);let e=DC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Y6(n){return n*Rc}function K6(n){return n*Kf}function eE(n){return(n&n-1)===0&&n!==0}function q6(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Bv(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Z6(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*u,a*c);break;case"XZX":n.set(a*u,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function sr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function bt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const aN={DEG2RAD:Rc,RAD2DEG:Kf,generateUUID:Yr,clamp:Fn,euclideanModulo:dM,mapLinear:F6,inverseLerp:z6,lerp:$h,damp:B6,pingpong:H6,smoothstep:V6,smootherstep:G6,randInt:W6,randFloat:$6,randFloatSpread:j6,seededRandom:X6,degToRad:Y6,radToDeg:K6,isPowerOfTwo:eE,ceilPowerOfTwo:q6,floorPowerOfTwo:Bv,setQuaternionFromProperEuler:Z6,normalize:bt,denormalize:sr};class he{constructor(e=0,t=0){he.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Lt{constructor(e,t,i,r,s,o,a,l,c){Lt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],p=i[2],m=i[5],v=i[8],_=r[0],y=r[3],g=r[6],x=r[1],S=r[4],E=r[7],b=r[2],A=r[5],R=r[8];return s[0]=o*_+a*x+l*b,s[3]=o*y+a*S+l*A,s[6]=o*g+a*E+l*R,s[1]=c*_+u*x+f*b,s[4]=c*y+u*S+f*A,s[7]=c*g+u*E+f*R,s[2]=p*_+m*x+v*b,s[5]=p*y+m*S+v*A,s[8]=p*g+m*E+v*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,p=a*l-u*s,m=c*s-o*l,v=t*f+i*p+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=f*_,e[1]=(r*c-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=p*_,e[4]=(u*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=m*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Jx.makeScale(e,t)),this}rotate(e){return this.premultiply(Jx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Jx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Jx=new Lt;function lN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Q6={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function vf(n,e){return new Q6[n](e)}function Ip(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function cN(){const n=Ip("canvas");return n.style.display="block",n}const OC={};function Pc(n){n in OC||(OC[n]=!0,console.warn(n))}const NC=new Lt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),kC=new Lt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Dg={[qn]:{transfer:bp,primaries:Ap,toReference:n=>n,fromReference:n=>n},[St]:{transfer:an,primaries:Ap,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[nm]:{transfer:bp,primaries:Cp,toReference:n=>n.applyMatrix3(kC),fromReference:n=>n.applyMatrix3(NC)},[Uy]:{transfer:an,primaries:Cp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(kC),fromReference:n=>n.applyMatrix3(NC).convertLinearToSRGB()}},J6=new Set([qn,nm]),Kt={enabled:!0,_workingColorSpace:qn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!J6.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Dg[e].toReference,r=Dg[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Dg[n].primaries},getTransfer:function(n){return n===rr?bp:Dg[n].transfer}};function Lf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function e1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ru;class hM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ru===void 0&&(Ru=Ip("canvas")),Ru.width=e.width,Ru.height=e.height;const i=Ru.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ru}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ip("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Lf(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Lf(t[i]/255)*255):t[i]=Lf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let e8=0;class wc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:e8++}),this.uuid=Yr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(t1(r[o].image)):s.push(t1(r[o]))}else s=t1(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function t1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?hM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let t8=0;class rn extends ts{constructor(e=rn.DEFAULT_IMAGE,t=rn.DEFAULT_MAPPING,i=Ai,r=Ai,s=Zt,o=Ss,a=ir,l=Kn,c=rn.DEFAULT_ANISOTROPY,u=rr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:t8++}),this.uuid=Yr(),this.name="",this.source=new wc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new he(0,0),this.repeat=new he(1,1),this.center=new he(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Lt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Pc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===ml?St:rr),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Oy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case da:e.x=e.x-Math.floor(e.x);break;case Ai:e.x=e.x<0?0:1;break;case Xf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case da:e.y=e.y-Math.floor(e.y);break;case Ai:e.y=e.y<0?0:1;break;case Xf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Pc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===St?ml:uM}set encoding(e){Pc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ml?St:rr}}rn.DEFAULT_IMAGE=null;rn.DEFAULT_MAPPING=Oy;rn.DEFAULT_ANISOTROPY=1;class qt{constructor(e=0,t=0,i=0,r=1){qt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],p=l[1],m=l[5],v=l[9],_=l[2],y=l[6],g=l[10];if(Math.abs(u-p)<.01&&Math.abs(f-_)<.01&&Math.abs(v-y)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+_)<.1&&Math.abs(v+y)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,E=(m+1)/2,b=(g+1)/2,A=(u+p)/4,R=(f+_)/4,D=(v+y)/4;return S>E&&S>b?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=A/i,s=R/i):E>b?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=A/r,s=D/r):b<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(b),i=R/s,r=D/s),this.set(i,r,s,t),this}let x=Math.sqrt((y-v)*(y-v)+(f-_)*(f-_)+(p-u)*(p-u));return Math.abs(x)<.001&&(x=1),this.x=(y-v)/x,this.y=(f-_)/x,this.z=(p-u)/x,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class uN extends ts{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qt(0,0,e,t),this.scissorTest=!1,this.viewport=new qt(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(Pc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===ml?St:rr),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Zt,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new rn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new wc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class gn extends uN{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Fy extends rn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=en,this.minFilter=en,this.wrapR=Ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class n8 extends gn{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Fy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class pM extends rn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=en,this.minFilter=en,this.wrapR=Ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class i8 extends gn{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new pM(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class r8 extends gn{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class xi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=_;return}if(f!==_||l!==p||c!==m||u!==v){let y=1-a;const g=l*p+c*m+u*v+f*_,x=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const b=Math.sqrt(S),A=Math.atan2(b,g*x);y=Math.sin(y*A)/b,a=Math.sin(a*A)/b}const E=a*x;if(l=l*y+p*E,c=c*y+m*E,u=u*y+v*E,f=f*y+_*E,y===1-a){const b=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=b,c*=b,u*=b,f*=b}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+u*f+l*m-c*p,e[t+1]=l*v+u*p+c*f-a*m,e[t+2]=c*v+u*m+a*p-l*f,e[t+3]=u*v-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),f=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*u*f+c*m*v,this._y=c*m*f-p*u*v,this._z=c*u*v+p*m*f,this._w=c*u*f-p*m*v;break;case"YXZ":this._x=p*u*f+c*m*v,this._y=c*m*f-p*u*v,this._z=c*u*v-p*m*f,this._w=c*u*f+p*m*v;break;case"ZXY":this._x=p*u*f-c*m*v,this._y=c*m*f+p*u*v,this._z=c*u*v+p*m*f,this._w=c*u*f-p*m*v;break;case"ZYX":this._x=p*u*f-c*m*v,this._y=c*m*f+p*u*v,this._z=c*u*v-p*m*f,this._w=c*u*f+p*m*v;break;case"YZX":this._x=p*u*f+c*m*v,this._y=c*m*f+p*u*v,this._z=c*u*v-p*m*f,this._w=c*u*f-p*m*v;break;case"XZY":this._x=p*u*f-c*m*v,this._y=c*m*f-p*u*v,this._z=c*u*v+p*m*f,this._w=c*u*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],p=i+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(u-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Fn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class H{constructor(e=0,t=0,i=0){H.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(UC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(UC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*u,this.y=i+l*u+a*c-s*f,this.z=r+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return n1.copy(this).projectOnVector(e),this.sub(n1)}reflect(e){return this.sub(n1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Fn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const n1=new H,UC=new xi;class Gi{constructor(e=new H(1/0,1/0,1/0),t=new H(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Os.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Os.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Os.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Os):Os.fromBufferAttribute(s,o),Os.applyMatrix4(e.matrixWorld),this.expandByPoint(Os);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Og.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Og.copy(i.boundingBox)),Og.applyMatrix4(e.matrixWorld),this.union(Og)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Os),Os.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(lh),Ng.subVectors(this.max,lh),Pu.subVectors(e.a,lh),Iu.subVectors(e.b,lh),Lu.subVectors(e.c,lh),Da.subVectors(Iu,Pu),Oa.subVectors(Lu,Iu),Yl.subVectors(Pu,Lu);let t=[0,-Da.z,Da.y,0,-Oa.z,Oa.y,0,-Yl.z,Yl.y,Da.z,0,-Da.x,Oa.z,0,-Oa.x,Yl.z,0,-Yl.x,-Da.y,Da.x,0,-Oa.y,Oa.x,0,-Yl.y,Yl.x,0];return!i1(t,Pu,Iu,Lu,Ng)||(t=[1,0,0,0,1,0,0,0,1],!i1(t,Pu,Iu,Lu,Ng))?!1:(kg.crossVectors(Da,Oa),t=[kg.x,kg.y,kg.z],i1(t,Pu,Iu,Lu,Ng))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Os).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Os).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Uo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Uo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Uo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Uo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Uo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Uo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Uo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Uo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Uo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uo=[new H,new H,new H,new H,new H,new H,new H,new H],Os=new H,Og=new Gi,Pu=new H,Iu=new H,Lu=new H,Da=new H,Oa=new H,Yl=new H,lh=new H,Ng=new H,kg=new H,Kl=new H;function i1(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Kl.fromArray(n,s);const a=r.x*Math.abs(Kl.x)+r.y*Math.abs(Kl.y)+r.z*Math.abs(Kl.z),l=e.dot(Kl),c=t.dot(Kl),u=i.dot(Kl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const s8=new Gi,ch=new H,r1=new H;class Ri{constructor(e=new H,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):s8.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ch.subVectors(e,this.center);const t=ch.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(ch,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(r1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ch.copy(e.center).add(r1)),this.expandByPoint(ch.copy(e.center).sub(r1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Fo=new H,s1=new H,Ug=new H,Na=new H,o1=new H,Fg=new H,a1=new H;class su{constructor(e=new H,t=new H(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Fo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Fo.copy(this.origin).addScaledVector(this.direction,t),Fo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){s1.copy(e).add(t).multiplyScalar(.5),Ug.copy(t).sub(e).normalize(),Na.copy(this.origin).sub(s1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Ug),a=Na.dot(this.direction),l=-Na.dot(Ug),c=Na.lengthSq(),u=Math.abs(1-o*o);let f,p,m,v;if(u>0)if(f=o*l-a,p=o*a-l,v=s*u,f>=0)if(p>=-v)if(p<=v){const _=1/u;f*=_,p*=_,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(s1).addScaledVector(Ug,p),m}intersectSphere(e,t){Fo.subVectors(e.center,this.origin);const i=Fo.dot(this.direction),r=Fo.dot(Fo)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Fo)!==null}intersectTriangle(e,t,i,r,s){o1.subVectors(t,e),Fg.subVectors(i,e),a1.crossVectors(o1,Fg);let o=this.direction.dot(a1),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Na.subVectors(this.origin,e);const l=a*this.direction.dot(Fg.crossVectors(Na,Fg));if(l<0)return null;const c=a*this.direction.dot(o1.cross(Na));if(c<0||l+c>o)return null;const u=-a*Na.dot(a1);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ft{constructor(e,t,i,r,s,o,a,l,c,u,f,p,m,v,_,y){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,f,p,m,v,_,y)}set(e,t,i,r,s,o,a,l,c,u,f,p,m,v,_,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=_,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Du.setFromMatrixColumn(e,0).length(),s=1/Du.setFromMatrixColumn(e,1).length(),o=1/Du.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*f,v=a*u,_=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=m+v*c,t[5]=p-_*c,t[9]=-a*l,t[2]=_-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*f,v=c*u,_=c*f;t[0]=p+_*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=m*a-v,t[6]=_+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*f,v=c*u,_=c*f;t[0]=p-_*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*u,t[9]=_-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*f,v=a*u,_=a*f;t[0]=l*u,t[4]=v*c-m,t[8]=p*c+_,t[1]=l*f,t[5]=_*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*u,t[4]=_-p*f,t[8]=v*f+m,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*f+v,t[10]=p-_*f}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=p*f+_,t[5]=o*u,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*u,t[10]=_*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(o8,e,a8)}lookAt(e,t,i){const r=this.elements;return Nr.subVectors(e,t),Nr.lengthSq()===0&&(Nr.z=1),Nr.normalize(),ka.crossVectors(i,Nr),ka.lengthSq()===0&&(Math.abs(i.z)===1?Nr.x+=1e-4:Nr.z+=1e-4,Nr.normalize(),ka.crossVectors(i,Nr)),ka.normalize(),zg.crossVectors(Nr,ka),r[0]=ka.x,r[4]=zg.x,r[8]=Nr.x,r[1]=ka.y,r[5]=zg.y,r[9]=Nr.y,r[2]=ka.z,r[6]=zg.z,r[10]=Nr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],p=i[9],m=i[13],v=i[2],_=i[6],y=i[10],g=i[14],x=i[3],S=i[7],E=i[11],b=i[15],A=r[0],R=r[4],D=r[8],O=r[12],M=r[1],I=r[5],U=r[9],j=r[13],z=r[2],K=r[6],q=r[10],ee=r[14],N=r[3],V=r[7],W=r[11],Q=r[15];return s[0]=o*A+a*M+l*z+c*N,s[4]=o*R+a*I+l*K+c*V,s[8]=o*D+a*U+l*q+c*W,s[12]=o*O+a*j+l*ee+c*Q,s[1]=u*A+f*M+p*z+m*N,s[5]=u*R+f*I+p*K+m*V,s[9]=u*D+f*U+p*q+m*W,s[13]=u*O+f*j+p*ee+m*Q,s[2]=v*A+_*M+y*z+g*N,s[6]=v*R+_*I+y*K+g*V,s[10]=v*D+_*U+y*q+g*W,s[14]=v*O+_*j+y*ee+g*Q,s[3]=x*A+S*M+E*z+b*N,s[7]=x*R+S*I+E*K+b*V,s[11]=x*D+S*U+E*q+b*W,s[15]=x*O+S*j+E*ee+b*Q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],p=e[10],m=e[14],v=e[3],_=e[7],y=e[11],g=e[15];return v*(+s*l*f-r*c*f-s*a*p+i*c*p+r*a*m-i*l*m)+_*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*u-s*l*u)+y*(+t*c*f-t*a*m-s*o*f+i*o*m+s*a*u-i*c*u)+g*(-r*a*u-t*l*f+t*a*p+r*o*f-i*o*p+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],p=e[10],m=e[11],v=e[12],_=e[13],y=e[14],g=e[15],x=f*y*c-_*p*c+_*l*m-a*y*m-f*l*g+a*p*g,S=v*p*c-u*y*c-v*l*m+o*y*m+u*l*g-o*p*g,E=u*_*c-v*f*c+v*a*m-o*_*m-u*a*g+o*f*g,b=v*f*l-u*_*l-v*a*p+o*_*p+u*a*y-o*f*y,A=t*x+i*S+r*E+s*b;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/A;return e[0]=x*R,e[1]=(_*p*s-f*y*s-_*r*m+i*y*m+f*r*g-i*p*g)*R,e[2]=(a*y*s-_*l*s+_*r*c-i*y*c-a*r*g+i*l*g)*R,e[3]=(f*l*s-a*p*s-f*r*c+i*p*c+a*r*m-i*l*m)*R,e[4]=S*R,e[5]=(u*y*s-v*p*s+v*r*m-t*y*m-u*r*g+t*p*g)*R,e[6]=(v*l*s-o*y*s-v*r*c+t*y*c+o*r*g-t*l*g)*R,e[7]=(o*p*s-u*l*s+u*r*c-t*p*c-o*r*m+t*l*m)*R,e[8]=E*R,e[9]=(v*f*s-u*_*s-v*i*m+t*_*m+u*i*g-t*f*g)*R,e[10]=(o*_*s-v*a*s+v*i*c-t*_*c-o*i*g+t*a*g)*R,e[11]=(u*a*s-o*f*s-u*i*c+t*f*c+o*i*m-t*a*m)*R,e[12]=b*R,e[13]=(u*_*r-v*f*r+v*i*p-t*_*p-u*i*y+t*f*y)*R,e[14]=(v*a*r-o*_*r-v*i*l+t*_*l+o*i*y-t*a*y)*R,e[15]=(o*f*r-u*a*r+u*i*l-t*f*l-o*i*p+t*a*p)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,p=s*c,m=s*u,v=s*f,_=o*u,y=o*f,g=a*f,x=l*c,S=l*u,E=l*f,b=i.x,A=i.y,R=i.z;return r[0]=(1-(_+g))*b,r[1]=(m+E)*b,r[2]=(v-S)*b,r[3]=0,r[4]=(m-E)*A,r[5]=(1-(p+g))*A,r[6]=(y+x)*A,r[7]=0,r[8]=(v+S)*R,r[9]=(y-x)*R,r[10]=(1-(p+_))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Du.set(r[0],r[1],r[2]).length();const o=Du.set(r[4],r[5],r[6]).length(),a=Du.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ns.copy(this);const c=1/s,u=1/o,f=1/a;return Ns.elements[0]*=c,Ns.elements[1]*=c,Ns.elements[2]*=c,Ns.elements[4]*=u,Ns.elements[5]*=u,Ns.elements[6]*=u,Ns.elements[8]*=f,Ns.elements[9]*=f,Ns.elements[10]*=f,t.setFromRotationMatrix(Ns),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=yo){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),f=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===yo)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Pp)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=yo){const l=this.elements,c=1/(t-e),u=1/(i-r),f=1/(o-s),p=(t+e)*c,m=(i+r)*u;let v,_;if(a===yo)v=(o+s)*f,_=-2*f;else if(a===Pp)v=s*f,_=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=_,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Du=new H,Ns=new ft,o8=new H(0,0,0),a8=new H(1,1,1),ka=new H,zg=new H,Nr=new H,FC=new ft,zC=new xi;class im{constructor(e=0,t=0,i=0,r=im.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Fn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Fn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Fn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Fn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Fn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return FC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(FC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return zC.setFromEuler(this),this.setFromQuaternion(zC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}im.DEFAULT_ORDER="XYZ";class Ic{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let l8=0;const BC=new H,Ou=new xi,zo=new ft,Bg=new H,uh=new H,c8=new H,u8=new xi,HC=new H(1,0,0),VC=new H(0,1,0),GC=new H(0,0,1),f8={type:"added"},d8={type:"removed"};class Vt extends ts{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:l8++}),this.uuid=Yr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Vt.DEFAULT_UP.clone();const e=new H,t=new im,i=new xi,r=new H(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ft},normalMatrix:{value:new Lt}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=Vt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Vt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ic,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ou.setFromAxisAngle(e,t),this.quaternion.multiply(Ou),this}rotateOnWorldAxis(e,t){return Ou.setFromAxisAngle(e,t),this.quaternion.premultiply(Ou),this}rotateX(e){return this.rotateOnAxis(HC,e)}rotateY(e){return this.rotateOnAxis(VC,e)}rotateZ(e){return this.rotateOnAxis(GC,e)}translateOnAxis(e,t){return BC.copy(e).applyQuaternion(this.quaternion),this.position.add(BC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(HC,e)}translateY(e){return this.translateOnAxis(VC,e)}translateZ(e){return this.translateOnAxis(GC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Bg.copy(e):Bg.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),uh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zo.lookAt(uh,Bg,this.up):zo.lookAt(Bg,uh,this.up),this.quaternion.setFromRotationMatrix(zo),r&&(zo.extractRotation(r.matrixWorld),Ou.setFromRotationMatrix(zo),this.quaternion.premultiply(Ou.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(f8)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(d8)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),zo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zo.multiply(e.parent.matrixWorld)),e.applyMatrix4(zo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uh,e,c8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uh,u8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Vt.DEFAULT_UP=new H(0,1,0);Vt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Vt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ks=new H,Bo=new H,l1=new H,Ho=new H,Nu=new H,ku=new H,WC=new H,c1=new H,u1=new H,f1=new H;class Vr{constructor(e=new H,t=new H,i=new H){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ks.subVectors(e,t),r.cross(ks);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ks.subVectors(r,t),Bo.subVectors(i,t),l1.subVectors(e,t);const o=ks.dot(ks),a=ks.dot(Bo),l=ks.dot(l1),c=Bo.dot(Bo),u=Bo.dot(l1),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*u)*p,v=(o*u-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ho)===null?!1:Ho.x>=0&&Ho.y>=0&&Ho.x+Ho.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Ho)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ho.x),l.addScaledVector(o,Ho.y),l.addScaledVector(a,Ho.z),l)}static isFrontFacing(e,t,i,r){return ks.subVectors(i,t),Bo.subVectors(e,t),ks.cross(Bo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ks.subVectors(this.c,this.b),Bo.subVectors(this.a,this.b),ks.cross(Bo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Vr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Vr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Vr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Nu.subVectors(r,i),ku.subVectors(s,i),c1.subVectors(e,i);const l=Nu.dot(c1),c=ku.dot(c1);if(l<=0&&c<=0)return t.copy(i);u1.subVectors(e,r);const u=Nu.dot(u1),f=ku.dot(u1);if(u>=0&&f<=u)return t.copy(r);const p=l*f-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Nu,o);f1.subVectors(e,s);const m=Nu.dot(f1),v=ku.dot(f1);if(v>=0&&m<=v)return t.copy(s);const _=m*c-l*v;if(_<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(ku,a);const y=u*v-m*f;if(y<=0&&f-u>=0&&m-v>=0)return WC.subVectors(s,r),a=(f-u)/(f-u+(m-v)),t.copy(r).addScaledVector(WC,a);const g=1/(y+_+p);return o=_*g,a=p*g,t.copy(i).addScaledVector(Nu,o).addScaledVector(ku,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const fN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ua={h:0,s:0,l:0},Hg={h:0,s:0,l:0};function d1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Ie=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=St){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Kt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Kt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Kt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Kt.workingColorSpace){if(e=dM(e,1),t=Fn(t,0,1),i=Fn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=d1(o,s,e+1/3),this.g=d1(o,s,e),this.b=d1(o,s,e-1/3)}return Kt.toWorkingColorSpace(this,r),this}setStyle(e,t=St){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=St){const i=fN[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lf(e.r),this.g=Lf(e.g),this.b=Lf(e.b),this}copyLinearToSRGB(e){return this.r=e1(e.r),this.g=e1(e.g),this.b=e1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=St){return Kt.fromWorkingColorSpace(Fi.copy(this),e),Math.round(Fn(Fi.r*255,0,255))*65536+Math.round(Fn(Fi.g*255,0,255))*256+Math.round(Fn(Fi.b*255,0,255))}getHexString(e=St){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Kt.workingColorSpace){Kt.fromWorkingColorSpace(Fi.copy(this),t);const i=Fi.r,r=Fi.g,s=Fi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Kt.workingColorSpace){return Kt.fromWorkingColorSpace(Fi.copy(this),t),e.r=Fi.r,e.g=Fi.g,e.b=Fi.b,e}getStyle(e=St){Kt.fromWorkingColorSpace(Fi.copy(this),e);const t=Fi.r,i=Fi.g,r=Fi.b;return e!==St?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ua),this.setHSL(Ua.h+e,Ua.s+t,Ua.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ua),e.getHSL(Hg);const i=$h(Ua.h,Hg.h,t),r=$h(Ua.s,Hg.s,t),s=$h(Ua.l,Hg.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Fi=new Ie;Ie.NAMES=fN;let h8=0;class Bn extends ts{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:h8++}),this.uuid=Yr(),this.name="",this.type="Material",this.blending=Cc,this.side=Xs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=kv,this.blendDst=Uv,this.blendEquation=qa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ie(0,0,0),this.blendAlpha=0,this.depthFunc=xp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Qw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=dc,this.stencilZFail=dc,this.stencilZPass=dc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Cc&&(i.blending=this.blending),this.side!==Xs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==kv&&(i.blendSrc=this.blendSrc),this.blendDst!==Uv&&(i.blendDst=this.blendDst),this.blendEquation!==qa&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==xp&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Qw&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==dc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==dc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==dc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class $r extends Bn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zo=p8();function p8(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function gr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Fn(n,-65504,65504),Zo.floatView[0]=n;const e=Zo.uint32View[0],t=e>>23&511;return Zo.baseTable[t]+((e&8388607)>>Zo.shiftTable[t])}function Ih(n){const e=n>>10;return Zo.uint32View[0]=Zo.mantissaTable[Zo.offsetTable[e]+(n&1023)]+Zo.exponentTable[e],Zo.floatView[0]}const m8={toHalfFloat:gr,fromHalfFloat:Ih},Jn=new H,Vg=new he;class Ut{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Rp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Hr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Pc("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Vg.fromBufferAttribute(this,t),Vg.applyMatrix3(e),this.setXY(t,Vg.x,Vg.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix3(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix4(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Jn.fromBufferAttribute(this,t),Jn.applyNormalMatrix(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Jn.fromBufferAttribute(this,t),Jn.transformDirection(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=sr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=bt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Rp&&(e.usage=this.usage),e}}class g8 extends Ut{constructor(e,t,i){super(new Int8Array(e),t,i)}}class v8 extends Ut{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class y8 extends Ut{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class _8 extends Ut{constructor(e,t,i){super(new Int16Array(e),t,i)}}class mM extends Ut{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class x8 extends Ut{constructor(e,t,i){super(new Int32Array(e),t,i)}}class gM extends Ut{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class S8 extends Ut{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Ih(this.array[e*this.itemSize]);return this.normalized&&(t=sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize]=gr(t),this}getY(e){let t=Ih(this.array[e*this.itemSize+1]);return this.normalized&&(t=sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+1]=gr(t),this}getZ(e){let t=Ih(this.array[e*this.itemSize+2]);return this.normalized&&(t=sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+2]=gr(t),this}getW(e){let t=Ih(this.array[e*this.itemSize+3]);return this.normalized&&(t=sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+3]=gr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.array[e+0]=gr(t),this.array[e+1]=gr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.array[e+0]=gr(t),this.array[e+1]=gr(i),this.array[e+2]=gr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.array[e+0]=gr(t),this.array[e+1]=gr(i),this.array[e+2]=gr(r),this.array[e+3]=gr(s),this}}class tt extends Ut{constructor(e,t,i){super(new Float32Array(e),t,i)}}class w8 extends Ut{constructor(e,t,i){super(new Float64Array(e),t,i)}}let E8=0;const ps=new ft,h1=new Vt,Uu=new H,kr=new Gi,fh=new Gi,mi=new H;class Mt extends ts{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:E8++}),this.uuid=Yr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(lN(e)?gM:mM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Lt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ps.makeRotationFromQuaternion(e),this.applyMatrix4(ps),this}rotateX(e){return ps.makeRotationX(e),this.applyMatrix4(ps),this}rotateY(e){return ps.makeRotationY(e),this.applyMatrix4(ps),this}rotateZ(e){return ps.makeRotationZ(e),this.applyMatrix4(ps),this}translate(e,t,i){return ps.makeTranslation(e,t,i),this.applyMatrix4(ps),this}scale(e,t,i){return ps.makeScale(e,t,i),this.applyMatrix4(ps),this}lookAt(e){return h1.lookAt(e),h1.updateMatrix(),this.applyMatrix4(h1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Uu).negate(),this.translate(Uu.x,Uu.y,Uu.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new tt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new H(-1/0,-1/0,-1/0),new H(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];kr.setFromBufferAttribute(s),this.morphTargetsRelative?(mi.addVectors(this.boundingBox.min,kr.min),this.boundingBox.expandByPoint(mi),mi.addVectors(this.boundingBox.max,kr.max),this.boundingBox.expandByPoint(mi)):(this.boundingBox.expandByPoint(kr.min),this.boundingBox.expandByPoint(kr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ri);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new H,1/0);return}if(e){const i=this.boundingSphere.center;if(kr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];fh.setFromBufferAttribute(a),this.morphTargetsRelative?(mi.addVectors(kr.min,fh.min),kr.expandByPoint(mi),mi.addVectors(kr.max,fh.max),kr.expandByPoint(mi)):(kr.expandByPoint(fh.min),kr.expandByPoint(fh.max))}kr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)mi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(mi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)mi.fromBufferAttribute(a,c),l&&(Uu.fromBufferAttribute(e,c),mi.add(Uu)),r=Math.max(r,i.distanceToSquared(mi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ut(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let M=0;M<a;M++)c[M]=new H,u[M]=new H;const f=new H,p=new H,m=new H,v=new he,_=new he,y=new he,g=new H,x=new H;function S(M,I,U){f.fromArray(r,M*3),p.fromArray(r,I*3),m.fromArray(r,U*3),v.fromArray(o,M*2),_.fromArray(o,I*2),y.fromArray(o,U*2),p.sub(f),m.sub(f),_.sub(v),y.sub(v);const j=1/(_.x*y.y-y.x*_.y);isFinite(j)&&(g.copy(p).multiplyScalar(y.y).addScaledVector(m,-_.y).multiplyScalar(j),x.copy(m).multiplyScalar(_.x).addScaledVector(p,-y.x).multiplyScalar(j),c[M].add(g),c[I].add(g),c[U].add(g),u[M].add(x),u[I].add(x),u[U].add(x))}let E=this.groups;E.length===0&&(E=[{start:0,count:i.length}]);for(let M=0,I=E.length;M<I;++M){const U=E[M],j=U.start,z=U.count;for(let K=j,q=j+z;K<q;K+=3)S(i[K+0],i[K+1],i[K+2])}const b=new H,A=new H,R=new H,D=new H;function O(M){R.fromArray(s,M*3),D.copy(R);const I=c[M];b.copy(I),b.sub(R.multiplyScalar(R.dot(I))).normalize(),A.crossVectors(D,I);const j=A.dot(u[M])<0?-1:1;l[M*4]=b.x,l[M*4+1]=b.y,l[M*4+2]=b.z,l[M*4+3]=j}for(let M=0,I=E.length;M<I;++M){const U=E[M],j=U.start,z=U.count;for(let K=j,q=j+z;K<q;K+=3)O(i[K+0]),O(i[K+1]),O(i[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ut(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new H,s=new H,o=new H,a=new H,l=new H,c=new H,u=new H,f=new H;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),_=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,y),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,y),a.add(u),l.add(u),c.add(u),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)mi.fromBufferAttribute(e,t),mi.normalize(),e.setXYZ(t,mi.x,mi.y,mi.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,p=new c.constructor(l.length*u);let m=0,v=0;for(let _=0,y=l.length;_<y;_++){a.isInterleavedBufferAttribute?m=l[_]*a.data.stride+a.offset:m=l[_]*u;for(let g=0;g<u;g++)p[v++]=c[m++]}return new Ut(p,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const p=c[u],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];u.push(m.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let p=0,m=f.length;p<m;p++)u.push(f[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const $C=new ft,ql=new su,Gg=new Ri,jC=new H,Fu=new H,zu=new H,Bu=new H,p1=new H,Wg=new H,$g=new he,jg=new he,Xg=new he,XC=new H,YC=new H,KC=new H,Yg=new H,Kg=new H;class Pn extends Vt{constructor(e=new Mt,t=new $r){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Wg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(p1.fromBufferAttribute(f,e),o?Wg.addScaledVector(p1,u):Wg.addScaledVector(p1.sub(t),u))}t.add(Wg)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Gg.copy(i.boundingSphere),Gg.applyMatrix4(s),ql.copy(e.ray).recast(e.near),!(Gg.containsPoint(ql.origin)===!1&&(ql.intersectSphere(Gg,jC)===null||ql.origin.distanceToSquared(jC)>(e.far-e.near)**2))&&($C.copy(s).invert(),ql.copy(e.ray).applyMatrix4($C),!(i.boundingBox!==null&&ql.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ql)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,_=p.length;v<_;v++){const y=p[v],g=o[y.materialIndex],x=Math.max(y.start,m.start),S=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let E=x,b=S;E<b;E+=3){const A=a.getX(E),R=a.getX(E+1),D=a.getX(E+2);r=qg(this,g,e,i,c,u,f,A,R,D),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),_=Math.min(a.count,m.start+m.count);for(let y=v,g=_;y<g;y+=3){const x=a.getX(y),S=a.getX(y+1),E=a.getX(y+2);r=qg(this,o,e,i,c,u,f,x,S,E),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,_=p.length;v<_;v++){const y=p[v],g=o[y.materialIndex],x=Math.max(y.start,m.start),S=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let E=x,b=S;E<b;E+=3){const A=E,R=E+1,D=E+2;r=qg(this,g,e,i,c,u,f,A,R,D),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),_=Math.min(l.count,m.start+m.count);for(let y=v,g=_;y<g;y+=3){const x=y,S=y+1,E=y+2;r=qg(this,o,e,i,c,u,f,x,S,E),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}}function T8(n,e,t,i,r,s,o,a){let l;if(e.side===ai?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Xs,a),l===null)return null;Kg.copy(a),Kg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Kg);return c<t.near||c>t.far?null:{distance:c,point:Kg.clone(),object:n}}function qg(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Fu),n.getVertexPosition(l,zu),n.getVertexPosition(c,Bu);const u=T8(n,e,t,i,Fu,zu,Bu,Yg);if(u){r&&($g.fromBufferAttribute(r,a),jg.fromBufferAttribute(r,l),Xg.fromBufferAttribute(r,c),u.uv=Vr.getInterpolation(Yg,Fu,zu,Bu,$g,jg,Xg,new he)),s&&($g.fromBufferAttribute(s,a),jg.fromBufferAttribute(s,l),Xg.fromBufferAttribute(s,c),u.uv1=Vr.getInterpolation(Yg,Fu,zu,Bu,$g,jg,Xg,new he),u.uv2=u.uv1),o&&(XC.fromBufferAttribute(o,a),YC.fromBufferAttribute(o,l),KC.fromBufferAttribute(o,c),u.normal=Vr.getInterpolation(Yg,Fu,zu,Bu,XC,YC,KC,new H),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new H,materialIndex:0};Vr.getNormal(Fu,zu,Bu,f.normal),u.face=f}return u}class ou extends Mt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new tt(c,3)),this.setAttribute("normal",new tt(u,3)),this.setAttribute("uv",new tt(f,2));function v(_,y,g,x,S,E,b,A,R,D,O){const M=E/R,I=b/D,U=E/2,j=b/2,z=A/2,K=R+1,q=D+1;let ee=0,N=0;const V=new H;for(let W=0;W<q;W++){const Q=W*I-j;for(let ie=0;ie<K;ie++){const Me=ie*M-U;V[_]=Me*x,V[y]=Q*S,V[g]=z,c.push(V.x,V.y,V.z),V[_]=0,V[y]=0,V[g]=A>0?1:-1,u.push(V.x,V.y,V.z),f.push(ie/R),f.push(1-W/D),ee+=1}}for(let W=0;W<D;W++)for(let Q=0;Q<R;Q++){const ie=p+Q+K*W,Me=p+Q+K*(W+1),te=p+(Q+1)+K*(W+1),ue=p+(Q+1)+K*W;l.push(ie,Me,ue),l.push(Me,te,ue),N+=6}a.addGroup(m,N,O),m+=N,p+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ou(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function qf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ji(n){const e={};for(let t=0;t<n.length;t++){const i=qf(n[t]);for(const r in i)e[r]=i[r]}return e}function M8(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function dN(n){return n.getRenderTarget()===null?n.outputColorSpace:Kt.workingColorSpace}const hN={clone:qf,merge:Ji};var b8=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,A8=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Sn extends Bn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=b8,this.fragmentShader=A8,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qf(e.uniforms),this.uniformsGroups=M8(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class gd extends Vt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft,this.coordinateSystem=yo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Fa=new H,qC=new he,ZC=new he;class cn extends gd{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Kf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Rc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Kf*2*Math.atan(Math.tan(Rc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Fa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Fa.x,Fa.y).multiplyScalar(-e/Fa.z),Fa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Fa.x,Fa.y).multiplyScalar(-e/Fa.z)}getViewSize(e,t){return this.getViewBounds(e,qC,ZC),t.subVectors(ZC,qC)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Rc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Hu=-90,Vu=1;class pN extends Vt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new cn(Hu,Vu,e,t);r.layers=this.layers,this.add(r);const s=new cn(Hu,Vu,e,t);s.layers=this.layers,this.add(s);const o=new cn(Hu,Vu,e,t);o.layers=this.layers,this.add(o);const a=new cn(Hu,Vu,e,t);a.layers=this.layers,this.add(a);const l=new cn(Hu,Vu,e,t);l.layers=this.layers,this.add(l);const c=new cn(Hu,Vu,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===yo)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Pp)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=_,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(f,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class rm extends rn{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:fa,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class mN extends gn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(Pc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===ml?St:rr),this.texture=new rm(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Zt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ou(5,5,5),s=new Sn({name:"CubemapFromEquirect",uniforms:qf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ai,blending:Yn});s.uniforms.tEquirect.value=t;const o=new Pn(r,s),a=t.minFilter;return t.minFilter===Ss&&(t.minFilter=Zt),new pN(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const m1=new H,C8=new H,R8=new Lt;class Yo{constructor(e=new H(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=m1.subVectors(i,t).cross(C8.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(m1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||R8.getNormalMatrix(e),r=this.coplanarPoint(m1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Zl=new Ri,Zg=new H;class sm{constructor(e=new Yo,t=new Yo,i=new Yo,r=new Yo,s=new Yo,o=new Yo){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=yo){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],f=r[6],p=r[7],m=r[8],v=r[9],_=r[10],y=r[11],g=r[12],x=r[13],S=r[14],E=r[15];if(i[0].setComponents(l-s,p-c,y-m,E-g).normalize(),i[1].setComponents(l+s,p+c,y+m,E+g).normalize(),i[2].setComponents(l+o,p+u,y+v,E+x).normalize(),i[3].setComponents(l-o,p-u,y-v,E-x).normalize(),i[4].setComponents(l-a,p-f,y-_,E-S).normalize(),t===yo)i[5].setComponents(l+a,p+f,y+_,E+S).normalize();else if(t===Pp)i[5].setComponents(a,f,_,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Zl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Zl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Zl)}intersectsSprite(e){return Zl.center.set(0,0,0),Zl.radius=.7071067811865476,Zl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Zl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Zg.x=r.normal.x>0?e.max.x:e.min.x,Zg.y=r.normal.y>0?e.max.y:e.min.y,Zg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Zg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function gN(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function P8(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const f=c.array,p=c.usage,m=f.byteLength,v=n.createBuffer();n.bindBuffer(u,v),n.bufferData(u,f,p),c.onUploadCallback();let _;if(f instanceof Float32Array)_=n.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)_=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=n.SHORT;else if(f instanceof Uint32Array)_=n.UNSIGNED_INT;else if(f instanceof Int32Array)_=n.INT;else if(f instanceof Int8Array)_=n.BYTE;else if(f instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,u,f){const p=u.array,m=u._updateRange,v=u.updateRanges;if(n.bindBuffer(f,c),m.count===-1&&v.length===0&&n.bufferSubData(f,0,p),v.length!==0){for(let _=0,y=v.length;_<y;_++){const g=v[_];t?n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}u.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const p=i.get(c);(!p||p.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);if(f===void 0)i.set(c,r(c,u));else if(f.version<c.version){if(f.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,c,u),f.version=c.version}}return{get:o,remove:a,update:l}}class vd extends Mt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,f=e/a,p=t/l,m=[],v=[],_=[],y=[];for(let g=0;g<u;g++){const x=g*p-o;for(let S=0;S<c;S++){const E=S*f-s;v.push(E,-x,0),_.push(0,0,1),y.push(S/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const S=x+c*g,E=x+c*(g+1),b=x+1+c*(g+1),A=x+1+c*g;m.push(S,E,A),m.push(E,b,A)}this.setIndex(m),this.setAttribute("position",new tt(v,3)),this.setAttribute("normal",new tt(_,3)),this.setAttribute("uv",new tt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vd(e.width,e.height,e.widthSegments,e.heightSegments)}}var I8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,L8=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,D8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,O8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,N8=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,k8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,U8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,F8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,z8=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,B8=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,H8=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,V8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,G8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,W8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,$8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,j8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,X8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Y8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,K8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,q8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Z8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Q8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,J8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,eW=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,tW=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nW=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,iW=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rW=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,sW=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,oW=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,aW="gl_FragColor = linearToOutputTexel( gl_FragColor );",lW=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,cW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,uW=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,fW=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dW=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,hW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,pW=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,mW=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,gW=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,vW=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,yW=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_W=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,xW=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,SW=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wW=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,EW=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,TW=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,MW=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bW=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,AW=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,CW=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,RW=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,PW=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,IW=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,LW=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,DW=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,OW=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,NW=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kW=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,UW=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,FW=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,zW=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,BW=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,HW=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,VW=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,GW=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,WW=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,$W=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,jW=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,XW=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,YW=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,KW=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,qW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ZW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,QW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,JW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,e9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,t9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,n9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,i9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,r9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,s9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,o9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,a9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,l9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,c9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,u9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,f9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,d9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,h9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,p9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,m9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,g9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,v9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,y9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,x9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,S9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,w9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,E9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,T9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,M9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,b9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,A9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,C9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,R9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const P9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,I9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,L9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,D9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,O9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,N9=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,k9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,U9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,F9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,z9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,B9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,H9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,V9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,G9=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,W9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,$9=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,X9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y9=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,K9=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Z9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Q9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,J9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e$=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,t$=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n$=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i$=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r$=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,s$=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,o$=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a$=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,l$=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,c$=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ct={alphahash_fragment:I8,alphahash_pars_fragment:L8,alphamap_fragment:D8,alphamap_pars_fragment:O8,alphatest_fragment:N8,alphatest_pars_fragment:k8,aomap_fragment:U8,aomap_pars_fragment:F8,batching_pars_vertex:z8,batching_vertex:B8,begin_vertex:H8,beginnormal_vertex:V8,bsdfs:G8,iridescence_fragment:W8,bumpmap_pars_fragment:$8,clipping_planes_fragment:j8,clipping_planes_pars_fragment:X8,clipping_planes_pars_vertex:Y8,clipping_planes_vertex:K8,color_fragment:q8,color_pars_fragment:Z8,color_pars_vertex:Q8,color_vertex:J8,common:eW,cube_uv_reflection_fragment:tW,defaultnormal_vertex:nW,displacementmap_pars_vertex:iW,displacementmap_vertex:rW,emissivemap_fragment:sW,emissivemap_pars_fragment:oW,colorspace_fragment:aW,colorspace_pars_fragment:lW,envmap_fragment:cW,envmap_common_pars_fragment:uW,envmap_pars_fragment:fW,envmap_pars_vertex:dW,envmap_physical_pars_fragment:TW,envmap_vertex:hW,fog_vertex:pW,fog_pars_vertex:mW,fog_fragment:gW,fog_pars_fragment:vW,gradientmap_pars_fragment:yW,lightmap_fragment:_W,lightmap_pars_fragment:xW,lights_lambert_fragment:SW,lights_lambert_pars_fragment:wW,lights_pars_begin:EW,lights_toon_fragment:MW,lights_toon_pars_fragment:bW,lights_phong_fragment:AW,lights_phong_pars_fragment:CW,lights_physical_fragment:RW,lights_physical_pars_fragment:PW,lights_fragment_begin:IW,lights_fragment_maps:LW,lights_fragment_end:DW,logdepthbuf_fragment:OW,logdepthbuf_pars_fragment:NW,logdepthbuf_pars_vertex:kW,logdepthbuf_vertex:UW,map_fragment:FW,map_pars_fragment:zW,map_particle_fragment:BW,map_particle_pars_fragment:HW,metalnessmap_fragment:VW,metalnessmap_pars_fragment:GW,morphcolor_vertex:WW,morphnormal_vertex:$W,morphtarget_pars_vertex:jW,morphtarget_vertex:XW,normal_fragment_begin:YW,normal_fragment_maps:KW,normal_pars_fragment:qW,normal_pars_vertex:ZW,normal_vertex:QW,normalmap_pars_fragment:JW,clearcoat_normal_fragment_begin:e9,clearcoat_normal_fragment_maps:t9,clearcoat_pars_fragment:n9,iridescence_pars_fragment:i9,opaque_fragment:r9,packing:s9,premultiplied_alpha_fragment:o9,project_vertex:a9,dithering_fragment:l9,dithering_pars_fragment:c9,roughnessmap_fragment:u9,roughnessmap_pars_fragment:f9,shadowmap_pars_fragment:d9,shadowmap_pars_vertex:h9,shadowmap_vertex:p9,shadowmask_pars_fragment:m9,skinbase_vertex:g9,skinning_pars_vertex:v9,skinning_vertex:y9,skinnormal_vertex:_9,specularmap_fragment:x9,specularmap_pars_fragment:S9,tonemapping_fragment:w9,tonemapping_pars_fragment:E9,transmission_fragment:T9,transmission_pars_fragment:M9,uv_pars_fragment:b9,uv_pars_vertex:A9,uv_vertex:C9,worldpos_vertex:R9,background_vert:P9,background_frag:I9,backgroundCube_vert:L9,backgroundCube_frag:D9,cube_vert:O9,cube_frag:N9,depth_vert:k9,depth_frag:U9,distanceRGBA_vert:F9,distanceRGBA_frag:z9,equirect_vert:B9,equirect_frag:H9,linedashed_vert:V9,linedashed_frag:G9,meshbasic_vert:W9,meshbasic_frag:$9,meshlambert_vert:j9,meshlambert_frag:X9,meshmatcap_vert:Y9,meshmatcap_frag:K9,meshnormal_vert:q9,meshnormal_frag:Z9,meshphong_vert:Q9,meshphong_frag:J9,meshphysical_vert:e$,meshphysical_frag:t$,meshtoon_vert:n$,meshtoon_frag:i$,points_vert:r$,points_frag:s$,shadow_vert:o$,shadow_frag:a$,sprite_vert:l$,sprite_frag:c$},Ne={common:{diffuse:{value:new Ie(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Lt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Lt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Lt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Lt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Lt},normalScale:{value:new he(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Lt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Lt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Lt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Lt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ie(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ie(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0},uvTransform:{value:new Lt}},sprite:{diffuse:{value:new Ie(16777215)},opacity:{value:1},center:{value:new he(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}}},Vs={basic:{uniforms:Ji([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.fog]),vertexShader:Ct.meshbasic_vert,fragmentShader:Ct.meshbasic_frag},lambert:{uniforms:Ji([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new Ie(0)}}]),vertexShader:Ct.meshlambert_vert,fragmentShader:Ct.meshlambert_frag},phong:{uniforms:Ji([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new Ie(0)},specular:{value:new Ie(1118481)},shininess:{value:30}}]),vertexShader:Ct.meshphong_vert,fragmentShader:Ct.meshphong_frag},standard:{uniforms:Ji([Ne.common,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.roughnessmap,Ne.metalnessmap,Ne.fog,Ne.lights,{emissive:{value:new Ie(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag},toon:{uniforms:Ji([Ne.common,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.gradientmap,Ne.fog,Ne.lights,{emissive:{value:new Ie(0)}}]),vertexShader:Ct.meshtoon_vert,fragmentShader:Ct.meshtoon_frag},matcap:{uniforms:Ji([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,{matcap:{value:null}}]),vertexShader:Ct.meshmatcap_vert,fragmentShader:Ct.meshmatcap_frag},points:{uniforms:Ji([Ne.points,Ne.fog]),vertexShader:Ct.points_vert,fragmentShader:Ct.points_frag},dashed:{uniforms:Ji([Ne.common,Ne.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ct.linedashed_vert,fragmentShader:Ct.linedashed_frag},depth:{uniforms:Ji([Ne.common,Ne.displacementmap]),vertexShader:Ct.depth_vert,fragmentShader:Ct.depth_frag},normal:{uniforms:Ji([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,{opacity:{value:1}}]),vertexShader:Ct.meshnormal_vert,fragmentShader:Ct.meshnormal_frag},sprite:{uniforms:Ji([Ne.sprite,Ne.fog]),vertexShader:Ct.sprite_vert,fragmentShader:Ct.sprite_frag},background:{uniforms:{uvTransform:{value:new Lt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ct.background_vert,fragmentShader:Ct.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ct.backgroundCube_vert,fragmentShader:Ct.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ct.cube_vert,fragmentShader:Ct.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ct.equirect_vert,fragmentShader:Ct.equirect_frag},distanceRGBA:{uniforms:Ji([Ne.common,Ne.displacementmap,{referencePosition:{value:new H},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ct.distanceRGBA_vert,fragmentShader:Ct.distanceRGBA_frag},shadow:{uniforms:Ji([Ne.lights,Ne.fog,{color:{value:new Ie(0)},opacity:{value:1}}]),vertexShader:Ct.shadow_vert,fragmentShader:Ct.shadow_frag}};Vs.physical={uniforms:Ji([Vs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Lt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Lt},clearcoatNormalScale:{value:new he(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Lt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Lt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Lt},sheen:{value:0},sheenColor:{value:new Ie(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Lt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Lt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Lt},transmissionSamplerSize:{value:new he},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Lt},attenuationDistance:{value:0},attenuationColor:{value:new Ie(0)},specularColor:{value:new Ie(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Lt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Lt},anisotropyVector:{value:new he},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Lt}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag};const Qg={r:0,b:0,g:0};function u$(n,e,t,i,r,s,o){const a=new Ie(0);let l=s===!0?0:1,c,u,f=null,p=0,m=null;function v(y,g){let x=!1,S=g.isScene===!0?g.background:null;S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?_(a,l):S&&S.isColor&&(_(S,1),x=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?i.buffers.color.setClear(0,0,0,1,o):E==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===md)?(u===void 0&&(u=new Pn(new ou(1,1,1),new Sn({name:"BackgroundCubeMaterial",uniforms:qf(Vs.backgroundCube.uniforms),vertexShader:Vs.backgroundCube.vertexShader,fragmentShader:Vs.backgroundCube.fragmentShader,side:ai,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(b,A,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=Kt.getTransfer(S.colorSpace)!==an,(f!==S||p!==S.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=S,p=S.version,m=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new Pn(new vd(2,2),new Sn({name:"BackgroundMaterial",uniforms:qf(Vs.background.uniforms),vertexShader:Vs.background.vertexShader,fragmentShader:Vs.background.fragmentShader,side:Xs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=Kt.getTransfer(S.colorSpace)!==an,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||p!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=S,p=S.version,m=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function _(y,g){y.getRGB(Qg,dN(n)),i.buffers.color.setClear(Qg.r,Qg.g,Qg.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(y,g=1){a.set(y),l=g,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,_(a,l)},render:v}}function f$(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=y(null);let c=l,u=!1;function f(z,K,q,ee,N){let V=!1;if(o){const W=_(ee,q,K);c!==W&&(c=W,m(c.object)),V=g(z,ee,q,N),V&&x(z,ee,q,N)}else{const W=K.wireframe===!0;(c.geometry!==ee.id||c.program!==q.id||c.wireframe!==W)&&(c.geometry=ee.id,c.program=q.id,c.wireframe=W,V=!0)}N!==null&&t.update(N,n.ELEMENT_ARRAY_BUFFER),(V||u)&&(u=!1,D(z,K,q,ee),N!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(N).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(z){return i.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function v(z){return i.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function _(z,K,q){const ee=q.wireframe===!0;let N=a[z.id];N===void 0&&(N={},a[z.id]=N);let V=N[K.id];V===void 0&&(V={},N[K.id]=V);let W=V[ee];return W===void 0&&(W=y(p()),V[ee]=W),W}function y(z){const K=[],q=[],ee=[];for(let N=0;N<r;N++)K[N]=0,q[N]=0,ee[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:q,attributeDivisors:ee,object:z,attributes:{},index:null}}function g(z,K,q,ee){const N=c.attributes,V=K.attributes;let W=0;const Q=q.getAttributes();for(const ie in Q)if(Q[ie].location>=0){const te=N[ie];let ue=V[ie];if(ue===void 0&&(ie==="instanceMatrix"&&z.instanceMatrix&&(ue=z.instanceMatrix),ie==="instanceColor"&&z.instanceColor&&(ue=z.instanceColor)),te===void 0||te.attribute!==ue||ue&&te.data!==ue.data)return!0;W++}return c.attributesNum!==W||c.index!==ee}function x(z,K,q,ee){const N={},V=K.attributes;let W=0;const Q=q.getAttributes();for(const ie in Q)if(Q[ie].location>=0){let te=V[ie];te===void 0&&(ie==="instanceMatrix"&&z.instanceMatrix&&(te=z.instanceMatrix),ie==="instanceColor"&&z.instanceColor&&(te=z.instanceColor));const ue={};ue.attribute=te,te&&te.data&&(ue.data=te.data),N[ie]=ue,W++}c.attributes=N,c.attributesNum=W,c.index=ee}function S(){const z=c.newAttributes;for(let K=0,q=z.length;K<q;K++)z[K]=0}function E(z){b(z,0)}function b(z,K){const q=c.newAttributes,ee=c.enabledAttributes,N=c.attributeDivisors;q[z]=1,ee[z]===0&&(n.enableVertexAttribArray(z),ee[z]=1),N[z]!==K&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,K),N[z]=K)}function A(){const z=c.newAttributes,K=c.enabledAttributes;for(let q=0,ee=K.length;q<ee;q++)K[q]!==z[q]&&(n.disableVertexAttribArray(q),K[q]=0)}function R(z,K,q,ee,N,V,W){W===!0?n.vertexAttribIPointer(z,K,q,N,V):n.vertexAttribPointer(z,K,q,ee,N,V)}function D(z,K,q,ee){if(i.isWebGL2===!1&&(z.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const N=ee.attributes,V=q.getAttributes(),W=K.defaultAttributeValues;for(const Q in V){const ie=V[Q];if(ie.location>=0){let Me=N[Q];if(Me===void 0&&(Q==="instanceMatrix"&&z.instanceMatrix&&(Me=z.instanceMatrix),Q==="instanceColor"&&z.instanceColor&&(Me=z.instanceColor)),Me!==void 0){const te=Me.normalized,ue=Me.itemSize,xe=t.get(Me);if(xe===void 0)continue;const Re=xe.buffer,$e=xe.type,ze=xe.bytesPerElement,ot=i.isWebGL2===!0&&($e===n.INT||$e===n.UNSIGNED_INT||Me.gpuType===tM);if(Me.isInterleavedBufferAttribute){const He=Me.data,Y=He.stride,Se=Me.offset;if(He.isInstancedInterleavedBuffer){for(let ve=0;ve<ie.locationSize;ve++)b(ie.location+ve,He.meshPerAttribute);z.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=He.meshPerAttribute*He.count)}else for(let ve=0;ve<ie.locationSize;ve++)E(ie.location+ve);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let ve=0;ve<ie.locationSize;ve++)R(ie.location+ve,ue/ie.locationSize,$e,te,Y*ze,(Se+ue/ie.locationSize*ve)*ze,ot)}else{if(Me.isInstancedBufferAttribute){for(let He=0;He<ie.locationSize;He++)b(ie.location+He,Me.meshPerAttribute);z.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let He=0;He<ie.locationSize;He++)E(ie.location+He);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let He=0;He<ie.locationSize;He++)R(ie.location+He,ue/ie.locationSize,$e,te,ue*ze,ue/ie.locationSize*He*ze,ot)}}else if(W!==void 0){const te=W[Q];if(te!==void 0)switch(te.length){case 2:n.vertexAttrib2fv(ie.location,te);break;case 3:n.vertexAttrib3fv(ie.location,te);break;case 4:n.vertexAttrib4fv(ie.location,te);break;default:n.vertexAttrib1fv(ie.location,te)}}}}A()}function O(){U();for(const z in a){const K=a[z];for(const q in K){const ee=K[q];for(const N in ee)v(ee[N].object),delete ee[N];delete K[q]}delete a[z]}}function M(z){if(a[z.id]===void 0)return;const K=a[z.id];for(const q in K){const ee=K[q];for(const N in ee)v(ee[N].object),delete ee[N];delete K[q]}delete a[z.id]}function I(z){for(const K in a){const q=a[K];if(q[z.id]===void 0)continue;const ee=q[z.id];for(const N in ee)v(ee[N].object),delete ee[N];delete q[z.id]}}function U(){j(),u=!0,c!==l&&(c=l,m(c.object))}function j(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:U,resetDefaultState:j,dispose:O,releaseStatesOfGeometry:M,releaseStatesOfProgram:I,initAttributes:S,enableAttribute:E,disableUnusedAttributes:A}}function d$(n,e,t,i){const r=i.isWebGL2;let s;function o(u){s=u}function a(u,f){n.drawArrays(s,u,f),t.update(f,s,1)}function l(u,f,p){if(p===0)return;let m,v;if(r)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,u,f,p),t.update(f,s,p)}function c(u,f,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<p;v++)this.render(u[v],f[v]);else{m.multiDrawArraysWEBGL(s,u,0,f,0,p);let v=0;for(let _=0;_<p;_++)v+=f[_];t.update(v,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function h$(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,E=o||e.has("OES_texture_float"),b=S&&E,A=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:_,maxVertexUniforms:y,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:S,floatFragmentTextures:E,floatVertexTextures:b,maxSamples:A}}function p$(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Yo,a=new Lt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||i!==0||r;return r=p,i=f.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=u(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,_=f.clipIntersection,y=f.clipShadows,g=n.get(f);if(!r||v===null||v.length===0||s&&!y)s?u(null):c();else{const x=s?0:i,S=x*4;let E=g.clippingState||null;l.value=E,E=u(v,p,S,m);for(let b=0;b!==S;++b)E[b]=t[b];g.clippingState=E,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,p,m,v){const _=f!==null?f.length:0;let y=null;if(_!==0){if(y=l.value,v!==!0||y===null){const g=m+_*4,x=p.matrixWorldInverse;a.getNormalMatrix(x),(y===null||y.length<g)&&(y=new Float32Array(g));for(let S=0,E=m;S!==_;++S,E+=4)o.copy(f[S]).applyMatrix4(x,a),o.normal.toArray(y,E),y[E+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,y}}function m$(n){let e=new WeakMap;function t(o,a){return a===Sp?o.mapping=fa:a===wp&&(o.mapping=Sl),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Sp||a===wp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new mN(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class _o extends gd{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const yf=4,QC=[.125,.215,.35,.446,.526,.582],gc=20,g1=new _o,JC=new Ie;let v1=null,y1=0,_1=0;const hc=(1+Math.sqrt(5))/2,Gu=1/hc,eR=[new H(1,1,1),new H(-1,1,1),new H(1,1,-1),new H(-1,1,-1),new H(0,hc,Gu),new H(0,hc,-Gu),new H(Gu,0,hc),new H(-Gu,0,hc),new H(hc,Gu,0),new H(-hc,Gu,0)];class tE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){v1=this._renderer.getRenderTarget(),y1=this._renderer.getActiveCubeFace(),_1=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=iR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=nR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(v1,y1,_1),e.scissorTest=!1,Jg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===fa||e.mapping===Sl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),v1=this._renderer.getRenderTarget(),y1=this._renderer.getActiveCubeFace(),_1=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Zt,minFilter:Zt,generateMipmaps:!1,type:$c,format:ir,colorSpace:qn,depthBuffer:!1},r=tR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=tR(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=g$(s)),this._blurMaterial=v$(s,e,t)}return r}_compileMaterial(e){const t=new Pn(this._lodPlanes[0],e);this._renderer.compile(t,g1)}_sceneToCubeUV(e,t,i,r){const a=new cn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(JC),u.toneMapping=$s,u.autoClear=!1;const m=new $r({name:"PMREM.Background",side:ai,depthWrite:!1,depthTest:!1}),v=new Pn(new ou,m);let _=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,_=!0):(m.color.copy(JC),_=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;Jg(r,x*S,g>2?S:0,S,S),u.setRenderTarget(r),_&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===fa||e.mapping===Sl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=iR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=nR());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Pn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Jg(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,g1)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=eR[(r-1)%eR.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Pn(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*gc-1),_=s/v,y=isFinite(s)?1+Math.floor(u*_):gc;y>gc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${gc}`);const g=[];let x=0;for(let R=0;R<gc;++R){const D=R/_,O=Math.exp(-D*D/2);g.push(O),R===0?x+=O:R<y&&(x+=2*O)}for(let R=0;R<g.length;R++)g[R]=g[R]/x;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-i;const E=this._sizeLods[r],b=3*E*(r>S-yf?r-S+yf:0),A=4*(this._cubeSize-E);Jg(t,b,A,3*E,2*E),l.setRenderTarget(t),l.render(f,g1)}}function g$(n){const e=[],t=[],i=[];let r=n;const s=n-yf+1+QC.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-yf?l=QC[o-n+yf-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,f=1+c,p=[u,u,f,u,f,f,u,u,f,f,u,f],m=6,v=6,_=3,y=2,g=1,x=new Float32Array(_*v*m),S=new Float32Array(y*v*m),E=new Float32Array(g*v*m);for(let A=0;A<m;A++){const R=A%3*2/3-1,D=A>2?0:-1,O=[R,D,0,R+2/3,D,0,R+2/3,D+1,0,R,D,0,R+2/3,D+1,0,R,D+1,0];x.set(O,_*v*A),S.set(p,y*v*A);const M=[A,A,A,A,A,A];E.set(M,g*v*A)}const b=new Mt;b.setAttribute("position",new Ut(x,_)),b.setAttribute("uv",new Ut(S,y)),b.setAttribute("faceIndex",new Ut(E,g)),e.push(b),r>yf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function tR(n,e,t){const i=new gn(n,e,t);return i.texture.mapping=md,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Jg(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function v$(n,e,t){const i=new Float32Array(gc),r=new H(0,1,0);return new Sn({name:"SphericalGaussianBlur",defines:{n:gc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:vM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Yn,depthTest:!1,depthWrite:!1})}function nR(){return new Sn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Yn,depthTest:!1,depthWrite:!1})}function iR(){return new Sn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Yn,depthTest:!1,depthWrite:!1})}function vM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function y$(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Sp||l===wp,u=l===fa||l===Sl;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new tE(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&r(f)){t===null&&(t=new tE(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function _$(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function x$(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const _=p.morphAttributes[v];for(let y=0,g=_.length;y<g;y++)e.remove(_[y])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const _=m[v];for(let y=0,g=_.length;y<g;y++)e.update(_[y],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,v=f.attributes.position;let _=0;if(m!==null){const x=m.array;_=m.version;for(let S=0,E=x.length;S<E;S+=3){const b=x[S+0],A=x[S+1],R=x[S+2];p.push(b,A,A,R,R,b)}}else if(v!==void 0){const x=v.array;_=v.version;for(let S=0,E=x.length/3-1;S<E;S+=3){const b=S+0,A=S+1,R=S+2;p.push(b,A,A,R,R,b)}}else return;const y=new(lN(p)?gM:mM)(p,1);y.version=_;const g=s.get(f);g&&e.remove(g),s.set(f,y)}function u(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function S$(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function u(m,v){n.drawElements(s,v,a,m*l),t.update(v,s,1)}function f(m,v,_){if(_===0)return;let y,g;if(r)y=n,g="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[g](s,v,a,m*l,_),t.update(v,s,_)}function p(m,v,_){if(_===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let g=0;g<_;g++)this.render(m[g]/l,v[g]);else{y.multiDrawElementsWEBGL(s,v,0,a,m,0,_);let g=0;for(let x=0;x<_;x++)g+=v[x];t.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f,this.renderMultiDraw=p}function w$(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function E$(n,e){return n[0]-e[0]}function T$(n,e){return Math.abs(e[1])-Math.abs(n[1])}function M$(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new qt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,_=v!==void 0?v.length:0;let y=s.get(u);if(y===void 0||y.count!==_){let K=function(){j.dispose(),s.delete(u),u.removeEventListener("dispose",K)};var m=K;y!==void 0&&y.texture.dispose();const S=u.morphAttributes.position!==void 0,E=u.morphAttributes.normal!==void 0,b=u.morphAttributes.color!==void 0,A=u.morphAttributes.position||[],R=u.morphAttributes.normal||[],D=u.morphAttributes.color||[];let O=0;S===!0&&(O=1),E===!0&&(O=2),b===!0&&(O=3);let M=u.attributes.position.count*O,I=1;M>e.maxTextureSize&&(I=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const U=new Float32Array(M*I*4*_),j=new Fy(U,M,I,_);j.type=Hr,j.needsUpdate=!0;const z=O*4;for(let q=0;q<_;q++){const ee=A[q],N=R[q],V=D[q],W=M*I*4*q;for(let Q=0;Q<ee.count;Q++){const ie=Q*z;S===!0&&(o.fromBufferAttribute(ee,Q),U[W+ie+0]=o.x,U[W+ie+1]=o.y,U[W+ie+2]=o.z,U[W+ie+3]=0),E===!0&&(o.fromBufferAttribute(N,Q),U[W+ie+4]=o.x,U[W+ie+5]=o.y,U[W+ie+6]=o.z,U[W+ie+7]=0),b===!0&&(o.fromBufferAttribute(V,Q),U[W+ie+8]=o.x,U[W+ie+9]=o.y,U[W+ie+10]=o.z,U[W+ie+11]=V.itemSize===4?o.w:1)}}y={count:_,texture:j,size:new he(M,I)},s.set(u,y),u.addEventListener("dispose",K)}let g=0;for(let S=0;S<p.length;S++)g+=p[S];const x=u.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",x),f.getUniforms().setValue(n,"morphTargetInfluences",p),f.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}else{const v=p===void 0?0:p.length;let _=i[u.id];if(_===void 0||_.length!==v){_=[];for(let E=0;E<v;E++)_[E]=[E,0];i[u.id]=_}for(let E=0;E<v;E++){const b=_[E];b[0]=E,b[1]=p[E]}_.sort(T$);for(let E=0;E<8;E++)E<v&&_[E][1]?(a[E][0]=_[E][0],a[E][1]=_[E][1]):(a[E][0]=Number.MAX_SAFE_INTEGER,a[E][1]=0);a.sort(E$);const y=u.morphAttributes.position,g=u.morphAttributes.normal;let x=0;for(let E=0;E<8;E++){const b=a[E],A=b[0],R=b[1];A!==Number.MAX_SAFE_INTEGER&&R?(y&&u.getAttribute("morphTarget"+E)!==y[A]&&u.setAttribute("morphTarget"+E,y[A]),g&&u.getAttribute("morphNormal"+E)!==g[A]&&u.setAttribute("morphNormal"+E,g[A]),r[E]=R,x+=R):(y&&u.hasAttribute("morphTarget"+E)===!0&&u.deleteAttribute("morphTarget"+E),g&&u.hasAttribute("morphNormal"+E)===!0&&u.deleteAttribute("morphNormal"+E),r[E]=0)}const S=u.morphTargetsRelative?1:1-x;f.getUniforms().setValue(n,"morphTargetBaseInfluence",S),f.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function b$(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class zy extends rn{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:pl,u!==pl&&u!==wl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===pl&&(i=vo),i===void 0&&u===wl&&(i=sa),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:en,this.minFilter=l!==void 0?l:en,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const vN=new rn,yN=new zy(1,1);yN.compareFunction=fM;const _N=new Fy,xN=new pM,SN=new rm,rR=[],sR=[],oR=new Float32Array(16),aR=new Float32Array(9),lR=new Float32Array(4);function yd(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=rR[r];if(s===void 0&&(s=new Float32Array(r),rR[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function li(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ci(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function By(n,e){let t=sR[e];t===void 0&&(t=new Int32Array(e),sR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function A$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function C$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(li(t,e))return;n.uniform2fv(this.addr,e),ci(t,e)}}function R$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(li(t,e))return;n.uniform3fv(this.addr,e),ci(t,e)}}function P$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(li(t,e))return;n.uniform4fv(this.addr,e),ci(t,e)}}function I$(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(li(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ci(t,e)}else{if(li(t,i))return;lR.set(i),n.uniformMatrix2fv(this.addr,!1,lR),ci(t,i)}}function L$(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(li(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ci(t,e)}else{if(li(t,i))return;aR.set(i),n.uniformMatrix3fv(this.addr,!1,aR),ci(t,i)}}function D$(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(li(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ci(t,e)}else{if(li(t,i))return;oR.set(i),n.uniformMatrix4fv(this.addr,!1,oR),ci(t,i)}}function O$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function N$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(li(t,e))return;n.uniform2iv(this.addr,e),ci(t,e)}}function k$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(li(t,e))return;n.uniform3iv(this.addr,e),ci(t,e)}}function U$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(li(t,e))return;n.uniform4iv(this.addr,e),ci(t,e)}}function F$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function z$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(li(t,e))return;n.uniform2uiv(this.addr,e),ci(t,e)}}function B$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(li(t,e))return;n.uniform3uiv(this.addr,e),ci(t,e)}}function H$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(li(t,e))return;n.uniform4uiv(this.addr,e),ci(t,e)}}function V$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?yN:vN;t.setTexture2D(e||s,r)}function G$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||xN,r)}function W$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||SN,r)}function $$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||_N,r)}function j$(n){switch(n){case 5126:return A$;case 35664:return C$;case 35665:return R$;case 35666:return P$;case 35674:return I$;case 35675:return L$;case 35676:return D$;case 5124:case 35670:return O$;case 35667:case 35671:return N$;case 35668:case 35672:return k$;case 35669:case 35673:return U$;case 5125:return F$;case 36294:return z$;case 36295:return B$;case 36296:return H$;case 35678:case 36198:case 36298:case 36306:case 35682:return V$;case 35679:case 36299:case 36307:return G$;case 35680:case 36300:case 36308:case 36293:return W$;case 36289:case 36303:case 36311:case 36292:return $$}}function X$(n,e){n.uniform1fv(this.addr,e)}function Y$(n,e){const t=yd(e,this.size,2);n.uniform2fv(this.addr,t)}function K$(n,e){const t=yd(e,this.size,3);n.uniform3fv(this.addr,t)}function q$(n,e){const t=yd(e,this.size,4);n.uniform4fv(this.addr,t)}function Z$(n,e){const t=yd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Q$(n,e){const t=yd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function J$(n,e){const t=yd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function e7(n,e){n.uniform1iv(this.addr,e)}function t7(n,e){n.uniform2iv(this.addr,e)}function n7(n,e){n.uniform3iv(this.addr,e)}function i7(n,e){n.uniform4iv(this.addr,e)}function r7(n,e){n.uniform1uiv(this.addr,e)}function s7(n,e){n.uniform2uiv(this.addr,e)}function o7(n,e){n.uniform3uiv(this.addr,e)}function a7(n,e){n.uniform4uiv(this.addr,e)}function l7(n,e,t){const i=this.cache,r=e.length,s=By(t,r);li(i,s)||(n.uniform1iv(this.addr,s),ci(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||vN,s[o])}function c7(n,e,t){const i=this.cache,r=e.length,s=By(t,r);li(i,s)||(n.uniform1iv(this.addr,s),ci(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||xN,s[o])}function u7(n,e,t){const i=this.cache,r=e.length,s=By(t,r);li(i,s)||(n.uniform1iv(this.addr,s),ci(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||SN,s[o])}function f7(n,e,t){const i=this.cache,r=e.length,s=By(t,r);li(i,s)||(n.uniform1iv(this.addr,s),ci(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||_N,s[o])}function d7(n){switch(n){case 5126:return X$;case 35664:return Y$;case 35665:return K$;case 35666:return q$;case 35674:return Z$;case 35675:return Q$;case 35676:return J$;case 5124:case 35670:return e7;case 35667:case 35671:return t7;case 35668:case 35672:return n7;case 35669:case 35673:return i7;case 5125:return r7;case 36294:return s7;case 36295:return o7;case 36296:return a7;case 35678:case 36198:case 36298:case 36306:case 35682:return l7;case 35679:case 36299:case 36307:return c7;case 35680:case 36300:case 36308:case 36293:return u7;case 36289:case 36303:case 36311:case 36292:return f7}}class h7{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=j$(t.type)}}class p7{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=d7(t.type)}}class m7{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const x1=/(\w+)(\])?(\[|\.)?/g;function cR(n,e){n.seq.push(e),n.map[e.id]=e}function g7(n,e,t){const i=n.name,r=i.length;for(x1.lastIndex=0;;){const s=x1.exec(i),o=x1.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){cR(t,c===void 0?new h7(a,n,e):new p7(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new m7(a),cR(t,f)),t=f}}}class nv{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);g7(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function uR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const v7=37297;let y7=0;function _7(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function x7(n){const e=Kt.getPrimaries(Kt.workingColorSpace),t=Kt.getPrimaries(n);let i;switch(e===t?i="":e===Cp&&t===Ap?i="LinearDisplayP3ToLinearSRGB":e===Ap&&t===Cp&&(i="LinearSRGBToLinearDisplayP3"),n){case qn:case nm:return[i,"LinearTransferOETF"];case St:case Uy:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function fR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+_7(n.getShaderSource(e),o)}else return r}function S7(n,e){const t=x7(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function w7(n,e){let t;switch(e){case NO:t="Linear";break;case kO:t="Reinhard";break;case UO:t="OptimizedCineon";break;case eM:t="ACESFilmic";break;case zO:t="AgX";break;case FO:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function E7(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_f).join(`
`)}function T7(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_f).join(`
`)}function M7(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function b7(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function _f(n){return n!==""}function dR(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function hR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const A7=/^[ \t]*#include +<([\w\d./]+)>/gm;function nE(n){return n.replace(A7,R7)}const C7=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function R7(n,e){let t=Ct[e];if(t===void 0){const i=C7.get(e);if(i!==void 0)t=Ct[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return nE(t)}const P7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pR(n){return n.replace(P7,I7)}function I7(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function mR(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function L7(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Dy?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Wh?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Fs&&(e="SHADOWMAP_TYPE_VSM"),e}function D7(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case fa:case Sl:e="ENVMAP_TYPE_CUBE";break;case md:e="ENVMAP_TYPE_CUBE_UV";break}return e}function O7(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Sl:e="ENVMAP_MODE_REFRACTION";break}return e}function N7(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case tm:e="ENVMAP_BLENDING_MULTIPLY";break;case DO:e="ENVMAP_BLENDING_MIX";break;case OO:e="ENVMAP_BLENDING_ADD";break}return e}function k7(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function U7(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=L7(t),c=D7(t),u=O7(t),f=N7(t),p=k7(t),m=t.isWebGL2?"":E7(t),v=T7(t),_=M7(s),y=r.createProgram();let g,x,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(_f).join(`
`),g.length>0&&(g+=`
`),x=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(_f).join(`
`),x.length>0&&(x+=`
`)):(g=[mR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_f).join(`
`),x=[m,mR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==$s?"#define TONE_MAPPING":"",t.toneMapping!==$s?Ct.tonemapping_pars_fragment:"",t.toneMapping!==$s?w7("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ct.colorspace_pars_fragment,S7("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(_f).join(`
`)),o=nE(o),o=dR(o,t),o=hR(o,t),a=nE(a),a=dR(a,t),a=hR(a,t),o=pR(o),a=pR(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,g=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,x=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Jw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Jw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const E=S+g+o,b=S+x+a,A=uR(r,r.VERTEX_SHADER,E),R=uR(r,r.FRAGMENT_SHADER,b);r.attachShader(y,A),r.attachShader(y,R),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function D(U){if(n.debug.checkShaderErrors){const j=r.getProgramInfoLog(y).trim(),z=r.getShaderInfoLog(A).trim(),K=r.getShaderInfoLog(R).trim();let q=!0,ee=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,y,A,R);else{const N=fR(r,A,"vertex"),V=fR(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+j+`
`+N+`
`+V)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):(z===""||K==="")&&(ee=!1);ee&&(U.diagnostics={runnable:q,programLog:j,vertexShader:{log:z,prefix:g},fragmentShader:{log:K,prefix:x}})}r.deleteShader(A),r.deleteShader(R),O=new nv(r,y),M=b7(r,y)}let O;this.getUniforms=function(){return O===void 0&&D(this),O};let M;this.getAttributes=function(){return M===void 0&&D(this),M};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=r.getProgramParameter(y,v7)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=y7++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=A,this.fragmentShader=R,this}let F7=0;class z7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new B7(e),t.set(e,i)),i}}class B7{constructor(e){this.id=F7++,this.code=e,this.usedTimes=0}}function H7(n,e,t,i,r,s,o){const a=new Ic,l=new z7,c=new Set,u=[],f=r.isWebGL2,p=r.logarithmicDepthBuffer,m=r.vertexTextures;let v=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(M){return c.add(M),M===0?"uv":`uv${M}`}function g(M,I,U,j,z){const K=j.fog,q=z.geometry,ee=M.isMeshStandardMaterial?j.environment:null,N=(M.isMeshStandardMaterial?t:e).get(M.envMap||ee),V=N&&N.mapping===md?N.image.height:null,W=_[M.type];M.precision!==null&&(v=r.getMaxPrecision(M.precision),v!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",v,"instead."));const Q=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,ie=Q!==void 0?Q.length:0;let Me=0;q.morphAttributes.position!==void 0&&(Me=1),q.morphAttributes.normal!==void 0&&(Me=2),q.morphAttributes.color!==void 0&&(Me=3);let te,ue,xe,Re;if(W){const zt=Vs[W];te=zt.vertexShader,ue=zt.fragmentShader}else te=M.vertexShader,ue=M.fragmentShader,l.update(M),xe=l.getVertexShaderID(M),Re=l.getFragmentShaderID(M);const $e=n.getRenderTarget(),ze=z.isInstancedMesh===!0,ot=z.isBatchedMesh===!0,He=!!M.map,Y=!!M.matcap,Se=!!N,ve=!!M.aoMap,Ee=!!M.lightMap,ye=!!M.bumpMap,Qe=!!M.normalMap,ke=!!M.displacementMap,F=!!M.emissiveMap,k=!!M.metalnessMap,se=!!M.roughnessMap,Te=M.anisotropy>0,re=M.clearcoat>0,le=M.iridescence>0,De=M.sheen>0,be=M.transmission>0,Oe=Te&&!!M.anisotropyMap,et=re&&!!M.clearcoatMap,lt=re&&!!M.clearcoatNormalMap,we=re&&!!M.clearcoatRoughnessMap,Pt=le&&!!M.iridescenceMap,yt=le&&!!M.iridescenceThicknessMap,at=De&&!!M.sheenColorMap,nt=De&&!!M.sheenRoughnessMap,Ve=!!M.specularMap,Z=!!M.specularColorMap,_e=!!M.specularIntensityMap,Ue=be&&!!M.transmissionMap,Ge=be&&!!M.thicknessMap,mt=!!M.gradientMap,$=!!M.alphaMap,Ae=M.alphaTest>0,Le=!!M.alphaHash,Ze=!!M.extensions;let Je=$s;M.toneMapped&&($e===null||$e.isXRRenderTarget===!0)&&(Je=n.toneMapping);const At={isWebGL2:f,shaderID:W,shaderType:M.type,shaderName:M.name,vertexShader:te,fragmentShader:ue,defines:M.defines,customVertexShaderID:xe,customFragmentShaderID:Re,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:v,batching:ot,instancing:ze,instancingColor:ze&&z.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:$e===null?n.outputColorSpace:$e.isXRRenderTarget===!0?$e.texture.colorSpace:qn,alphaToCoverage:!!M.alphaToCoverage,map:He,matcap:Y,envMap:Se,envMapMode:Se&&N.mapping,envMapCubeUVHeight:V,aoMap:ve,lightMap:Ee,bumpMap:ye,normalMap:Qe,displacementMap:m&&ke,emissiveMap:F,normalMapObjectSpace:Qe&&M.normalMapType===JO,normalMapTangentSpace:Qe&&M.normalMapType===Nl,metalnessMap:k,roughnessMap:se,anisotropy:Te,anisotropyMap:Oe,clearcoat:re,clearcoatMap:et,clearcoatNormalMap:lt,clearcoatRoughnessMap:we,iridescence:le,iridescenceMap:Pt,iridescenceThicknessMap:yt,sheen:De,sheenColorMap:at,sheenRoughnessMap:nt,specularMap:Ve,specularColorMap:Z,specularIntensityMap:_e,transmission:be,transmissionMap:Ue,thicknessMap:Ge,gradientMap:mt,opaque:M.transparent===!1&&M.blending===Cc&&M.alphaToCoverage===!1,alphaMap:$,alphaTest:Ae,alphaHash:Le,combine:M.combine,mapUv:He&&y(M.map.channel),aoMapUv:ve&&y(M.aoMap.channel),lightMapUv:Ee&&y(M.lightMap.channel),bumpMapUv:ye&&y(M.bumpMap.channel),normalMapUv:Qe&&y(M.normalMap.channel),displacementMapUv:ke&&y(M.displacementMap.channel),emissiveMapUv:F&&y(M.emissiveMap.channel),metalnessMapUv:k&&y(M.metalnessMap.channel),roughnessMapUv:se&&y(M.roughnessMap.channel),anisotropyMapUv:Oe&&y(M.anisotropyMap.channel),clearcoatMapUv:et&&y(M.clearcoatMap.channel),clearcoatNormalMapUv:lt&&y(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:we&&y(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Pt&&y(M.iridescenceMap.channel),iridescenceThicknessMapUv:yt&&y(M.iridescenceThicknessMap.channel),sheenColorMapUv:at&&y(M.sheenColorMap.channel),sheenRoughnessMapUv:nt&&y(M.sheenRoughnessMap.channel),specularMapUv:Ve&&y(M.specularMap.channel),specularColorMapUv:Z&&y(M.specularColorMap.channel),specularIntensityMapUv:_e&&y(M.specularIntensityMap.channel),transmissionMapUv:Ue&&y(M.transmissionMap.channel),thicknessMapUv:Ge&&y(M.thicknessMap.channel),alphaMapUv:$&&y(M.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(Qe||Te),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,pointsUvs:z.isPoints===!0&&!!q.attributes.uv&&(He||$),fog:!!K,useFog:M.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:z.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:Me,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:Je,useLegacyLights:n._useLegacyLights,decodeVideoTexture:He&&M.map.isVideoTexture===!0&&Kt.getTransfer(M.map.colorSpace)===an,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===nr,flipSided:M.side===ai,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:Ze&&M.extensions.derivatives===!0,extensionFragDepth:Ze&&M.extensions.fragDepth===!0,extensionDrawBuffers:Ze&&M.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ze&&M.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Ze&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Ze&&M.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return At.vertexUv1s=c.has(1),At.vertexUv2s=c.has(2),At.vertexUv3s=c.has(3),c.clear(),At}function x(M){const I=[];if(M.shaderID?I.push(M.shaderID):(I.push(M.customVertexShaderID),I.push(M.customFragmentShaderID)),M.defines!==void 0)for(const U in M.defines)I.push(U),I.push(M.defines[U]);return M.isRawShaderMaterial===!1&&(S(I,M),E(I,M),I.push(n.outputColorSpace)),I.push(M.customProgramCacheKey),I.join()}function S(M,I){M.push(I.precision),M.push(I.outputColorSpace),M.push(I.envMapMode),M.push(I.envMapCubeUVHeight),M.push(I.mapUv),M.push(I.alphaMapUv),M.push(I.lightMapUv),M.push(I.aoMapUv),M.push(I.bumpMapUv),M.push(I.normalMapUv),M.push(I.displacementMapUv),M.push(I.emissiveMapUv),M.push(I.metalnessMapUv),M.push(I.roughnessMapUv),M.push(I.anisotropyMapUv),M.push(I.clearcoatMapUv),M.push(I.clearcoatNormalMapUv),M.push(I.clearcoatRoughnessMapUv),M.push(I.iridescenceMapUv),M.push(I.iridescenceThicknessMapUv),M.push(I.sheenColorMapUv),M.push(I.sheenRoughnessMapUv),M.push(I.specularMapUv),M.push(I.specularColorMapUv),M.push(I.specularIntensityMapUv),M.push(I.transmissionMapUv),M.push(I.thicknessMapUv),M.push(I.combine),M.push(I.fogExp2),M.push(I.sizeAttenuation),M.push(I.morphTargetsCount),M.push(I.morphAttributeCount),M.push(I.numDirLights),M.push(I.numPointLights),M.push(I.numSpotLights),M.push(I.numSpotLightMaps),M.push(I.numHemiLights),M.push(I.numRectAreaLights),M.push(I.numDirLightShadows),M.push(I.numPointLightShadows),M.push(I.numSpotLightShadows),M.push(I.numSpotLightShadowsWithMaps),M.push(I.numLightProbes),M.push(I.shadowMapType),M.push(I.toneMapping),M.push(I.numClippingPlanes),M.push(I.numClipIntersection),M.push(I.depthPacking)}function E(M,I){a.disableAll(),I.isWebGL2&&a.enable(0),I.supportsVertexTextures&&a.enable(1),I.instancing&&a.enable(2),I.instancingColor&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),M.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.skinning&&a.enable(4),I.morphTargets&&a.enable(5),I.morphNormals&&a.enable(6),I.morphColors&&a.enable(7),I.premultipliedAlpha&&a.enable(8),I.shadowMapEnabled&&a.enable(9),I.useLegacyLights&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),I.alphaToCoverage&&a.enable(20),M.push(a.mask)}function b(M){const I=_[M.type];let U;if(I){const j=Vs[I];U=hN.clone(j.uniforms)}else U=M.uniforms;return U}function A(M,I){let U;for(let j=0,z=u.length;j<z;j++){const K=u[j];if(K.cacheKey===I){U=K,++U.usedTimes;break}}return U===void 0&&(U=new U7(n,I,M,s),u.push(U)),U}function R(M){if(--M.usedTimes===0){const I=u.indexOf(M);u[I]=u[u.length-1],u.pop(),M.destroy()}}function D(M){l.remove(M)}function O(){l.dispose()}return{getParameters:g,getProgramCacheKey:x,getUniforms:b,acquireProgram:A,releaseProgram:R,releaseShaderCache:D,programs:u,dispose:O}}function V7(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function G7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function gR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function vR(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,p,m,v,_,y){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:_,group:y},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=_,g.group=y),e++,g}function a(f,p,m,v,_,y){const g=o(f,p,m,v,_,y);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(f,p,m,v,_,y){const g=o(f,p,m,v,_,y);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||G7),i.length>1&&i.sort(p||gR),r.length>1&&r.sort(p||gR)}function u(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function W7(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new vR,n.set(i,[o])):r>=s.length?(o=new vR,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function $7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new H,color:new Ie};break;case"SpotLight":t={position:new H,direction:new H,color:new Ie,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new H,color:new Ie,distance:0,decay:0};break;case"HemisphereLight":t={direction:new H,skyColor:new Ie,groundColor:new Ie};break;case"RectAreaLight":t={color:new Ie,position:new H,halfWidth:new H,halfHeight:new H};break}return n[e.id]=t,t}}}function j7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new he,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let X7=0;function Y7(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function K7(n,e){const t=new $7,i=j7(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new H);const s=new H,o=new ft,a=new ft;function l(u,f){let p=0,m=0,v=0;for(let U=0;U<9;U++)r.probe[U].set(0,0,0);let _=0,y=0,g=0,x=0,S=0,E=0,b=0,A=0,R=0,D=0,O=0;u.sort(Y7);const M=f===!0?Math.PI:1;for(let U=0,j=u.length;U<j;U++){const z=u[U],K=z.color,q=z.intensity,ee=z.distance,N=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)p+=K.r*q*M,m+=K.g*q*M,v+=K.b*q*M;else if(z.isLightProbe){for(let V=0;V<9;V++)r.probe[V].addScaledVector(z.sh.coefficients[V],q);O++}else if(z.isDirectionalLight){const V=t.get(z);if(V.color.copy(z.color).multiplyScalar(z.intensity*M),z.castShadow){const W=z.shadow,Q=i.get(z);Q.shadowBias=W.bias,Q.shadowNormalBias=W.normalBias,Q.shadowRadius=W.radius,Q.shadowMapSize=W.mapSize,r.directionalShadow[_]=Q,r.directionalShadowMap[_]=N,r.directionalShadowMatrix[_]=z.shadow.matrix,E++}r.directional[_]=V,_++}else if(z.isSpotLight){const V=t.get(z);V.position.setFromMatrixPosition(z.matrixWorld),V.color.copy(K).multiplyScalar(q*M),V.distance=ee,V.coneCos=Math.cos(z.angle),V.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),V.decay=z.decay,r.spot[g]=V;const W=z.shadow;if(z.map&&(r.spotLightMap[R]=z.map,R++,W.updateMatrices(z),z.castShadow&&D++),r.spotLightMatrix[g]=W.matrix,z.castShadow){const Q=i.get(z);Q.shadowBias=W.bias,Q.shadowNormalBias=W.normalBias,Q.shadowRadius=W.radius,Q.shadowMapSize=W.mapSize,r.spotShadow[g]=Q,r.spotShadowMap[g]=N,A++}g++}else if(z.isRectAreaLight){const V=t.get(z);V.color.copy(K).multiplyScalar(q),V.halfWidth.set(z.width*.5,0,0),V.halfHeight.set(0,z.height*.5,0),r.rectArea[x]=V,x++}else if(z.isPointLight){const V=t.get(z);if(V.color.copy(z.color).multiplyScalar(z.intensity*M),V.distance=z.distance,V.decay=z.decay,z.castShadow){const W=z.shadow,Q=i.get(z);Q.shadowBias=W.bias,Q.shadowNormalBias=W.normalBias,Q.shadowRadius=W.radius,Q.shadowMapSize=W.mapSize,Q.shadowCameraNear=W.camera.near,Q.shadowCameraFar=W.camera.far,r.pointShadow[y]=Q,r.pointShadowMap[y]=N,r.pointShadowMatrix[y]=z.shadow.matrix,b++}r.point[y]=V,y++}else if(z.isHemisphereLight){const V=t.get(z);V.skyColor.copy(z.color).multiplyScalar(q*M),V.groundColor.copy(z.groundColor).multiplyScalar(q*M),r.hemi[S]=V,S++}}x>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_FLOAT_1,r.rectAreaLTC2=Ne.LTC_FLOAT_2):(r.rectAreaLTC1=Ne.LTC_HALF_1,r.rectAreaLTC2=Ne.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_FLOAT_1,r.rectAreaLTC2=Ne.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_HALF_1,r.rectAreaLTC2=Ne.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=v;const I=r.hash;(I.directionalLength!==_||I.pointLength!==y||I.spotLength!==g||I.rectAreaLength!==x||I.hemiLength!==S||I.numDirectionalShadows!==E||I.numPointShadows!==b||I.numSpotShadows!==A||I.numSpotMaps!==R||I.numLightProbes!==O)&&(r.directional.length=_,r.spot.length=g,r.rectArea.length=x,r.point.length=y,r.hemi.length=S,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=b,r.spotLightMatrix.length=A+R-D,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=D,r.numLightProbes=O,I.directionalLength=_,I.pointLength=y,I.spotLength=g,I.rectAreaLength=x,I.hemiLength=S,I.numDirectionalShadows=E,I.numPointShadows=b,I.numSpotShadows=A,I.numSpotMaps=R,I.numLightProbes=O,r.version=X7++)}function c(u,f){let p=0,m=0,v=0,_=0,y=0;const g=f.matrixWorldInverse;for(let x=0,S=u.length;x<S;x++){const E=u[x];if(E.isDirectionalLight){const b=r.directional[p];b.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),p++}else if(E.isSpotLight){const b=r.spot[v];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(g),b.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),v++}else if(E.isRectAreaLight){const b=r.rectArea[_];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(g),a.identity(),o.copy(E.matrixWorld),o.premultiply(g),a.extractRotation(o),b.halfWidth.set(E.width*.5,0,0),b.halfHeight.set(0,E.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),_++}else if(E.isPointLight){const b=r.point[m];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(g),m++}else if(E.isHemisphereLight){const b=r.hemi[y];b.direction.setFromMatrixPosition(E.matrixWorld),b.direction.transformDirection(g),y++}}}return{setup:l,setupView:c,state:r}}function yR(n,e){const t=new K7(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(f){i.push(f)}function a(f){r.push(f)}function l(f){t.setup(i,f)}function c(f){t.setupView(i,f)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function q7(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new yR(n,e),t.set(s,[l])):o>=a.length?(l=new yR(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class Hy extends Bn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Po,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class yM extends Bn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Z7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Q7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function J7(n,e,t){let i=new sm;const r=new he,s=new he,o=new qt,a=new Hy({depthPacking:Mp}),l=new yM,c={},u=t.maxTextureSize,f={[Xs]:ai,[ai]:Xs,[nr]:nr},p=new Sn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new he},radius:{value:4}},vertexShader:Z7,fragmentShader:Q7}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new Mt;v.setAttribute("position",new Ut(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Pn(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Dy;let g=this.type;this.render=function(A,R,D){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||A.length===0)return;const O=n.getRenderTarget(),M=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),U=n.state;U.setBlending(Yn),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const j=g!==Fs&&this.type===Fs,z=g===Fs&&this.type!==Fs;for(let K=0,q=A.length;K<q;K++){const ee=A[K],N=ee.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;r.copy(N.mapSize);const V=N.getFrameExtents();if(r.multiply(V),s.copy(N.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/V.x),r.x=s.x*V.x,N.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/V.y),r.y=s.y*V.y,N.mapSize.y=s.y)),N.map===null||j===!0||z===!0){const Q=this.type!==Fs?{minFilter:en,magFilter:en}:{};N.map!==null&&N.map.dispose(),N.map=new gn(r.x,r.y,Q),N.map.texture.name=ee.name+".shadowMap",N.camera.updateProjectionMatrix()}n.setRenderTarget(N.map),n.clear();const W=N.getViewportCount();for(let Q=0;Q<W;Q++){const ie=N.getViewport(Q);o.set(s.x*ie.x,s.y*ie.y,s.x*ie.z,s.y*ie.w),U.viewport(o),N.updateMatrices(ee,Q),i=N.getFrustum(),E(R,D,N.camera,ee,this.type)}N.isPointLightShadow!==!0&&this.type===Fs&&x(N,D),N.needsUpdate=!1}g=this.type,y.needsUpdate=!1,n.setRenderTarget(O,M,I)};function x(A,R){const D=e.update(_);p.defines.VSM_SAMPLES!==A.blurSamples&&(p.defines.VSM_SAMPLES=A.blurSamples,m.defines.VSM_SAMPLES=A.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new gn(r.x,r.y)),p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(R,null,D,p,_,null),m.uniforms.shadow_pass.value=A.mapPass.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(R,null,D,m,_,null)}function S(A,R,D,O){let M=null;const I=D.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(I!==void 0)M=I;else if(M=D.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const U=M.uuid,j=R.uuid;let z=c[U];z===void 0&&(z={},c[U]=z);let K=z[j];K===void 0&&(K=M.clone(),z[j]=K,R.addEventListener("dispose",b)),M=K}if(M.visible=R.visible,M.wireframe=R.wireframe,O===Fs?M.side=R.shadowSide!==null?R.shadowSide:R.side:M.side=R.shadowSide!==null?R.shadowSide:f[R.side],M.alphaMap=R.alphaMap,M.alphaTest=R.alphaTest,M.map=R.map,M.clipShadows=R.clipShadows,M.clippingPlanes=R.clippingPlanes,M.clipIntersection=R.clipIntersection,M.displacementMap=R.displacementMap,M.displacementScale=R.displacementScale,M.displacementBias=R.displacementBias,M.wireframeLinewidth=R.wireframeLinewidth,M.linewidth=R.linewidth,D.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const U=n.properties.get(M);U.light=D}return M}function E(A,R,D,O,M){if(A.visible===!1)return;if(A.layers.test(R.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&M===Fs)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,A.matrixWorld);const j=e.update(A),z=A.material;if(Array.isArray(z)){const K=j.groups;for(let q=0,ee=K.length;q<ee;q++){const N=K[q],V=z[N.materialIndex];if(V&&V.visible){const W=S(A,V,O,M);A.onBeforeShadow(n,A,R,D,j,W,N),n.renderBufferDirect(D,null,j,W,A,N),A.onAfterShadow(n,A,R,D,j,W,N)}}}else if(z.visible){const K=S(A,z,O,M);A.onBeforeShadow(n,A,R,D,j,K,null),n.renderBufferDirect(D,null,j,K,A,null),A.onAfterShadow(n,A,R,D,j,K,null)}}const U=A.children;for(let j=0,z=U.length;j<z;j++)E(U[j],R,D,O,M)}function b(A){A.target.removeEventListener("dispose",b);for(const D in c){const O=c[D],M=A.target.uuid;M in O&&(O[M].dispose(),delete O[M])}}}function ej(n,e,t){const i=t.isWebGL2;function r(){let $=!1;const Ae=new qt;let Le=null;const Ze=new qt(0,0,0,0);return{setMask:function(Je){Le!==Je&&!$&&(n.colorMask(Je,Je,Je,Je),Le=Je)},setLocked:function(Je){$=Je},setClear:function(Je,At,zt,sn,Vn){Vn===!0&&(Je*=sn,At*=sn,zt*=sn),Ae.set(Je,At,zt,sn),Ze.equals(Ae)===!1&&(n.clearColor(Je,At,zt,sn),Ze.copy(Ae))},reset:function(){$=!1,Le=null,Ze.set(-1,0,0,0)}}}function s(){let $=!1,Ae=null,Le=null,Ze=null;return{setTest:function(Je){Je?ze(n.DEPTH_TEST):ot(n.DEPTH_TEST)},setMask:function(Je){Ae!==Je&&!$&&(n.depthMask(Je),Ae=Je)},setFunc:function(Je){if(Le!==Je){switch(Je){case bO:n.depthFunc(n.NEVER);break;case AO:n.depthFunc(n.ALWAYS);break;case CO:n.depthFunc(n.LESS);break;case xp:n.depthFunc(n.LEQUAL);break;case RO:n.depthFunc(n.EQUAL);break;case PO:n.depthFunc(n.GEQUAL);break;case IO:n.depthFunc(n.GREATER);break;case LO:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Le=Je}},setLocked:function(Je){$=Je},setClear:function(Je){Ze!==Je&&(n.clearDepth(Je),Ze=Je)},reset:function(){$=!1,Ae=null,Le=null,Ze=null}}}function o(){let $=!1,Ae=null,Le=null,Ze=null,Je=null,At=null,zt=null,sn=null,Vn=null;return{setTest:function(Gt){$||(Gt?ze(n.STENCIL_TEST):ot(n.STENCIL_TEST))},setMask:function(Gt){Ae!==Gt&&!$&&(n.stencilMask(Gt),Ae=Gt)},setFunc:function(Gt,wi,is){(Le!==Gt||Ze!==wi||Je!==is)&&(n.stencilFunc(Gt,wi,is),Le=Gt,Ze=wi,Je=is)},setOp:function(Gt,wi,is){(At!==Gt||zt!==wi||sn!==is)&&(n.stencilOp(Gt,wi,is),At=Gt,zt=wi,sn=is)},setLocked:function(Gt){$=Gt},setClear:function(Gt){Vn!==Gt&&(n.clearStencil(Gt),Vn=Gt)},reset:function(){$=!1,Ae=null,Le=null,Ze=null,Je=null,At=null,zt=null,sn=null,Vn=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let p={},m={},v=new WeakMap,_=[],y=null,g=!1,x=null,S=null,E=null,b=null,A=null,R=null,D=null,O=new Ie(0,0,0),M=0,I=!1,U=null,j=null,z=null,K=null,q=null;const ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,V=0;const W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(V=parseFloat(/^WebGL (\d)/.exec(W)[1]),N=V>=1):W.indexOf("OpenGL ES")!==-1&&(V=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),N=V>=2);let Q=null,ie={};const Me=n.getParameter(n.SCISSOR_BOX),te=n.getParameter(n.VIEWPORT),ue=new qt().fromArray(Me),xe=new qt().fromArray(te);function Re($,Ae,Le,Ze){const Je=new Uint8Array(4),At=n.createTexture();n.bindTexture($,At),n.texParameteri($,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri($,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let zt=0;zt<Le;zt++)i&&($===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY)?n.texImage3D(Ae,0,n.RGBA,1,1,Ze,0,n.RGBA,n.UNSIGNED_BYTE,Je):n.texImage2D(Ae+zt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Je);return At}const $e={};$e[n.TEXTURE_2D]=Re(n.TEXTURE_2D,n.TEXTURE_2D,1),$e[n.TEXTURE_CUBE_MAP]=Re(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&($e[n.TEXTURE_2D_ARRAY]=Re(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),$e[n.TEXTURE_3D]=Re(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ze(n.DEPTH_TEST),l.setFunc(xp),ke(!1),F(xw),ze(n.CULL_FACE),ye(Yn);function ze($){p[$]!==!0&&(n.enable($),p[$]=!0)}function ot($){p[$]!==!1&&(n.disable($),p[$]=!1)}function He($,Ae){return m[$]!==Ae?(n.bindFramebuffer($,Ae),m[$]=Ae,i&&($===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Ae),$===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Ae)),!0):!1}function Y($,Ae){let Le=_,Ze=!1;if($)if(Le=v.get(Ae),Le===void 0&&(Le=[],v.set(Ae,Le)),$.isWebGLMultipleRenderTargets){const Je=$.texture;if(Le.length!==Je.length||Le[0]!==n.COLOR_ATTACHMENT0){for(let At=0,zt=Je.length;At<zt;At++)Le[At]=n.COLOR_ATTACHMENT0+At;Le.length=Je.length,Ze=!0}}else Le[0]!==n.COLOR_ATTACHMENT0&&(Le[0]=n.COLOR_ATTACHMENT0,Ze=!0);else Le[0]!==n.BACK&&(Le[0]=n.BACK,Ze=!0);Ze&&(t.isWebGL2?n.drawBuffers(Le):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Le))}function Se($){return y!==$?(n.useProgram($),y=$,!0):!1}const ve={[qa]:n.FUNC_ADD,[fO]:n.FUNC_SUBTRACT,[dO]:n.FUNC_REVERSE_SUBTRACT};if(i)ve[Tw]=n.MIN,ve[Mw]=n.MAX;else{const $=e.get("EXT_blend_minmax");$!==null&&(ve[Tw]=$.MIN_EXT,ve[Mw]=$.MAX_EXT)}const Ee={[hO]:n.ZERO,[pO]:n.ONE,[mO]:n.SRC_COLOR,[kv]:n.SRC_ALPHA,[SO]:n.SRC_ALPHA_SATURATE,[_O]:n.DST_COLOR,[vO]:n.DST_ALPHA,[gO]:n.ONE_MINUS_SRC_COLOR,[Uv]:n.ONE_MINUS_SRC_ALPHA,[xO]:n.ONE_MINUS_DST_COLOR,[yO]:n.ONE_MINUS_DST_ALPHA,[wO]:n.CONSTANT_COLOR,[EO]:n.ONE_MINUS_CONSTANT_COLOR,[TO]:n.CONSTANT_ALPHA,[MO]:n.ONE_MINUS_CONSTANT_ALPHA};function ye($,Ae,Le,Ze,Je,At,zt,sn,Vn,Gt){if($===Yn){g===!0&&(ot(n.BLEND),g=!1);return}if(g===!1&&(ze(n.BLEND),g=!0),$!==uO){if($!==x||Gt!==I){if((S!==qa||A!==qa)&&(n.blendEquation(n.FUNC_ADD),S=qa,A=qa),Gt)switch($){case Cc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Sw:n.blendFunc(n.ONE,n.ONE);break;case ww:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Ew:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case Cc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Sw:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case ww:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Ew:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}E=null,b=null,R=null,D=null,O.set(0,0,0),M=0,x=$,I=Gt}return}Je=Je||Ae,At=At||Le,zt=zt||Ze,(Ae!==S||Je!==A)&&(n.blendEquationSeparate(ve[Ae],ve[Je]),S=Ae,A=Je),(Le!==E||Ze!==b||At!==R||zt!==D)&&(n.blendFuncSeparate(Ee[Le],Ee[Ze],Ee[At],Ee[zt]),E=Le,b=Ze,R=At,D=zt),(sn.equals(O)===!1||Vn!==M)&&(n.blendColor(sn.r,sn.g,sn.b,Vn),O.copy(sn),M=Vn),x=$,I=!1}function Qe($,Ae){$.side===nr?ot(n.CULL_FACE):ze(n.CULL_FACE);let Le=$.side===ai;Ae&&(Le=!Le),ke(Le),$.blending===Cc&&$.transparent===!1?ye(Yn):ye($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),l.setFunc($.depthFunc),l.setTest($.depthTest),l.setMask($.depthWrite),a.setMask($.colorWrite);const Ze=$.stencilWrite;c.setTest(Ze),Ze&&(c.setMask($.stencilWriteMask),c.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),c.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),se($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?ze(n.SAMPLE_ALPHA_TO_COVERAGE):ot(n.SAMPLE_ALPHA_TO_COVERAGE)}function ke($){U!==$&&($?n.frontFace(n.CW):n.frontFace(n.CCW),U=$)}function F($){$!==aO?(ze(n.CULL_FACE),$!==j&&($===xw?n.cullFace(n.BACK):$===lO?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ot(n.CULL_FACE),j=$}function k($){$!==z&&(N&&n.lineWidth($),z=$)}function se($,Ae,Le){$?(ze(n.POLYGON_OFFSET_FILL),(K!==Ae||q!==Le)&&(n.polygonOffset(Ae,Le),K=Ae,q=Le)):ot(n.POLYGON_OFFSET_FILL)}function Te($){$?ze(n.SCISSOR_TEST):ot(n.SCISSOR_TEST)}function re($){$===void 0&&($=n.TEXTURE0+ee-1),Q!==$&&(n.activeTexture($),Q=$)}function le($,Ae,Le){Le===void 0&&(Q===null?Le=n.TEXTURE0+ee-1:Le=Q);let Ze=ie[Le];Ze===void 0&&(Ze={type:void 0,texture:void 0},ie[Le]=Ze),(Ze.type!==$||Ze.texture!==Ae)&&(Q!==Le&&(n.activeTexture(Le),Q=Le),n.bindTexture($,Ae||$e[$]),Ze.type=$,Ze.texture=Ae)}function De(){const $=ie[Q];$!==void 0&&$.type!==void 0&&(n.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function be(){try{n.compressedTexImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Oe(){try{n.compressedTexImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function et(){try{n.texSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function lt(){try{n.texSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function we(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Pt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function yt(){try{n.texStorage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function at(){try{n.texStorage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function nt(){try{n.texImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ve(){try{n.texImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Z($){ue.equals($)===!1&&(n.scissor($.x,$.y,$.z,$.w),ue.copy($))}function _e($){xe.equals($)===!1&&(n.viewport($.x,$.y,$.z,$.w),xe.copy($))}function Ue($,Ae){let Le=f.get(Ae);Le===void 0&&(Le=new WeakMap,f.set(Ae,Le));let Ze=Le.get($);Ze===void 0&&(Ze=n.getUniformBlockIndex(Ae,$.name),Le.set($,Ze))}function Ge($,Ae){const Ze=f.get(Ae).get($);u.get(Ae)!==Ze&&(n.uniformBlockBinding(Ae,Ze,$.__bindingPointIndex),u.set(Ae,Ze))}function mt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Q=null,ie={},m={},v=new WeakMap,_=[],y=null,g=!1,x=null,S=null,E=null,b=null,A=null,R=null,D=null,O=new Ie(0,0,0),M=0,I=!1,U=null,j=null,z=null,K=null,q=null,ue.set(0,0,n.canvas.width,n.canvas.height),xe.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ze,disable:ot,bindFramebuffer:He,drawBuffers:Y,useProgram:Se,setBlending:ye,setMaterial:Qe,setFlipSided:ke,setCullFace:F,setLineWidth:k,setPolygonOffset:se,setScissorTest:Te,activeTexture:re,bindTexture:le,unbindTexture:De,compressedTexImage2D:be,compressedTexImage3D:Oe,texImage2D:nt,texImage3D:Ve,updateUBOMapping:Ue,uniformBlockBinding:Ge,texStorage2D:yt,texStorage3D:at,texSubImage2D:et,texSubImage3D:lt,compressedTexSubImage2D:we,compressedTexSubImage3D:Pt,scissor:Z,viewport:_e,reset:mt}}function tj(n,e,t,i,r,s,o){const a=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(F,k){return m?new OffscreenCanvas(F,k):Ip("canvas")}function _(F,k,se,Te){let re=1;if((F.width>Te||F.height>Te)&&(re=Te/Math.max(F.width,F.height)),re<1||k===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const le=k?Bv:Math.floor,De=le(re*F.width),be=le(re*F.height);f===void 0&&(f=v(De,be));const Oe=se?v(De,be):f;return Oe.width=De,Oe.height=be,Oe.getContext("2d").drawImage(F,0,0,De,be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+De+"x"+be+")."),Oe}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function y(F){return eE(F.width)&&eE(F.height)}function g(F){return a?!1:F.wrapS!==Ai||F.wrapT!==Ai||F.minFilter!==en&&F.minFilter!==Zt}function x(F,k){return F.generateMipmaps&&k&&F.minFilter!==en&&F.minFilter!==Zt}function S(F){n.generateMipmap(F)}function E(F,k,se,Te,re=!1){if(a===!1)return k;if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let le=k;if(k===n.RED&&(se===n.FLOAT&&(le=n.R32F),se===n.HALF_FLOAT&&(le=n.R16F),se===n.UNSIGNED_BYTE&&(le=n.R8)),k===n.RED_INTEGER&&(se===n.UNSIGNED_BYTE&&(le=n.R8UI),se===n.UNSIGNED_SHORT&&(le=n.R16UI),se===n.UNSIGNED_INT&&(le=n.R32UI),se===n.BYTE&&(le=n.R8I),se===n.SHORT&&(le=n.R16I),se===n.INT&&(le=n.R32I)),k===n.RG&&(se===n.FLOAT&&(le=n.RG32F),se===n.HALF_FLOAT&&(le=n.RG16F),se===n.UNSIGNED_BYTE&&(le=n.RG8)),k===n.RGBA){const De=re?bp:Kt.getTransfer(Te);se===n.FLOAT&&(le=n.RGBA32F),se===n.HALF_FLOAT&&(le=n.RGBA16F),se===n.UNSIGNED_BYTE&&(le=De===an?n.SRGB8_ALPHA8:n.RGBA8),se===n.UNSIGNED_SHORT_4_4_4_4&&(le=n.RGBA4),se===n.UNSIGNED_SHORT_5_5_5_1&&(le=n.RGB5_A1)}return(le===n.R16F||le===n.R32F||le===n.RG16F||le===n.RG32F||le===n.RGBA16F||le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),le}function b(F,k,se){return x(F,se)===!0||F.isFramebufferTexture&&F.minFilter!==en&&F.minFilter!==Zt?Math.log2(Math.max(k.width,k.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?k.mipmaps.length:1}function A(F){return F===en||F===Ep||F===Za?n.NEAREST:n.LINEAR}function R(F){const k=F.target;k.removeEventListener("dispose",R),O(k),k.isVideoTexture&&u.delete(k)}function D(F){const k=F.target;k.removeEventListener("dispose",D),I(k)}function O(F){const k=i.get(F);if(k.__webglInit===void 0)return;const se=F.source,Te=p.get(se);if(Te){const re=Te[k.__cacheKey];re.usedTimes--,re.usedTimes===0&&M(F),Object.keys(Te).length===0&&p.delete(se)}i.remove(F)}function M(F){const k=i.get(F);n.deleteTexture(k.__webglTexture);const se=F.source,Te=p.get(se);delete Te[k.__cacheKey],o.memory.textures--}function I(F){const k=F.texture,se=i.get(F),Te=i.get(k);if(Te.__webglTexture!==void 0&&(n.deleteTexture(Te.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let re=0;re<6;re++){if(Array.isArray(se.__webglFramebuffer[re]))for(let le=0;le<se.__webglFramebuffer[re].length;le++)n.deleteFramebuffer(se.__webglFramebuffer[re][le]);else n.deleteFramebuffer(se.__webglFramebuffer[re]);se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer[re])}else{if(Array.isArray(se.__webglFramebuffer))for(let re=0;re<se.__webglFramebuffer.length;re++)n.deleteFramebuffer(se.__webglFramebuffer[re]);else n.deleteFramebuffer(se.__webglFramebuffer);if(se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&n.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let re=0;re<se.__webglColorRenderbuffer.length;re++)se.__webglColorRenderbuffer[re]&&n.deleteRenderbuffer(se.__webglColorRenderbuffer[re]);se.__webglDepthRenderbuffer&&n.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let re=0,le=k.length;re<le;re++){const De=i.get(k[re]);De.__webglTexture&&(n.deleteTexture(De.__webglTexture),o.memory.textures--),i.remove(k[re])}i.remove(k),i.remove(F)}let U=0;function j(){U=0}function z(){const F=U;return F>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+r.maxTextures),U+=1,F}function K(F){const k=[];return k.push(F.wrapS),k.push(F.wrapT),k.push(F.wrapR||0),k.push(F.magFilter),k.push(F.minFilter),k.push(F.anisotropy),k.push(F.internalFormat),k.push(F.format),k.push(F.type),k.push(F.generateMipmaps),k.push(F.premultiplyAlpha),k.push(F.flipY),k.push(F.unpackAlignment),k.push(F.colorSpace),k.join()}function q(F,k){const se=i.get(F);if(F.isVideoTexture&&Qe(F),F.isRenderTargetTexture===!1&&F.version>0&&se.__version!==F.version){const Te=F.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ue(se,F,k);return}}t.bindTexture(n.TEXTURE_2D,se.__webglTexture,n.TEXTURE0+k)}function ee(F,k){const se=i.get(F);if(F.version>0&&se.__version!==F.version){ue(se,F,k);return}t.bindTexture(n.TEXTURE_2D_ARRAY,se.__webglTexture,n.TEXTURE0+k)}function N(F,k){const se=i.get(F);if(F.version>0&&se.__version!==F.version){ue(se,F,k);return}t.bindTexture(n.TEXTURE_3D,se.__webglTexture,n.TEXTURE0+k)}function V(F,k){const se=i.get(F);if(F.version>0&&se.__version!==F.version){xe(se,F,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture,n.TEXTURE0+k)}const W={[da]:n.REPEAT,[Ai]:n.CLAMP_TO_EDGE,[Xf]:n.MIRRORED_REPEAT},Q={[en]:n.NEAREST,[Ep]:n.NEAREST_MIPMAP_NEAREST,[Za]:n.NEAREST_MIPMAP_LINEAR,[Zt]:n.LINEAR,[If]:n.LINEAR_MIPMAP_NEAREST,[Ss]:n.LINEAR_MIPMAP_LINEAR},ie={[eN]:n.NEVER,[oN]:n.ALWAYS,[tN]:n.LESS,[fM]:n.LEQUAL,[nN]:n.EQUAL,[sN]:n.GEQUAL,[iN]:n.GREATER,[rN]:n.NOTEQUAL};function Me(F,k,se){if(k.type===Hr&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===Zt||k.magFilter===If||k.magFilter===Za||k.magFilter===Ss||k.minFilter===Zt||k.minFilter===If||k.minFilter===Za||k.minFilter===Ss)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),se?(n.texParameteri(F,n.TEXTURE_WRAP_S,W[k.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,W[k.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,W[k.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,Q[k.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,Q[k.minFilter])):(n.texParameteri(F,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(F,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(k.wrapS!==Ai||k.wrapT!==Ai)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,n.TEXTURE_MAG_FILTER,A(k.magFilter)),n.texParameteri(F,n.TEXTURE_MIN_FILTER,A(k.minFilter)),k.minFilter!==en&&k.minFilter!==Zt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),k.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,ie[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Te=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===en||k.minFilter!==Za&&k.minFilter!==Ss||k.type===Hr&&e.has("OES_texture_float_linear")===!1||a===!1&&k.type===$c&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||i.get(k).__currentAnisotropy)&&(n.texParameterf(F,Te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy)}}function te(F,k){let se=!1;F.__webglInit===void 0&&(F.__webglInit=!0,k.addEventListener("dispose",R));const Te=k.source;let re=p.get(Te);re===void 0&&(re={},p.set(Te,re));const le=K(k);if(le!==F.__cacheKey){re[le]===void 0&&(re[le]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,se=!0),re[le].usedTimes++;const De=re[F.__cacheKey];De!==void 0&&(re[F.__cacheKey].usedTimes--,De.usedTimes===0&&M(k)),F.__cacheKey=le,F.__webglTexture=re[le].texture}return se}function ue(F,k,se){let Te=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Te=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(Te=n.TEXTURE_3D);const re=te(F,k),le=k.source;t.bindTexture(Te,F.__webglTexture,n.TEXTURE0+se);const De=i.get(le);if(le.version!==De.__version||re===!0){t.activeTexture(n.TEXTURE0+se);const be=Kt.getPrimaries(Kt.workingColorSpace),Oe=k.colorSpace===rr?null:Kt.getPrimaries(k.colorSpace),et=k.colorSpace===rr||be===Oe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,et);const lt=g(k)&&y(k.image)===!1;let we=_(k.image,lt,!1,r.maxTextureSize);we=ke(k,we);const Pt=y(we)||a,yt=s.convert(k.format,k.colorSpace);let at=s.convert(k.type),nt=E(k.internalFormat,yt,at,k.colorSpace,k.isVideoTexture);Me(Te,k,Pt);let Ve;const Z=k.mipmaps,_e=a&&k.isVideoTexture!==!0&&nt!==aM,Ue=De.__version===void 0||re===!0,Ge=le.dataReady,mt=b(k,we,Pt);if(k.isDepthTexture)nt=n.DEPTH_COMPONENT,a?k.type===Hr?nt=n.DEPTH_COMPONENT32F:k.type===vo?nt=n.DEPTH_COMPONENT24:k.type===sa?nt=n.DEPTH24_STENCIL8:nt=n.DEPTH_COMPONENT16:k.type===Hr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===pl&&nt===n.DEPTH_COMPONENT&&k.type!==Ny&&k.type!==vo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=vo,at=s.convert(k.type)),k.format===wl&&nt===n.DEPTH_COMPONENT&&(nt=n.DEPTH_STENCIL,k.type!==sa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=sa,at=s.convert(k.type))),Ue&&(_e?t.texStorage2D(n.TEXTURE_2D,1,nt,we.width,we.height):t.texImage2D(n.TEXTURE_2D,0,nt,we.width,we.height,0,yt,at,null));else if(k.isDataTexture)if(Z.length>0&&Pt){_e&&Ue&&t.texStorage2D(n.TEXTURE_2D,mt,nt,Z[0].width,Z[0].height);for(let $=0,Ae=Z.length;$<Ae;$++)Ve=Z[$],_e?Ge&&t.texSubImage2D(n.TEXTURE_2D,$,0,0,Ve.width,Ve.height,yt,at,Ve.data):t.texImage2D(n.TEXTURE_2D,$,nt,Ve.width,Ve.height,0,yt,at,Ve.data);k.generateMipmaps=!1}else _e?(Ue&&t.texStorage2D(n.TEXTURE_2D,mt,nt,we.width,we.height),Ge&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,we.width,we.height,yt,at,we.data)):t.texImage2D(n.TEXTURE_2D,0,nt,we.width,we.height,0,yt,at,we.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){_e&&Ue&&t.texStorage3D(n.TEXTURE_2D_ARRAY,mt,nt,Z[0].width,Z[0].height,we.depth);for(let $=0,Ae=Z.length;$<Ae;$++)Ve=Z[$],k.format!==ir?yt!==null?_e?Ge&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,$,0,0,0,Ve.width,Ve.height,we.depth,yt,Ve.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,$,nt,Ve.width,Ve.height,we.depth,0,Ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_e?Ge&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,$,0,0,0,Ve.width,Ve.height,we.depth,yt,at,Ve.data):t.texImage3D(n.TEXTURE_2D_ARRAY,$,nt,Ve.width,Ve.height,we.depth,0,yt,at,Ve.data)}else{_e&&Ue&&t.texStorage2D(n.TEXTURE_2D,mt,nt,Z[0].width,Z[0].height);for(let $=0,Ae=Z.length;$<Ae;$++)Ve=Z[$],k.format!==ir?yt!==null?_e?Ge&&t.compressedTexSubImage2D(n.TEXTURE_2D,$,0,0,Ve.width,Ve.height,yt,Ve.data):t.compressedTexImage2D(n.TEXTURE_2D,$,nt,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_e?Ge&&t.texSubImage2D(n.TEXTURE_2D,$,0,0,Ve.width,Ve.height,yt,at,Ve.data):t.texImage2D(n.TEXTURE_2D,$,nt,Ve.width,Ve.height,0,yt,at,Ve.data)}else if(k.isDataArrayTexture)_e?(Ue&&t.texStorage3D(n.TEXTURE_2D_ARRAY,mt,nt,we.width,we.height,we.depth),Ge&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,we.width,we.height,we.depth,yt,at,we.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,nt,we.width,we.height,we.depth,0,yt,at,we.data);else if(k.isData3DTexture)_e?(Ue&&t.texStorage3D(n.TEXTURE_3D,mt,nt,we.width,we.height,we.depth),Ge&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,we.width,we.height,we.depth,yt,at,we.data)):t.texImage3D(n.TEXTURE_3D,0,nt,we.width,we.height,we.depth,0,yt,at,we.data);else if(k.isFramebufferTexture){if(Ue)if(_e)t.texStorage2D(n.TEXTURE_2D,mt,nt,we.width,we.height);else{let $=we.width,Ae=we.height;for(let Le=0;Le<mt;Le++)t.texImage2D(n.TEXTURE_2D,Le,nt,$,Ae,0,yt,at,null),$>>=1,Ae>>=1}}else if(Z.length>0&&Pt){_e&&Ue&&t.texStorage2D(n.TEXTURE_2D,mt,nt,Z[0].width,Z[0].height);for(let $=0,Ae=Z.length;$<Ae;$++)Ve=Z[$],_e?Ge&&t.texSubImage2D(n.TEXTURE_2D,$,0,0,yt,at,Ve):t.texImage2D(n.TEXTURE_2D,$,nt,yt,at,Ve);k.generateMipmaps=!1}else _e?(Ue&&t.texStorage2D(n.TEXTURE_2D,mt,nt,we.width,we.height),Ge&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,yt,at,we)):t.texImage2D(n.TEXTURE_2D,0,nt,yt,at,we);x(k,Pt)&&S(Te),De.__version=le.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function xe(F,k,se){if(k.image.length!==6)return;const Te=te(F,k),re=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+se);const le=i.get(re);if(re.version!==le.__version||Te===!0){t.activeTexture(n.TEXTURE0+se);const De=Kt.getPrimaries(Kt.workingColorSpace),be=k.colorSpace===rr?null:Kt.getPrimaries(k.colorSpace),Oe=k.colorSpace===rr||De===be?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);const et=k.isCompressedTexture||k.image[0].isCompressedTexture,lt=k.image[0]&&k.image[0].isDataTexture,we=[];for(let $=0;$<6;$++)!et&&!lt?we[$]=_(k.image[$],!1,!0,r.maxCubemapSize):we[$]=lt?k.image[$].image:k.image[$],we[$]=ke(k,we[$]);const Pt=we[0],yt=y(Pt)||a,at=s.convert(k.format,k.colorSpace),nt=s.convert(k.type),Ve=E(k.internalFormat,at,nt,k.colorSpace),Z=a&&k.isVideoTexture!==!0,_e=le.__version===void 0||Te===!0,Ue=re.dataReady;let Ge=b(k,Pt,yt);Me(n.TEXTURE_CUBE_MAP,k,yt);let mt;if(et){Z&&_e&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ge,Ve,Pt.width,Pt.height);for(let $=0;$<6;$++){mt=we[$].mipmaps;for(let Ae=0;Ae<mt.length;Ae++){const Le=mt[Ae];k.format!==ir?at!==null?Z?Ue&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae,0,0,Le.width,Le.height,at,Le.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae,Ve,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Z?Ue&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae,0,0,Le.width,Le.height,at,nt,Le.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae,Ve,Le.width,Le.height,0,at,nt,Le.data)}}}else{mt=k.mipmaps,Z&&_e&&(mt.length>0&&Ge++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ge,Ve,we[0].width,we[0].height));for(let $=0;$<6;$++)if(lt){Z?Ue&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,0,0,we[$].width,we[$].height,at,nt,we[$].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,Ve,we[$].width,we[$].height,0,at,nt,we[$].data);for(let Ae=0;Ae<mt.length;Ae++){const Ze=mt[Ae].image[$].image;Z?Ue&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae+1,0,0,Ze.width,Ze.height,at,nt,Ze.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae+1,Ve,Ze.width,Ze.height,0,at,nt,Ze.data)}}else{Z?Ue&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,0,0,at,nt,we[$]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,0,Ve,at,nt,we[$]);for(let Ae=0;Ae<mt.length;Ae++){const Le=mt[Ae];Z?Ue&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae+1,0,0,at,nt,Le.image[$]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+$,Ae+1,Ve,at,nt,Le.image[$])}}}x(k,yt)&&S(n.TEXTURE_CUBE_MAP),le.__version=re.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function Re(F,k,se,Te,re,le){const De=s.convert(se.format,se.colorSpace),be=s.convert(se.type),Oe=E(se.internalFormat,De,be,se.colorSpace);if(!i.get(k).__hasExternalTextures){const lt=Math.max(1,k.width>>le),we=Math.max(1,k.height>>le);re===n.TEXTURE_3D||re===n.TEXTURE_2D_ARRAY?t.texImage3D(re,le,Oe,lt,we,k.depth,0,De,be,null):t.texImage2D(re,le,Oe,lt,we,0,De,be,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),ye(k)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Te,re,i.get(se).__webglTexture,0,Ee(k)):(re===n.TEXTURE_2D||re>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&re<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Te,re,i.get(se).__webglTexture,le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function $e(F,k,se){if(n.bindRenderbuffer(n.RENDERBUFFER,F),k.depthBuffer&&!k.stencilBuffer){let Te=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(se||ye(k)){const re=k.depthTexture;re&&re.isDepthTexture&&(re.type===Hr?Te=n.DEPTH_COMPONENT32F:re.type===vo&&(Te=n.DEPTH_COMPONENT24));const le=Ee(k);ye(k)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,le,Te,k.width,k.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,le,Te,k.width,k.height)}else n.renderbufferStorage(n.RENDERBUFFER,Te,k.width,k.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,F)}else if(k.depthBuffer&&k.stencilBuffer){const Te=Ee(k);se&&ye(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Te,n.DEPTH24_STENCIL8,k.width,k.height):ye(k)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Te,n.DEPTH24_STENCIL8,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,F)}else{const Te=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let re=0;re<Te.length;re++){const le=Te[re],De=s.convert(le.format,le.colorSpace),be=s.convert(le.type),Oe=E(le.internalFormat,De,be,le.colorSpace),et=Ee(k);se&&ye(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,et,Oe,k.width,k.height):ye(k)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,et,Oe,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Oe,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ze(F,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),q(k.depthTexture,0);const Te=i.get(k.depthTexture).__webglTexture,re=Ee(k);if(k.depthTexture.format===pl)ye(k)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0,re):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0);else if(k.depthTexture.format===wl)ye(k)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0,re):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function ot(F){const k=i.get(F),se=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!k.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");ze(k.__webglFramebuffer,F)}else if(se){k.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[Te]),k.__webglDepthbuffer[Te]=n.createRenderbuffer(),$e(k.__webglDepthbuffer[Te],F,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=n.createRenderbuffer(),$e(k.__webglDepthbuffer,F,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function He(F,k,se){const Te=i.get(F);k!==void 0&&Re(Te.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),se!==void 0&&ot(F)}function Y(F){const k=F.texture,se=i.get(F),Te=i.get(k);F.addEventListener("dispose",D),F.isWebGLMultipleRenderTargets!==!0&&(Te.__webglTexture===void 0&&(Te.__webglTexture=n.createTexture()),Te.__version=k.version,o.memory.textures++);const re=F.isWebGLCubeRenderTarget===!0,le=F.isWebGLMultipleRenderTargets===!0,De=y(F)||a;if(re){se.__webglFramebuffer=[];for(let be=0;be<6;be++)if(a&&k.mipmaps&&k.mipmaps.length>0){se.__webglFramebuffer[be]=[];for(let Oe=0;Oe<k.mipmaps.length;Oe++)se.__webglFramebuffer[be][Oe]=n.createFramebuffer()}else se.__webglFramebuffer[be]=n.createFramebuffer()}else{if(a&&k.mipmaps&&k.mipmaps.length>0){se.__webglFramebuffer=[];for(let be=0;be<k.mipmaps.length;be++)se.__webglFramebuffer[be]=n.createFramebuffer()}else se.__webglFramebuffer=n.createFramebuffer();if(le)if(r.drawBuffers){const be=F.texture;for(let Oe=0,et=be.length;Oe<et;Oe++){const lt=i.get(be[Oe]);lt.__webglTexture===void 0&&(lt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&ye(F)===!1){const be=le?k:[k];se.__webglMultisampledFramebuffer=n.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let Oe=0;Oe<be.length;Oe++){const et=be[Oe];se.__webglColorRenderbuffer[Oe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,se.__webglColorRenderbuffer[Oe]);const lt=s.convert(et.format,et.colorSpace),we=s.convert(et.type),Pt=E(et.internalFormat,lt,we,et.colorSpace,F.isXRRenderTarget===!0),yt=Ee(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,Pt,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.RENDERBUFFER,se.__webglColorRenderbuffer[Oe])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(se.__webglDepthRenderbuffer=n.createRenderbuffer(),$e(se.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(re){t.bindTexture(n.TEXTURE_CUBE_MAP,Te.__webglTexture),Me(n.TEXTURE_CUBE_MAP,k,De);for(let be=0;be<6;be++)if(a&&k.mipmaps&&k.mipmaps.length>0)for(let Oe=0;Oe<k.mipmaps.length;Oe++)Re(se.__webglFramebuffer[be][Oe],F,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+be,Oe);else Re(se.__webglFramebuffer[be],F,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+be,0);x(k,De)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(le){const be=F.texture;for(let Oe=0,et=be.length;Oe<et;Oe++){const lt=be[Oe],we=i.get(lt);t.bindTexture(n.TEXTURE_2D,we.__webglTexture),Me(n.TEXTURE_2D,lt,De),Re(se.__webglFramebuffer,F,lt,n.COLOR_ATTACHMENT0+Oe,n.TEXTURE_2D,0),x(lt,De)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let be=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?be=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(be,Te.__webglTexture),Me(be,k,De),a&&k.mipmaps&&k.mipmaps.length>0)for(let Oe=0;Oe<k.mipmaps.length;Oe++)Re(se.__webglFramebuffer[Oe],F,k,n.COLOR_ATTACHMENT0,be,Oe);else Re(se.__webglFramebuffer,F,k,n.COLOR_ATTACHMENT0,be,0);x(k,De)&&S(be),t.unbindTexture()}F.depthBuffer&&ot(F)}function Se(F){const k=y(F)||a,se=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Te=0,re=se.length;Te<re;Te++){const le=se[Te];if(x(le,k)){const De=F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,be=i.get(le).__webglTexture;t.bindTexture(De,be),S(De),t.unbindTexture()}}}function ve(F){if(a&&F.samples>0&&ye(F)===!1){const k=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],se=F.width,Te=F.height;let re=n.COLOR_BUFFER_BIT;const le=[],De=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,be=i.get(F),Oe=F.isWebGLMultipleRenderTargets===!0;if(Oe)for(let et=0;et<k.length;et++)t.bindFramebuffer(n.FRAMEBUFFER,be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,be.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,be.__webglFramebuffer);for(let et=0;et<k.length;et++){le.push(n.COLOR_ATTACHMENT0+et),F.depthBuffer&&le.push(De);const lt=be.__ignoreDepthValues!==void 0?be.__ignoreDepthValues:!1;if(lt===!1&&(F.depthBuffer&&(re|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&(re|=n.STENCIL_BUFFER_BIT)),Oe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,be.__webglColorRenderbuffer[et]),lt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[De]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[De])),Oe){const we=i.get(k[et]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,we,0)}n.blitFramebuffer(0,0,se,Te,0,0,se,Te,re,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,le)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Oe)for(let et=0;et<k.length;et++){t.bindFramebuffer(n.FRAMEBUFFER,be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,be.__webglColorRenderbuffer[et]);const lt=i.get(k[et]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,lt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,be.__webglMultisampledFramebuffer)}}function Ee(F){return Math.min(r.maxSamples,F.samples)}function ye(F){const k=i.get(F);return a&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Qe(F){const k=o.render.frame;u.get(F)!==k&&(u.set(F,k),F.update())}function ke(F,k){const se=F.colorSpace,Te=F.format,re=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===zv||se!==qn&&se!==rr&&(Kt.getTransfer(se)===an?a===!1?e.has("EXT_sRGB")===!0&&Te===ir?(F.format=zv,F.minFilter=Zt,F.generateMipmaps=!1):k=hM.sRGBToLinear(k):(Te!==ir||re!==Kn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",se)),k}this.allocateTextureUnit=z,this.resetTextureUnits=j,this.setTexture2D=q,this.setTexture2DArray=ee,this.setTexture3D=N,this.setTextureCube=V,this.rebindTextures=He,this.setupRenderTarget=Y,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=ve,this.setupDepthRenderbuffer=ot,this.setupFrameBufferTexture=Re,this.useMultisampledRTT=ye}function wN(n,e,t){const i=t.isWebGL2;function r(s,o=rr){let a;const l=Kt.getTransfer(o);if(s===Kn)return n.UNSIGNED_BYTE;if(s===nM)return n.UNSIGNED_SHORT_4_4_4_4;if(s===iM)return n.UNSIGNED_SHORT_5_5_5_1;if(s===HO)return n.BYTE;if(s===VO)return n.SHORT;if(s===Ny)return n.UNSIGNED_SHORT;if(s===tM)return n.INT;if(s===vo)return n.UNSIGNED_INT;if(s===Hr)return n.FLOAT;if(s===$c)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===GO)return n.ALPHA;if(s===ir)return n.RGBA;if(s===WO)return n.LUMINANCE;if(s===$O)return n.LUMINANCE_ALPHA;if(s===pl)return n.DEPTH_COMPONENT;if(s===wl)return n.DEPTH_STENCIL;if(s===zv)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===jO)return n.RED;if(s===rM)return n.RED_INTEGER;if(s===XO)return n.RG;if(s===sM)return n.RG_INTEGER;if(s===oM)return n.RGBA_INTEGER;if(s===q0||s===Z0||s===Q0||s===J0)if(l===an)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===q0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Z0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Q0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===J0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===q0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Z0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Q0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===J0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Aw||s===Cw||s===Rw||s===Pw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Aw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Cw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Rw)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Pw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===aM)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Iw||s===Lw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Iw)return l===an?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Lw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Dw||s===Ow||s===Nw||s===kw||s===Uw||s===Fw||s===zw||s===Bw||s===Hw||s===Vw||s===Gw||s===Ww||s===$w||s===jw)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Dw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Ow)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Nw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===kw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Uw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Fw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===zw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Bw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Hw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Vw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Gw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Ww)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===$w)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===jw)return l===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===ev||s===Xw||s===Yw)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===ev)return l===an?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Xw)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Yw)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===YO||s===Kw||s===qw||s===Zw)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===ev)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Kw)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===qw)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Zw)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===sa?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class EN extends cn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ta extends Vt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const nj={type:"move"};class S1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ta,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ta,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new H,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new H),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ta,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new H,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new H),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const y=t.getJointPose(_,i),g=this._getHandJoint(c,_);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=u.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(nj)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new ta;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const ij=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,rj=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class sj{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new rn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}render(e,t){if(this.texture!==null){if(this.mesh===null){const i=t.cameras[0].viewport,r=new Sn({extensions:{fragDepth:!0},vertexShader:ij,fragmentShader:rj,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Pn(new vd(20,20),r)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class oj extends ts{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,p=null,m=null,v=null;const _=new sj,y=t.getContextAttributes();let g=null,x=null;const S=[],E=[],b=new he;let A=null;const R=new cn;R.layers.enable(1),R.viewport=new qt;const D=new cn;D.layers.enable(2),D.viewport=new qt;const O=[R,D],M=new EN;M.layers.enable(1),M.layers.enable(2);let I=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(te){let ue=S[te];return ue===void 0&&(ue=new S1,S[te]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(te){let ue=S[te];return ue===void 0&&(ue=new S1,S[te]=ue),ue.getGripSpace()},this.getHand=function(te){let ue=S[te];return ue===void 0&&(ue=new S1,S[te]=ue),ue.getHandSpace()};function j(te){const ue=E.indexOf(te.inputSource);if(ue===-1)return;const xe=S[ue];xe!==void 0&&(xe.update(te.inputSource,te.frame,c||o),xe.dispatchEvent({type:te.type,data:te.inputSource}))}function z(){r.removeEventListener("select",j),r.removeEventListener("selectstart",j),r.removeEventListener("selectend",j),r.removeEventListener("squeeze",j),r.removeEventListener("squeezestart",j),r.removeEventListener("squeezeend",j),r.removeEventListener("end",z),r.removeEventListener("inputsourceschange",K);for(let te=0;te<S.length;te++){const ue=E[te];ue!==null&&(E[te]=null,S[te].disconnect(ue))}I=null,U=null,_.reset(),e.setRenderTarget(g),m=null,p=null,f=null,r=null,x=null,Me.stop(),i.isPresenting=!1,e.setPixelRatio(A),e.setSize(b.width,b.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(te){s=te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(te){a=te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(te){c=te},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(te){if(r=te,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",j),r.addEventListener("selectstart",j),r.addEventListener("selectend",j),r.addEventListener("squeeze",j),r.addEventListener("squeezestart",j),r.addEventListener("squeezeend",j),r.addEventListener("end",z),r.addEventListener("inputsourceschange",K),y.xrCompatible!==!0&&await t.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(b),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ue={antialias:r.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,ue),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),x=new gn(m.framebufferWidth,m.framebufferHeight,{format:ir,type:Kn,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let ue=null,xe=null,Re=null;y.depth&&(Re=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ue=y.stencil?wl:pl,xe=y.stencil?sa:vo);const $e={colorFormat:t.RGBA8,depthFormat:Re,scaleFactor:s};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer($e),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),x=new gn(p.textureWidth,p.textureHeight,{format:ir,type:Kn,depthTexture:new zy(p.textureWidth,p.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,ue),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const ze=e.properties.get(x);ze.__ignoreDepthValues=p.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),Me.setContext(r),Me.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function K(te){for(let ue=0;ue<te.removed.length;ue++){const xe=te.removed[ue],Re=E.indexOf(xe);Re>=0&&(E[Re]=null,S[Re].disconnect(xe))}for(let ue=0;ue<te.added.length;ue++){const xe=te.added[ue];let Re=E.indexOf(xe);if(Re===-1){for(let ze=0;ze<S.length;ze++)if(ze>=E.length){E.push(xe),Re=ze;break}else if(E[ze]===null){E[ze]=xe,Re=ze;break}if(Re===-1)break}const $e=S[Re];$e&&$e.connect(xe)}}const q=new H,ee=new H;function N(te,ue,xe){q.setFromMatrixPosition(ue.matrixWorld),ee.setFromMatrixPosition(xe.matrixWorld);const Re=q.distanceTo(ee),$e=ue.projectionMatrix.elements,ze=xe.projectionMatrix.elements,ot=$e[14]/($e[10]-1),He=$e[14]/($e[10]+1),Y=($e[9]+1)/$e[5],Se=($e[9]-1)/$e[5],ve=($e[8]-1)/$e[0],Ee=(ze[8]+1)/ze[0],ye=ot*ve,Qe=ot*Ee,ke=Re/(-ve+Ee),F=ke*-ve;ue.matrixWorld.decompose(te.position,te.quaternion,te.scale),te.translateX(F),te.translateZ(ke),te.matrixWorld.compose(te.position,te.quaternion,te.scale),te.matrixWorldInverse.copy(te.matrixWorld).invert();const k=ot+ke,se=He+ke,Te=ye-F,re=Qe+(Re-F),le=Y*He/se*k,De=Se*He/se*k;te.projectionMatrix.makePerspective(Te,re,le,De,k,se),te.projectionMatrixInverse.copy(te.projectionMatrix).invert()}function V(te,ue){ue===null?te.matrixWorld.copy(te.matrix):te.matrixWorld.multiplyMatrices(ue.matrixWorld,te.matrix),te.matrixWorldInverse.copy(te.matrixWorld).invert()}this.updateCamera=function(te){if(r===null)return;_.texture!==null&&(te.near=_.depthNear,te.far=_.depthFar),M.near=D.near=R.near=te.near,M.far=D.far=R.far=te.far,(I!==M.near||U!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),I=M.near,U=M.far,R.near=I,R.far=U,D.near=I,D.far=U,R.updateProjectionMatrix(),D.updateProjectionMatrix(),te.updateProjectionMatrix());const ue=te.parent,xe=M.cameras;V(M,ue);for(let Re=0;Re<xe.length;Re++)V(xe[Re],ue);xe.length===2?N(M,R,D):M.projectionMatrix.copy(R.projectionMatrix),W(te,M,ue)};function W(te,ue,xe){xe===null?te.matrix.copy(ue.matrixWorld):(te.matrix.copy(xe.matrixWorld),te.matrix.invert(),te.matrix.multiply(ue.matrixWorld)),te.matrix.decompose(te.position,te.quaternion,te.scale),te.updateMatrixWorld(!0),te.projectionMatrix.copy(ue.projectionMatrix),te.projectionMatrixInverse.copy(ue.projectionMatrixInverse),te.isPerspectiveCamera&&(te.fov=Kf*2*Math.atan(1/te.projectionMatrix.elements[5]),te.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(te){l=te,p!==null&&(p.fixedFoveation=te),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=te)},this.hasDepthSensing=function(){return _.texture!==null};let Q=null;function ie(te,ue){if(u=ue.getViewerPose(c||o),v=ue,u!==null){const xe=u.views;m!==null&&(e.setRenderTargetFramebuffer(x,m.framebuffer),e.setRenderTarget(x));let Re=!1;xe.length!==M.cameras.length&&(M.cameras.length=0,Re=!0);for(let ze=0;ze<xe.length;ze++){const ot=xe[ze];let He=null;if(m!==null)He=m.getViewport(ot);else{const Se=f.getViewSubImage(p,ot);He=Se.viewport,ze===0&&(e.setRenderTargetTextures(x,Se.colorTexture,p.ignoreDepthValues?void 0:Se.depthStencilTexture),e.setRenderTarget(x))}let Y=O[ze];Y===void 0&&(Y=new cn,Y.layers.enable(ze),Y.viewport=new qt,O[ze]=Y),Y.matrix.fromArray(ot.transform.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.projectionMatrix.fromArray(ot.projectionMatrix),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert(),Y.viewport.set(He.x,He.y,He.width,He.height),ze===0&&(M.matrix.copy(Y.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),Re===!0&&M.cameras.push(Y)}const $e=r.enabledFeatures;if($e&&$e.includes("depth-sensing")){const ze=f.getDepthInformation(xe[0]);ze&&ze.isValid&&ze.texture&&_.init(e,ze,r.renderState)}}for(let xe=0;xe<S.length;xe++){const Re=E[xe],$e=S[xe];Re!==null&&$e!==void 0&&$e.update(Re,ue,c||o)}_.render(e,M),Q&&Q(te,ue),ue.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ue}),v=null}const Me=new gN;Me.setAnimationLoop(ie),this.setAnimationLoop=function(te){Q=te},this.dispose=function(){}}}function aj(n,e){function t(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function i(y,g){g.color.getRGB(y.fogColor.value,dN(n)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function r(y,g,x,S,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(y,g):g.isMeshToonMaterial?(s(y,g),f(y,g)):g.isMeshPhongMaterial?(s(y,g),u(y,g)):g.isMeshStandardMaterial?(s(y,g),p(y,g),g.isMeshPhysicalMaterial&&m(y,g,E)):g.isMeshMatcapMaterial?(s(y,g),v(y,g)):g.isMeshDepthMaterial?s(y,g):g.isMeshDistanceMaterial?(s(y,g),_(y,g)):g.isMeshNormalMaterial?s(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&a(y,g)):g.isPointsMaterial?l(y,g,x,S):g.isSpriteMaterial?c(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,t(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===ai&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,t(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===ai&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,t(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,t(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(y.envMap.value=x,y.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap){y.lightMap.value=g.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,y.lightMapTransform)}g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform))}function a(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,x,S){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*x,y.scale.value=S*.5,g.map&&(y.map.value=g.map,t(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function c(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function u(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function f(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function p(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,y.roughnessMapTransform)),e.get(g).envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function m(y,g,x){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ai&&y.clearcoatNormalScale.value.negate())),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=x.texture,y.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,g){g.matcap&&(y.matcap.value=g.matcap)}function _(y,g){const x=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(x.matrixWorld),y.nearDistance.value=x.shadow.camera.near,y.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function lj(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,S){const E=S.program;i.uniformBlockBinding(x,E)}function c(x,S){let E=r[x.id];E===void 0&&(v(x),E=u(x),r[x.id]=E,x.addEventListener("dispose",y));const b=S.program;i.updateUBOMapping(x,b);const A=e.render.frame;s[x.id]!==A&&(p(x),s[x.id]=A)}function u(x){const S=f();x.__bindingPointIndex=S;const E=n.createBuffer(),b=x.__size,A=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,b,A),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,E),E}function f(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const S=r[x.id],E=x.uniforms,b=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let A=0,R=E.length;A<R;A++){const D=Array.isArray(E[A])?E[A]:[E[A]];for(let O=0,M=D.length;O<M;O++){const I=D[O];if(m(I,A,O,b)===!0){const U=I.__offset,j=Array.isArray(I.value)?I.value:[I.value];let z=0;for(let K=0;K<j.length;K++){const q=j[K],ee=_(q);typeof q=="number"||typeof q=="boolean"?(I.__data[0]=q,n.bufferSubData(n.UNIFORM_BUFFER,U+z,I.__data)):q.isMatrix3?(I.__data[0]=q.elements[0],I.__data[1]=q.elements[1],I.__data[2]=q.elements[2],I.__data[3]=0,I.__data[4]=q.elements[3],I.__data[5]=q.elements[4],I.__data[6]=q.elements[5],I.__data[7]=0,I.__data[8]=q.elements[6],I.__data[9]=q.elements[7],I.__data[10]=q.elements[8],I.__data[11]=0):(q.toArray(I.__data,z),z+=ee.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,U,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(x,S,E,b){const A=x.value,R=S+"_"+E;if(b[R]===void 0)return typeof A=="number"||typeof A=="boolean"?b[R]=A:b[R]=A.clone(),!0;{const D=b[R];if(typeof A=="number"||typeof A=="boolean"){if(D!==A)return b[R]=A,!0}else if(D.equals(A)===!1)return D.copy(A),!0}return!1}function v(x){const S=x.uniforms;let E=0;const b=16;for(let R=0,D=S.length;R<D;R++){const O=Array.isArray(S[R])?S[R]:[S[R]];for(let M=0,I=O.length;M<I;M++){const U=O[M],j=Array.isArray(U.value)?U.value:[U.value];for(let z=0,K=j.length;z<K;z++){const q=j[z],ee=_(q),N=E%b;N!==0&&b-N<ee.boundary&&(E+=b-N),U.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=E,E+=ee.storage}}}const A=E%b;return A>0&&(E+=b-A),x.__size=E,x.__cache={},this}function _(x){const S={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(S.boundary=4,S.storage=4):x.isVector2?(S.boundary=8,S.storage=8):x.isVector3||x.isColor?(S.boundary=16,S.storage=12):x.isVector4?(S.boundary=16,S.storage=16):x.isMatrix3?(S.boundary=48,S.storage=48):x.isMatrix4?(S.boundary=64,S.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),S}function y(x){const S=x.target;S.removeEventListener("dispose",y);const E=o.indexOf(S.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function g(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}return{bind:l,update:c,dispose:g}}class _M{constructor(e={}){const{canvas:t=cN(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),v=new Int32Array(4);let _=null,y=null;const g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=St,this._useLegacyLights=!1,this.toneMapping=$s,this.toneMappingExposure=1;const S=this;let E=!1,b=0,A=0,R=null,D=-1,O=null;const M=new qt,I=new qt;let U=null;const j=new Ie(0);let z=0,K=t.width,q=t.height,ee=1,N=null,V=null;const W=new qt(0,0,K,q),Q=new qt(0,0,K,q);let ie=!1;const Me=new sm;let te=!1,ue=!1,xe=null;const Re=new ft,$e=new he,ze=new H,ot={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function He(){return R===null?ee:1}let Y=i;function Se(B,oe){for(let de=0;de<B.length;de++){const pe=B[de],fe=t.getContext(pe,oe);if(fe!==null)return fe}return null}try{const B={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${pd}`),t.addEventListener("webglcontextlost",mt,!1),t.addEventListener("webglcontextrestored",$,!1),t.addEventListener("webglcontextcreationerror",Ae,!1),Y===null){const oe=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&oe.shift(),Y=Se(oe,B),Y===null)throw Se(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Y instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Y.getShaderPrecisionFormat===void 0&&(Y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let ve,Ee,ye,Qe,ke,F,k,se,Te,re,le,De,be,Oe,et,lt,we,Pt,yt,at,nt,Ve,Z,_e;function Ue(){ve=new _$(Y),Ee=new h$(Y,ve,e),ve.init(Ee),Ve=new wN(Y,ve,Ee),ye=new ej(Y,ve,Ee),Qe=new w$(Y),ke=new V7,F=new tj(Y,ve,ye,ke,Ee,Ve,Qe),k=new m$(S),se=new y$(S),Te=new P8(Y,Ee),Z=new f$(Y,ve,Te,Ee),re=new x$(Y,Te,Qe,Z),le=new b$(Y,re,Te,Qe),yt=new M$(Y,Ee,F),lt=new p$(ke),De=new H7(S,k,se,ve,Ee,Z,lt),be=new aj(S,ke),Oe=new W7,et=new q7(ve,Ee),Pt=new u$(S,k,se,ye,le,p,l),we=new J7(S,le,Ee),_e=new lj(Y,Qe,Ee,ye),at=new d$(Y,ve,Qe,Ee),nt=new S$(Y,ve,Qe,Ee),Qe.programs=De.programs,S.capabilities=Ee,S.extensions=ve,S.properties=ke,S.renderLists=Oe,S.shadowMap=we,S.state=ye,S.info=Qe}Ue();const Ge=new oj(S,Y);this.xr=Ge,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){const B=ve.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=ve.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return ee},this.setPixelRatio=function(B){B!==void 0&&(ee=B,this.setSize(K,q,!1))},this.getSize=function(B){return B.set(K,q)},this.setSize=function(B,oe,de=!0){if(Ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=B,q=oe,t.width=Math.floor(B*ee),t.height=Math.floor(oe*ee),de===!0&&(t.style.width=B+"px",t.style.height=oe+"px"),this.setViewport(0,0,B,oe)},this.getDrawingBufferSize=function(B){return B.set(K*ee,q*ee).floor()},this.setDrawingBufferSize=function(B,oe,de){K=B,q=oe,ee=de,t.width=Math.floor(B*de),t.height=Math.floor(oe*de),this.setViewport(0,0,B,oe)},this.getCurrentViewport=function(B){return B.copy(M)},this.getViewport=function(B){return B.copy(W)},this.setViewport=function(B,oe,de,pe){B.isVector4?W.set(B.x,B.y,B.z,B.w):W.set(B,oe,de,pe),ye.viewport(M.copy(W).multiplyScalar(ee).floor())},this.getScissor=function(B){return B.copy(Q)},this.setScissor=function(B,oe,de,pe){B.isVector4?Q.set(B.x,B.y,B.z,B.w):Q.set(B,oe,de,pe),ye.scissor(I.copy(Q).multiplyScalar(ee).floor())},this.getScissorTest=function(){return ie},this.setScissorTest=function(B){ye.setScissorTest(ie=B)},this.setOpaqueSort=function(B){N=B},this.setTransparentSort=function(B){V=B},this.getClearColor=function(B){return B.copy(Pt.getClearColor())},this.setClearColor=function(){Pt.setClearColor.apply(Pt,arguments)},this.getClearAlpha=function(){return Pt.getClearAlpha()},this.setClearAlpha=function(){Pt.setClearAlpha.apply(Pt,arguments)},this.clear=function(B=!0,oe=!0,de=!0){let pe=0;if(B){let fe=!1;if(R!==null){const We=R.texture.format;fe=We===oM||We===sM||We===rM}if(fe){const We=R.texture.type,rt=We===Kn||We===vo||We===Ny||We===sa||We===nM||We===iM,dt=Pt.getClearColor(),ht=Pt.getClearAlpha(),_t=dt.r,vt=dt.g,xt=dt.b;rt?(m[0]=_t,m[1]=vt,m[2]=xt,m[3]=ht,Y.clearBufferuiv(Y.COLOR,0,m)):(v[0]=_t,v[1]=vt,v[2]=xt,v[3]=ht,Y.clearBufferiv(Y.COLOR,0,v))}else pe|=Y.COLOR_BUFFER_BIT}oe&&(pe|=Y.DEPTH_BUFFER_BIT),de&&(pe|=Y.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Y.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",mt,!1),t.removeEventListener("webglcontextrestored",$,!1),t.removeEventListener("webglcontextcreationerror",Ae,!1),Oe.dispose(),et.dispose(),ke.dispose(),k.dispose(),se.dispose(),le.dispose(),Z.dispose(),_e.dispose(),De.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",Vn),Ge.removeEventListener("sessionend",Gt),xe&&(xe.dispose(),xe=null),wi.stop()};function mt(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function $(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const B=Qe.autoReset,oe=we.enabled,de=we.autoUpdate,pe=we.needsUpdate,fe=we.type;Ue(),Qe.autoReset=B,we.enabled=oe,we.autoUpdate=de,we.needsUpdate=pe,we.type=fe}function Ae(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function Le(B){const oe=B.target;oe.removeEventListener("dispose",Le),Ze(oe)}function Ze(B){Je(B),ke.remove(B)}function Je(B){const oe=ke.get(B).programs;oe!==void 0&&(oe.forEach(function(de){De.releaseProgram(de)}),B.isShaderMaterial&&De.releaseShaderCache(B))}this.renderBufferDirect=function(B,oe,de,pe,fe,We){oe===null&&(oe=ot);const rt=fe.isMesh&&fe.matrixWorld.determinant()<0,dt=__(B,oe,de,pe,fe);ye.setMaterial(pe,rt);let ht=de.index,_t=1;if(pe.wireframe===!0){if(ht=re.getWireframeAttribute(de),ht===void 0)return;_t=2}const vt=de.drawRange,xt=de.attributes.position;let wn=vt.start*_t,Ei=(vt.start+vt.count)*_t;We!==null&&(wn=Math.max(wn,We.start*_t),Ei=Math.min(Ei,(We.start+We.count)*_t)),ht!==null?(wn=Math.max(wn,0),Ei=Math.min(Ei,ht.count)):xt!=null&&(wn=Math.max(wn,0),Ei=Math.min(Ei,xt.count));const dn=Ei-wn;if(dn<0||dn===1/0)return;Z.setup(fe,pe,dt,de,ht);let ui,pt=at;if(ht!==null&&(ui=Te.get(ht),pt=nt,pt.setIndex(ui)),fe.isMesh)pe.wireframe===!0?(ye.setLineWidth(pe.wireframeLinewidth*He()),pt.setMode(Y.LINES)):pt.setMode(Y.TRIANGLES);else if(fe.isLine){let Xe=pe.linewidth;Xe===void 0&&(Xe=1),ye.setLineWidth(Xe*He()),fe.isLineSegments?pt.setMode(Y.LINES):fe.isLineLoop?pt.setMode(Y.LINE_LOOP):pt.setMode(Y.LINE_STRIP)}else fe.isPoints?pt.setMode(Y.POINTS):fe.isSprite&&pt.setMode(Y.TRIANGLES);if(fe.isBatchedMesh)pt.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else if(fe.isInstancedMesh)pt.renderInstances(wn,dn,fe.count);else if(de.isInstancedBufferGeometry){const Xe=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,rs=Math.min(de.instanceCount,Xe);pt.renderInstances(wn,dn,rs)}else pt.render(wn,dn)};function At(B,oe,de){B.transparent===!0&&B.side===nr&&B.forceSinglePass===!1?(B.side=ai,B.needsUpdate=!0,hu(B,oe,de),B.side=Xs,B.needsUpdate=!0,hu(B,oe,de),B.side=nr):hu(B,oe,de)}this.compile=function(B,oe,de=null){de===null&&(de=B),y=et.get(de),y.init(),x.push(y),de.traverseVisible(function(fe){fe.isLight&&fe.layers.test(oe.layers)&&(y.pushLight(fe),fe.castShadow&&y.pushShadow(fe))}),B!==de&&B.traverseVisible(function(fe){fe.isLight&&fe.layers.test(oe.layers)&&(y.pushLight(fe),fe.castShadow&&y.pushShadow(fe))}),y.setupLights(S._useLegacyLights);const pe=new Set;return B.traverse(function(fe){const We=fe.material;if(We)if(Array.isArray(We))for(let rt=0;rt<We.length;rt++){const dt=We[rt];At(dt,de,fe),pe.add(dt)}else At(We,de,fe),pe.add(We)}),x.pop(),y=null,pe},this.compileAsync=function(B,oe,de=null){const pe=this.compile(B,oe,de);return new Promise(fe=>{function We(){if(pe.forEach(function(rt){ke.get(rt).currentProgram.isReady()&&pe.delete(rt)}),pe.size===0){fe(B);return}setTimeout(We,10)}ve.get("KHR_parallel_shader_compile")!==null?We():setTimeout(We,10)})};let zt=null;function sn(B){zt&&zt(B)}function Vn(){wi.stop()}function Gt(){wi.start()}const wi=new gN;wi.setAnimationLoop(sn),typeof self<"u"&&wi.setContext(self),this.setAnimationLoop=function(B){zt=B,Ge.setAnimationLoop(B),B===null?wi.stop():wi.start()},Ge.addEventListener("sessionstart",Vn),Ge.addEventListener("sessionend",Gt),this.render=function(B,oe){if(oe!==void 0&&oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(oe),oe=Ge.getCamera()),B.isScene===!0&&B.onBeforeRender(S,B,oe,R),y=et.get(B,x.length),y.init(),x.push(y),Re.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),Me.setFromProjectionMatrix(Re),ue=this.localClippingEnabled,te=lt.init(this.clippingPlanes,ue),_=Oe.get(B,g.length),_.init(),g.push(_),is(B,oe,0,S.sortObjects),_.finish(),S.sortObjects===!0&&_.sort(N,V),this.info.render.frame++,te===!0&&lt.beginShadows();const de=y.state.shadowsArray;if(we.render(de,B,oe),te===!0&&lt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Ge.enabled===!1||Ge.isPresenting===!1||Ge.hasDepthSensing()===!1)&&Pt.render(_,B),y.setupLights(S._useLegacyLights),oe.isArrayCamera){const pe=oe.cameras;for(let fe=0,We=pe.length;fe<We;fe++){const rt=pe[fe];Ld(_,B,rt,rt.viewport)}}else Ld(_,B,oe);R!==null&&(F.updateMultisampleRenderTarget(R),F.updateRenderTargetMipmap(R)),B.isScene===!0&&B.onAfterRender(S,B,oe),Z.resetDefaultState(),D=-1,O=null,x.pop(),x.length>0?y=x[x.length-1]:y=null,g.pop(),g.length>0?_=g[g.length-1]:_=null};function is(B,oe,de,pe){if(B.visible===!1)return;if(B.layers.test(oe.layers)){if(B.isGroup)de=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(oe);else if(B.isLight)y.pushLight(B),B.castShadow&&y.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||Me.intersectsSprite(B)){pe&&ze.setFromMatrixPosition(B.matrixWorld).applyMatrix4(Re);const rt=le.update(B),dt=B.material;dt.visible&&_.push(B,rt,dt,de,ze.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||Me.intersectsObject(B))){const rt=le.update(B),dt=B.material;if(pe&&(B.boundingSphere!==void 0?(B.boundingSphere===null&&B.computeBoundingSphere(),ze.copy(B.boundingSphere.center)):(rt.boundingSphere===null&&rt.computeBoundingSphere(),ze.copy(rt.boundingSphere.center)),ze.applyMatrix4(B.matrixWorld).applyMatrix4(Re)),Array.isArray(dt)){const ht=rt.groups;for(let _t=0,vt=ht.length;_t<vt;_t++){const xt=ht[_t],wn=dt[xt.materialIndex];wn&&wn.visible&&_.push(B,rt,wn,de,ze.z,xt)}}else dt.visible&&_.push(B,rt,dt,de,ze.z,null)}}const We=B.children;for(let rt=0,dt=We.length;rt<dt;rt++)is(We[rt],oe,de,pe)}function Ld(B,oe,de,pe){const fe=B.opaque,We=B.transmissive,rt=B.transparent;y.setupLightsView(de),te===!0&&lt.setGlobalState(S.clippingPlanes,de),We.length>0&&Dd(fe,We,oe,de),pe&&ye.viewport(M.copy(pe)),fe.length>0&&du(fe,oe,de),We.length>0&&du(We,oe,de),rt.length>0&&du(rt,oe,de),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Dd(B,oe,de,pe){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;const We=Ee.isWebGL2;xe===null&&(xe=new gn(1,1,{generateMipmaps:!0,type:ve.has("EXT_color_buffer_half_float")?$c:Kn,minFilter:Ss,samples:We?4:0})),S.getDrawingBufferSize($e),We?xe.setSize($e.x,$e.y):xe.setSize(Bv($e.x),Bv($e.y));const rt=S.getRenderTarget();S.setRenderTarget(xe),S.getClearColor(j),z=S.getClearAlpha(),z<1&&S.setClearColor(16777215,.5),S.clear();const dt=S.toneMapping;S.toneMapping=$s,du(B,de,pe),F.updateMultisampleRenderTarget(xe),F.updateRenderTargetMipmap(xe);let ht=!1;for(let _t=0,vt=oe.length;_t<vt;_t++){const xt=oe[_t],wn=xt.object,Ei=xt.geometry,dn=xt.material,ui=xt.group;if(dn.side===nr&&wn.layers.test(pe.layers)){const pt=dn.side;dn.side=ai,dn.needsUpdate=!0,Ea(wn,de,pe,Ei,dn,ui),dn.side=pt,dn.needsUpdate=!0,ht=!0}}ht===!0&&(F.updateMultisampleRenderTarget(xe),F.updateRenderTargetMipmap(xe)),S.setRenderTarget(rt),S.setClearColor(j,z),S.toneMapping=dt}function du(B,oe,de){const pe=oe.isScene===!0?oe.overrideMaterial:null;for(let fe=0,We=B.length;fe<We;fe++){const rt=B[fe],dt=rt.object,ht=rt.geometry,_t=pe===null?rt.material:pe,vt=rt.group;dt.layers.test(de.layers)&&Ea(dt,oe,de,ht,_t,vt)}}function Ea(B,oe,de,pe,fe,We){B.onBeforeRender(S,oe,de,pe,fe,We),B.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),fe.onBeforeRender(S,oe,de,pe,B,We),fe.transparent===!0&&fe.side===nr&&fe.forceSinglePass===!1?(fe.side=ai,fe.needsUpdate=!0,S.renderBufferDirect(de,oe,pe,fe,B,We),fe.side=Xs,fe.needsUpdate=!0,S.renderBufferDirect(de,oe,pe,fe,B,We),fe.side=nr):S.renderBufferDirect(de,oe,pe,fe,B,We),B.onAfterRender(S,oe,de,pe,fe,We)}function hu(B,oe,de){oe.isScene!==!0&&(oe=ot);const pe=ke.get(B),fe=y.state.lights,We=y.state.shadowsArray,rt=fe.state.version,dt=De.getParameters(B,fe.state,We,oe,de),ht=De.getProgramCacheKey(dt);let _t=pe.programs;pe.environment=B.isMeshStandardMaterial?oe.environment:null,pe.fog=oe.fog,pe.envMap=(B.isMeshStandardMaterial?se:k).get(B.envMap||pe.environment),_t===void 0&&(B.addEventListener("dispose",Le),_t=new Map,pe.programs=_t);let vt=_t.get(ht);if(vt!==void 0){if(pe.currentProgram===vt&&pe.lightsStateVersion===rt)return wm(B,dt),vt}else dt.uniforms=De.getUniforms(B),B.onBuild(de,dt,S),B.onBeforeCompile(dt,S),vt=De.acquireProgram(dt,ht),_t.set(ht,vt),pe.uniforms=dt.uniforms;const xt=pe.uniforms;return(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(xt.clippingPlanes=lt.uniform),wm(B,dt),pe.needsLights=S_(B),pe.lightsStateVersion=rt,pe.needsLights&&(xt.ambientLightColor.value=fe.state.ambient,xt.lightProbe.value=fe.state.probe,xt.directionalLights.value=fe.state.directional,xt.directionalLightShadows.value=fe.state.directionalShadow,xt.spotLights.value=fe.state.spot,xt.spotLightShadows.value=fe.state.spotShadow,xt.rectAreaLights.value=fe.state.rectArea,xt.ltc_1.value=fe.state.rectAreaLTC1,xt.ltc_2.value=fe.state.rectAreaLTC2,xt.pointLights.value=fe.state.point,xt.pointLightShadows.value=fe.state.pointShadow,xt.hemisphereLights.value=fe.state.hemi,xt.directionalShadowMap.value=fe.state.directionalShadowMap,xt.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,xt.spotShadowMap.value=fe.state.spotShadowMap,xt.spotLightMatrix.value=fe.state.spotLightMatrix,xt.spotLightMap.value=fe.state.spotLightMap,xt.pointShadowMap.value=fe.state.pointShadowMap,xt.pointShadowMatrix.value=fe.state.pointShadowMatrix),pe.currentProgram=vt,pe.uniformsList=null,vt}function Sm(B){if(B.uniformsList===null){const oe=B.currentProgram.getUniforms();B.uniformsList=nv.seqWithValue(oe.seq,B.uniforms)}return B.uniformsList}function wm(B,oe){const de=ke.get(B);de.outputColorSpace=oe.outputColorSpace,de.batching=oe.batching,de.instancing=oe.instancing,de.instancingColor=oe.instancingColor,de.skinning=oe.skinning,de.morphTargets=oe.morphTargets,de.morphNormals=oe.morphNormals,de.morphColors=oe.morphColors,de.morphTargetsCount=oe.morphTargetsCount,de.numClippingPlanes=oe.numClippingPlanes,de.numIntersection=oe.numClipIntersection,de.vertexAlphas=oe.vertexAlphas,de.vertexTangents=oe.vertexTangents,de.toneMapping=oe.toneMapping}function __(B,oe,de,pe,fe){oe.isScene!==!0&&(oe=ot),F.resetTextureUnits();const We=oe.fog,rt=pe.isMeshStandardMaterial?oe.environment:null,dt=R===null?S.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:qn,ht=(pe.isMeshStandardMaterial?se:k).get(pe.envMap||rt),_t=pe.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,vt=!!de.attributes.tangent&&(!!pe.normalMap||pe.anisotropy>0),xt=!!de.morphAttributes.position,wn=!!de.morphAttributes.normal,Ei=!!de.morphAttributes.color;let dn=$s;pe.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(dn=S.toneMapping);const ui=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,pt=ui!==void 0?ui.length:0,Xe=ke.get(pe),rs=y.state.lights;if(te===!0&&(ue===!0||B!==O)){const Ti=B===O&&pe.id===D;lt.setState(pe,B,Ti)}let Dt=!1;pe.version===Xe.__version?(Xe.needsLights&&Xe.lightsStateVersion!==rs.state.version||Xe.outputColorSpace!==dt||fe.isBatchedMesh&&Xe.batching===!1||!fe.isBatchedMesh&&Xe.batching===!0||fe.isInstancedMesh&&Xe.instancing===!1||!fe.isInstancedMesh&&Xe.instancing===!0||fe.isSkinnedMesh&&Xe.skinning===!1||!fe.isSkinnedMesh&&Xe.skinning===!0||fe.isInstancedMesh&&Xe.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&Xe.instancingColor===!1&&fe.instanceColor!==null||Xe.envMap!==ht||pe.fog===!0&&Xe.fog!==We||Xe.numClippingPlanes!==void 0&&(Xe.numClippingPlanes!==lt.numPlanes||Xe.numIntersection!==lt.numIntersection)||Xe.vertexAlphas!==_t||Xe.vertexTangents!==vt||Xe.morphTargets!==xt||Xe.morphNormals!==wn||Xe.morphColors!==Ei||Xe.toneMapping!==dn||Ee.isWebGL2===!0&&Xe.morphTargetsCount!==pt)&&(Dt=!0):(Dt=!0,Xe.__version=pe.version);let On=Xe.currentProgram;Dt===!0&&(On=hu(pe,oe,fe));let eo=!1,ss=!1,fi=!1;const Gn=On.getUniforms(),to=Xe.uniforms;if(ye.useProgram(On.program)&&(eo=!0,ss=!0,fi=!0),pe.id!==D&&(D=pe.id,ss=!0),eo||O!==B){Gn.setValue(Y,"projectionMatrix",B.projectionMatrix),Gn.setValue(Y,"viewMatrix",B.matrixWorldInverse);const Ti=Gn.map.cameraPosition;Ti!==void 0&&Ti.setValue(Y,ze.setFromMatrixPosition(B.matrixWorld)),Ee.logarithmicDepthBuffer&&Gn.setValue(Y,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&Gn.setValue(Y,"isOrthographic",B.isOrthographicCamera===!0),O!==B&&(O=B,ss=!0,fi=!0)}if(fe.isSkinnedMesh){Gn.setOptional(Y,fe,"bindMatrix"),Gn.setOptional(Y,fe,"bindMatrixInverse");const Ti=fe.skeleton;Ti&&(Ee.floatVertexTextures?(Ti.boneTexture===null&&Ti.computeBoneTexture(),Gn.setValue(Y,"boneTexture",Ti.boneTexture,F)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}fe.isBatchedMesh&&(Gn.setOptional(Y,fe,"batchingTexture"),Gn.setValue(Y,"batchingTexture",fe._matricesTexture,F));const pu=de.morphAttributes;if((pu.position!==void 0||pu.normal!==void 0||pu.color!==void 0&&Ee.isWebGL2===!0)&&yt.update(fe,de,On),(ss||Xe.receiveShadow!==fe.receiveShadow)&&(Xe.receiveShadow=fe.receiveShadow,Gn.setValue(Y,"receiveShadow",fe.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(to.envMap.value=ht,to.flipEnvMap.value=ht.isCubeTexture&&ht.isRenderTargetTexture===!1?-1:1),ss&&(Gn.setValue(Y,"toneMappingExposure",S.toneMappingExposure),Xe.needsLights&&x_(to,fi),We&&pe.fog===!0&&be.refreshFogUniforms(to,We),be.refreshMaterialUniforms(to,pe,ee,q,xe),nv.upload(Y,Sm(Xe),to,F)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(nv.upload(Y,Sm(Xe),to,F),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&Gn.setValue(Y,"center",fe.center),Gn.setValue(Y,"modelViewMatrix",fe.modelViewMatrix),Gn.setValue(Y,"normalMatrix",fe.normalMatrix),Gn.setValue(Y,"modelMatrix",fe.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const Ti=pe.uniformsGroups;for(let mu=0,Pr=Ti.length;mu<Pr;mu++)if(Ee.isWebGL2){const Em=Ti[mu];_e.update(Em,On),_e.bind(Em,On)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return On}function x_(B,oe){B.ambientLightColor.needsUpdate=oe,B.lightProbe.needsUpdate=oe,B.directionalLights.needsUpdate=oe,B.directionalLightShadows.needsUpdate=oe,B.pointLights.needsUpdate=oe,B.pointLightShadows.needsUpdate=oe,B.spotLights.needsUpdate=oe,B.spotLightShadows.needsUpdate=oe,B.rectAreaLights.needsUpdate=oe,B.hemisphereLights.needsUpdate=oe}function S_(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(B,oe,de){ke.get(B.texture).__webglTexture=oe,ke.get(B.depthTexture).__webglTexture=de;const pe=ke.get(B);pe.__hasExternalTextures=!0,pe.__hasExternalTextures&&(pe.__autoAllocateDepthBuffer=de===void 0,pe.__autoAllocateDepthBuffer||ve.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(B,oe){const de=ke.get(B);de.__webglFramebuffer=oe,de.__useDefaultFramebuffer=oe===void 0},this.setRenderTarget=function(B,oe=0,de=0){R=B,b=oe,A=de;let pe=!0,fe=null,We=!1,rt=!1;if(B){const ht=ke.get(B);ht.__useDefaultFramebuffer!==void 0?(ye.bindFramebuffer(Y.FRAMEBUFFER,null),pe=!1):ht.__webglFramebuffer===void 0?F.setupRenderTarget(B):ht.__hasExternalTextures&&F.rebindTextures(B,ke.get(B.texture).__webglTexture,ke.get(B.depthTexture).__webglTexture);const _t=B.texture;(_t.isData3DTexture||_t.isDataArrayTexture||_t.isCompressedArrayTexture)&&(rt=!0);const vt=ke.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Array.isArray(vt[oe])?fe=vt[oe][de]:fe=vt[oe],We=!0):Ee.isWebGL2&&B.samples>0&&F.useMultisampledRTT(B)===!1?fe=ke.get(B).__webglMultisampledFramebuffer:Array.isArray(vt)?fe=vt[de]:fe=vt,M.copy(B.viewport),I.copy(B.scissor),U=B.scissorTest}else M.copy(W).multiplyScalar(ee).floor(),I.copy(Q).multiplyScalar(ee).floor(),U=ie;if(ye.bindFramebuffer(Y.FRAMEBUFFER,fe)&&Ee.drawBuffers&&pe&&ye.drawBuffers(B,fe),ye.viewport(M),ye.scissor(I),ye.setScissorTest(U),We){const ht=ke.get(B.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_CUBE_MAP_POSITIVE_X+oe,ht.__webglTexture,de)}else if(rt){const ht=ke.get(B.texture),_t=oe||0;Y.framebufferTextureLayer(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,ht.__webglTexture,de||0,_t)}D=-1},this.readRenderTargetPixels=function(B,oe,de,pe,fe,We,rt){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=ke.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&rt!==void 0&&(dt=dt[rt]),dt){ye.bindFramebuffer(Y.FRAMEBUFFER,dt);try{const ht=B.texture,_t=ht.format,vt=ht.type;if(_t!==ir&&Ve.convert(_t)!==Y.getParameter(Y.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const xt=vt===$c&&(ve.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&ve.has("EXT_color_buffer_float"));if(vt!==Kn&&Ve.convert(vt)!==Y.getParameter(Y.IMPLEMENTATION_COLOR_READ_TYPE)&&!(vt===Hr&&(Ee.isWebGL2||ve.has("OES_texture_float")||ve.has("WEBGL_color_buffer_float")))&&!xt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=B.width-pe&&de>=0&&de<=B.height-fe&&Y.readPixels(oe,de,pe,fe,Ve.convert(_t),Ve.convert(vt),We)}finally{const ht=R!==null?ke.get(R).__webglFramebuffer:null;ye.bindFramebuffer(Y.FRAMEBUFFER,ht)}}},this.copyFramebufferToTexture=function(B,oe,de=0){const pe=Math.pow(2,-de),fe=Math.floor(oe.image.width*pe),We=Math.floor(oe.image.height*pe);F.setTexture2D(oe,0),Y.copyTexSubImage2D(Y.TEXTURE_2D,de,0,0,B.x,B.y,fe,We),ye.unbindTexture()},this.copyTextureToTexture=function(B,oe,de,pe=0){const fe=oe.image.width,We=oe.image.height,rt=Ve.convert(de.format),dt=Ve.convert(de.type);F.setTexture2D(de,0),Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,de.flipY),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),Y.pixelStorei(Y.UNPACK_ALIGNMENT,de.unpackAlignment),oe.isDataTexture?Y.texSubImage2D(Y.TEXTURE_2D,pe,B.x,B.y,fe,We,rt,dt,oe.image.data):oe.isCompressedTexture?Y.compressedTexSubImage2D(Y.TEXTURE_2D,pe,B.x,B.y,oe.mipmaps[0].width,oe.mipmaps[0].height,rt,oe.mipmaps[0].data):Y.texSubImage2D(Y.TEXTURE_2D,pe,B.x,B.y,rt,dt,oe.image),pe===0&&de.generateMipmaps&&Y.generateMipmap(Y.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(B,oe,de,pe,fe=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const We=B.max.x-B.min.x+1,rt=B.max.y-B.min.y+1,dt=B.max.z-B.min.z+1,ht=Ve.convert(pe.format),_t=Ve.convert(pe.type);let vt;if(pe.isData3DTexture)F.setTexture3D(pe,0),vt=Y.TEXTURE_3D;else if(pe.isDataArrayTexture||pe.isCompressedArrayTexture)F.setTexture2DArray(pe,0),vt=Y.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,pe.flipY),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),Y.pixelStorei(Y.UNPACK_ALIGNMENT,pe.unpackAlignment);const xt=Y.getParameter(Y.UNPACK_ROW_LENGTH),wn=Y.getParameter(Y.UNPACK_IMAGE_HEIGHT),Ei=Y.getParameter(Y.UNPACK_SKIP_PIXELS),dn=Y.getParameter(Y.UNPACK_SKIP_ROWS),ui=Y.getParameter(Y.UNPACK_SKIP_IMAGES),pt=de.isCompressedTexture?de.mipmaps[fe]:de.image;Y.pixelStorei(Y.UNPACK_ROW_LENGTH,pt.width),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,pt.height),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,B.min.x),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,B.min.y),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,B.min.z),de.isDataTexture||de.isData3DTexture?Y.texSubImage3D(vt,fe,oe.x,oe.y,oe.z,We,rt,dt,ht,_t,pt.data):de.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Y.compressedTexSubImage3D(vt,fe,oe.x,oe.y,oe.z,We,rt,dt,ht,pt.data)):Y.texSubImage3D(vt,fe,oe.x,oe.y,oe.z,We,rt,dt,ht,_t,pt),Y.pixelStorei(Y.UNPACK_ROW_LENGTH,xt),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,wn),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,Ei),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,dn),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,ui),fe===0&&pe.generateMipmaps&&Y.generateMipmap(vt),ye.unbindTexture()},this.initTexture=function(B){B.isCubeTexture?F.setTextureCube(B,0):B.isData3DTexture?F.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?F.setTexture2DArray(B,0):F.setTexture2D(B,0),ye.unbindTexture()},this.resetState=function(){b=0,A=0,R=null,ye.reset(),Z.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return yo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Uy?"display-p3":"srgb",t.unpackColorSpace=Kt.workingColorSpace===nm?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===St?ml:uM}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ml?St:qn}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class TN extends _M{}TN.prototype.isWebGL1Renderer=!0;class Vy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ie(e),this.density=t}clone(){return new Vy(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Gy{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ie(e),this.near=t,this.far=i}clone(){return new Gy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Zf=class extends Vt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class om{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Rp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Yr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Pc("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Yr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Yr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Zi=new H;class El{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.applyMatrix4(e),this.setXYZ(t,Zi.x,Zi.y,Zi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.applyNormalMatrix(e),this.setXYZ(t,Zi.x,Zi.y,Zi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.transformDirection(e),this.setXYZ(t,Zi.x,Zi.y,Zi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=sr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=bt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=sr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=sr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=sr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=sr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ut(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new El(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class xM extends Bn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ie(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Wu;const dh=new H,$u=new H,ju=new H,Xu=new he,hh=new he,MN=new ft,e0=new H,ph=new H,t0=new H,_R=new he,w1=new he,xR=new he;class bN extends Vt{constructor(e=new xM){if(super(),this.isSprite=!0,this.type="Sprite",Wu===void 0){Wu=new Mt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new om(t,5);Wu.setIndex([0,1,2,0,2,3]),Wu.setAttribute("position",new El(i,3,0,!1)),Wu.setAttribute("uv",new El(i,2,3,!1))}this.geometry=Wu,this.material=e,this.center=new he(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),$u.setFromMatrixScale(this.matrixWorld),MN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ju.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&$u.multiplyScalar(-ju.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;n0(e0.set(-.5,-.5,0),ju,o,$u,r,s),n0(ph.set(.5,-.5,0),ju,o,$u,r,s),n0(t0.set(.5,.5,0),ju,o,$u,r,s),_R.set(0,0),w1.set(1,0),xR.set(1,1);let a=e.ray.intersectTriangle(e0,ph,t0,!1,dh);if(a===null&&(n0(ph.set(-.5,.5,0),ju,o,$u,r,s),w1.set(0,1),a=e.ray.intersectTriangle(e0,t0,ph,!1,dh),a===null))return;const l=e.ray.origin.distanceTo(dh);l<e.near||l>e.far||t.push({distance:l,point:dh.clone(),uv:Vr.getInterpolation(dh,e0,ph,t0,_R,w1,xR,new he),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function n0(n,e,t,i,r,s){Xu.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(hh.x=s*Xu.x-r*Xu.y,hh.y=r*Xu.x+s*Xu.y):hh.copy(Xu),n.copy(e),n.x+=hh.x,n.y+=hh.y,n.applyMatrix4(MN)}const i0=new H,SR=new H;class AN extends Vt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){i0.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(i0);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){i0.setFromMatrixPosition(e.matrixWorld),SR.setFromMatrixPosition(this.matrixWorld);const i=i0.distanceTo(SR)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const wR=new H,ER=new qt,TR=new qt,cj=new H,MR=new ft,r0=new H,E1=new Ri,bR=new ft,T1=new su;class SM extends Pn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=bw,this.bindMatrix=new ft,this.bindMatrixInverse=new ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Gi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,r0),this.boundingBox.expandByPoint(r0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ri),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,r0),this.boundingSphere.expandByPoint(r0)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),E1.copy(this.boundingSphere),E1.applyMatrix4(r),e.ray.intersectsSphere(E1)!==!1&&(bR.copy(r).invert(),T1.copy(e.ray).applyMatrix4(bR),!(this.boundingBox!==null&&T1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,T1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===bw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===BO?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;ER.fromBufferAttribute(r.attributes.skinIndex,e),TR.fromBufferAttribute(r.attributes.skinWeight,e),wR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=TR.getComponent(s);if(o!==0){const a=ER.getComponent(s);MR.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(cj.copy(wR).applyMatrix4(MR),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Wy extends Vt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Lc extends rn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=en,u=en,f,p){super(null,o,a,l,c,u,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const AR=new ft,uj=new ft;class am{constructor(e=[],t=[]){this.uuid=Yr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ft;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:uj;AR.multiplyMatrices(a,t[s]),AR.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new am(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Lc(t,e,e,ir,Hr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Wy),this.bones.push(o),this.boneInverses.push(new ft().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Xc extends Ut{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Yu=new ft,CR=new ft,s0=[],RR=new Gi,fj=new ft,mh=new Pn,gh=new Ri;class wM extends Pn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Xc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,fj)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Gi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Yu),RR.copy(e.boundingBox).applyMatrix4(Yu),this.boundingBox.union(RR)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ri),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Yu),gh.copy(e.boundingSphere).applyMatrix4(Yu),this.boundingSphere.union(gh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(mh.geometry=this.geometry,mh.material=this.material,mh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gh.copy(this.boundingSphere),gh.applyMatrix4(i),e.ray.intersectsSphere(gh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Yu),CR.multiplyMatrices(i,Yu),mh.matrixWorld=CR,mh.raycast(e,s0);for(let o=0,a=s0.length;o<a;o++){const l=s0[o];l.instanceId=s,l.object=this,t.push(l)}s0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Xc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function dj(n,e){return n.z-e.z}function hj(n,e){return e.z-n.z}class pj{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Ku="batchId",za=new ft,PR=new ft,mj=new ft,IR=new ft,M1=new sm,o0=new Gi,Ql=new Ri,vh=new H,b1=new pj,zi=new Pn,a0=[];function gj(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class CN extends Pn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new Mt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Lc(t,e,e,ir,Hr);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:f}=l,p=new c.constructor(i*u),m=new l.constructor(p,u,f);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Ut(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(Ku,new Ut(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Ku))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Ku}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===Ku)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,za),this.getBoundingBoxAt(r,o0).applyMatrix4(za),t.union(o0))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ri);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,za),this.getBoundingSphereAt(r,Ql).applyMatrix4(za),t.union(Ql))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data;f.push(!0),p.push(!0);const _=this._geometryCount;this._geometryCount++,mj.toArray(v,_*16),m.needsUpdate=!0,o.push(r),a.push({start:u?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Gi,sphereInitialized:!1,sphere:new Ri});const y=this.geometry.getAttribute(Ku);for(let g=0;g<r.vertexCount;g++)y.setX(r.vertexStart+g,_);return y.needsUpdate=!0,this.setGeometryAt(_,e),_}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in i.attributes){if(m===Ku)continue;const v=t.getAttribute(m),_=i.getAttribute(m);gj(v,_,l);const y=v.itemSize;for(let g=v.count,x=c;g<x;g++){const S=l+g;for(let E=0;E<y;E++)_.setComponent(S,E,0)}_.needsUpdate=!0}if(r){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,_=a.indexCount;v<_;v++)s.setX(m+v,l);s.needsUpdate=!0}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],p=t.getAttribute("position");return f.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,f=c.start+c.count;u<f;u++){let p=u;a&&(p=a.getX(p)),s.expandByPoint(vh.fromBufferAttribute(l,p))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,o0),o0.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let f=c.start,p=c.start+c.count;f<p;f++){let m=f;a&&(m=a.getX(m)),vh.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(vh))}s.radius=Math.sqrt(u),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;zi.material=this.material,zi.geometry.index=l.index,zi.geometry.attributes=l.attributes,zi.geometry.boundingBox===null&&(zi.geometry.boundingBox=new Gi),zi.geometry.boundingSphere===null&&(zi.geometry.boundingSphere=new Ri);for(let c=0;c<o;c++){if(!i[c]||!r[c])continue;const u=s[c];zi.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,zi.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,zi.geometry.boundingBox),this.getBoundingSphereAt(c,zi.geometry.boundingSphere),zi.raycast(e,a0);for(let f=0,p=a0.length;f<p;f++){const m=a0[f];m.object=this,m.batchId=c,t.push(m)}a0.length=0}zi.material=null,zi.geometry.index=null,zi.geometry.attributes={},zi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,u=this._multiDrawStarts,f=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(IR.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),M1.setFromProjectionMatrix(IR,e.coordinateSystem));let v=0;if(this.sortObjects){PR.copy(this.matrixWorld).invert(),vh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(PR);for(let g=0,x=c.length;g<x;g++)if(c[g]&&l[g]){this.getMatrixAt(g,za),this.getBoundingSphereAt(g,Ql).applyMatrix4(za);let S=!1;if(m&&(S=!M1.intersectsSphere(Ql)),!S){const E=vh.distanceTo(Ql.center);b1.push(p[g],E)}}const _=b1.list,y=this.customSort;y===null?_.sort(s.transparent?hj:dj):y.call(this,_,i);for(let g=0,x=_.length;g<x;g++){const S=_[g];u[v]=S.start*a,f[v]=S.count,v++}b1.reset()}else for(let _=0,y=c.length;_<y;_++)if(c[_]&&l[_]){let g=!1;if(m&&(this.getMatrixAt(_,za),this.getBoundingSphereAt(_,Ql).applyMatrix4(za),g=!M1.intersectsSphere(Ql)),!g){const x=p[_];u[v]=x.start*a,f[v]=x.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Xi extends Bn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ie(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const LR=new H,DR=new H,OR=new ft,A1=new su,l0=new Ri;class ha extends Vt{constructor(e=new Mt,t=new Xi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)LR.fromBufferAttribute(t,r-1),DR.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=LR.distanceTo(DR);e.setAttribute("lineDistance",new tt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),l0.copy(i.boundingSphere),l0.applyMatrix4(r),l0.radius+=s,e.ray.intersectsSphere(l0)===!1)return;OR.copy(r).invert(),A1.copy(e.ray).applyMatrix4(OR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new H,u=new H,f=new H,p=new H,m=this.isLineSegments?2:1,v=i.index,y=i.attributes.position;if(v!==null){const g=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let S=g,E=x-1;S<E;S+=m){const b=v.getX(S),A=v.getX(S+1);if(c.fromBufferAttribute(y,b),u.fromBufferAttribute(y,A),A1.distanceSqToSegment(c,u,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(p);D<e.near||D>e.far||t.push({distance:D,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),x=Math.min(y.count,o.start+o.count);for(let S=g,E=x-1;S<E;S+=m){if(c.fromBufferAttribute(y,S),u.fromBufferAttribute(y,S+1),A1.distanceSqToSegment(c,u,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(p);A<e.near||A>e.far||t.push({distance:A,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const NR=new H,kR=new H;class qs extends ha{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)NR.fromBufferAttribute(t,r),kR.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+NR.distanceTo(kR);e.setAttribute("lineDistance",new tt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class EM extends ha{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class $y extends Bn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ie(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const UR=new ft,iE=new su,c0=new Ri,u0=new H;class TM extends Vt{constructor(e=new Mt,t=new $y){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),c0.copy(i.boundingSphere),c0.applyMatrix4(r),c0.radius+=s,e.ray.intersectsSphere(c0)===!1)return;UR.copy(r).invert(),iE.copy(e.ray).applyMatrix4(UR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,_=m;v<_;v++){const y=c.getX(v);u0.fromBufferAttribute(f,y),FR(u0,y,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,_=m;v<_;v++)u0.fromBufferAttribute(f,v),FR(u0,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function FR(n,e,t,i,r,s,o){const a=iE.distanceSqToPoint(n);if(a<t){const l=new H;iE.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class vj extends rn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Zt,this.magFilter=s!==void 0?s:Zt,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class yj extends rn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=en,this.minFilter=en,this.generateMipmaps=!1,this.needsUpdate=!0}}class jy extends rn{constructor(e,t,i,r,s,o,a,l,c,u,f,p){super(null,o,a,l,c,u,r,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class _j extends jy{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ai}}class xj extends jy{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,fa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Sj extends rn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Zs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],p=i[r+1]-u,m=(o-u)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new he:new H);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new H,r=[],s=[],o=[],a=new H,l=new ft;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new H)}s[0]=new H,o[0]=new H;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Fn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Fn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Xy extends Zs{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new he,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*f+this.aX,c=p*f+m*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class RN extends Xy{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function MM(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+f)+(l-a)/f;p*=u,m*=u,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const f0=new H,C1=new MM,R1=new MM,P1=new MM;class PN extends Zs{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new H){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(f0.subVectors(r[0],r[1]).add(r[0]),c=f0);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(f0.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=f0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),_=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(u),m);_<1e-4&&(_=1),v<1e-4&&(v=_),y<1e-4&&(y=_),C1.initNonuniformCatmullRom(c.x,f.x,p.x,u.x,v,_,y),R1.initNonuniformCatmullRom(c.y,f.y,p.y,u.y,v,_,y),P1.initNonuniformCatmullRom(c.z,f.z,p.z,u.z,v,_,y)}else this.curveType==="catmullrom"&&(C1.initCatmullRom(c.x,f.x,p.x,u.x,this.tension),R1.initCatmullRom(c.y,f.y,p.y,u.y,this.tension),P1.initCatmullRom(c.z,f.z,p.z,u.z,this.tension));return i.set(C1.calc(l),R1.calc(l),P1.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new H().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function zR(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function wj(n,e){const t=1-n;return t*t*e}function Ej(n,e){return 2*(1-n)*n*e}function Tj(n,e){return n*n*e}function jh(n,e,t,i){return wj(n,e)+Ej(n,t)+Tj(n,i)}function Mj(n,e){const t=1-n;return t*t*t*e}function bj(n,e){const t=1-n;return 3*t*t*n*e}function Aj(n,e){return 3*(1-n)*n*n*e}function Cj(n,e){return n*n*n*e}function Xh(n,e,t,i,r){return Mj(n,e)+bj(n,t)+Aj(n,i)+Cj(n,r)}class bM extends Zs{constructor(e=new he,t=new he,i=new he,r=new he){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new he){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Xh(e,r.x,s.x,o.x,a.x),Xh(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class IN extends Zs{constructor(e=new H,t=new H,i=new H,r=new H){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new H){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Xh(e,r.x,s.x,o.x,a.x),Xh(e,r.y,s.y,o.y,a.y),Xh(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class AM extends Zs{constructor(e=new he,t=new he){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new he){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new he){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LN extends Zs{constructor(e=new H,t=new H){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new H){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new H){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CM extends Zs{constructor(e=new he,t=new he,i=new he){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new he){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(jh(e,r.x,s.x,o.x),jh(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RM extends Zs{constructor(e=new H,t=new H,i=new H){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new H){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(jh(e,r.x,s.x,o.x),jh(e,r.y,s.y,o.y),jh(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PM extends Zs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new he){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(zR(a,l.x,c.x,u.x,f.x),zR(a,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new he().fromArray(r))}return this}}var Hv=Object.freeze({__proto__:null,ArcCurve:RN,CatmullRomCurve3:PN,CubicBezierCurve:bM,CubicBezierCurve3:IN,EllipseCurve:Xy,LineCurve:AM,LineCurve3:LN,QuadraticBezierCurve:CM,QuadraticBezierCurve3:RM,SplineCurve:PM});class DN extends Zs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Hv[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Hv[r.type]().fromJSON(r))}return this}}class Lp extends DN{constructor(e){super(),this.type="Path",this.currentPoint=new he,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new AM(this.currentPoint.clone(),new he(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new CM(this.currentPoint.clone(),new he(e,t),new he(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new bM(this.currentPoint.clone(),new he(e,t),new he(i,r),new he(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new PM(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new Xy(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class lm extends Mt{constructor(e=[new he(0,-.5),new he(.5,0),new he(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Fn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new H,p=new he,m=new H,v=new H,_=new H;let y=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:y=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-y,m.z=g*0,_.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:y=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-y,m.z=g*0,v.copy(m),m.x+=_.x,m.y+=_.y,m.z+=_.z,m.normalize(),l.push(m.x,m.y,m.z),_.copy(v)}for(let x=0;x<=t;x++){const S=i+x*u*r,E=Math.sin(S),b=Math.cos(S);for(let A=0;A<=e.length-1;A++){f.x=e[A].x*E,f.y=e[A].y,f.z=e[A].x*b,o.push(f.x,f.y,f.z),p.x=x/t,p.y=A/(e.length-1),a.push(p.x,p.y);const R=l[3*A+0]*E,D=l[3*A+1],O=l[3*A+0]*b;c.push(R,D,O)}}for(let x=0;x<t;x++)for(let S=0;S<e.length-1;S++){const E=S+x*e.length,b=E,A=E+e.length,R=E+e.length+1,D=E+1;s.push(b,A,D),s.push(R,D,A)}this.setIndex(s),this.setAttribute("position",new tt(o,3)),this.setAttribute("uv",new tt(a,2)),this.setAttribute("normal",new tt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lm(e.points,e.segments,e.phiStart,e.phiLength)}}class Yy extends lm{constructor(e=1,t=1,i=4,r=8){const s=new Lp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Yy(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ky extends Mt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new H,u=new he;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=i+f/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new tt(o,3)),this.setAttribute("normal",new tt(a,3)),this.setAttribute("uv",new tt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ky(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class _d extends Mt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],p=[],m=[];let v=0;const _=[],y=i/2;let g=0;x(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new tt(f,3)),this.setAttribute("normal",new tt(p,3)),this.setAttribute("uv",new tt(m,2));function x(){const E=new H,b=new H;let A=0;const R=(t-e)/i;for(let D=0;D<=s;D++){const O=[],M=D/s,I=M*(t-e)+e;for(let U=0;U<=r;U++){const j=U/r,z=j*l+a,K=Math.sin(z),q=Math.cos(z);b.x=I*K,b.y=-M*i+y,b.z=I*q,f.push(b.x,b.y,b.z),E.set(K,R,q).normalize(),p.push(E.x,E.y,E.z),m.push(j,1-M),O.push(v++)}_.push(O)}for(let D=0;D<r;D++)for(let O=0;O<s;O++){const M=_[O][D],I=_[O+1][D],U=_[O+1][D+1],j=_[O][D+1];u.push(M,I,j),u.push(I,U,j),A+=6}c.addGroup(g,A,0),g+=A}function S(E){const b=v,A=new he,R=new H;let D=0;const O=E===!0?e:t,M=E===!0?1:-1;for(let U=1;U<=r;U++)f.push(0,y*M,0),p.push(0,M,0),m.push(.5,.5),v++;const I=v;for(let U=0;U<=r;U++){const z=U/r*l+a,K=Math.cos(z),q=Math.sin(z);R.x=O*q,R.y=y*M,R.z=O*K,f.push(R.x,R.y,R.z),p.push(0,M,0),A.x=K*.5+.5,A.y=q*.5*M+.5,m.push(A.x,A.y),v++}for(let U=0;U<r;U++){const j=b+U,z=I+U;E===!0?u.push(z,z+1,j):u.push(z+1,z,j),D+=3}c.addGroup(g,D,E===!0?1:2),g+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _d(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qy extends _d{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new qy(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class kl extends Mt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new tt(s,3)),this.setAttribute("normal",new tt(s.slice(),3)),this.setAttribute("uv",new tt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const S=new H,E=new H,b=new H;for(let A=0;A<t.length;A+=3)m(t[A+0],S),m(t[A+1],E),m(t[A+2],b),l(S,E,b,x)}function l(x,S,E,b){const A=b+1,R=[];for(let D=0;D<=A;D++){R[D]=[];const O=x.clone().lerp(E,D/A),M=S.clone().lerp(E,D/A),I=A-D;for(let U=0;U<=I;U++)U===0&&D===A?R[D][U]=O:R[D][U]=O.clone().lerp(M,U/I)}for(let D=0;D<A;D++)for(let O=0;O<2*(A-D)-1;O++){const M=Math.floor(O/2);O%2===0?(p(R[D][M+1]),p(R[D+1][M]),p(R[D][M])):(p(R[D][M+1]),p(R[D+1][M+1]),p(R[D+1][M]))}}function c(x){const S=new H;for(let E=0;E<s.length;E+=3)S.x=s[E+0],S.y=s[E+1],S.z=s[E+2],S.normalize().multiplyScalar(x),s[E+0]=S.x,s[E+1]=S.y,s[E+2]=S.z}function u(){const x=new H;for(let S=0;S<s.length;S+=3){x.x=s[S+0],x.y=s[S+1],x.z=s[S+2];const E=y(x)/2/Math.PI+.5,b=g(x)/Math.PI+.5;o.push(E,1-b)}v(),f()}function f(){for(let x=0;x<o.length;x+=6){const S=o[x+0],E=o[x+2],b=o[x+4],A=Math.max(S,E,b),R=Math.min(S,E,b);A>.9&&R<.1&&(S<.2&&(o[x+0]+=1),E<.2&&(o[x+2]+=1),b<.2&&(o[x+4]+=1))}}function p(x){s.push(x.x,x.y,x.z)}function m(x,S){const E=x*3;S.x=e[E+0],S.y=e[E+1],S.z=e[E+2]}function v(){const x=new H,S=new H,E=new H,b=new H,A=new he,R=new he,D=new he;for(let O=0,M=0;O<s.length;O+=9,M+=6){x.set(s[O+0],s[O+1],s[O+2]),S.set(s[O+3],s[O+4],s[O+5]),E.set(s[O+6],s[O+7],s[O+8]),A.set(o[M+0],o[M+1]),R.set(o[M+2],o[M+3]),D.set(o[M+4],o[M+5]),b.copy(x).add(S).add(E).divideScalar(3);const I=y(b);_(A,M+0,x,I),_(R,M+2,S,I),_(D,M+4,E,I)}}function _(x,S,E,b){b<0&&x.x===1&&(o[S]=x.x-1),E.x===0&&E.z===0&&(o[S]=b/2/Math.PI+.5)}function y(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kl(e.vertices,e.indices,e.radius,e.details)}}class Zy extends kl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Zy(e.radius,e.detail)}}const d0=new H,h0=new H,I1=new H,p0=new Vr;class ON extends Mt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Rc*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:_,b:y,c:g}=p0;if(_.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),p0.getNormal(I1),f[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,f[1]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let x=0;x<3;x++){const S=(x+1)%3,E=f[x],b=f[S],A=p0[u[x]],R=p0[u[S]],D=`${E}_${b}`,O=`${b}_${E}`;O in p&&p[O]?(I1.dot(p[O].normal)<=s&&(m.push(A.x,A.y,A.z),m.push(R.x,R.y,R.z)),p[O]=null):D in p||(p[D]={index0:c[x],index1:c[S],normal:I1.clone()})}}for(const v in p)if(p[v]){const{index0:_,index1:y}=p[v];d0.fromBufferAttribute(a,_),h0.fromBufferAttribute(a,y),m.push(d0.x,d0.y,d0.z),m.push(h0.x,h0.y,h0.z)}this.setAttribute("position",new tt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Dc extends Lp{constructor(e){super(e),this.uuid=Yr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Lp().fromJSON(r))}return this}}const Rj={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=NN(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,p,m;if(i&&(s=Oj(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let v=t;v<r;v+=t)f=n[v],p=n[v+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return Dp(s,o,t,a,l,m,0),o}};function NN(n,e,t,i,r){let s,o;if(r===$j(n,e,t,i)>0)for(s=e;s<t;s+=i)o=BR(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=BR(s,n[s],n[s+1],o);return o&&Qy(o,o.next)&&(Np(o),o=o.next),o}function Yc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Qy(t,t.next)||Cn(t.prev,t,t.next)===0)){if(Np(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Dp(n,e,t,i,r,s,o){if(!n)return;!o&&s&&zj(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Ij(n,i,r,s):Pj(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Np(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=Lj(Yc(n),e,t),Dp(n,e,t,i,r,s,2)):o===2&&Dj(n,e,t,i,r,s):Dp(Yc(n),e,t,i,r,s,1);break}}}function Pj(n){const e=n.prev,t=n,i=n.next;if(Cn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=i.next;for(;v!==e;){if(v.x>=u&&v.x<=p&&v.y>=f&&v.y<=m&&xf(r,a,s,l,o,c,v.x,v.y)&&Cn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Ij(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Cn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=u<f?u<p?u:p:f<p?f:p,_=a>l?a>c?a:c:l>c?l:c,y=u>f?u>p?u:p:f>p?f:p,g=rE(m,v,e,t,i),x=rE(_,y,e,t,i);let S=n.prevZ,E=n.nextZ;for(;S&&S.z>=g&&E&&E.z<=x;){if(S.x>=m&&S.x<=_&&S.y>=v&&S.y<=y&&S!==r&&S!==o&&xf(a,u,l,f,c,p,S.x,S.y)&&Cn(S.prev,S,S.next)>=0||(S=S.prevZ,E.x>=m&&E.x<=_&&E.y>=v&&E.y<=y&&E!==r&&E!==o&&xf(a,u,l,f,c,p,E.x,E.y)&&Cn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=_&&S.y>=v&&S.y<=y&&S!==r&&S!==o&&xf(a,u,l,f,c,p,S.x,S.y)&&Cn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;E&&E.z<=x;){if(E.x>=m&&E.x<=_&&E.y>=v&&E.y<=y&&E!==r&&E!==o&&xf(a,u,l,f,c,p,E.x,E.y)&&Cn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Lj(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Qy(r,s)&&kN(r,i,i.next,s)&&Op(r,s)&&Op(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Np(i),Np(i.next),i=n=s),i=i.next}while(i!==n);return Yc(i)}function Dj(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Vj(o,a)){let l=UN(o,a);o=Yc(o,o.next),l=Yc(l,l.next),Dp(o,e,t,i,r,s,0),Dp(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function Oj(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=NN(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Hj(c));for(r.sort(Nj),s=0;s<r.length;s++)t=kj(r[s],t);return t}function Nj(n,e){return n.x-e.x}function kj(n,e){const t=Uj(n,e);if(!t)return e;const i=UN(t,n);return Yc(i,i.next),Yc(t,t.next)}function Uj(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&xf(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Op(t,n)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&Fj(r,t)))&&(r=t,u=f)),t=t.next;while(t!==a);return r}function Fj(n,e){return Cn(n.prev,n,e.prev)<0&&Cn(e.next,n,n.next)<0}function zj(n,e,t,i){let r=n;do r.z===0&&(r.z=rE(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Bj(r)}function Bj(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function rE(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Hj(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function xf(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function Vj(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Gj(n,e)&&(Op(n,e)&&Op(e,n)&&Wj(n,e)&&(Cn(n.prev,n,e.prev)||Cn(n,e.prev,e))||Qy(n,e)&&Cn(n.prev,n,n.next)>0&&Cn(e.prev,e,e.next)>0)}function Cn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Qy(n,e){return n.x===e.x&&n.y===e.y}function kN(n,e,t,i){const r=g0(Cn(n,e,t)),s=g0(Cn(n,e,i)),o=g0(Cn(t,i,n)),a=g0(Cn(t,i,e));return!!(r!==s&&o!==a||r===0&&m0(n,t,e)||s===0&&m0(n,i,e)||o===0&&m0(t,n,i)||a===0&&m0(t,e,i))}function m0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function g0(n){return n>0?1:n<0?-1:0}function Gj(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&kN(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Op(n,e){return Cn(n.prev,n,n.next)<0?Cn(n,e,n.next)>=0&&Cn(n,n.prev,e)>=0:Cn(n,e,n.prev)<0||Cn(n,n.next,e)<0}function Wj(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function UN(n,e){const t=new sE(n.i,n.x,n.y),i=new sE(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function BR(n,e,t,i){const r=new sE(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Np(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function sE(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $j(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Eo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Eo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];HR(e),VR(i,e);let o=e.length;t.forEach(HR);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,VR(i,t[l]);const a=Rj.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function HR(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function VR(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Jy extends Mt{constructor(e=new Dc([new he(.5,.5),new he(-.5,.5),new he(-.5,-.5),new he(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new tt(r,3)),this.setAttribute("uv",new tt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:jj;let S,E=!1,b,A,R,D;g&&(S=g.getSpacedPoints(u),E=!0,p=!1,b=g.computeFrenetFrames(u,!1),A=new H,R=new H,D=new H),p||(y=0,m=0,v=0,_=0);const O=a.extractPoints(c);let M=O.shape;const I=O.holes;if(!Eo.isClockWise(M)){M=M.reverse();for(let Y=0,Se=I.length;Y<Se;Y++){const ve=I[Y];Eo.isClockWise(ve)&&(I[Y]=ve.reverse())}}const j=Eo.triangulateShape(M,I),z=M;for(let Y=0,Se=I.length;Y<Se;Y++){const ve=I[Y];M=M.concat(ve)}function K(Y,Se,ve){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),Y.clone().addScaledVector(Se,ve)}const q=M.length,ee=j.length;function N(Y,Se,ve){let Ee,ye,Qe;const ke=Y.x-Se.x,F=Y.y-Se.y,k=ve.x-Y.x,se=ve.y-Y.y,Te=ke*ke+F*F,re=ke*se-F*k;if(Math.abs(re)>Number.EPSILON){const le=Math.sqrt(Te),De=Math.sqrt(k*k+se*se),be=Se.x-F/le,Oe=Se.y+ke/le,et=ve.x-se/De,lt=ve.y+k/De,we=((et-be)*se-(lt-Oe)*k)/(ke*se-F*k);Ee=be+ke*we-Y.x,ye=Oe+F*we-Y.y;const Pt=Ee*Ee+ye*ye;if(Pt<=2)return new he(Ee,ye);Qe=Math.sqrt(Pt/2)}else{let le=!1;ke>Number.EPSILON?k>Number.EPSILON&&(le=!0):ke<-Number.EPSILON?k<-Number.EPSILON&&(le=!0):Math.sign(F)===Math.sign(se)&&(le=!0),le?(Ee=-F,ye=ke,Qe=Math.sqrt(Te)):(Ee=ke,ye=F,Qe=Math.sqrt(Te/2))}return new he(Ee/Qe,ye/Qe)}const V=[];for(let Y=0,Se=z.length,ve=Se-1,Ee=Y+1;Y<Se;Y++,ve++,Ee++)ve===Se&&(ve=0),Ee===Se&&(Ee=0),V[Y]=N(z[Y],z[ve],z[Ee]);const W=[];let Q,ie=V.concat();for(let Y=0,Se=I.length;Y<Se;Y++){const ve=I[Y];Q=[];for(let Ee=0,ye=ve.length,Qe=ye-1,ke=Ee+1;Ee<ye;Ee++,Qe++,ke++)Qe===ye&&(Qe=0),ke===ye&&(ke=0),Q[Ee]=N(ve[Ee],ve[Qe],ve[ke]);W.push(Q),ie=ie.concat(Q)}for(let Y=0;Y<y;Y++){const Se=Y/y,ve=m*Math.cos(Se*Math.PI/2),Ee=v*Math.sin(Se*Math.PI/2)+_;for(let ye=0,Qe=z.length;ye<Qe;ye++){const ke=K(z[ye],V[ye],Ee);Re(ke.x,ke.y,-ve)}for(let ye=0,Qe=I.length;ye<Qe;ye++){const ke=I[ye];Q=W[ye];for(let F=0,k=ke.length;F<k;F++){const se=K(ke[F],Q[F],Ee);Re(se.x,se.y,-ve)}}}const Me=v+_;for(let Y=0;Y<q;Y++){const Se=p?K(M[Y],ie[Y],Me):M[Y];E?(R.copy(b.normals[0]).multiplyScalar(Se.x),A.copy(b.binormals[0]).multiplyScalar(Se.y),D.copy(S[0]).add(R).add(A),Re(D.x,D.y,D.z)):Re(Se.x,Se.y,0)}for(let Y=1;Y<=u;Y++)for(let Se=0;Se<q;Se++){const ve=p?K(M[Se],ie[Se],Me):M[Se];E?(R.copy(b.normals[Y]).multiplyScalar(ve.x),A.copy(b.binormals[Y]).multiplyScalar(ve.y),D.copy(S[Y]).add(R).add(A),Re(D.x,D.y,D.z)):Re(ve.x,ve.y,f/u*Y)}for(let Y=y-1;Y>=0;Y--){const Se=Y/y,ve=m*Math.cos(Se*Math.PI/2),Ee=v*Math.sin(Se*Math.PI/2)+_;for(let ye=0,Qe=z.length;ye<Qe;ye++){const ke=K(z[ye],V[ye],Ee);Re(ke.x,ke.y,f+ve)}for(let ye=0,Qe=I.length;ye<Qe;ye++){const ke=I[ye];Q=W[ye];for(let F=0,k=ke.length;F<k;F++){const se=K(ke[F],Q[F],Ee);E?Re(se.x,se.y+S[u-1].y,S[u-1].x+ve):Re(se.x,se.y,f+ve)}}}te(),ue();function te(){const Y=r.length/3;if(p){let Se=0,ve=q*Se;for(let Ee=0;Ee<ee;Ee++){const ye=j[Ee];$e(ye[2]+ve,ye[1]+ve,ye[0]+ve)}Se=u+y*2,ve=q*Se;for(let Ee=0;Ee<ee;Ee++){const ye=j[Ee];$e(ye[0]+ve,ye[1]+ve,ye[2]+ve)}}else{for(let Se=0;Se<ee;Se++){const ve=j[Se];$e(ve[2],ve[1],ve[0])}for(let Se=0;Se<ee;Se++){const ve=j[Se];$e(ve[0]+q*u,ve[1]+q*u,ve[2]+q*u)}}i.addGroup(Y,r.length/3-Y,0)}function ue(){const Y=r.length/3;let Se=0;xe(z,Se),Se+=z.length;for(let ve=0,Ee=I.length;ve<Ee;ve++){const ye=I[ve];xe(ye,Se),Se+=ye.length}i.addGroup(Y,r.length/3-Y,1)}function xe(Y,Se){let ve=Y.length;for(;--ve>=0;){const Ee=ve;let ye=ve-1;ye<0&&(ye=Y.length-1);for(let Qe=0,ke=u+y*2;Qe<ke;Qe++){const F=q*Qe,k=q*(Qe+1),se=Se+Ee+F,Te=Se+ye+F,re=Se+ye+k,le=Se+Ee+k;ze(se,Te,re,le)}}}function Re(Y,Se,ve){l.push(Y),l.push(Se),l.push(ve)}function $e(Y,Se,ve){ot(Y),ot(Se),ot(ve);const Ee=r.length/3,ye=x.generateTopUV(i,r,Ee-3,Ee-2,Ee-1);He(ye[0]),He(ye[1]),He(ye[2])}function ze(Y,Se,ve,Ee){ot(Y),ot(Se),ot(Ee),ot(Se),ot(ve),ot(Ee);const ye=r.length/3,Qe=x.generateSideWallUV(i,r,ye-6,ye-3,ye-2,ye-1);He(Qe[0]),He(Qe[1]),He(Qe[3]),He(Qe[1]),He(Qe[2]),He(Qe[3])}function ot(Y){r.push(l[Y*3+0]),r.push(l[Y*3+1]),r.push(l[Y*3+2])}function He(Y){s.push(Y.x),s.push(Y.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Xj(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Hv[r.type]().fromJSON(r)),new Jy(i,e.options)}}const jj={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new he(s,o),new he(a,l),new he(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],p=e[r*3],m=e[r*3+1],v=e[r*3+2],_=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new he(o,1-l),new he(c,1-f),new he(p,1-v),new he(_,1-g)]:[new he(a,1-l),new he(u,1-f),new he(m,1-v),new he(y,1-g)]}};function Xj(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class e_ extends kl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new e_(e.radius,e.detail)}}class cm extends kl{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cm(e.radius,e.detail)}}class t_ extends Mt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const p=(t-e)/r,m=new H,v=new he;for(let _=0;_<=r;_++){for(let y=0;y<=i;y++){const g=s+y/i*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,u.push(v.x,v.y)}f+=p}for(let _=0;_<r;_++){const y=_*(i+1);for(let g=0;g<i;g++){const x=g+y,S=x,E=x+i+1,b=x+i+2,A=x+1;a.push(S,E,A),a.push(E,b,A)}}this.setIndex(a),this.setAttribute("position",new tt(l,3)),this.setAttribute("normal",new tt(c,3)),this.setAttribute("uv",new tt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class n_ extends Mt{constructor(e=new Dc([new he(0,.5),new he(-.5,-.5),new he(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new tt(r,3)),this.setAttribute("normal",new tt(s,3)),this.setAttribute("uv",new tt(o,2));function c(u){const f=r.length/3,p=u.extractPoints(t);let m=p.shape;const v=p.holes;Eo.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,g=v.length;y<g;y++){const x=v[y];Eo.isClockWise(x)===!0&&(v[y]=x.reverse())}const _=Eo.triangulateShape(m,v);for(let y=0,g=v.length;y<g;y++){const x=v[y];m=m.concat(x)}for(let y=0,g=m.length;y<g;y++){const x=m[y];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let y=0,g=_.length;y<g;y++){const x=_[y],S=x[0]+f,E=x[1]+f,b=x[2]+f;i.push(S,E,b),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Yj(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new n_(i,e.curveSegments)}}function Yj(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class um extends Mt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new H,p=new H,m=[],v=[],_=[],y=[];for(let g=0;g<=i;g++){const x=[],S=g/i;let E=0;g===0&&o===0?E=.5/t:g===i&&l===Math.PI&&(E=-.5/t);for(let b=0;b<=t;b++){const A=b/t;f.x=-e*Math.cos(r+A*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(r+A*s)*Math.sin(o+S*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),_.push(p.x,p.y,p.z),y.push(A+E,1-S),x.push(c++)}u.push(x)}for(let g=0;g<i;g++)for(let x=0;x<t;x++){const S=u[g][x+1],E=u[g][x],b=u[g+1][x],A=u[g+1][x+1];(g!==0||o>0)&&m.push(S,E,A),(g!==i-1||l<Math.PI)&&m.push(E,b,A)}this.setIndex(m),this.setAttribute("position",new tt(v,3)),this.setAttribute("normal",new tt(_,3)),this.setAttribute("uv",new tt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new um(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class i_ extends kl{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new i_(e.radius,e.detail)}}class r_ extends Mt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new H,f=new H,p=new H;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const _=v/r*s,y=m/i*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(_),f.y=(e+t*Math.cos(y))*Math.sin(_),f.z=t*Math.sin(y),a.push(f.x,f.y,f.z),u.x=e*Math.cos(_),u.y=e*Math.sin(_),p.subVectors(f,u).normalize(),l.push(p.x,p.y,p.z),c.push(v/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const _=(r+1)*m+v-1,y=(r+1)*(m-1)+v-1,g=(r+1)*(m-1)+v,x=(r+1)*m+v;o.push(_,y,x),o.push(y,g,x)}this.setIndex(o),this.setAttribute("position",new tt(a,3)),this.setAttribute("normal",new tt(l,3)),this.setAttribute("uv",new tt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class s_ extends Mt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new H,p=new H,m=new H,v=new H,_=new H,y=new H,g=new H;for(let S=0;S<=i;++S){const E=S/i*s*Math.PI*2;x(E,s,o,e,m),x(E+.01,s,o,e,v),y.subVectors(v,m),g.addVectors(v,m),_.crossVectors(y,g),g.crossVectors(_,y),_.normalize(),g.normalize();for(let b=0;b<=r;++b){const A=b/r*Math.PI*2,R=-t*Math.cos(A),D=t*Math.sin(A);f.x=m.x+(R*g.x+D*_.x),f.y=m.y+(R*g.y+D*_.y),f.z=m.z+(R*g.z+D*_.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),u.push(S/i),u.push(b/r)}}for(let S=1;S<=i;S++)for(let E=1;E<=r;E++){const b=(r+1)*(S-1)+(E-1),A=(r+1)*S+(E-1),R=(r+1)*S+E,D=(r+1)*(S-1)+E;a.push(b,A,D),a.push(A,R,D)}this.setIndex(a),this.setAttribute("position",new tt(l,3)),this.setAttribute("normal",new tt(c,3)),this.setAttribute("uv",new tt(u,2));function x(S,E,b,A,R){const D=Math.cos(S),O=Math.sin(S),M=b/E*S,I=Math.cos(M);R.x=A*(2+I)*.5*D,R.y=A*(2+I)*O*.5,R.z=A*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new s_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class o_ extends Mt{constructor(e=new RM(new H(-1,-1,0),new H(-1,1,0),new H(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new H,l=new H,c=new he;let u=new H;const f=[],p=[],m=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new tt(f,3)),this.setAttribute("normal",new tt(p,3)),this.setAttribute("uv",new tt(m,2));function _(){for(let S=0;S<t;S++)y(S);y(s===!1?t:0),x(),g()}function y(S){u=e.getPointAt(S/t,u);const E=o.normals[S],b=o.binormals[S];for(let A=0;A<=r;A++){const R=A/r*Math.PI*2,D=Math.sin(R),O=-Math.cos(R);l.x=O*E.x+D*b.x,l.y=O*E.y+D*b.y,l.z=O*E.z+D*b.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let E=1;E<=r;E++){const b=(r+1)*(S-1)+(E-1),A=(r+1)*S+(E-1),R=(r+1)*S+E,D=(r+1)*(S-1)+E;v.push(b,A,D),v.push(A,R,D)}}function x(){for(let S=0;S<=t;S++)for(let E=0;E<=r;E++)c.x=S/t,c.y=E/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new o_(new Hv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class FN extends Mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new H,s=new H;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],p=f.start,m=f.count;for(let v=p,_=p+m;v<_;v+=3)for(let y=0;y<3;y++){const g=a.getX(v+y),x=a.getX(v+(y+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),GR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),GR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new tt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function GR(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var WR=Object.freeze({__proto__:null,BoxGeometry:ou,CapsuleGeometry:Yy,CircleGeometry:Ky,ConeGeometry:qy,CylinderGeometry:_d,DodecahedronGeometry:Zy,EdgesGeometry:ON,ExtrudeGeometry:Jy,IcosahedronGeometry:e_,LatheGeometry:lm,OctahedronGeometry:cm,PlaneGeometry:vd,PolyhedronGeometry:kl,RingGeometry:t_,ShapeGeometry:n_,SphereGeometry:um,TetrahedronGeometry:i_,TorusGeometry:r_,TorusKnotGeometry:s_,TubeGeometry:o_,WireframeGeometry:FN});class zN extends Bn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ie(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class BN extends Sn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class xd extends Bn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ie(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tr extends xd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new he(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ie(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ie(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ie(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class HN extends Bn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ie(16777215),this.specular=new Ie(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VN extends Bn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ie(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class IM extends Bn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class GN extends Bn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ie(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ie(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WN extends Bn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ie(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nl,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $N extends Xi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ec(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function jN(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function XN(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function oE(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function LM(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function Kj(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*r;if(!(v<t||v>=i)){f.push(c.times[m]);for(let _=0;_<u;++_)p.push(c.values[m*u+_])}}f.length!==0&&(c.times=Ec(f,c.times.constructor),c.values=Ec(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function qj(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let _;if(s<=a.times[0]){const g=u,x=f-u;_=a.values.slice(g,x)}else if(s>=a.times[v]){const g=v*f+u,x=g+f-u;_=a.values.slice(g,x)}else{const g=a.createInterpolant(),x=u,S=f-u;g.evaluate(s),_=g.resultBuffer.slice(x,S)}l==="quaternion"&&new xi().fromArray(_).normalize().conjugate().toArray(_);const y=c.times.length;for(let g=0;g<y;++g){const x=g*m+p;if(l==="quaternion")xi.multiplyQuaternionsFlat(c.values,x,_,0,c.values,x);else{const S=m-p*2;for(let E=0;E<S;++E)c.values[x+E]-=_[E]}}}return n.blendMode=lM,n}const Zj={convertArray:Ec,isTypedArray:jN,getKeyframeOrder:XN,sortedArray:oE,flattenJSON:LM,subclip:Kj,makeClipAdditive:qj};class Sd{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class YN extends Sd{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:xc,endingEnd:xc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Sc:s=e,a=2*t-i;break;case Tp:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Sc:o=e,l=2*i-t;break;case Tp:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),_=v*v,y=_*v,g=-p*y+2*p*_-p*v,x=(1+p)*y+(-1.5-2*p)*_+(-.5+p)*v+1,S=(-1-m)*y+(1.5+m)*_+.5*v,E=m*y-m*_;for(let b=0;b!==a;++b)s[b]=g*o[u+b]+x*o[c+b]+S*o[l+b]+E*o[f+b];return s}}class DM extends Sd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),f=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*u;return s}}class KN extends Sd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Qs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ec(t,this.TimeBufferType),this.values=Ec(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ec(e.times,Array),values:Ec(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new KN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new DM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new YN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Yf:t=this.InterpolantFactoryMethodDiscrete;break;case jc:t=this.InterpolantFactoryMethodLinear;break;case tv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yf;case this.InterpolantFactoryMethodLinear:return jc;case this.InterpolantFactoryMethodSmooth:return tv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&jN(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===tv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,p=f-i,m=f+i;for(let v=0;v!==i;++v){const _=t[f+v];if(_!==t[p+v]||_!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Qs.prototype.TimeBufferType=Float32Array;Qs.prototype.ValueBufferType=Float32Array;Qs.prototype.DefaultInterpolation=jc;class au extends Qs{}au.prototype.ValueTypeName="bool";au.prototype.ValueBufferType=Array;au.prototype.DefaultInterpolation=Yf;au.prototype.InterpolantFactoryMethodLinear=void 0;au.prototype.InterpolantFactoryMethodSmooth=void 0;class OM extends Qs{}OM.prototype.ValueTypeName="color";class Kc extends Qs{}Kc.prototype.ValueTypeName="number";class qN extends Sd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)xi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Tl extends Qs{InterpolantFactoryMethodLinear(e){return new qN(this.times,this.values,this.getValueSize(),e)}}Tl.prototype.ValueTypeName="quaternion";Tl.prototype.DefaultInterpolation=jc;Tl.prototype.InterpolantFactoryMethodSmooth=void 0;class lu extends Qs{}lu.prototype.ValueTypeName="string";lu.prototype.ValueBufferType=Array;lu.prototype.DefaultInterpolation=Yf;lu.prototype.InterpolantFactoryMethodLinear=void 0;lu.prototype.InterpolantFactoryMethodSmooth=void 0;class qc extends Qs{}qc.prototype.ValueTypeName="vector";class Qf{constructor(e,t=-1,i,r=ky){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Yr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Jj(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Qs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=XN(l);l=oE(l,1,u),c=oE(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Kc(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let p=r[f];p||(r[f]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,m,v,_){if(m.length!==0){const y=[],g=[];LM(m,y,g,v),y.length!==0&&_.push(new f(p,y,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let _=0;_<p[v].morphTargets.length;_++)m[p[v].morphTargets[_]]=-1;for(const _ in m){const y=[],g=[];for(let x=0;x!==p[v].morphTargets.length;++x){const S=p[v];y.push(S.time),g.push(S.morphTarget===_?1:0)}r.push(new Kc(".morphTargetInfluence["+_+"]",y,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i(qc,m+".position",p,"pos",r),i(Tl,m+".quaternion",p,"rot",r),i(qc,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Qj(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Kc;case"vector":case"vector2":case"vector3":case"vector4":return qc;case"color":return OM;case"quaternion":return Tl;case"bool":case"boolean":return au;case"string":return lu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Jj(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Qj(n.type);if(n.times===void 0){const t=[],i=[];LM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const na={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class NM{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(u))return v}return null}}}const ZN=new NM;class fr{constructor(e){this.manager=e!==void 0?e:ZN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}fr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Vo={};class eX extends Error{constructor(e,t){super(e),this.response=t}}class Ys extends fr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=na.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Vo[e]!==void 0){Vo[e].push({onLoad:t,onProgress:i,onError:r});return}Vo[e]=[],Vo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Vo[e],f=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let _=0;const y=new ReadableStream({start(g){x();function x(){f.read().then(({done:S,value:E})=>{if(S)g.close();else{_+=E.byteLength;const b=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:m});for(let A=0,R=u.length;A<R;A++){const D=u[A];D.onProgress&&D.onProgress(b)}g.enqueue(E),x()}})}}});return new Response(y)}else throw new eX(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{na.add(e,c);const u=Vo[e];delete Vo[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Vo[e];if(u===void 0)throw this.manager.itemError(e),c;delete Vo[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class tX extends fr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ys(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Qf.parse(e[i]);t.push(r)}return t}}class nX extends fr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new jy,l=new Ys(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Zt),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)u(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let _=0;_<p.mipmapCount;_++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+_]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Zt),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class kp extends fr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=na.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Ip("img");function l(){u(),na.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class iX extends fr{constructor(e){super(e)}load(e,t,i,r){const s=new rm;s.colorSpace=St;const o=new kp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class rX extends fr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Lc,a=new Ys(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Ai,o.wrapT=c.wrapT!==void 0?c.wrapT:Ai,o.magFilter=c.magFilter!==void 0?c.magFilter:Zt,o.minFilter=c.minFilter!==void 0?c.minFilter:Zt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Ss),c.mipmapCount===1&&(o.minFilter=Zt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class QN extends fr{constructor(e){super(e)}load(e,t,i,r){const s=new rn,o=new kp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Ul extends Vt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ie(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class JN extends Ul{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ie(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const L1=new ft,$R=new H,jR=new H;class kM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new he(512,512),this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sm,this._frameExtents=new he(1,1),this._viewportCount=1,this._viewports=[new qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;$R.setFromMatrixPosition(e.matrixWorld),t.position.copy($R),jR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(jR),t.updateMatrixWorld(),L1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(L1),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(L1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sX extends kM{constructor(){super(new cn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Kf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class UM extends Ul{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.target=new Vt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new sX}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const XR=new ft,yh=new H,D1=new H;class oX extends kM{constructor(){super(new cn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new he(4,2),this._viewportCount=6,this._viewports=[new qt(2,1,1,1),new qt(0,1,1,1),new qt(3,1,1,1),new qt(1,1,1,1),new qt(3,0,1,1),new qt(1,0,1,1)],this._cubeDirections=[new H(1,0,0),new H(-1,0,0),new H(0,0,1),new H(0,0,-1),new H(0,1,0),new H(0,-1,0)],this._cubeUps=[new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,0,1),new H(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),yh.setFromMatrixPosition(e.matrixWorld),i.position.copy(yh),D1.copy(i.position),D1.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(D1),i.updateMatrixWorld(),r.makeTranslation(-yh.x,-yh.y,-yh.z),XR.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(XR)}}class FM extends Ul{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new oX}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class aX extends kM{constructor(){super(new _o(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class zM extends Ul{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Vt.DEFAULT_UP),this.updateMatrix(),this.target=new Vt,this.shadow=new aX}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ek extends Ul{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tk extends Ul{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class nk{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new H)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class ik extends Ul{constructor(e=new nk,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class a_ extends fr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Ys(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=a_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ie().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ie().setHex(o.value);break;case"v2":r.uniforms[s].value=new he().fromArray(o.value);break;case"v3":r.uniforms[s].value=new H().fromArray(o.value);break;case"v4":r.uniforms[s].value=new qt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Lt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ft().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new he().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new he().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:zN,SpriteMaterial:xM,RawShaderMaterial:BN,ShaderMaterial:Sn,PointsMaterial:$y,MeshPhysicalMaterial:Tr,MeshStandardMaterial:xd,MeshPhongMaterial:HN,MeshToonMaterial:VN,MeshNormalMaterial:IM,MeshLambertMaterial:GN,MeshDepthMaterial:Hy,MeshDistanceMaterial:yM,MeshBasicMaterial:$r,MeshMatcapMaterial:WN,LineDashedMaterial:$N,LineBasicMaterial:Xi,Material:Bn};return new t[e]}}class gl{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class rk extends Mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class sk extends fr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ys(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const y=m.interleavedBuffers[v],g=s(m,y.buffer),x=vf(y.type,g),S=new om(x,y.stride);return S.uuid=y.uuid,t[v]=S,S}function s(m,v){if(i[v]!==void 0)return i[v];const y=m.arrayBuffers[v],g=new Uint32Array(y).buffer;return i[v]=g,g}const o=e.isInstancedBufferGeometry?new rk:new Mt,a=e.data.index;if(a!==void 0){const m=vf(a.type,a.array);o.setIndex(new Ut(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let _;if(v.isInterleavedBufferAttribute){const y=r(e.data,v.data);_=new El(y,v.itemSize,v.offset,v.normalized)}else{const y=vf(v.type,v.array),g=v.isInstancedBufferAttribute?Xc:Ut;_=new g(y,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),o.setAttribute(m,_)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],_=[];for(let y=0,g=v.length;y<g;y++){const x=v[y];let S;if(x.isInterleavedBufferAttribute){const E=r(e.data,x.data);S=new El(E,x.itemSize,x.offset,x.normalized)}else{const E=vf(x.type,x.array);S=new Ut(E,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),_.push(S)}o.morphAttributes[m]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const _=f[m];o.addGroup(_.start,_.count,_.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new H;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Ri(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class lX extends fr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?gl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ys(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?gl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ys(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Dc().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new am().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new sk;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in WR?a=WR[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new a_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Qf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:vf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new NM(t);s=new kp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,_=p.length;v<_;v++){const y=p[v],g=a(y);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Lc(g.data,g.width,g.height)))}r[f.uuid]=new wc(m)}else{const m=a(f.url);r[f.uuid]=new wc(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:vf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new kp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new Lc(v.data,v.width,v.height)))}i[l.uuid]=new wc(u)}else{const u=await s(l.url);i[l.uuid]=new wc(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new rm,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Lc:u=new rn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,cX)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],YR),u.wrapT=i(a.wrap[1],YR)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,KR)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,KR)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,_=p.length;v<_;v++){const y=p[v];i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(i[y])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let u,f;switch(e.type){case"Scene":o=new Zf,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ie(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Gy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Vy(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new cn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new _o(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ek(e.color,e.intensity);break;case"DirectionalLight":o=new zM(e.color,e.intensity);break;case"PointLight":o=new FM(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new tk(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new UM(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new JN(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new ik().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new SM(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new Pn(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new wM(u,f,p),o.instanceMatrix=new Xc(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Xc(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new CN(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(_=>{const y=new Gi;y.min.fromArray(_.boxMin),y.max.fromArray(_.boxMax);const g=new Ri;return g.radius=_.sphereRadius,g.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:y,sphereInitialized:_.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new AN;break;case"Line":o=new ha(a(e.geometry),l(e.material));break;case"LineLoop":o=new EM(a(e.geometry),l(e.material));break;case"LineSegments":o=new qs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new TM(a(e.geometry),l(e.material));break;case"Sprite":o=new bN(l(e.material));break;case"Group":o=new ta;break;case"Bone":o=new Wy;break;default:o=new Vt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],_=o.getObjectByProperty("uuid",v.object);_!==void 0&&o.addLevel(_,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const cX={UVMapping:Oy,CubeReflectionMapping:fa,CubeRefractionMapping:Sl,EquirectangularReflectionMapping:Sp,EquirectangularRefractionMapping:wp,CubeUVReflectionMapping:md},YR={RepeatWrapping:da,ClampToEdgeWrapping:Ai,MirroredRepeatWrapping:Xf},KR={NearestFilter:en,NearestMipmapNearestFilter:Ep,NearestMipmapLinearFilter:Za,LinearFilter:Zt,LinearMipmapNearestFilter:If,LinearMipmapLinearFilter:Ss};class ok extends fr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=na.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return na.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),na.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});na.add(e,l),s.manager.itemStart(e)}}let v0;class BM{static getContext(){return v0===void 0&&(v0=new(window.AudioContext||window.webkitAudioContext)),v0}static setContext(e){v0=e}}class uX extends fr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ys(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);BM.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const qR=new ft,ZR=new ft,Jl=new ft;class fX{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new cn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new cn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Jl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Rc*t.fov*.5)/t.zoom;let a,l;ZR.elements[12]=-r,qR.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Jl.elements[0]=2*t.near/(l-a),Jl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Jl),a=-o*t.aspect-s,l=o*t.aspect-s,Jl.elements[0]=2*t.near/(l-a),Jl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Jl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ZR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qR)}}class HM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=QR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=QR();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function QR(){return(typeof performance>"u"?Date:performance).now()}const ec=new H,JR=new xi,dX=new H,tc=new H;class hX extends Vt{constructor(){super(),this.type="AudioListener",this.context=BM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new HM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ec,JR,dX),tc.set(0,0,-1).applyQuaternion(JR),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ec.x,r),t.positionY.linearRampToValueAtTime(ec.y,r),t.positionZ.linearRampToValueAtTime(ec.z,r),t.forwardX.linearRampToValueAtTime(tc.x,r),t.forwardY.linearRampToValueAtTime(tc.y,r),t.forwardZ.linearRampToValueAtTime(tc.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(ec.x,ec.y,ec.z),t.setOrientation(tc.x,tc.y,tc.z,i.x,i.y,i.z)}}class ak extends Vt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const nc=new H,eP=new xi,pX=new H,ic=new H;class mX extends ak{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(nc,eP,pX),ic.set(0,0,1).applyQuaternion(eP);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(nc.x,i),t.positionY.linearRampToValueAtTime(nc.y,i),t.positionZ.linearRampToValueAtTime(nc.z,i),t.orientationX.linearRampToValueAtTime(ic.x,i),t.orientationY.linearRampToValueAtTime(ic.y,i),t.orientationZ.linearRampToValueAtTime(ic.z,i)}else t.setPosition(nc.x,nc.y,nc.z),t.setOrientation(ic.x,ic.y,ic.z)}}class gX{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class lk{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){xi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;xi.multiplyQuaternionsFlat(e,o,e,t,e,i),xi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const VM="\\[\\]\\.:\\/",vX=new RegExp("["+VM+"]","g"),GM="[^"+VM+"]",yX="[^"+VM.replace("\\.","")+"]",_X=/((?:WC+[\/:])*)/.source.replace("WC",GM),xX=/(WCOD+)?/.source.replace("WCOD",yX),SX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",GM),wX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",GM),EX=new RegExp("^"+_X+xX+SX+wX+"$"),TX=["material","materials","bones","map"];class MX{constructor(e,t,i){const r=i||Ht.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ht{constructor(e,t,i){this.path=t,this.parsedPath=i||Ht.parseTrackName(t),this.node=Ht.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ht.Composite(e,t,i):new Ht(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(vX,"")}static parseTrackName(e){const t=EX.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);TX.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Ht.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ht.Composite=MX;Ht.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ht.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ht.prototype.GetterByBindingType=[Ht.prototype._getValue_direct,Ht.prototype._getValue_array,Ht.prototype._getValue_arrayElement,Ht.prototype._getValue_toArray];Ht.prototype.SetterByBindingTypeAndVersioning=[[Ht.prototype._setValue_direct,Ht.prototype._setValue_direct_setNeedsUpdate,Ht.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_array,Ht.prototype._setValue_array_setNeedsUpdate,Ht.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_arrayElement,Ht.prototype._setValue_arrayElement_setNeedsUpdate,Ht.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_fromArray,Ht.prototype._setValue_fromArray_setNeedsUpdate,Ht.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class bX{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Yr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const p=arguments[u],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let _=0,y=o;_!==y;++_)s[_].push(new Ht(p,i[_],r[_]))}else if(v<c){a=e[v];const _=--c,y=e[_];t[y.uuid]=v,e[v]=y,t[m]=_,e[_]=p;for(let g=0,x=o;g!==x;++g){const S=s[g],E=S[_];let b=S[v];S[v]=E,b===void 0&&(b=new Ht(p,i[g],r[g])),S[_]=b}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,p=e[f];t[p.uuid]=u,e[u]=p,t[c]=f,e[f]=l;for(let m=0,v=r;m!==v;++m){const _=i[m],y=_[f],g=_[u];_[u]=y,_[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const p=--s,m=e[p],v=--o,_=e[v];t[m.uuid]=f,e[f]=m,t[_.uuid]=p,e[p]=_,e.pop();for(let y=0,g=r;y!==g;++y){const x=i[y],S=x[p],E=x[v];x[f]=S,x[p]=E,x.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,_=r;v!==_;++v){const y=i[v];y[f]=y[p],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let p=u,m=l.length;p!==m;++p){const v=l[p];f[p]=new Ht(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class ck{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:xc,endingEnd:xc};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=qO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case lM:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case ky:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===ZO;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===KO){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Sc,r.endingEnd=Sc):(e?r.endingStart=this.zeroSlopeAtStart?Sc:xc:r.endingStart=Tp,t?r.endingEnd=this.zeroSlopeAtEnd?Sc:xc:r.endingEnd=Tp)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const AX=new Float32Array(1);class CX extends ts{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const p=r[f],m=p.name;let v=u[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const _=t&&t._propertyBindings[f].binding.parsedPath;v=new lk(Ht.create(i,m,_),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new DM(new Float32Array(2),new Float32Array(2),1,AX),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Qf.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=ky),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new ck(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Qf.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class qe{constructor(e){this.value=e}clone(){return new qe(this.value.clone===void 0?this.value:this.value.clone())}}let RX=0;class PX extends ts{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:RX++}),this.name="",this.usage=Rp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class IX extends om{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class LX{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class uk{constructor(e,t,i=0,r=1/0){this.ray=new su(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ic,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return aE(e,this,i,t),i.sort(tP),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)aE(e[r],this,i,t);return i.sort(tP),i}}function tP(n,e){return n.distance-e.distance}function aE(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)aE(r[s],e,t,!0)}}class lE{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class DX{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const nP=new he;class OX{constructor(e=new he(1/0,1/0),t=new he(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=nP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,nP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const iP=new H,y0=new H;class NX{constructor(e=new H,t=new H){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){iP.subVectors(e,this.start),y0.subVectors(this.end,this.start);const i=y0.dot(y0);let s=y0.dot(iP)/i;return t&&(s=Fn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const rP=new H;class kX extends Vt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Mt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new tt(r,3));const s=new Xi({fog:!1,toneMapped:!1});this.cone=new qs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ba=new H,_0=new ft,O1=new ft;class UX extends qs{constructor(e){const t=fk(e),i=new Mt,r=[],s=[],o=new Ie(0,0,1),a=new Ie(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new tt(r,3)),i.setAttribute("color",new tt(s,3));const l=new Xi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");O1.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(_0.multiplyMatrices(O1,a.matrixWorld),Ba.setFromMatrixPosition(_0),r.setXYZ(o,Ba.x,Ba.y,Ba.z),_0.multiplyMatrices(O1,a.parent.matrixWorld),Ba.setFromMatrixPosition(_0),r.setXYZ(o+1,Ba.x,Ba.y,Ba.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function fk(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,fk(n.children[t]));return e}class FX extends Pn{constructor(e,t,i){const r=new um(t,4,2),s=new $r({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const zX=new H,sP=new Ie,oP=new Ie;class BX extends Vt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new cm(t);r.rotateY(Math.PI*.5),this.material=new $r({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Ut(o,3)),this.add(new Pn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");sP.copy(this.light.color),oP.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?sP:oP;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(zX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class HX extends qs{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ie(i),r=new Ie(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const _=p===s?i:r;_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3}const u=new Mt;u.setAttribute("position",new tt(l,3)),u.setAttribute("color",new tt(c,3));const f=new Xi({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class VX extends qs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ie(s),o=new Ie(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const _=f&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let f=0;f<i;f++){const p=f&1?s:o,m=e-e/i*f;for(let v=0;v<r;v++){let _=v/r*(Math.PI*2),y=Math.sin(_)*m,g=Math.cos(_)*m;a.push(y,0,g),l.push(p.r,p.g,p.b),_=(v+1)/r*(Math.PI*2),y=Math.sin(_)*m,g=Math.cos(_)*m,a.push(y,0,g),l.push(p.r,p.g,p.b)}}const c=new Mt;c.setAttribute("position",new tt(a,3)),c.setAttribute("color",new tt(l,3));const u=new Xi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const aP=new H,x0=new H,lP=new H;class GX extends Vt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Mt;r.setAttribute("position",new tt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Xi({fog:!1,toneMapped:!1});this.lightPlane=new ha(r,s),this.add(this.lightPlane),r=new Mt,r.setAttribute("position",new tt([0,0,0,0,0,1],3)),this.targetLine=new ha(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),aP.setFromMatrixPosition(this.light.matrixWorld),x0.setFromMatrixPosition(this.light.target.matrixWorld),lP.subVectors(x0,aP),this.lightPlane.lookAt(x0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(x0),this.targetLine.scale.z=lP.length()}}const S0=new H,kn=new gd;class WX extends qs{constructor(e){const t=new Mt,i=new Xi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,_){l(v),l(_)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new tt(r,3)),t.setAttribute("color",new tt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ie(16755200),u=new Ie(16711680),f=new Ie(43775),p=new Ie(16777215),m=new Ie(3355443);this.setColors(c,u,f,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;kn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),$n("c",t,e,kn,0,0,-1),$n("t",t,e,kn,0,0,1),$n("n1",t,e,kn,-i,-r,-1),$n("n2",t,e,kn,i,-r,-1),$n("n3",t,e,kn,-i,r,-1),$n("n4",t,e,kn,i,r,-1),$n("f1",t,e,kn,-i,-r,1),$n("f2",t,e,kn,i,-r,1),$n("f3",t,e,kn,-i,r,1),$n("f4",t,e,kn,i,r,1),$n("u1",t,e,kn,i*.7,r*1.1,-1),$n("u2",t,e,kn,-i*.7,r*1.1,-1),$n("u3",t,e,kn,0,r*2,-1),$n("cf1",t,e,kn,-i,0,1),$n("cf2",t,e,kn,i,0,1),$n("cf3",t,e,kn,0,-r,1),$n("cf4",t,e,kn,0,r,1),$n("cn1",t,e,kn,-i,0,-1),$n("cn2",t,e,kn,i,0,-1),$n("cn3",t,e,kn,0,-r,-1),$n("cn4",t,e,kn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function $n(n,e,t,i,r,s,o){S0.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],S0.x,S0.y,S0.z)}}const w0=new Gi;class $X extends qs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Mt;s.setIndex(new Ut(i,1)),s.setAttribute("position",new Ut(r,3)),super(s,new Xi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&w0.setFromObject(this.object),w0.isEmpty())return;const t=w0.min,i=w0.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class jX extends qs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Mt;s.setIndex(new Ut(i,1)),s.setAttribute("position",new tt(r,3)),super(s,new Xi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class XX extends ha{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Mt;o.setAttribute("position",new tt(s,3)),o.computeBoundingSphere(),super(o,new Xi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Mt;l.setAttribute("position",new tt(a,3)),l.computeBoundingSphere(),this.add(new Pn(l,new $r({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const cP=new H;let E0,N1;class YX extends Vt{constructor(e=new H(0,0,1),t=new H(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",E0===void 0&&(E0=new Mt,E0.setAttribute("position",new tt([0,0,0,0,1,0],3)),N1=new _d(0,.5,1,5,1),N1.translate(0,-.5,0)),this.position.copy(t),this.line=new ha(E0,new Xi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pn(N1,new $r({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{cP.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(cP,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class KX extends qs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Mt;r.setAttribute("position",new tt(t,3)),r.setAttribute("color",new tt(i,3));const s=new Xi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ie,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class qX{constructor(){this.type="ShapePath",this.color=new Ie,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Lp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let S=0,E=g.length;S<E;S++){const b=g[S],A=new Dc;A.curves=b.curves,x.push(A)}return x}function i(g,x){const S=x.length;let E=!1;for(let b=S-1,A=0;A<S;b=A++){let R=x[b],D=x[A],O=D.x-R.x,M=D.y-R.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(R=x[A],O=-O,D=x[b],M=-M),g.y<R.y||g.y>D.y)continue;if(g.y===R.y){if(g.x===R.x)return!0}else{const I=M*(g.x-R.x)-O*(g.y-R.y);if(I===0)return!0;if(I<0)continue;E=!E}}else{if(g.y!==R.y)continue;if(D.x<=g.x&&g.x<=R.x||R.x<=g.x&&g.x<=D.x)return!0}}return E}const r=Eo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Dc,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],p=[];let m=[],v=0,_;p[v]=void 0,m[v]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],_=a.getPoints(),o=r(_),o=e?!o:o,o?(!u&&p[v]&&v++,p[v]={s:new Dc,p:_},p[v].s.curves=a.curves,u&&v++,m[v]=[]):m[v].push({h:a,p:_[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,x=0;for(let S=0,E=p.length;S<E;S++)f[S]=[];for(let S=0,E=p.length;S<E;S++){const b=m[S];for(let A=0;A<b.length;A++){const R=b[A];let D=!0;for(let O=0;O<p.length;O++)i(R.p,p[O].p)&&(S!==O&&x++,D?(D=!1,f[O].push(R)):g=!0);D&&f[S].push(R)}}x>0&&g===!1&&(m=f)}let y;for(let g=0,x=p.length;g<x;g++){l=p[g].s,c.push(l),y=m[g];for(let S=0,E=y.length;S<E;S++)l.holes.push(y[S].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pd}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pd);const ZX=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:eM,AddEquation:qa,AddOperation:OO,AdditiveAnimationBlendMode:lM,AdditiveBlending:Sw,AgXToneMapping:zO,AlphaFormat:GO,AlwaysCompare:oN,AlwaysDepth:AO,AlwaysStencilFunc:Qw,AmbientLight:ek,AnimationAction:ck,AnimationClip:Qf,AnimationLoader:tX,AnimationMixer:CX,AnimationObjectGroup:bX,AnimationUtils:Zj,ArcCurve:RN,ArrayCamera:EN,ArrowHelper:YX,AttachedBindMode:bw,Audio:ak,AudioAnalyser:gX,AudioContext:BM,AudioListener:hX,AudioLoader:uX,AxesHelper:KX,BackSide:ai,BasicDepthPacking:Po,BasicShadowMap:cO,BatchedMesh:CN,Bone:Wy,BooleanKeyframeTrack:au,Box2:OX,Box3:Gi,Box3Helper:jX,BoxGeometry:ou,BoxHelper:$X,BufferAttribute:Ut,BufferGeometry:Mt,BufferGeometryLoader:sk,ByteType:HO,Cache:na,Camera:gd,CameraHelper:WX,CanvasTexture:Sj,CapsuleGeometry:Yy,CatmullRomCurve3:PN,CineonToneMapping:UO,CircleGeometry:Ky,ClampToEdgeWrapping:Ai,Clock:HM,Color:Ie,ColorKeyframeTrack:OM,ColorManagement:Kt,CompressedArrayTexture:_j,CompressedCubeTexture:xj,CompressedTexture:jy,CompressedTextureLoader:nX,ConeGeometry:qy,ConstantAlphaFactor:TO,ConstantColorFactor:wO,CubeCamera:pN,CubeReflectionMapping:fa,CubeRefractionMapping:Sl,CubeTexture:rm,CubeTextureLoader:iX,CubeUVReflectionMapping:md,CubicBezierCurve:bM,CubicBezierCurve3:IN,CubicInterpolant:YN,CullFaceBack:xw,CullFaceFront:lO,CullFaceFrontBack:u6,CullFaceNone:aO,Curve:Zs,CurvePath:DN,CustomBlending:uO,CustomToneMapping:FO,CylinderGeometry:_d,Cylindrical:DX,Data3DTexture:pM,DataArrayTexture:Fy,DataTexture:Lc,DataTextureLoader:rX,DataUtils:m8,DecrementStencilOp:y6,DecrementWrapStencilOp:x6,DefaultLoadingManager:ZN,DepthFormat:pl,DepthStencilFormat:wl,DepthTexture:zy,DetachedBindMode:BO,DirectionalLight:zM,DirectionalLightHelper:GX,DiscreteInterpolant:KN,DisplayP3ColorSpace:Uy,DodecahedronGeometry:Zy,DoubleSide:nr,DstAlphaFactor:vO,DstColorFactor:_O,DynamicCopyUsage:N6,DynamicDrawUsage:R6,DynamicReadUsage:L6,EdgesGeometry:ON,EllipseCurve:Xy,EqualCompare:nN,EqualDepth:RO,EqualStencilFunc:T6,EquirectangularReflectionMapping:Sp,EquirectangularRefractionMapping:wp,Euler:im,EventDispatcher:ts,ExtrudeGeometry:Jy,FileLoader:Ys,Float16BufferAttribute:S8,Float32BufferAttribute:tt,Float64BufferAttribute:w8,FloatType:Hr,Fog:Gy,FogExp2:Vy,FramebufferTexture:yj,FrontSide:Xs,Frustum:sm,GLBufferAttribute:LX,GLSL1:U6,GLSL3:Jw,GreaterCompare:iN,GreaterDepth:IO,GreaterEqualCompare:sN,GreaterEqualDepth:PO,GreaterEqualStencilFunc:C6,GreaterStencilFunc:b6,GridHelper:HX,Group:ta,HalfFloatType:$c,HemisphereLight:JN,HemisphereLightHelper:BX,IcosahedronGeometry:e_,ImageBitmapLoader:ok,ImageLoader:kp,ImageUtils:hM,IncrementStencilOp:v6,IncrementWrapStencilOp:_6,InstancedBufferAttribute:Xc,InstancedBufferGeometry:rk,InstancedInterleavedBuffer:IX,InstancedMesh:wM,Int16BufferAttribute:_8,Int32BufferAttribute:x8,Int8BufferAttribute:g8,IntType:tM,InterleavedBuffer:om,InterleavedBufferAttribute:El,Interpolant:Sd,InterpolateDiscrete:Yf,InterpolateLinear:jc,InterpolateSmooth:tv,InvertStencilOp:S6,KeepStencilOp:dc,KeyframeTrack:Qs,LOD:AN,LatheGeometry:lm,Layers:Ic,LessCompare:tN,LessDepth:CO,LessEqualCompare:fM,LessEqualDepth:xp,LessEqualStencilFunc:M6,LessStencilFunc:E6,Light:Ul,LightProbe:ik,Line:ha,Line3:NX,LineBasicMaterial:Xi,LineCurve:AM,LineCurve3:LN,LineDashedMaterial:$N,LineLoop:EM,LineSegments:qs,LinearDisplayP3ColorSpace:nm,LinearEncoding:uM,LinearFilter:Zt,LinearInterpolant:DM,LinearMipMapLinearFilter:p6,LinearMipMapNearestFilter:h6,LinearMipmapLinearFilter:Ss,LinearMipmapNearestFilter:If,LinearSRGBColorSpace:qn,LinearToneMapping:NO,LinearTransfer:bp,Loader:fr,LoaderUtils:gl,LoadingManager:NM,LoopOnce:KO,LoopPingPong:ZO,LoopRepeat:qO,LuminanceAlphaFormat:$O,LuminanceFormat:WO,MOUSE:uc,Material:Bn,MaterialLoader:a_,MathUtils:aN,Matrix3:Lt,Matrix4:ft,MaxEquation:Mw,Mesh:Pn,MeshBasicMaterial:$r,MeshDepthMaterial:Hy,MeshDistanceMaterial:yM,MeshLambertMaterial:GN,MeshMatcapMaterial:WN,MeshNormalMaterial:IM,MeshPhongMaterial:HN,MeshPhysicalMaterial:Tr,MeshStandardMaterial:xd,MeshToonMaterial:VN,MinEquation:Tw,MirroredRepeatWrapping:Xf,MixOperation:DO,MultiplyBlending:Ew,MultiplyOperation:tm,NearestFilter:en,NearestMipMapLinearFilter:d6,NearestMipMapNearestFilter:f6,NearestMipmapLinearFilter:Za,NearestMipmapNearestFilter:Ep,NeverCompare:eN,NeverDepth:bO,NeverStencilFunc:w6,NoBlending:Yn,NoColorSpace:rr,NoToneMapping:$s,NormalAnimationBlendMode:ky,NormalBlending:Cc,NotEqualCompare:rN,NotEqualDepth:LO,NotEqualStencilFunc:A6,NumberKeyframeTrack:Kc,Object3D:Vt,ObjectLoader:lX,ObjectSpaceNormalMap:JO,OctahedronGeometry:cm,OneFactor:pO,OneMinusConstantAlphaFactor:MO,OneMinusConstantColorFactor:EO,OneMinusDstAlphaFactor:yO,OneMinusDstColorFactor:xO,OneMinusSrcAlphaFactor:Uv,OneMinusSrcColorFactor:gO,OrthographicCamera:_o,P3Primaries:Cp,PCFShadowMap:Dy,PCFSoftShadowMap:Wh,PMREMGenerator:tE,Path:Lp,PerspectiveCamera:cn,Plane:Yo,PlaneGeometry:vd,PlaneHelper:XX,PointLight:FM,PointLightHelper:FX,Points:TM,PointsMaterial:$y,PolarGridHelper:VX,PolyhedronGeometry:kl,PositionalAudio:mX,PropertyBinding:Ht,PropertyMixer:lk,QuadraticBezierCurve:CM,QuadraticBezierCurve3:RM,Quaternion:xi,QuaternionKeyframeTrack:Tl,QuaternionLinearInterpolant:qN,RED_GREEN_RGTC2_Format:qw,RED_RGTC1_Format:YO,REVISION:pd,RGBADepthPacking:Mp,RGBAFormat:ir,RGBAIntegerFormat:oM,RGBA_ASTC_10x10_Format:Ww,RGBA_ASTC_10x5_Format:Hw,RGBA_ASTC_10x6_Format:Vw,RGBA_ASTC_10x8_Format:Gw,RGBA_ASTC_12x10_Format:$w,RGBA_ASTC_12x12_Format:jw,RGBA_ASTC_4x4_Format:Dw,RGBA_ASTC_5x4_Format:Ow,RGBA_ASTC_5x5_Format:Nw,RGBA_ASTC_6x5_Format:kw,RGBA_ASTC_6x6_Format:Uw,RGBA_ASTC_8x5_Format:Fw,RGBA_ASTC_8x6_Format:zw,RGBA_ASTC_8x8_Format:Bw,RGBA_BPTC_Format:ev,RGBA_ETC2_EAC_Format:Lw,RGBA_PVRTC_2BPPV1_Format:Pw,RGBA_PVRTC_4BPPV1_Format:Rw,RGBA_S3TC_DXT1_Format:Z0,RGBA_S3TC_DXT3_Format:Q0,RGBA_S3TC_DXT5_Format:J0,RGB_BPTC_SIGNED_Format:Xw,RGB_BPTC_UNSIGNED_Format:Yw,RGB_ETC1_Format:aM,RGB_ETC2_Format:Iw,RGB_PVRTC_2BPPV1_Format:Cw,RGB_PVRTC_4BPPV1_Format:Aw,RGB_S3TC_DXT1_Format:q0,RGFormat:XO,RGIntegerFormat:sM,RawShaderMaterial:BN,Ray:su,Raycaster:uk,Rec709Primaries:Ap,RectAreaLight:tk,RedFormat:jO,RedIntegerFormat:rM,ReinhardToneMapping:kO,RenderTarget:uN,RepeatWrapping:da,ReplaceStencilOp:g6,ReverseSubtractEquation:dO,RingGeometry:t_,SIGNED_RED_GREEN_RGTC2_Format:Zw,SIGNED_RED_RGTC1_Format:Kw,SRGBColorSpace:St,SRGBTransfer:an,Scene:Zf,ShaderChunk:Ct,ShaderLib:Vs,ShaderMaterial:Sn,ShadowMaterial:zN,Shape:Dc,ShapeGeometry:n_,ShapePath:qX,ShapeUtils:Eo,ShortType:VO,Skeleton:am,SkeletonHelper:UX,SkinnedMesh:SM,Source:wc,Sphere:Ri,SphereGeometry:um,Spherical:lE,SphericalHarmonics3:nk,SplineCurve:PM,SpotLight:UM,SpotLightHelper:kX,Sprite:bN,SpriteMaterial:xM,SrcAlphaFactor:kv,SrcAlphaSaturateFactor:SO,SrcColorFactor:mO,StaticCopyUsage:O6,StaticDrawUsage:Rp,StaticReadUsage:I6,StereoCamera:fX,StreamCopyUsage:k6,StreamDrawUsage:P6,StreamReadUsage:D6,StringKeyframeTrack:lu,SubtractEquation:fO,SubtractiveBlending:ww,TOUCH:fc,TangentSpaceNormalMap:Nl,TetrahedronGeometry:i_,Texture:rn,TextureLoader:QN,TorusGeometry:r_,TorusKnotGeometry:s_,Triangle:Vr,TriangleFanDrawMode:Fv,TriangleStripDrawMode:cM,TrianglesDrawMode:QO,TubeGeometry:o_,UVMapping:Oy,Uint16BufferAttribute:mM,Uint32BufferAttribute:gM,Uint8BufferAttribute:v8,Uint8ClampedBufferAttribute:y8,Uniform:qe,UniformsGroup:PX,UniformsLib:Ne,UniformsUtils:hN,UnsignedByteType:Kn,UnsignedInt248Type:sa,UnsignedIntType:vo,UnsignedShort4444Type:nM,UnsignedShort5551Type:iM,UnsignedShortType:Ny,VSMShadowMap:Fs,Vector2:he,Vector3:H,Vector4:qt,VectorKeyframeTrack:qc,VideoTexture:vj,WebGL1Renderer:TN,WebGL3DRenderTarget:i8,WebGLArrayRenderTarget:n8,WebGLCoordinateSystem:yo,WebGLCubeRenderTarget:mN,WebGLMultipleRenderTargets:r8,WebGLRenderTarget:gn,WebGLRenderer:_M,WebGLUtils:wN,WebGPUCoordinateSystem:Pp,WireframeGeometry:FN,WrapAroundEnding:Tp,ZeroCurvatureEnding:xc,ZeroFactor:hO,ZeroSlopeEnding:Sc,ZeroStencilOp:m6,_SRGBAFormat:zv,createCanvasElement:cN,sRGBEncoding:ml},Symbol.toStringTag,{value:"Module"}));var dk={exports:{}},cu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */cu.ConcurrentRoot=1;cu.ContinuousEventPriority=4;cu.DefaultEventPriority=16;cu.DiscreteEventPriority=1;cu.IdleEventPriority=536870912;cu.LegacyRoot=0;dk.exports=cu;var Sf=dk.exports;function QX(n){let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=u?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!f(p,v)){const _=p;c(p=v,_)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const JX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),uP=JX?P.useEffect:P.useLayoutEffect;function hk(n){const e=typeof n=="function"?QX(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=P.useReducer(y=>y+1,0),o=e.getState(),a=P.useRef(o),l=P.useRef(i),c=P.useRef(r),u=P.useRef(!1),f=P.useRef();f.current===void 0&&(f.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(p=i(o),m=!r(f.current,p)),uP(()=>{m&&(f.current=p),a.current=o,l.current=i,c.current=r,u.current=!1});const v=P.useRef(o);uP(()=>{const y=()=>{try{const x=e.getState(),S=l.current(x);c.current(f.current,S)||(a.current=x,f.current=S,s())}catch{u.current=!0,s()}},g=e.subscribe(y);return e.getState()!==v.current&&y(),g},[]);const _=m?p:f.current;return P.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var pk={exports:{}},k1={exports:{}},U1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fP;function eY(){return fP||(fP=1,function(n){function e(N,V){var W=N.length;N.push(V);e:for(;0<W;){var Q=W-1>>>1,ie=N[Q];if(0<r(ie,V))N[Q]=V,N[W]=ie,W=Q;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var V=N[0],W=N.pop();if(W!==V){N[0]=W;e:for(var Q=0,ie=N.length,Me=ie>>>1;Q<Me;){var te=2*(Q+1)-1,ue=N[te],xe=te+1,Re=N[xe];if(0>r(ue,W))xe<ie&&0>r(Re,ue)?(N[Q]=Re,N[xe]=W,Q=xe):(N[Q]=ue,N[te]=W,Q=te);else if(xe<ie&&0>r(Re,W))N[Q]=Re,N[xe]=W,Q=xe;else break e}}return V}function r(N,V){var W=N.sortIndex-V.sortIndex;return W!==0?W:N.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(N){for(var V=t(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=N)i(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(c)}}function E(N){if(_=!1,S(N),!v)if(t(l)!==null)v=!0,q(b);else{var V=t(c);V!==null&&ee(E,V.startTime-N)}}function b(N,V){v=!1,_&&(_=!1,g(D),D=-1),m=!0;var W=p;try{for(S(V),f=t(l);f!==null&&(!(f.expirationTime>V)||N&&!I());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,p=f.priorityLevel;var ie=Q(f.expirationTime<=V);V=n.unstable_now(),typeof ie=="function"?f.callback=ie:f===t(l)&&i(l),S(V)}else i(l);f=t(l)}if(f!==null)var Me=!0;else{var te=t(c);te!==null&&ee(E,te.startTime-V),Me=!1}return Me}finally{f=null,p=W,m=!1}}var A=!1,R=null,D=-1,O=5,M=-1;function I(){return!(n.unstable_now()-M<O)}function U(){if(R!==null){var N=n.unstable_now();M=N;var V=!0;try{V=R(!0,N)}finally{V?j():(A=!1,R=null)}}else A=!1}var j;if(typeof x=="function")j=function(){x(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,K=z.port2;z.port1.onmessage=U,j=function(){K.postMessage(null)}}else j=function(){y(U,0)};function q(N){R=N,A||(A=!0,j())}function ee(N,V){D=y(function(){N(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,q(b))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var W=p;p=V;try{return N()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=p;p=N;try{return V()}finally{p=W}},n.unstable_scheduleCallback=function(N,V,W){var Q=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Q+W:Q):W=Q,N){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=W+ie,N={id:u++,callback:V,priorityLevel:N,startTime:W,expirationTime:ie,sortIndex:-1},W>Q?(N.sortIndex=W,e(c,N),t(l)===null&&N===t(c)&&(_?(g(D),D=-1):_=!0,ee(E,W-Q))):(N.sortIndex=ie,e(l,N),v||m||(v=!0,q(b))),N},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(N){var V=p;return function(){var W=p;p=V;try{return N.apply(this,arguments)}finally{p=W}}}}(U1)),U1}var dP;function tY(){return dP||(dP=1,k1.exports=eY()),k1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nY=function(e){var t={},i=P,r=tY(),s=Object.assign;function o(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)h+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),b=Symbol.iterator;function A(d){return d===null||typeof d!="object"?null:(d=b&&d[b]||d["@@iterator"],typeof d=="function"?d:null)}function R(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case v:return(d.displayName||"Context")+".Consumer";case m:return(d._context.displayName||"Context")+".Provider";case _:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case x:return h=d.displayName||null,h!==null?h:R(d.type)||"Memo";case S:h=d._payload,d=d._init;try{return R(d(h))}catch{}}return null}function D(d){var h=d.type;switch(d.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=h.render,d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(h);case 8:return h===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function O(d){var h=d,w=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,h.flags&4098&&(w=h.return),d=h.return;while(d)}return h.tag===3?w:null}function M(d){if(O(d)!==d)throw Error(o(188))}function I(d){var h=d.alternate;if(!h){if(h=O(d),h===null)throw Error(o(188));return h!==d?null:d}for(var w=d,T=h;;){var C=w.return;if(C===null)break;var L=C.alternate;if(L===null){if(T=C.return,T!==null){w=T;continue}break}if(C.child===L.child){for(L=C.child;L;){if(L===w)return M(C),d;if(L===T)return M(C),h;L=L.sibling}throw Error(o(188))}if(w.return!==T.return)w=C,T=L;else{for(var G=!1,J=C.child;J;){if(J===w){G=!0,w=C,T=L;break}if(J===T){G=!0,T=C,w=L;break}J=J.sibling}if(!G){for(J=L.child;J;){if(J===w){G=!0,w=L,T=C;break}if(J===T){G=!0,T=L,w=C;break}J=J.sibling}if(!G)throw Error(o(189))}}if(w.alternate!==T)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?d:h}function U(d){return d=I(d),d!==null?j(d):null}function j(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var h=j(d);if(h!==null)return h;d=d.sibling}return null}function z(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var h=z(d);if(h!==null)return h}d=d.sibling}return null}var K=Array.isArray,q=e.getPublicInstance,ee=e.getRootHostContext,N=e.getChildHostContext,V=e.prepareForCommit,W=e.resetAfterCommit,Q=e.createInstance,ie=e.appendInitialChild,Me=e.finalizeInitialChildren,te=e.prepareUpdate,ue=e.shouldSetTextContent,xe=e.createTextInstance,Re=e.scheduleTimeout,$e=e.cancelTimeout,ze=e.noTimeout,ot=e.isPrimaryRenderer,He=e.supportsMutation,Y=e.supportsPersistence,Se=e.supportsHydration,ve=e.getInstanceFromNode,Ee=e.preparePortalMount,ye=e.getCurrentEventPriority,Qe=e.detachDeletedInstance,ke=e.supportsMicrotasks,F=e.scheduleMicrotask,k=e.supportsTestSelectors,se=e.findFiberRoot,Te=e.getBoundingRect,re=e.getTextContent,le=e.isHiddenSubtree,De=e.matchAccessibilityRole,be=e.setFocusIfFocusable,Oe=e.setupIntersectionObserver,et=e.appendChild,lt=e.appendChildToContainer,we=e.commitTextUpdate,Pt=e.commitMount,yt=e.commitUpdate,at=e.insertBefore,nt=e.insertInContainerBefore,Ve=e.removeChild,Z=e.removeChildFromContainer,_e=e.resetTextContent,Ue=e.hideInstance,Ge=e.hideTextInstance,mt=e.unhideInstance,$=e.unhideTextInstance,Ae=e.clearContainer,Le=e.cloneInstance,Ze=e.createContainerChildSet,Je=e.appendChildToContainerChildSet,At=e.finalizeContainerChildren,zt=e.replaceContainerChildren,sn=e.cloneHiddenInstance,Vn=e.cloneHiddenTextInstance,Gt=e.canHydrateInstance,wi=e.canHydrateTextInstance,is=e.canHydrateSuspenseInstance,Ld=e.isSuspenseInstancePending,Dd=e.isSuspenseInstanceFallback,du=e.registerSuspenseInstanceRetry,Ea=e.getNextHydratableSibling,hu=e.getFirstHydratableChild,Sm=e.getFirstHydratableChildWithinContainer,wm=e.getFirstHydratableChildWithinSuspenseInstance,__=e.hydrateInstance,x_=e.hydrateTextInstance,S_=e.hydrateSuspenseInstance,B=e.getNextHydratableInstanceAfterSuspenseInstance,oe=e.commitHydratedContainer,de=e.commitHydratedSuspenseInstance,pe=e.clearSuspenseBoundary,fe=e.clearSuspenseBoundaryFromContainer,We=e.shouldDeleteUnhydratedTailInstances,rt=e.didNotMatchHydratedContainerTextInstance,dt=e.didNotMatchHydratedTextInstance,ht;function _t(d){if(ht===void 0)try{throw Error()}catch(w){var h=w.stack.trim().match(/\n( *(at )?)/);ht=h&&h[1]||""}return`
`+ht+d}var vt=!1;function xt(d,h){if(!d||vt)return"";vt=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Pe){var T=Pe}Reflect.construct(d,[],h)}else{try{h.call()}catch(Pe){T=Pe}d.call(h.prototype)}else{try{throw Error()}catch(Pe){T=Pe}d()}}catch(Pe){if(Pe&&T&&typeof Pe.stack=="string"){for(var C=Pe.stack.split(`
`),L=T.stack.split(`
`),G=C.length-1,J=L.length-1;1<=G&&0<=J&&C[G]!==L[J];)J--;for(;1<=G&&0<=J;G--,J--)if(C[G]!==L[J]){if(G!==1||J!==1)do if(G--,J--,0>J||C[G]!==L[J]){var ge=`
`+C[G].replace(" at new "," at ");return d.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",d.displayName)),ge}while(1<=G&&0<=J);break}}}finally{vt=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?_t(d):""}var wn=Object.prototype.hasOwnProperty,Ei=[],dn=-1;function ui(d){return{current:d}}function pt(d){0>dn||(d.current=Ei[dn],Ei[dn]=null,dn--)}function Xe(d,h){dn++,Ei[dn]=d.current,d.current=h}var rs={},Dt=ui(rs),On=ui(!1),eo=rs;function ss(d,h){var w=d.type.contextTypes;if(!w)return rs;var T=d.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===h)return T.__reactInternalMemoizedMaskedChildContext;var C={},L;for(L in w)C[L]=h[L];return T&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=C),C}function fi(d){return d=d.childContextTypes,d!=null}function Gn(){pt(On),pt(Dt)}function to(d,h,w){if(Dt.current!==rs)throw Error(o(168));Xe(Dt,h),Xe(On,w)}function pu(d,h,w){var T=d.stateNode;if(h=h.childContextTypes,typeof T.getChildContext!="function")return w;T=T.getChildContext();for(var C in T)if(!(C in h))throw Error(o(108,D(d)||"Unknown",C));return s({},w,T)}function Ti(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||rs,eo=Dt.current,Xe(Dt,d),Xe(On,On.current),!0}function mu(d,h,w){var T=d.stateNode;if(!T)throw Error(o(169));w?(d=pu(d,h,eo),T.__reactInternalMemoizedMergedChildContext=d,pt(On),pt(Dt),Xe(Dt,d)):pt(On),Xe(On,w)}var Pr=Math.clz32?Math.clz32:Kz,Em=Math.log,Yz=Math.LN2;function Kz(d){return d>>>=0,d===0?32:31-(Em(d)/Yz|0)|0}var Tm=64,Mm=4194304;function Od(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function bm(d,h){var w=d.pendingLanes;if(w===0)return 0;var T=0,C=d.suspendedLanes,L=d.pingedLanes,G=w&268435455;if(G!==0){var J=G&~C;J!==0?T=Od(J):(L&=G,L!==0&&(T=Od(L)))}else G=w&~C,G!==0?T=Od(G):L!==0&&(T=Od(L));if(T===0)return 0;if(h!==0&&h!==T&&!(h&C)&&(C=T&-T,L=h&-h,C>=L||C===16&&(L&4194240)!==0))return h;if(T&4&&(T|=w&16),h=d.entangledLanes,h!==0)for(d=d.entanglements,h&=T;0<h;)w=31-Pr(h),C=1<<w,T|=d[w],h&=~C;return T}function qz(d,h){switch(d){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zz(d,h){for(var w=d.suspendedLanes,T=d.pingedLanes,C=d.expirationTimes,L=d.pendingLanes;0<L;){var G=31-Pr(L),J=1<<G,ge=C[G];ge===-1?(!(J&w)||J&T)&&(C[G]=qz(J,h)):ge<=h&&(d.expiredLanes|=J),L&=~J}}function w_(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function E_(d){for(var h=[],w=0;31>w;w++)h.push(d);return h}function Nd(d,h,w){d.pendingLanes|=h,h!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,h=31-Pr(h),d[h]=w}function Qz(d,h){var w=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h,h=d.entanglements;var T=d.eventTimes;for(d=d.expirationTimes;0<w;){var C=31-Pr(w),L=1<<C;h[C]=0,T[C]=-1,d[C]=-1,w&=~L}}function T_(d,h){var w=d.entangledLanes|=h;for(d=d.entanglements;w;){var T=31-Pr(w),C=1<<T;C&h|d[T]&h&&(d[T]|=h),w&=~C}}var $t=0;function Ub(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var M_=r.unstable_scheduleCallback,Fb=r.unstable_cancelCallback,Jz=r.unstable_shouldYield,eB=r.unstable_requestPaint,di=r.unstable_now,b_=r.unstable_ImmediatePriority,tB=r.unstable_UserBlockingPriority,A_=r.unstable_NormalPriority,nB=r.unstable_IdlePriority,Am=null,no=null;function iB(d){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(Am,d,void 0,(d.current.flags&128)===128)}catch{}}function rB(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var io=typeof Object.is=="function"?Object.is:rB,Io=null,Cm=!1,C_=!1;function zb(d){Io===null?Io=[d]:Io.push(d)}function sB(d){Cm=!0,zb(d)}function ro(){if(!C_&&Io!==null){C_=!0;var d=0,h=$t;try{var w=Io;for($t=1;d<w.length;d++){var T=w[d];do T=T(!0);while(T!==null)}Io=null,Cm=!1}catch(C){throw Io!==null&&(Io=Io.slice(d+1)),M_(b_,ro),C}finally{$t=h,C_=!1}}return null}var oB=a.ReactCurrentBatchConfig;function Rm(d,h){if(io(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var w=Object.keys(d),T=Object.keys(h);if(w.length!==T.length)return!1;for(T=0;T<w.length;T++){var C=w[T];if(!wn.call(h,C)||!io(d[C],h[C]))return!1}return!0}function aB(d){switch(d.tag){case 5:return _t(d.type);case 16:return _t("Lazy");case 13:return _t("Suspense");case 19:return _t("SuspenseList");case 0:case 2:case 15:return d=xt(d.type,!1),d;case 11:return d=xt(d.type.render,!1),d;case 1:return d=xt(d.type,!0),d;default:return""}}function Is(d,h){if(d&&d.defaultProps){h=s({},h),d=d.defaultProps;for(var w in d)h[w]===void 0&&(h[w]=d[w]);return h}return h}var Pm=ui(null),Im=null,gu=null,R_=null;function P_(){R_=gu=Im=null}function Bb(d,h,w){ot?(Xe(Pm,h._currentValue),h._currentValue=w):(Xe(Pm,h._currentValue2),h._currentValue2=w)}function I_(d){var h=Pm.current;pt(Pm),ot?d._currentValue=h:d._currentValue2=h}function L_(d,h,w){for(;d!==null;){var T=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,T!==null&&(T.childLanes|=h)):T!==null&&(T.childLanes&h)!==h&&(T.childLanes|=h),d===w)break;d=d.return}}function vu(d,h){Im=d,R_=gu=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&h&&(Dr=!0),d.firstContext=null)}function os(d){var h=ot?d._currentValue:d._currentValue2;if(R_!==d)if(d={context:d,memoizedValue:h,next:null},gu===null){if(Im===null)throw Error(o(308));gu=d,Im.dependencies={lanes:0,firstContext:d}}else gu=gu.next=d;return h}var so=null,Ta=!1;function D_(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hb(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Lo(d,h){return{eventTime:d,lane:h,tag:0,payload:null,callback:null,next:null}}function Ma(d,h){var w=d.updateQueue;w!==null&&(w=w.shared,Zn!==null&&d.mode&1&&!(Ot&2)?(d=w.interleaved,d===null?(h.next=h,so===null?so=[w]:so.push(w)):(h.next=d.next,d.next=h),w.interleaved=h):(d=w.pending,d===null?h.next=h:(h.next=d.next,d.next=h),w.pending=h))}function Lm(d,h,w){if(h=h.updateQueue,h!==null&&(h=h.shared,(w&4194240)!==0)){var T=h.lanes;T&=d.pendingLanes,w|=T,h.lanes=w,T_(d,w)}}function Vb(d,h){var w=d.updateQueue,T=d.alternate;if(T!==null&&(T=T.updateQueue,w===T)){var C=null,L=null;if(w=w.firstBaseUpdate,w!==null){do{var G={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};L===null?C=L=G:L=L.next=G,w=w.next}while(w!==null);L===null?C=L=h:L=L.next=h}else C=L=h;w={baseState:T.baseState,firstBaseUpdate:C,lastBaseUpdate:L,shared:T.shared,effects:T.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=h:d.next=h,w.lastBaseUpdate=h}function Dm(d,h,w,T){var C=d.updateQueue;Ta=!1;var L=C.firstBaseUpdate,G=C.lastBaseUpdate,J=C.shared.pending;if(J!==null){C.shared.pending=null;var ge=J,Pe=ge.next;ge.next=null,G===null?L=Pe:G.next=Pe,G=ge;var Ye=d.alternate;Ye!==null&&(Ye=Ye.updateQueue,J=Ye.lastBaseUpdate,J!==G&&(J===null?Ye.firstBaseUpdate=Pe:J.next=Pe,Ye.lastBaseUpdate=ge))}if(L!==null){var wt=C.baseState;G=0,Ye=Pe=ge=null,J=L;do{var ct=J.lane,tn=J.eventTime;if((T&ct)===ct){Ye!==null&&(Ye=Ye.next={eventTime:tn,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var st=d,Oi=J;switch(ct=h,tn=w,Oi.tag){case 1:if(st=Oi.payload,typeof st=="function"){wt=st.call(tn,wt,ct);break e}wt=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=Oi.payload,ct=typeof st=="function"?st.call(tn,wt,ct):st,ct==null)break e;wt=s({},wt,ct);break e;case 2:Ta=!0}}J.callback!==null&&J.lane!==0&&(d.flags|=64,ct=C.effects,ct===null?C.effects=[J]:ct.push(J))}else tn={eventTime:tn,lane:ct,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Ye===null?(Pe=Ye=tn,ge=wt):Ye=Ye.next=tn,G|=ct;if(J=J.next,J===null){if(J=C.shared.pending,J===null)break;ct=J,J=ct.next,ct.next=null,C.lastBaseUpdate=ct,C.shared.pending=null}}while(!0);if(Ye===null&&(ge=wt),C.baseState=ge,C.firstBaseUpdate=Pe,C.lastBaseUpdate=Ye,h=C.shared.interleaved,h!==null){C=h;do G|=C.lane,C=C.next;while(C!==h)}else L===null&&(C.shared.lanes=0);bu|=G,d.lanes=G,d.memoizedState=wt}}function Gb(d,h,w){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var T=d[h],C=T.callback;if(C!==null){if(T.callback=null,T=w,typeof C!="function")throw Error(o(191,C));C.call(T)}}}var Wb=new i.Component().refs;function O_(d,h,w,T){h=d.memoizedState,w=w(T,h),w=w==null?h:s({},h,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var Om={isMounted:function(d){return(d=d._reactInternals)?O(d)===d:!1},enqueueSetState:function(d,h,w){d=d._reactInternals;var T=qi(),C=Ca(d),L=Lo(T,C);L.payload=h,w!=null&&(L.callback=w),Ma(d,L),h=fs(d,C,T),h!==null&&Lm(h,d,C)},enqueueReplaceState:function(d,h,w){d=d._reactInternals;var T=qi(),C=Ca(d),L=Lo(T,C);L.tag=1,L.payload=h,w!=null&&(L.callback=w),Ma(d,L),h=fs(d,C,T),h!==null&&Lm(h,d,C)},enqueueForceUpdate:function(d,h){d=d._reactInternals;var w=qi(),T=Ca(d),C=Lo(w,T);C.tag=2,h!=null&&(C.callback=h),Ma(d,C),h=fs(d,T,w),h!==null&&Lm(h,d,T)}};function $b(d,h,w,T,C,L,G){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(T,L,G):h.prototype&&h.prototype.isPureReactComponent?!Rm(w,T)||!Rm(C,L):!0}function jb(d,h,w){var T=!1,C=rs,L=h.contextType;return typeof L=="object"&&L!==null?L=os(L):(C=fi(h)?eo:Dt.current,T=h.contextTypes,L=(T=T!=null)?ss(d,C):rs),h=new h(w,L),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Om,d.stateNode=h,h._reactInternals=d,T&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=C,d.__reactInternalMemoizedMaskedChildContext=L),h}function Xb(d,h,w,T){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(w,T),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(w,T),h.state!==d&&Om.enqueueReplaceState(h,h.state,null)}function N_(d,h,w,T){var C=d.stateNode;C.props=w,C.state=d.memoizedState,C.refs=Wb,D_(d);var L=h.contextType;typeof L=="object"&&L!==null?C.context=os(L):(L=fi(h)?eo:Dt.current,C.context=ss(d,L)),C.state=d.memoizedState,L=h.getDerivedStateFromProps,typeof L=="function"&&(O_(d,h,L,w),C.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(h=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),h!==C.state&&Om.enqueueReplaceState(C,C.state,null),Dm(d,w,C,T),C.state=d.memoizedState),typeof C.componentDidMount=="function"&&(d.flags|=4194308)}var yu=[],_u=0,Nm=null,km=0,as=[],ls=0,zl=null,Do=1,Oo="";function Bl(d,h){yu[_u++]=km,yu[_u++]=Nm,Nm=d,km=h}function Yb(d,h,w){as[ls++]=Do,as[ls++]=Oo,as[ls++]=zl,zl=d;var T=Do;d=Oo;var C=32-Pr(T)-1;T&=~(1<<C),w+=1;var L=32-Pr(h)+C;if(30<L){var G=C-C%5;L=(T&(1<<G)-1).toString(32),T>>=G,C-=G,Do=1<<32-Pr(h)+C|w<<C|T,Oo=L+d}else Do=1<<L|w<<C|T,Oo=d}function k_(d){d.return!==null&&(Bl(d,1),Yb(d,1,0))}function U_(d){for(;d===Nm;)Nm=yu[--_u],yu[_u]=null,km=yu[--_u],yu[_u]=null;for(;d===zl;)zl=as[--ls],as[ls]=null,Oo=as[--ls],as[ls]=null,Do=as[--ls],as[ls]=null}var Ir=null,Lr=null,vn=!1,kd=!1,Ls=null;function Kb(d,h){var w=ds(5,null,null,0);w.elementType="DELETED",w.stateNode=h,w.return=d,h=d.deletions,h===null?(d.deletions=[w],d.flags|=16):h.push(w)}function qb(d,h){switch(d.tag){case 5:return h=Gt(h,d.type,d.pendingProps),h!==null?(d.stateNode=h,Ir=d,Lr=hu(h),!0):!1;case 6:return h=wi(h,d.pendingProps),h!==null?(d.stateNode=h,Ir=d,Lr=null,!0):!1;case 13:if(h=is(h),h!==null){var w=zl!==null?{id:Do,overflow:Oo}:null;return d.memoizedState={dehydrated:h,treeContext:w,retryLane:1073741824},w=ds(18,null,null,0),w.stateNode=h,w.return=d,d.child=w,Ir=d,Lr=null,!0}return!1;default:return!1}}function F_(d){return(d.mode&1)!==0&&(d.flags&128)===0}function z_(d){if(vn){var h=Lr;if(h){var w=h;if(!qb(d,h)){if(F_(d))throw Error(o(418));h=Ea(w);var T=Ir;h&&qb(d,h)?Kb(T,w):(d.flags=d.flags&-4097|2,vn=!1,Ir=d)}}else{if(F_(d))throw Error(o(418));d.flags=d.flags&-4097|2,vn=!1,Ir=d}}}function Zb(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Ir=d}function Ud(d){if(!Se||d!==Ir)return!1;if(!vn)return Zb(d),vn=!0,!1;if(d.tag!==3&&(d.tag!==5||We(d.type)&&!ue(d.type,d.memoizedProps))){var h=Lr;if(h){if(F_(d)){for(d=Lr;d;)d=Ea(d);throw Error(o(418))}for(;h;)Kb(d,h),h=Ea(h)}}if(Zb(d),d.tag===13){if(!Se)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Lr=B(d)}else Lr=Ir?Ea(d.stateNode):null;return!0}function xu(){Se&&(Lr=Ir=null,kd=vn=!1)}function B_(d){Ls===null?Ls=[d]:Ls.push(d)}function Fd(d,h,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var T=w.stateNode}if(!T)throw Error(o(147,d));var C=T,L=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===L?h.ref:(h=function(G){var J=C.refs;J===Wb&&(J=C.refs={}),G===null?delete J[L]:J[L]=G},h._stringRef=L,h)}if(typeof d!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,d))}return d}function Um(d,h){throw d=Object.prototype.toString.call(h),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d))}function Qb(d){var h=d._init;return h(d._payload)}function Jb(d){function h(ce,ne){if(d){var me=ce.deletions;me===null?(ce.deletions=[ne],ce.flags|=16):me.push(ne)}}function w(ce,ne){if(!d)return null;for(;ne!==null;)h(ce,ne),ne=ne.sibling;return null}function T(ce,ne){for(ce=new Map;ne!==null;)ne.key!==null?ce.set(ne.key,ne):ce.set(ne.index,ne),ne=ne.sibling;return ce}function C(ce,ne){return ce=Pa(ce,ne),ce.index=0,ce.sibling=null,ce}function L(ce,ne,me){return ce.index=me,d?(me=ce.alternate,me!==null?(me=me.index,me<ne?(ce.flags|=2,ne):me):(ce.flags|=2,ne)):(ce.flags|=1048576,ne)}function G(ce){return d&&ce.alternate===null&&(ce.flags|=2),ce}function J(ce,ne,me,Be){return ne===null||ne.tag!==6?(ne=Ex(me,ce.mode,Be),ne.return=ce,ne):(ne=C(ne,me),ne.return=ce,ne)}function ge(ce,ne,me,Be){var it=me.type;return it===u?Ye(ce,ne,me.props.children,Be,me.key):ne!==null&&(ne.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===S&&Qb(it)===ne.type)?(Be=C(ne,me.props),Be.ref=Fd(ce,ne,me),Be.return=ce,Be):(Be=pg(me.type,me.key,me.props,null,ce.mode,Be),Be.ref=Fd(ce,ne,me),Be.return=ce,Be)}function Pe(ce,ne,me,Be){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==me.containerInfo||ne.stateNode.implementation!==me.implementation?(ne=Tx(me,ce.mode,Be),ne.return=ce,ne):(ne=C(ne,me.children||[]),ne.return=ce,ne)}function Ye(ce,ne,me,Be,it){return ne===null||ne.tag!==7?(ne=Xl(me,ce.mode,Be,it),ne.return=ce,ne):(ne=C(ne,me),ne.return=ce,ne)}function wt(ce,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Ex(""+ne,ce.mode,me),ne.return=ce,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case l:return me=pg(ne.type,ne.key,ne.props,null,ce.mode,me),me.ref=Fd(ce,null,ne),me.return=ce,me;case c:return ne=Tx(ne,ce.mode,me),ne.return=ce,ne;case S:var Be=ne._init;return wt(ce,Be(ne._payload),me)}if(K(ne)||A(ne))return ne=Xl(ne,ce.mode,me,null),ne.return=ce,ne;Um(ce,ne)}return null}function ct(ce,ne,me,Be){var it=ne!==null?ne.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return it!==null?null:J(ce,ne,""+me,Be);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case l:return me.key===it?ge(ce,ne,me,Be):null;case c:return me.key===it?Pe(ce,ne,me,Be):null;case S:return it=me._init,ct(ce,ne,it(me._payload),Be)}if(K(me)||A(me))return it!==null?null:Ye(ce,ne,me,Be,null);Um(ce,me)}return null}function tn(ce,ne,me,Be,it){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return ce=ce.get(me)||null,J(ne,ce,""+Be,it);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:return ce=ce.get(Be.key===null?me:Be.key)||null,ge(ne,ce,Be,it);case c:return ce=ce.get(Be.key===null?me:Be.key)||null,Pe(ne,ce,Be,it);case S:var It=Be._init;return tn(ce,ne,me,It(Be._payload),it)}if(K(Be)||A(Be))return ce=ce.get(me)||null,Ye(ne,ce,Be,it,null);Um(ne,Be)}return null}function st(ce,ne,me,Be){for(var it=null,It=null,Et=ne,jt=ne=0,pi=null;Et!==null&&jt<me.length;jt++){Et.index>jt?(pi=Et,Et=null):pi=Et.sibling;var Xt=ct(ce,Et,me[jt],Be);if(Xt===null){Et===null&&(Et=pi);break}d&&Et&&Xt.alternate===null&&h(ce,Et),ne=L(Xt,ne,jt),It===null?it=Xt:It.sibling=Xt,It=Xt,Et=pi}if(jt===me.length)return w(ce,Et),vn&&Bl(ce,jt),it;if(Et===null){for(;jt<me.length;jt++)Et=wt(ce,me[jt],Be),Et!==null&&(ne=L(Et,ne,jt),It===null?it=Et:It.sibling=Et,It=Et);return vn&&Bl(ce,jt),it}for(Et=T(ce,Et);jt<me.length;jt++)pi=tn(Et,ce,jt,me[jt],Be),pi!==null&&(d&&pi.alternate!==null&&Et.delete(pi.key===null?jt:pi.key),ne=L(pi,ne,jt),It===null?it=pi:It.sibling=pi,It=pi);return d&&Et.forEach(function(Ia){return h(ce,Ia)}),vn&&Bl(ce,jt),it}function Oi(ce,ne,me,Be){var it=A(me);if(typeof it!="function")throw Error(o(150));if(me=it.call(me),me==null)throw Error(o(151));for(var It=it=null,Et=ne,jt=ne=0,pi=null,Xt=me.next();Et!==null&&!Xt.done;jt++,Xt=me.next()){Et.index>jt?(pi=Et,Et=null):pi=Et.sibling;var Ia=ct(ce,Et,Xt.value,Be);if(Ia===null){Et===null&&(Et=pi);break}d&&Et&&Ia.alternate===null&&h(ce,Et),ne=L(Ia,ne,jt),It===null?it=Ia:It.sibling=Ia,It=Ia,Et=pi}if(Xt.done)return w(ce,Et),vn&&Bl(ce,jt),it;if(Et===null){for(;!Xt.done;jt++,Xt=me.next())Xt=wt(ce,Xt.value,Be),Xt!==null&&(ne=L(Xt,ne,jt),It===null?it=Xt:It.sibling=Xt,It=Xt);return vn&&Bl(ce,jt),it}for(Et=T(ce,Et);!Xt.done;jt++,Xt=me.next())Xt=tn(Et,ce,jt,Xt.value,Be),Xt!==null&&(d&&Xt.alternate!==null&&Et.delete(Xt.key===null?jt:Xt.key),ne=L(Xt,ne,jt),It===null?it=Xt:It.sibling=Xt,It=Xt);return d&&Et.forEach(function(UB){return h(ce,UB)}),vn&&Bl(ce,jt),it}function hs(ce,ne,me,Be){if(typeof me=="object"&&me!==null&&me.type===u&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case l:e:{for(var it=me.key,It=ne;It!==null;){if(It.key===it){if(it=me.type,it===u){if(It.tag===7){w(ce,It.sibling),ne=C(It,me.props.children),ne.return=ce,ce=ne;break e}}else if(It.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===S&&Qb(it)===It.type){w(ce,It.sibling),ne=C(It,me.props),ne.ref=Fd(ce,It,me),ne.return=ce,ce=ne;break e}w(ce,It);break}else h(ce,It);It=It.sibling}me.type===u?(ne=Xl(me.props.children,ce.mode,Be,me.key),ne.return=ce,ce=ne):(Be=pg(me.type,me.key,me.props,null,ce.mode,Be),Be.ref=Fd(ce,ne,me),Be.return=ce,ce=Be)}return G(ce);case c:e:{for(It=me.key;ne!==null;){if(ne.key===It)if(ne.tag===4&&ne.stateNode.containerInfo===me.containerInfo&&ne.stateNode.implementation===me.implementation){w(ce,ne.sibling),ne=C(ne,me.children||[]),ne.return=ce,ce=ne;break e}else{w(ce,ne);break}else h(ce,ne);ne=ne.sibling}ne=Tx(me,ce.mode,Be),ne.return=ce,ce=ne}return G(ce);case S:return It=me._init,hs(ce,ne,It(me._payload),Be)}if(K(me))return st(ce,ne,me,Be);if(A(me))return Oi(ce,ne,me,Be);Um(ce,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,ne!==null&&ne.tag===6?(w(ce,ne.sibling),ne=C(ne,me),ne.return=ce,ce=ne):(w(ce,ne),ne=Ex(me,ce.mode,Be),ne.return=ce,ce=ne),G(ce)):w(ce,ne)}return hs}var Su=Jb(!0),eA=Jb(!1),zd={},cs=ui(zd),Bd=ui(zd),wu=ui(zd);function oo(d){if(d===zd)throw Error(o(174));return d}function H_(d,h){Xe(wu,h),Xe(Bd,d),Xe(cs,zd),d=ee(h),pt(cs),Xe(cs,d)}function Eu(){pt(cs),pt(Bd),pt(wu)}function tA(d){var h=oo(wu.current),w=oo(cs.current);h=N(w,d.type,h),w!==h&&(Xe(Bd,d),Xe(cs,h))}function V_(d){Bd.current===d&&(pt(cs),pt(Bd))}var En=ui(0);function Fm(d){for(var h=d;h!==null;){if(h.tag===13){var w=h.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Ld(w)||Dd(w)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var G_=[];function W_(){for(var d=0;d<G_.length;d++){var h=G_[d];ot?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}G_.length=0}var zm=a.ReactCurrentDispatcher,us=a.ReactCurrentBatchConfig,Tu=0,Nn=null,Ii=null,hi=null,Bm=!1,Hd=!1,Vd=0,lB=0;function Li(){throw Error(o(321))}function $_(d,h){if(h===null)return!1;for(var w=0;w<h.length&&w<d.length;w++)if(!io(d[w],h[w]))return!1;return!0}function j_(d,h,w,T,C,L){if(Tu=L,Nn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,zm.current=d===null||d.memoizedState===null?dB:hB,d=w(T,C),Hd){L=0;do{if(Hd=!1,Vd=0,25<=L)throw Error(o(301));L+=1,hi=Ii=null,h.updateQueue=null,zm.current=pB,d=w(T,C)}while(Hd)}if(zm.current=$m,h=Ii!==null&&Ii.next!==null,Tu=0,hi=Ii=Nn=null,Bm=!1,h)throw Error(o(300));return d}function X_(){var d=Vd!==0;return Vd=0,d}function No(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?Nn.memoizedState=hi=d:hi=hi.next=d,hi}function ao(){if(Ii===null){var d=Nn.alternate;d=d!==null?d.memoizedState:null}else d=Ii.next;var h=hi===null?Nn.memoizedState:hi.next;if(h!==null)hi=h,Ii=d;else{if(d===null)throw Error(o(310));Ii=d,d={memoizedState:Ii.memoizedState,baseState:Ii.baseState,baseQueue:Ii.baseQueue,queue:Ii.queue,next:null},hi===null?Nn.memoizedState=hi=d:hi=hi.next=d}return hi}function Hl(d,h){return typeof h=="function"?h(d):h}function Hm(d){var h=ao(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=d;var T=Ii,C=T.baseQueue,L=w.pending;if(L!==null){if(C!==null){var G=C.next;C.next=L.next,L.next=G}T.baseQueue=C=L,w.pending=null}if(C!==null){L=C.next,T=T.baseState;var J=G=null,ge=null,Pe=L;do{var Ye=Pe.lane;if((Tu&Ye)===Ye)ge!==null&&(ge=ge.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),T=Pe.hasEagerState?Pe.eagerState:d(T,Pe.action);else{var wt={lane:Ye,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};ge===null?(J=ge=wt,G=T):ge=ge.next=wt,Nn.lanes|=Ye,bu|=Ye}Pe=Pe.next}while(Pe!==null&&Pe!==L);ge===null?G=T:ge.next=J,io(T,h.memoizedState)||(Dr=!0),h.memoizedState=T,h.baseState=G,h.baseQueue=ge,w.lastRenderedState=T}if(d=w.interleaved,d!==null){C=d;do L=C.lane,Nn.lanes|=L,bu|=L,C=C.next;while(C!==d)}else C===null&&(w.lanes=0);return[h.memoizedState,w.dispatch]}function Vm(d){var h=ao(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=d;var T=w.dispatch,C=w.pending,L=h.memoizedState;if(C!==null){w.pending=null;var G=C=C.next;do L=d(L,G.action),G=G.next;while(G!==C);io(L,h.memoizedState)||(Dr=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),w.lastRenderedState=L}return[L,T]}function nA(){}function iA(d,h){var w=Nn,T=ao(),C=h(),L=!io(T.memoizedState,C);if(L&&(T.memoizedState=C,Dr=!0),T=T.queue,Wd(oA.bind(null,w,T,d),[d]),T.getSnapshot!==h||L||hi!==null&&hi.memoizedState.tag&1){if(w.flags|=2048,Gd(9,sA.bind(null,w,T,C,h),void 0,null),Zn===null)throw Error(o(349));Tu&30||rA(w,h,C)}return C}function rA(d,h,w){d.flags|=16384,d={getSnapshot:h,value:w},h=Nn.updateQueue,h===null?(h={lastEffect:null,stores:null},Nn.updateQueue=h,h.stores=[d]):(w=h.stores,w===null?h.stores=[d]:w.push(d))}function sA(d,h,w,T){h.value=w,h.getSnapshot=T,aA(h)&&fs(d,1,-1)}function oA(d,h,w){return w(function(){aA(h)&&fs(d,1,-1)})}function aA(d){var h=d.getSnapshot;d=d.value;try{var w=h();return!io(d,w)}catch{return!0}}function Y_(d){var h=No();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:d},h.queue=d,d=d.dispatch=fB.bind(null,Nn,d),[h.memoizedState,d]}function Gd(d,h,w,T){return d={tag:d,create:h,destroy:w,deps:T,next:null},h=Nn.updateQueue,h===null?(h={lastEffect:null,stores:null},Nn.updateQueue=h,h.lastEffect=d.next=d):(w=h.lastEffect,w===null?h.lastEffect=d.next=d:(T=w.next,w.next=d,d.next=T,h.lastEffect=d)),d}function lA(){return ao().memoizedState}function Gm(d,h,w,T){var C=No();Nn.flags|=d,C.memoizedState=Gd(1|h,w,void 0,T===void 0?null:T)}function Wm(d,h,w,T){var C=ao();T=T===void 0?null:T;var L=void 0;if(Ii!==null){var G=Ii.memoizedState;if(L=G.destroy,T!==null&&$_(T,G.deps)){C.memoizedState=Gd(h,w,L,T);return}}Nn.flags|=d,C.memoizedState=Gd(1|h,w,L,T)}function K_(d,h){return Gm(8390656,8,d,h)}function Wd(d,h){return Wm(2048,8,d,h)}function cA(d,h){return Wm(4,2,d,h)}function uA(d,h){return Wm(4,4,d,h)}function fA(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function dA(d,h,w){return w=w!=null?w.concat([d]):null,Wm(4,4,fA.bind(null,h,d),w)}function q_(){}function hA(d,h){var w=ao();h=h===void 0?null:h;var T=w.memoizedState;return T!==null&&h!==null&&$_(h,T[1])?T[0]:(w.memoizedState=[d,h],d)}function pA(d,h){var w=ao();h=h===void 0?null:h;var T=w.memoizedState;return T!==null&&h!==null&&$_(h,T[1])?T[0]:(d=d(),w.memoizedState=[d,h],d)}function cB(d,h){var w=$t;$t=w!==0&&4>w?w:4,d(!0);var T=us.transition;us.transition={};try{d(!1),h()}finally{$t=w,us.transition=T}}function mA(){return ao().memoizedState}function uB(d,h,w){var T=Ca(d);w={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null},gA(d)?vA(h,w):(yA(d,h,w),w=qi(),d=fs(d,T,w),d!==null&&_A(d,h,T))}function fB(d,h,w){var T=Ca(d),C={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null};if(gA(d))vA(h,C);else{yA(d,h,C);var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var G=h.lastRenderedState,J=L(G,w);if(C.hasEagerState=!0,C.eagerState=J,io(J,G))return}catch{}finally{}w=qi(),d=fs(d,T,w),d!==null&&_A(d,h,T)}}function gA(d){var h=d.alternate;return d===Nn||h!==null&&h===Nn}function vA(d,h){Hd=Bm=!0;var w=d.pending;w===null?h.next=h:(h.next=w.next,w.next=h),d.pending=h}function yA(d,h,w){Zn!==null&&d.mode&1&&!(Ot&2)?(d=h.interleaved,d===null?(w.next=w,so===null?so=[h]:so.push(h)):(w.next=d.next,d.next=w),h.interleaved=w):(d=h.pending,d===null?w.next=w:(w.next=d.next,d.next=w),h.pending=w)}function _A(d,h,w){if(w&4194240){var T=h.lanes;T&=d.pendingLanes,w|=T,h.lanes=w,T_(d,w)}}var $m={readContext:os,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},dB={readContext:os,useCallback:function(d,h){return No().memoizedState=[d,h===void 0?null:h],d},useContext:os,useEffect:K_,useImperativeHandle:function(d,h,w){return w=w!=null?w.concat([d]):null,Gm(4194308,4,fA.bind(null,h,d),w)},useLayoutEffect:function(d,h){return Gm(4194308,4,d,h)},useInsertionEffect:function(d,h){return Gm(4,2,d,h)},useMemo:function(d,h){var w=No();return h=h===void 0?null:h,d=d(),w.memoizedState=[d,h],d},useReducer:function(d,h,w){var T=No();return h=w!==void 0?w(h):h,T.memoizedState=T.baseState=h,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:h},T.queue=d,d=d.dispatch=uB.bind(null,Nn,d),[T.memoizedState,d]},useRef:function(d){var h=No();return d={current:d},h.memoizedState=d},useState:Y_,useDebugValue:q_,useDeferredValue:function(d){var h=Y_(d),w=h[0],T=h[1];return K_(function(){var C=us.transition;us.transition={};try{T(d)}finally{us.transition=C}},[d]),w},useTransition:function(){var d=Y_(!1),h=d[0];return d=cB.bind(null,d[1]),No().memoizedState=d,[h,d]},useMutableSource:function(){},useSyncExternalStore:function(d,h,w){var T=Nn,C=No();if(vn){if(w===void 0)throw Error(o(407));w=w()}else{if(w=h(),Zn===null)throw Error(o(349));Tu&30||rA(T,h,w)}C.memoizedState=w;var L={value:w,getSnapshot:h};return C.queue=L,K_(oA.bind(null,T,L,d),[d]),T.flags|=2048,Gd(9,sA.bind(null,T,L,w,h),void 0,null),w},useId:function(){var d=No(),h=Zn.identifierPrefix;if(vn){var w=Oo,T=Do;w=(T&~(1<<32-Pr(T)-1)).toString(32)+w,h=":"+h+"R"+w,w=Vd++,0<w&&(h+="H"+w.toString(32)),h+=":"}else w=lB++,h=":"+h+"r"+w.toString(32)+":";return d.memoizedState=h},unstable_isNewReconciler:!1},hB={readContext:os,useCallback:hA,useContext:os,useEffect:Wd,useImperativeHandle:dA,useInsertionEffect:cA,useLayoutEffect:uA,useMemo:pA,useReducer:Hm,useRef:lA,useState:function(){return Hm(Hl)},useDebugValue:q_,useDeferredValue:function(d){var h=Hm(Hl),w=h[0],T=h[1];return Wd(function(){var C=us.transition;us.transition={};try{T(d)}finally{us.transition=C}},[d]),w},useTransition:function(){var d=Hm(Hl)[0],h=ao().memoizedState;return[d,h]},useMutableSource:nA,useSyncExternalStore:iA,useId:mA,unstable_isNewReconciler:!1},pB={readContext:os,useCallback:hA,useContext:os,useEffect:Wd,useImperativeHandle:dA,useInsertionEffect:cA,useLayoutEffect:uA,useMemo:pA,useReducer:Vm,useRef:lA,useState:function(){return Vm(Hl)},useDebugValue:q_,useDeferredValue:function(d){var h=Vm(Hl),w=h[0],T=h[1];return Wd(function(){var C=us.transition;us.transition={};try{T(d)}finally{us.transition=C}},[d]),w},useTransition:function(){var d=Vm(Hl)[0],h=ao().memoizedState;return[d,h]},useMutableSource:nA,useSyncExternalStore:iA,useId:mA,unstable_isNewReconciler:!1};function Z_(d,h){try{var w="",T=h;do w+=aB(T),T=T.return;while(T);var C=w}catch(L){C=`
Error generating stack: `+L.message+`
`+L.stack}return{value:d,source:h,stack:C}}function Q_(d,h){try{console.error(h.value)}catch(w){setTimeout(function(){throw w})}}var mB=typeof WeakMap=="function"?WeakMap:Map;function xA(d,h,w){w=Lo(-1,w),w.tag=3,w.payload={element:null};var T=h.value;return w.callback=function(){ag||(ag=!0,gx=T),Q_(d,h)},w}function SA(d,h,w){w=Lo(-1,w),w.tag=3;var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var C=h.value;w.payload=function(){return T(C)},w.callback=function(){Q_(d,h)}}var L=d.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(w.callback=function(){Q_(d,h),typeof T!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var G=h.stack;this.componentDidCatch(h.value,{componentStack:G!==null?G:""})}),w}function wA(d,h,w){var T=d.pingCache;if(T===null){T=d.pingCache=new mB;var C=new Set;T.set(h,C)}else C=T.get(h),C===void 0&&(C=new Set,T.set(h,C));C.has(w)||(C.add(w),d=RB.bind(null,d,h,w),h.then(d,d))}function EA(d){do{var h;if((h=d.tag===13)&&(h=d.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return d;d=d.return}while(d!==null);return null}function TA(d,h,w,T,C){return d.mode&1?(d.flags|=65536,d.lanes=C,d):(d===h?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(h=Lo(-1,1),h.tag=2,Ma(w,h))),w.lanes|=1),d)}function lo(d){d.flags|=4}function MA(d,h){if(d!==null&&d.child===h.child)return!0;if(h.flags&16)return!1;for(d=h.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var $d,jd,jm,Xm;if(He)$d=function(d,h){for(var w=h.child;w!==null;){if(w.tag===5||w.tag===6)ie(d,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},jd=function(){},jm=function(d,h,w,T,C){if(d=d.memoizedProps,d!==T){var L=h.stateNode,G=oo(cs.current);w=te(L,w,d,T,C,G),(h.updateQueue=w)&&lo(h)}},Xm=function(d,h,w,T){w!==T&&lo(h)};else if(Y){$d=function(d,h,w,T){for(var C=h.child;C!==null;){if(C.tag===5){var L=C.stateNode;w&&T&&(L=sn(L,C.type,C.memoizedProps,C)),ie(d,L)}else if(C.tag===6)L=C.stateNode,w&&T&&(L=Vn(L,C.memoizedProps,C)),ie(d,L);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)L=C.child,L!==null&&(L.return=C),$d(d,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===h)break;for(;C.sibling===null;){if(C.return===null||C.return===h)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var bA=function(d,h,w,T){for(var C=h.child;C!==null;){if(C.tag===5){var L=C.stateNode;w&&T&&(L=sn(L,C.type,C.memoizedProps,C)),Je(d,L)}else if(C.tag===6)L=C.stateNode,w&&T&&(L=Vn(L,C.memoizedProps,C)),Je(d,L);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)L=C.child,L!==null&&(L.return=C),bA(d,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===h)break;for(;C.sibling===null;){if(C.return===null||C.return===h)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};jd=function(d,h){var w=h.stateNode;if(!MA(d,h)){d=w.containerInfo;var T=Ze(d);bA(T,h,!1,!1),w.pendingChildren=T,lo(h),At(d,T)}},jm=function(d,h,w,T,C){var L=d.stateNode,G=d.memoizedProps;if((d=MA(d,h))&&G===T)h.stateNode=L;else{var J=h.stateNode,ge=oo(cs.current),Pe=null;G!==T&&(Pe=te(J,w,G,T,C,ge)),d&&Pe===null?h.stateNode=L:(L=Le(L,Pe,w,G,T,h,d,J),Me(L,w,T,C,ge)&&lo(h),h.stateNode=L,d?lo(h):$d(L,h,!1,!1))}},Xm=function(d,h,w,T){w!==T?(d=oo(wu.current),w=oo(cs.current),h.stateNode=xe(T,d,w,h),lo(h)):h.stateNode=d.stateNode}}else jd=function(){},jm=function(){},Xm=function(){};function Xd(d,h){if(!vn)switch(d.tailMode){case"hidden":h=d.tail;for(var w=null;h!==null;)h.alternate!==null&&(w=h),h=h.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var T=null;w!==null;)w.alternate!==null&&(T=w),w=w.sibling;T===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:T.sibling=null}}function Di(d){var h=d.alternate!==null&&d.alternate.child===d.child,w=0,T=0;if(h)for(var C=d.child;C!==null;)w|=C.lanes|C.childLanes,T|=C.subtreeFlags&14680064,T|=C.flags&14680064,C.return=d,C=C.sibling;else for(C=d.child;C!==null;)w|=C.lanes|C.childLanes,T|=C.subtreeFlags,T|=C.flags,C.return=d,C=C.sibling;return d.subtreeFlags|=T,d.childLanes=w,h}function gB(d,h,w){var T=h.pendingProps;switch(U_(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(h),null;case 1:return fi(h.type)&&Gn(),Di(h),null;case 3:return T=h.stateNode,Eu(),pt(On),pt(Dt),W_(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(d===null||d.child===null)&&(Ud(h)?lo(h):d===null||d.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Ls!==null&&(_x(Ls),Ls=null))),jd(d,h),Di(h),null;case 5:V_(h),w=oo(wu.current);var C=h.type;if(d!==null&&h.stateNode!=null)jm(d,h,C,T,w),d.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!T){if(h.stateNode===null)throw Error(o(166));return Di(h),null}if(d=oo(cs.current),Ud(h)){if(!Se)throw Error(o(175));d=__(h.stateNode,h.type,h.memoizedProps,w,d,h,!kd),h.updateQueue=d,d!==null&&lo(h)}else{var L=Q(C,T,w,d,h);$d(L,h,!1,!1),h.stateNode=L,Me(L,C,T,w,d)&&lo(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Di(h),null;case 6:if(d&&h.stateNode!=null)Xm(d,h,d.memoizedProps,T);else{if(typeof T!="string"&&h.stateNode===null)throw Error(o(166));if(d=oo(wu.current),w=oo(cs.current),Ud(h)){if(!Se)throw Error(o(176));if(d=h.stateNode,T=h.memoizedProps,(w=x_(d,T,h,!kd))&&(C=Ir,C!==null))switch(L=(C.mode&1)!==0,C.tag){case 3:rt(C.stateNode.containerInfo,d,T,L);break;case 5:dt(C.type,C.memoizedProps,C.stateNode,d,T,L)}w&&lo(h)}else h.stateNode=xe(T,d,w,h)}return Di(h),null;case 13:if(pt(En),T=h.memoizedState,vn&&Lr!==null&&h.mode&1&&!(h.flags&128)){for(d=Lr;d;)d=Ea(d);return xu(),h.flags|=98560,h}if(T!==null&&T.dehydrated!==null){if(T=Ud(h),d===null){if(!T)throw Error(o(318));if(!Se)throw Error(o(344));if(d=h.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));S_(d,h)}else xu(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Di(h),null}return Ls!==null&&(_x(Ls),Ls=null),h.flags&128?(h.lanes=w,h):(T=T!==null,w=!1,d===null?Ud(h):w=d.memoizedState!==null,T&&!w&&(h.child.flags|=8192,h.mode&1&&(d===null||En.current&1?ri===0&&(ri=3):Sx())),h.updateQueue!==null&&(h.flags|=4),Di(h),null);case 4:return Eu(),jd(d,h),d===null&&Ee(h.stateNode.containerInfo),Di(h),null;case 10:return I_(h.type._context),Di(h),null;case 17:return fi(h.type)&&Gn(),Di(h),null;case 19:if(pt(En),C=h.memoizedState,C===null)return Di(h),null;if(T=(h.flags&128)!==0,L=C.rendering,L===null)if(T)Xd(C,!1);else{if(ri!==0||d!==null&&d.flags&128)for(d=h.child;d!==null;){if(L=Fm(d),L!==null){for(h.flags|=128,Xd(C,!1),d=L.updateQueue,d!==null&&(h.updateQueue=d,h.flags|=4),h.subtreeFlags=0,d=w,T=h.child;T!==null;)w=T,C=d,w.flags&=14680066,L=w.alternate,L===null?(w.childLanes=0,w.lanes=C,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=L.childLanes,w.lanes=L.lanes,w.child=L.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=L.memoizedProps,w.memoizedState=L.memoizedState,w.updateQueue=L.updateQueue,w.type=L.type,C=L.dependencies,w.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),T=T.sibling;return Xe(En,En.current&1|2),h.child}d=d.sibling}C.tail!==null&&di()>mx&&(h.flags|=128,T=!0,Xd(C,!1),h.lanes=4194304)}else{if(!T)if(d=Fm(L),d!==null){if(h.flags|=128,T=!0,d=d.updateQueue,d!==null&&(h.updateQueue=d,h.flags|=4),Xd(C,!0),C.tail===null&&C.tailMode==="hidden"&&!L.alternate&&!vn)return Di(h),null}else 2*di()-C.renderingStartTime>mx&&w!==1073741824&&(h.flags|=128,T=!0,Xd(C,!1),h.lanes=4194304);C.isBackwards?(L.sibling=h.child,h.child=L):(d=C.last,d!==null?d.sibling=L:h.child=L,C.last=L)}return C.tail!==null?(h=C.tail,C.rendering=h,C.tail=h.sibling,C.renderingStartTime=di(),h.sibling=null,d=En.current,Xe(En,T?d&1|2:d&1),h):(Di(h),null);case 22:case 23:return xx(),T=h.memoizedState!==null,d!==null&&d.memoizedState!==null!==T&&(h.flags|=8192),T&&h.mode&1?Or&1073741824&&(Di(h),He&&h.subtreeFlags&6&&(h.flags|=8192)):Di(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var vB=a.ReactCurrentOwner,Dr=!1;function Ki(d,h,w,T){h.child=d===null?eA(h,null,w,T):Su(h,d.child,w,T)}function AA(d,h,w,T,C){w=w.render;var L=h.ref;return vu(h,C),T=j_(d,h,w,T,L,C),w=X_(),d!==null&&!Dr?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~C,ko(d,h,C)):(vn&&w&&k_(h),h.flags|=1,Ki(d,h,T,C),h.child)}function CA(d,h,w,T,C){if(d===null){var L=w.type;return typeof L=="function"&&!wx(L)&&L.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(h.tag=15,h.type=L,RA(d,h,L,T,C)):(d=pg(w.type,null,T,h,h.mode,C),d.ref=h.ref,d.return=h,h.child=d)}if(L=d.child,!(d.lanes&C)){var G=L.memoizedProps;if(w=w.compare,w=w!==null?w:Rm,w(G,T)&&d.ref===h.ref)return ko(d,h,C)}return h.flags|=1,d=Pa(L,T),d.ref=h.ref,d.return=h,h.child=d}function RA(d,h,w,T,C){if(d!==null&&Rm(d.memoizedProps,T)&&d.ref===h.ref)if(Dr=!1,(d.lanes&C)!==0)d.flags&131072&&(Dr=!0);else return h.lanes=d.lanes,ko(d,h,C);return J_(d,h,w,T,C)}function PA(d,h,w){var T=h.pendingProps,C=T.children,L=d!==null?d.memoizedState:null;if(T.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},Xe(Mu,Or),Or|=w;else if(w&1073741824)h.memoizedState={baseLanes:0,cachePool:null},T=L!==null?L.baseLanes:w,Xe(Mu,Or),Or|=T;else return d=L!==null?L.baseLanes|w:w,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:d,cachePool:null},h.updateQueue=null,Xe(Mu,Or),Or|=d,null;else L!==null?(T=L.baseLanes|w,h.memoizedState=null):T=w,Xe(Mu,Or),Or|=T;return Ki(d,h,C,w),h.child}function IA(d,h){var w=h.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(h.flags|=512,h.flags|=2097152)}function J_(d,h,w,T,C){var L=fi(w)?eo:Dt.current;return L=ss(h,L),vu(h,C),w=j_(d,h,w,T,L,C),T=X_(),d!==null&&!Dr?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~C,ko(d,h,C)):(vn&&T&&k_(h),h.flags|=1,Ki(d,h,w,C),h.child)}function LA(d,h,w,T,C){if(fi(w)){var L=!0;Ti(h)}else L=!1;if(vu(h,C),h.stateNode===null)d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),jb(h,w,T),N_(h,w,T,C),T=!0;else if(d===null){var G=h.stateNode,J=h.memoizedProps;G.props=J;var ge=G.context,Pe=w.contextType;typeof Pe=="object"&&Pe!==null?Pe=os(Pe):(Pe=fi(w)?eo:Dt.current,Pe=ss(h,Pe));var Ye=w.getDerivedStateFromProps,wt=typeof Ye=="function"||typeof G.getSnapshotBeforeUpdate=="function";wt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==T||ge!==Pe)&&Xb(h,G,T,Pe),Ta=!1;var ct=h.memoizedState;G.state=ct,Dm(h,T,G,C),ge=h.memoizedState,J!==T||ct!==ge||On.current||Ta?(typeof Ye=="function"&&(O_(h,w,Ye,T),ge=h.memoizedState),(J=Ta||$b(h,w,J,T,ct,ge,Pe))?(wt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(h.flags|=4194308)):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=T,h.memoizedState=ge),G.props=T,G.state=ge,G.context=Pe,T=J):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),T=!1)}else{G=h.stateNode,Hb(d,h),J=h.memoizedProps,Pe=h.type===h.elementType?J:Is(h.type,J),G.props=Pe,wt=h.pendingProps,ct=G.context,ge=w.contextType,typeof ge=="object"&&ge!==null?ge=os(ge):(ge=fi(w)?eo:Dt.current,ge=ss(h,ge));var tn=w.getDerivedStateFromProps;(Ye=typeof tn=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==wt||ct!==ge)&&Xb(h,G,T,ge),Ta=!1,ct=h.memoizedState,G.state=ct,Dm(h,T,G,C);var st=h.memoizedState;J!==wt||ct!==st||On.current||Ta?(typeof tn=="function"&&(O_(h,w,tn,T),st=h.memoizedState),(Pe=Ta||$b(h,w,Pe,T,ct,st,ge)||!1)?(Ye||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(T,st,ge),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(T,st,ge)),typeof G.componentDidUpdate=="function"&&(h.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof G.componentDidUpdate!="function"||J===d.memoizedProps&&ct===d.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&ct===d.memoizedState||(h.flags|=1024),h.memoizedProps=T,h.memoizedState=st),G.props=T,G.state=st,G.context=ge,T=Pe):(typeof G.componentDidUpdate!="function"||J===d.memoizedProps&&ct===d.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&ct===d.memoizedState||(h.flags|=1024),T=!1)}return ex(d,h,w,T,L,C)}function ex(d,h,w,T,C,L){IA(d,h);var G=(h.flags&128)!==0;if(!T&&!G)return C&&mu(h,w,!1),ko(d,h,L);T=h.stateNode,vB.current=h;var J=G&&typeof w.getDerivedStateFromError!="function"?null:T.render();return h.flags|=1,d!==null&&G?(h.child=Su(h,d.child,null,L),h.child=Su(h,null,J,L)):Ki(d,h,J,L),h.memoizedState=T.state,C&&mu(h,w,!0),h.child}function DA(d){var h=d.stateNode;h.pendingContext?to(d,h.pendingContext,h.pendingContext!==h.context):h.context&&to(d,h.context,!1),H_(d,h.containerInfo)}function OA(d,h,w,T,C){return xu(),B_(C),h.flags|=256,Ki(d,h,w,T),h.child}var Ym={dehydrated:null,treeContext:null,retryLane:0};function Km(d){return{baseLanes:d,cachePool:null}}function NA(d,h,w){var T=h.pendingProps,C=En.current,L=!1,G=(h.flags&128)!==0,J;if((J=G)||(J=d!==null&&d.memoizedState===null?!1:(C&2)!==0),J?(L=!0,h.flags&=-129):(d===null||d.memoizedState!==null)&&(C|=1),Xe(En,C&1),d===null)return z_(h),d=h.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(h.mode&1?Dd(d)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(C=T.children,d=T.fallback,L?(T=h.mode,L=h.child,C={mode:"hidden",children:C},!(T&1)&&L!==null?(L.childLanes=0,L.pendingProps=C):L=mg(C,T,0,null),d=Xl(d,T,w,null),L.return=h,d.return=h,L.sibling=d,h.child=L,h.child.memoizedState=Km(w),h.memoizedState=Ym,d):tx(h,C));if(C=d.memoizedState,C!==null){if(J=C.dehydrated,J!==null){if(G)return h.flags&256?(h.flags&=-257,qm(d,h,w,Error(o(422)))):h.memoizedState!==null?(h.child=d.child,h.flags|=128,null):(L=T.fallback,C=h.mode,T=mg({mode:"visible",children:T.children},C,0,null),L=Xl(L,C,w,null),L.flags|=2,T.return=h,L.return=h,T.sibling=L,h.child=T,h.mode&1&&Su(h,d.child,null,w),h.child.memoizedState=Km(w),h.memoizedState=Ym,L);if(!(h.mode&1))h=qm(d,h,w,null);else if(Dd(J))h=qm(d,h,w,Error(o(419)));else if(T=(w&d.childLanes)!==0,Dr||T){if(T=Zn,T!==null){switch(w&-w){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}T=L&(T.suspendedLanes|w)?0:L,T!==0&&T!==C.retryLane&&(C.retryLane=T,fs(d,T,-1))}Sx(),h=qm(d,h,w,Error(o(421)))}else Ld(J)?(h.flags|=128,h.child=d.child,h=PB.bind(null,d),du(J,h),h=null):(w=C.treeContext,Se&&(Lr=wm(J),Ir=h,vn=!0,Ls=null,kd=!1,w!==null&&(as[ls++]=Do,as[ls++]=Oo,as[ls++]=zl,Do=w.id,Oo=w.overflow,zl=h)),h=tx(h,h.pendingProps.children),h.flags|=4096);return h}return L?(T=UA(d,h,T.children,T.fallback,w),L=h.child,C=d.child.memoizedState,L.memoizedState=C===null?Km(w):{baseLanes:C.baseLanes|w,cachePool:null},L.childLanes=d.childLanes&~w,h.memoizedState=Ym,T):(w=kA(d,h,T.children,w),h.memoizedState=null,w)}return L?(T=UA(d,h,T.children,T.fallback,w),L=h.child,C=d.child.memoizedState,L.memoizedState=C===null?Km(w):{baseLanes:C.baseLanes|w,cachePool:null},L.childLanes=d.childLanes&~w,h.memoizedState=Ym,T):(w=kA(d,h,T.children,w),h.memoizedState=null,w)}function tx(d,h){return h=mg({mode:"visible",children:h},d.mode,0,null),h.return=d,d.child=h}function kA(d,h,w,T){var C=d.child;return d=C.sibling,w=Pa(C,{mode:"visible",children:w}),!(h.mode&1)&&(w.lanes=T),w.return=h,w.sibling=null,d!==null&&(T=h.deletions,T===null?(h.deletions=[d],h.flags|=16):T.push(d)),h.child=w}function UA(d,h,w,T,C){var L=h.mode;d=d.child;var G=d.sibling,J={mode:"hidden",children:w};return!(L&1)&&h.child!==d?(w=h.child,w.childLanes=0,w.pendingProps=J,h.deletions=null):(w=Pa(d,J),w.subtreeFlags=d.subtreeFlags&14680064),G!==null?T=Pa(G,T):(T=Xl(T,L,C,null),T.flags|=2),T.return=h,w.return=h,w.sibling=T,h.child=w,T}function qm(d,h,w,T){return T!==null&&B_(T),Su(h,d.child,null,w),d=tx(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function FA(d,h,w){d.lanes|=h;var T=d.alternate;T!==null&&(T.lanes|=h),L_(d.return,h,w)}function nx(d,h,w,T,C){var L=d.memoizedState;L===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:T,tail:w,tailMode:C}:(L.isBackwards=h,L.rendering=null,L.renderingStartTime=0,L.last=T,L.tail=w,L.tailMode=C)}function zA(d,h,w){var T=h.pendingProps,C=T.revealOrder,L=T.tail;if(Ki(d,h,T.children,w),T=En.current,T&2)T=T&1|2,h.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&FA(d,w,h);else if(d.tag===19)FA(d,w,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}T&=1}if(Xe(En,T),!(h.mode&1))h.memoizedState=null;else switch(C){case"forwards":for(w=h.child,C=null;w!==null;)d=w.alternate,d!==null&&Fm(d)===null&&(C=w),w=w.sibling;w=C,w===null?(C=h.child,h.child=null):(C=w.sibling,w.sibling=null),nx(h,!1,C,w,L);break;case"backwards":for(w=null,C=h.child,h.child=null;C!==null;){if(d=C.alternate,d!==null&&Fm(d)===null){h.child=C;break}d=C.sibling,C.sibling=w,w=C,C=d}nx(h,!0,w,null,L);break;case"together":nx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function ko(d,h,w){if(d!==null&&(h.dependencies=d.dependencies),bu|=h.lanes,!(w&h.childLanes))return null;if(d!==null&&h.child!==d.child)throw Error(o(153));if(h.child!==null){for(d=h.child,w=Pa(d,d.pendingProps),h.child=w,w.return=h;d.sibling!==null;)d=d.sibling,w=w.sibling=Pa(d,d.pendingProps),w.return=h;w.sibling=null}return h.child}function yB(d,h,w){switch(h.tag){case 3:DA(h),xu();break;case 5:tA(h);break;case 1:fi(h.type)&&Ti(h);break;case 4:H_(h,h.stateNode.containerInfo);break;case 10:Bb(h,h.type._context,h.memoizedProps.value);break;case 13:var T=h.memoizedState;if(T!==null)return T.dehydrated!==null?(Xe(En,En.current&1),h.flags|=128,null):w&h.child.childLanes?NA(d,h,w):(Xe(En,En.current&1),d=ko(d,h,w),d!==null?d.sibling:null);Xe(En,En.current&1);break;case 19:if(T=(w&h.childLanes)!==0,d.flags&128){if(T)return zA(d,h,w);h.flags|=128}var C=h.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Xe(En,En.current),T)break;return null;case 22:case 23:return h.lanes=0,PA(d,h,w)}return ko(d,h,w)}function _B(d,h){switch(U_(h),h.tag){case 1:return fi(h.type)&&Gn(),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return Eu(),pt(On),pt(Dt),W_(),d=h.flags,d&65536&&!(d&128)?(h.flags=d&-65537|128,h):null;case 5:return V_(h),null;case 13:if(pt(En),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(o(340));xu()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return pt(En),null;case 4:return Eu(),null;case 10:return I_(h.type._context),null;case 22:case 23:return xx(),null;case 24:return null;default:return null}}var Zm=!1,Vl=!1,xB=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Qm(d,h){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(T){mr(d,h,T)}else w.current=null}function ix(d,h,w){try{w()}catch(T){mr(d,h,T)}}var BA=!1;function SB(d,h){for(V(d.containerInfo),Fe=h;Fe!==null;)if(d=Fe,h=d.child,(d.subtreeFlags&1028)!==0&&h!==null)h.return=d,Fe=h;else for(;Fe!==null;){d=Fe;try{var w=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,C=w.memoizedState,L=d.stateNode,G=L.getSnapshotBeforeUpdate(d.elementType===d.type?T:Is(d.type,T),C);L.__reactInternalSnapshotBeforeUpdate=G}break;case 3:He&&Ae(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(J){mr(d,d.return,J)}if(h=d.sibling,h!==null){h.return=d.return,Fe=h;break}Fe=d.return}return w=BA,BA=!1,w}function Gl(d,h,w){var T=h.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var C=T=T.next;do{if((C.tag&d)===d){var L=C.destroy;C.destroy=void 0,L!==void 0&&ix(h,w,L)}C=C.next}while(C!==T)}}function Yd(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var w=h=h.next;do{if((w.tag&d)===d){var T=w.create;w.destroy=T()}w=w.next}while(w!==h)}}function rx(d){var h=d.ref;if(h!==null){var w=d.stateNode;switch(d.tag){case 5:d=q(w);break;default:d=w}typeof h=="function"?h(d):h.current=d}}function HA(d,h,w){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(Am,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var T=d=d.next;do{var C=T,L=C.destroy;C=C.tag,L!==void 0&&(C&2||C&4)&&ix(h,w,L),T=T.next}while(T!==d)}break;case 1:if(Qm(h,w),d=h.stateNode,typeof d.componentWillUnmount=="function")try{d.props=h.memoizedProps,d.state=h.memoizedState,d.componentWillUnmount()}catch(G){mr(h,w,G)}break;case 5:Qm(h,w);break;case 4:He?XA(d,h,w):Y&&Y&&(h=h.stateNode.containerInfo,w=Ze(h),zt(h,w))}}function VA(d,h,w){for(var T=h;;)if(HA(d,T,w),T.child===null||He&&T.tag===4){if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else T.child.return=T,T=T.child}function GA(d){var h=d.alternate;h!==null&&(d.alternate=null,GA(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&Qe(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function WA(d){return d.tag===5||d.tag===3||d.tag===4}function $A(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||WA(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function jA(d){if(He){e:{for(var h=d.return;h!==null;){if(WA(h))break e;h=h.return}throw Error(o(160))}var w=h;switch(w.tag){case 5:h=w.stateNode,w.flags&32&&(_e(h),w.flags&=-33),w=$A(d),ox(d,w,h);break;case 3:case 4:h=w.stateNode.containerInfo,w=$A(d),sx(d,w,h);break;default:throw Error(o(161))}}}function sx(d,h,w){var T=d.tag;if(T===5||T===6)d=d.stateNode,h?nt(w,d,h):lt(w,d);else if(T!==4&&(d=d.child,d!==null))for(sx(d,h,w),d=d.sibling;d!==null;)sx(d,h,w),d=d.sibling}function ox(d,h,w){var T=d.tag;if(T===5||T===6)d=d.stateNode,h?at(w,d,h):et(w,d);else if(T!==4&&(d=d.child,d!==null))for(ox(d,h,w),d=d.sibling;d!==null;)ox(d,h,w),d=d.sibling}function XA(d,h,w){for(var T=h,C=!1,L,G;;){if(!C){C=T.return;e:for(;;){if(C===null)throw Error(o(160));switch(L=C.stateNode,C.tag){case 5:G=!1;break e;case 3:L=L.containerInfo,G=!0;break e;case 4:L=L.containerInfo,G=!0;break e}C=C.return}C=!0}if(T.tag===5||T.tag===6)VA(d,T,w),G?Z(L,T.stateNode):Ve(L,T.stateNode);else if(T.tag===18)G?fe(L,T.stateNode):pe(L,T.stateNode);else if(T.tag===4){if(T.child!==null){L=T.stateNode.containerInfo,G=!0,T.child.return=T,T=T.child;continue}}else if(HA(d,T,w),T.child!==null){T.child.return=T,T=T.child;continue}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return,T.tag===4&&(C=!1)}T.sibling.return=T.return,T=T.sibling}}function ax(d,h){if(He){switch(h.tag){case 0:case 11:case 14:case 15:Gl(3,h,h.return),Yd(3,h),Gl(5,h,h.return);return;case 1:return;case 5:var w=h.stateNode;if(w!=null){var T=h.memoizedProps;d=d!==null?d.memoizedProps:T;var C=h.type,L=h.updateQueue;h.updateQueue=null,L!==null&&yt(w,L,C,d,T,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));w=h.memoizedProps,we(h.stateNode,d!==null?d.memoizedProps:w,w);return;case 3:Se&&d!==null&&d.memoizedState.isDehydrated&&oe(h.stateNode.containerInfo);return;case 12:return;case 13:Jm(h);return;case 19:Jm(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Gl(3,h,h.return),Yd(3,h),Gl(5,h,h.return);return;case 12:return;case 13:Jm(h);return;case 19:Jm(h);return;case 3:Se&&d!==null&&d.memoizedState.isDehydrated&&oe(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(Y){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,zt(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Jm(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new xB),h.forEach(function(T){var C=IB.bind(null,d,T);w.has(T)||(w.add(T),T.then(C,C))})}}function wB(d,h){for(Fe=h;Fe!==null;){h=Fe;var w=h.deletions;if(w!==null)for(var T=0;T<w.length;T++){var C=w[T];try{var L=d;He?XA(L,C,h):VA(L,C,h);var G=C.alternate;G!==null&&(G.return=null),C.return=null}catch(it){mr(C,h,it)}}if(w=h.child,h.subtreeFlags&12854&&w!==null)w.return=h,Fe=w;else for(;Fe!==null;){h=Fe;try{var J=h.flags;if(J&32&&He&&_e(h.stateNode),J&512){var ge=h.alternate;if(ge!==null){var Pe=ge.ref;Pe!==null&&(typeof Pe=="function"?Pe(null):Pe.current=null)}}if(J&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var Ye=h.alternate;(Ye===null||Ye.memoizedState===null)&&(px=di())}break;case 22:var wt=h.memoizedState!==null,ct=h.alternate,tn=ct!==null&&ct.memoizedState!==null;if(w=h,He){e:if(T=w,C=wt,L=null,He)for(var st=T;;){if(st.tag===5){if(L===null){L=st;var Oi=st.stateNode;C?Ue(Oi):mt(st.stateNode,st.memoizedProps)}}else if(st.tag===6){if(L===null){var hs=st.stateNode;C?Ge(hs):$(hs,st.memoizedProps)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===T)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===T)break;for(;st.sibling===null;){if(st.return===null||st.return===T)break e;L===st&&(L=null),st=st.return}L===st&&(L=null),st.sibling.return=st.return,st=st.sibling}}if(wt&&!tn&&w.mode&1){Fe=w;for(var ce=w.child;ce!==null;){for(w=Fe=ce;Fe!==null;){T=Fe;var ne=T.child;switch(T.tag){case 0:case 11:case 14:case 15:Gl(4,T,T.return);break;case 1:Qm(T,T.return);var me=T.stateNode;if(typeof me.componentWillUnmount=="function"){var Be=T.return;try{me.props=T.memoizedProps,me.state=T.memoizedState,me.componentWillUnmount()}catch(it){mr(T,Be,it)}}break;case 5:Qm(T,T.return);break;case 22:if(T.memoizedState!==null){qA(w);continue}}ne!==null?(ne.return=T,Fe=ne):qA(w)}ce=ce.sibling}}}switch(J&4102){case 2:jA(h),h.flags&=-3;break;case 6:jA(h),h.flags&=-3,ax(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,ax(h.alternate,h);break;case 4:ax(h.alternate,h)}}catch(it){mr(h,h.return,it)}if(w=h.sibling,w!==null){w.return=h.return,Fe=w;break}Fe=h.return}}}function EB(d,h,w){Fe=d,YA(d)}function YA(d,h,w){for(var T=(d.mode&1)!==0;Fe!==null;){var C=Fe,L=C.child;if(C.tag===22&&T){var G=C.memoizedState!==null||Zm;if(!G){var J=C.alternate,ge=J!==null&&J.memoizedState!==null||Vl;J=Zm;var Pe=Vl;if(Zm=G,(Vl=ge)&&!Pe)for(Fe=C;Fe!==null;)G=Fe,ge=G.child,G.tag===22&&G.memoizedState!==null?ZA(C):ge!==null?(ge.return=G,Fe=ge):ZA(C);for(;L!==null;)Fe=L,YA(L),L=L.sibling;Fe=C,Zm=J,Vl=Pe}KA(d)}else C.subtreeFlags&8772&&L!==null?(L.return=C,Fe=L):KA(d)}}function KA(d){for(;Fe!==null;){var h=Fe;if(h.flags&8772){var w=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Vl||Yd(5,h);break;case 1:var T=h.stateNode;if(h.flags&4&&!Vl)if(w===null)T.componentDidMount();else{var C=h.elementType===h.type?w.memoizedProps:Is(h.type,w.memoizedProps);T.componentDidUpdate(C,w.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var L=h.updateQueue;L!==null&&Gb(h,L,T);break;case 3:var G=h.updateQueue;if(G!==null){if(w=null,h.child!==null)switch(h.child.tag){case 5:w=q(h.child.stateNode);break;case 1:w=h.child.stateNode}Gb(h,G,w)}break;case 5:var J=h.stateNode;w===null&&h.flags&4&&Pt(J,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&h.memoizedState===null){var ge=h.alternate;if(ge!==null){var Pe=ge.memoizedState;if(Pe!==null){var Ye=Pe.dehydrated;Ye!==null&&de(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Vl||h.flags&512&&rx(h)}catch(wt){mr(h,h.return,wt)}}if(h===d){Fe=null;break}if(w=h.sibling,w!==null){w.return=h.return,Fe=w;break}Fe=h.return}}function qA(d){for(;Fe!==null;){var h=Fe;if(h===d){Fe=null;break}var w=h.sibling;if(w!==null){w.return=h.return,Fe=w;break}Fe=h.return}}function ZA(d){for(;Fe!==null;){var h=Fe;try{switch(h.tag){case 0:case 11:case 15:var w=h.return;try{Yd(4,h)}catch(ge){mr(h,w,ge)}break;case 1:var T=h.stateNode;if(typeof T.componentDidMount=="function"){var C=h.return;try{T.componentDidMount()}catch(ge){mr(h,C,ge)}}var L=h.return;try{rx(h)}catch(ge){mr(h,L,ge)}break;case 5:var G=h.return;try{rx(h)}catch(ge){mr(h,G,ge)}}}catch(ge){mr(h,h.return,ge)}if(h===d){Fe=null;break}var J=h.sibling;if(J!==null){J.return=h.return,Fe=J;break}Fe=h.return}}var eg=0,tg=1,ng=2,ig=3,rg=4;if(typeof Symbol=="function"&&Symbol.for){var Kd=Symbol.for;eg=Kd("selector.component"),tg=Kd("selector.has_pseudo_class"),ng=Kd("selector.role"),ig=Kd("selector.test_id"),rg=Kd("selector.text")}function lx(d){var h=ve(d);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(d=se(d),d===null)throw Error(o(362));return d.stateNode.current}function cx(d,h){switch(h.$$typeof){case eg:if(d.type===h.value)return!0;break;case tg:e:{h=h.value,d=[d,0];for(var w=0;w<d.length;){var T=d[w++],C=d[w++],L=h[C];if(T.tag!==5||!le(T)){for(;L!=null&&cx(T,L);)C++,L=h[C];if(C===h.length){h=!0;break e}else for(T=T.child;T!==null;)d.push(T,C),T=T.sibling}}h=!1}return h;case ng:if(d.tag===5&&De(d.stateNode,h.value))return!0;break;case rg:if((d.tag===5||d.tag===6)&&(d=re(d),d!==null&&0<=d.indexOf(h.value)))return!0;break;case ig:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function ux(d){switch(d.$$typeof){case eg:return"<"+(R(d.value)||"Unknown")+">";case tg:return":has("+(ux(d)||"")+")";case ng:return'[role="'+d.value+'"]';case rg:return'"'+d.value+'"';case ig:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function QA(d,h){var w=[];d=[d,0];for(var T=0;T<d.length;){var C=d[T++],L=d[T++],G=h[L];if(C.tag!==5||!le(C)){for(;G!=null&&cx(C,G);)L++,G=h[L];if(L===h.length)w.push(C);else for(C=C.child;C!==null;)d.push(C,L),C=C.sibling}}return w}function fx(d,h){if(!k)throw Error(o(363));d=lx(d),d=QA(d,h),h=[],d=Array.from(d);for(var w=0;w<d.length;){var T=d[w++];if(T.tag===5)le(T)||h.push(T.stateNode);else for(T=T.child;T!==null;)d.push(T),T=T.sibling}return h}var TB=Math.ceil,sg=a.ReactCurrentDispatcher,dx=a.ReactCurrentOwner,Wn=a.ReactCurrentBatchConfig,Ot=0,Zn=null,Qn=null,Mi=0,Or=0,Mu=ui(0),ri=0,qd=null,bu=0,og=0,hx=0,Zd=null,hr=null,px=0,mx=1/0;function Au(){mx=di()+500}var ag=!1,gx=null,ba=null,lg=!1,Aa=null,cg=0,Qd=0,vx=null,ug=-1,fg=0;function qi(){return Ot&6?di():ug!==-1?ug:ug=di()}function Ca(d){return d.mode&1?Ot&2&&Mi!==0?Mi&-Mi:oB.transition!==null?(fg===0&&(d=Tm,Tm<<=1,!(Tm&4194240)&&(Tm=64),fg=d),fg):(d=$t,d!==0?d:ye()):1}function fs(d,h,w){if(50<Qd)throw Qd=0,vx=null,Error(o(185));var T=dg(d,h);return T===null?null:(Nd(T,h,w),(!(Ot&2)||T!==Zn)&&(T===Zn&&(!(Ot&2)&&(og|=h),ri===4&&Ra(T,Mi)),pr(T,w),h===1&&Ot===0&&!(d.mode&1)&&(Au(),Cm&&ro())),T)}function dg(d,h){d.lanes|=h;var w=d.alternate;for(w!==null&&(w.lanes|=h),w=d,d=d.return;d!==null;)d.childLanes|=h,w=d.alternate,w!==null&&(w.childLanes|=h),w=d,d=d.return;return w.tag===3?w.stateNode:null}function pr(d,h){var w=d.callbackNode;Zz(d,h);var T=bm(d,d===Zn?Mi:0);if(T===0)w!==null&&Fb(w),d.callbackNode=null,d.callbackPriority=0;else if(h=T&-T,d.callbackPriority!==h){if(w!=null&&Fb(w),h===1)d.tag===0?sB(e2.bind(null,d)):zb(e2.bind(null,d)),ke?F(function(){Ot===0&&ro()}):M_(b_,ro),w=null;else{switch(Ub(T)){case 1:w=b_;break;case 4:w=tB;break;case 16:w=A_;break;case 536870912:w=nB;break;default:w=A_}w=c2(w,JA.bind(null,d))}d.callbackPriority=h,d.callbackNode=w}}function JA(d,h){if(ug=-1,fg=0,Ot&6)throw Error(o(327));var w=d.callbackNode;if(jl()&&d.callbackNode!==w)return null;var T=bm(d,d===Zn?Mi:0);if(T===0)return null;if(T&30||T&d.expiredLanes||h)h=hg(d,T);else{h=T;var C=Ot;Ot|=2;var L=i2();(Zn!==d||Mi!==h)&&(Au(),Wl(d,h));do try{AB();break}catch(J){n2(d,J)}while(!0);P_(),sg.current=L,Ot=C,Qn!==null?h=0:(Zn=null,Mi=0,h=ri)}if(h!==0){if(h===2&&(C=w_(d),C!==0&&(T=C,h=yx(d,C))),h===1)throw w=qd,Wl(d,0),Ra(d,T),pr(d,di()),w;if(h===6)Ra(d,T);else{if(C=d.current.alternate,!(T&30)&&!MB(C)&&(h=hg(d,T),h===2&&(L=w_(d),L!==0&&(T=L,h=yx(d,L))),h===1))throw w=qd,Wl(d,0),Ra(d,T),pr(d,di()),w;switch(d.finishedWork=C,d.finishedLanes=T,h){case 0:case 1:throw Error(o(345));case 2:$l(d,hr);break;case 3:if(Ra(d,T),(T&130023424)===T&&(h=px+500-di(),10<h)){if(bm(d,0)!==0)break;if(C=d.suspendedLanes,(C&T)!==T){qi(),d.pingedLanes|=d.suspendedLanes&C;break}d.timeoutHandle=Re($l.bind(null,d,hr),h);break}$l(d,hr);break;case 4:if(Ra(d,T),(T&4194240)===T)break;for(h=d.eventTimes,C=-1;0<T;){var G=31-Pr(T);L=1<<G,G=h[G],G>C&&(C=G),T&=~L}if(T=C,T=di()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*TB(T/1960))-T,10<T){d.timeoutHandle=Re($l.bind(null,d,hr),T);break}$l(d,hr);break;case 5:$l(d,hr);break;default:throw Error(o(329))}}}return pr(d,di()),d.callbackNode===w?JA.bind(null,d):null}function yx(d,h){var w=Zd;return d.current.memoizedState.isDehydrated&&(Wl(d,h).flags|=256),d=hg(d,h),d!==2&&(h=hr,hr=w,h!==null&&_x(h)),d}function _x(d){hr===null?hr=d:hr.push.apply(hr,d)}function MB(d){for(var h=d;;){if(h.flags&16384){var w=h.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var T=0;T<w.length;T++){var C=w[T],L=C.getSnapshot;C=C.value;try{if(!io(L(),C))return!1}catch{return!1}}}if(w=h.child,h.subtreeFlags&16384&&w!==null)w.return=h,h=w;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ra(d,h){for(h&=~hx,h&=~og,d.suspendedLanes|=h,d.pingedLanes&=~h,d=d.expirationTimes;0<h;){var w=31-Pr(h),T=1<<w;d[w]=-1,h&=~T}}function e2(d){if(Ot&6)throw Error(o(327));jl();var h=bm(d,0);if(!(h&1))return pr(d,di()),null;var w=hg(d,h);if(d.tag!==0&&w===2){var T=w_(d);T!==0&&(h=T,w=yx(d,T))}if(w===1)throw w=qd,Wl(d,0),Ra(d,h),pr(d,di()),w;if(w===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=h,$l(d,hr),pr(d,di()),null}function t2(d){Aa!==null&&Aa.tag===0&&!(Ot&6)&&jl();var h=Ot;Ot|=1;var w=Wn.transition,T=$t;try{if(Wn.transition=null,$t=1,d)return d()}finally{$t=T,Wn.transition=w,Ot=h,!(Ot&6)&&ro()}}function xx(){Or=Mu.current,pt(Mu)}function Wl(d,h){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==ze&&(d.timeoutHandle=ze,$e(w)),Qn!==null)for(w=Qn.return;w!==null;){var T=w;switch(U_(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&Gn();break;case 3:Eu(),pt(On),pt(Dt),W_();break;case 5:V_(T);break;case 4:Eu();break;case 13:pt(En);break;case 19:pt(En);break;case 10:I_(T.type._context);break;case 22:case 23:xx()}w=w.return}if(Zn=d,Qn=d=Pa(d.current,null),Mi=Or=h,ri=0,qd=null,hx=og=bu=0,hr=Zd=null,so!==null){for(h=0;h<so.length;h++)if(w=so[h],T=w.interleaved,T!==null){w.interleaved=null;var C=T.next,L=w.pending;if(L!==null){var G=L.next;L.next=C,T.next=G}w.pending=T}so=null}return d}function n2(d,h){do{var w=Qn;try{if(P_(),zm.current=$m,Bm){for(var T=Nn.memoizedState;T!==null;){var C=T.queue;C!==null&&(C.pending=null),T=T.next}Bm=!1}if(Tu=0,hi=Ii=Nn=null,Hd=!1,Vd=0,dx.current=null,w===null||w.return===null){ri=1,qd=h,Qn=null;break}e:{var L=d,G=w.return,J=w,ge=h;if(h=Mi,J.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Pe=ge,Ye=J,wt=Ye.tag;if(!(Ye.mode&1)&&(wt===0||wt===11||wt===15)){var ct=Ye.alternate;ct?(Ye.updateQueue=ct.updateQueue,Ye.memoizedState=ct.memoizedState,Ye.lanes=ct.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var tn=EA(G);if(tn!==null){tn.flags&=-257,TA(tn,G,J,L,h),tn.mode&1&&wA(L,Pe,h),h=tn,ge=Pe;var st=h.updateQueue;if(st===null){var Oi=new Set;Oi.add(ge),h.updateQueue=Oi}else st.add(ge);break e}else{if(!(h&1)){wA(L,Pe,h),Sx();break e}ge=Error(o(426))}}else if(vn&&J.mode&1){var hs=EA(G);if(hs!==null){!(hs.flags&65536)&&(hs.flags|=256),TA(hs,G,J,L,h),B_(ge);break e}}L=ge,ri!==4&&(ri=2),Zd===null?Zd=[L]:Zd.push(L),ge=Z_(ge,J),J=G;do{switch(J.tag){case 3:J.flags|=65536,h&=-h,J.lanes|=h;var ce=xA(J,ge,h);Vb(J,ce);break e;case 1:L=ge;var ne=J.type,me=J.stateNode;if(!(J.flags&128)&&(typeof ne.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(ba===null||!ba.has(me)))){J.flags|=65536,h&=-h,J.lanes|=h;var Be=SA(J,L,h);Vb(J,Be);break e}}J=J.return}while(J!==null)}s2(w)}catch(it){h=it,Qn===w&&w!==null&&(Qn=w=w.return);continue}break}while(!0)}function i2(){var d=sg.current;return sg.current=$m,d===null?$m:d}function Sx(){(ri===0||ri===3||ri===2)&&(ri=4),Zn===null||!(bu&268435455)&&!(og&268435455)||Ra(Zn,Mi)}function hg(d,h){var w=Ot;Ot|=2;var T=i2();Zn===d&&Mi===h||Wl(d,h);do try{bB();break}catch(C){n2(d,C)}while(!0);if(P_(),Ot=w,sg.current=T,Qn!==null)throw Error(o(261));return Zn=null,Mi=0,ri}function bB(){for(;Qn!==null;)r2(Qn)}function AB(){for(;Qn!==null&&!Jz();)r2(Qn)}function r2(d){var h=l2(d.alternate,d,Or);d.memoizedProps=d.pendingProps,h===null?s2(d):Qn=h,dx.current=null}function s2(d){var h=d;do{var w=h.alternate;if(d=h.return,h.flags&32768){if(w=_B(w,h),w!==null){w.flags&=32767,Qn=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{ri=6,Qn=null;return}}else if(w=gB(w,h,Or),w!==null){Qn=w;return}if(h=h.sibling,h!==null){Qn=h;return}Qn=h=d}while(h!==null);ri===0&&(ri=5)}function $l(d,h){var w=$t,T=Wn.transition;try{Wn.transition=null,$t=1,CB(d,h,w)}finally{Wn.transition=T,$t=w}return null}function CB(d,h,w){do jl();while(Aa!==null);if(Ot&6)throw Error(o(327));var T=d.finishedWork,C=d.finishedLanes;if(T===null)return null;if(d.finishedWork=null,d.finishedLanes=0,T===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var L=T.lanes|T.childLanes;if(Qz(d,L),d===Zn&&(Qn=Zn=null,Mi=0),!(T.subtreeFlags&2064)&&!(T.flags&2064)||lg||(lg=!0,c2(A_,function(){return jl(),null})),L=(T.flags&15990)!==0,T.subtreeFlags&15990||L){L=Wn.transition,Wn.transition=null;var G=$t;$t=1;var J=Ot;Ot|=4,dx.current=null,SB(d,T),wB(d,T),W(d.containerInfo),d.current=T,EB(T),eB(),Ot=J,$t=G,Wn.transition=L}else d.current=T;if(lg&&(lg=!1,Aa=d,cg=C),L=d.pendingLanes,L===0&&(ba=null),iB(T.stateNode),pr(d,di()),h!==null)for(w=d.onRecoverableError,T=0;T<h.length;T++)w(h[T]);if(ag)throw ag=!1,d=gx,gx=null,d;return cg&1&&d.tag!==0&&jl(),L=d.pendingLanes,L&1?d===vx?Qd++:(Qd=0,vx=d):Qd=0,ro(),null}function jl(){if(Aa!==null){var d=Ub(cg),h=Wn.transition,w=$t;try{if(Wn.transition=null,$t=16>d?16:d,Aa===null)var T=!1;else{if(d=Aa,Aa=null,cg=0,Ot&6)throw Error(o(331));var C=Ot;for(Ot|=4,Fe=d.current;Fe!==null;){var L=Fe,G=L.child;if(Fe.flags&16){var J=L.deletions;if(J!==null){for(var ge=0;ge<J.length;ge++){var Pe=J[ge];for(Fe=Pe;Fe!==null;){var Ye=Fe;switch(Ye.tag){case 0:case 11:case 15:Gl(8,Ye,L)}var wt=Ye.child;if(wt!==null)wt.return=Ye,Fe=wt;else for(;Fe!==null;){Ye=Fe;var ct=Ye.sibling,tn=Ye.return;if(GA(Ye),Ye===Pe){Fe=null;break}if(ct!==null){ct.return=tn,Fe=ct;break}Fe=tn}}}var st=L.alternate;if(st!==null){var Oi=st.child;if(Oi!==null){st.child=null;do{var hs=Oi.sibling;Oi.sibling=null,Oi=hs}while(Oi!==null)}}Fe=L}}if(L.subtreeFlags&2064&&G!==null)G.return=L,Fe=G;else e:for(;Fe!==null;){if(L=Fe,L.flags&2048)switch(L.tag){case 0:case 11:case 15:Gl(9,L,L.return)}var ce=L.sibling;if(ce!==null){ce.return=L.return,Fe=ce;break e}Fe=L.return}}var ne=d.current;for(Fe=ne;Fe!==null;){G=Fe;var me=G.child;if(G.subtreeFlags&2064&&me!==null)me.return=G,Fe=me;else e:for(G=ne;Fe!==null;){if(J=Fe,J.flags&2048)try{switch(J.tag){case 0:case 11:case 15:Yd(9,J)}}catch(it){mr(J,J.return,it)}if(J===G){Fe=null;break e}var Be=J.sibling;if(Be!==null){Be.return=J.return,Fe=Be;break e}Fe=J.return}}if(Ot=C,ro(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(Am,d)}catch{}T=!0}return T}finally{$t=w,Wn.transition=h}}return!1}function o2(d,h,w){h=Z_(w,h),h=xA(d,h,1),Ma(d,h),h=qi(),d=dg(d,1),d!==null&&(Nd(d,1,h),pr(d,h))}function mr(d,h,w){if(d.tag===3)o2(d,d,w);else for(;h!==null;){if(h.tag===3){o2(h,d,w);break}else if(h.tag===1){var T=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(ba===null||!ba.has(T))){d=Z_(w,d),d=SA(h,d,1),Ma(h,d),d=qi(),h=dg(h,1),h!==null&&(Nd(h,1,d),pr(h,d));break}}h=h.return}}function RB(d,h,w){var T=d.pingCache;T!==null&&T.delete(h),h=qi(),d.pingedLanes|=d.suspendedLanes&w,Zn===d&&(Mi&w)===w&&(ri===4||ri===3&&(Mi&130023424)===Mi&&500>di()-px?Wl(d,0):hx|=w),pr(d,h)}function a2(d,h){h===0&&(d.mode&1?(h=Mm,Mm<<=1,!(Mm&130023424)&&(Mm=4194304)):h=1);var w=qi();d=dg(d,h),d!==null&&(Nd(d,h,w),pr(d,w))}function PB(d){var h=d.memoizedState,w=0;h!==null&&(w=h.retryLane),a2(d,w)}function IB(d,h){var w=0;switch(d.tag){case 13:var T=d.stateNode,C=d.memoizedState;C!==null&&(w=C.retryLane);break;case 19:T=d.stateNode;break;default:throw Error(o(314))}T!==null&&T.delete(h),a2(d,w)}var l2;l2=function(d,h,w){if(d!==null)if(d.memoizedProps!==h.pendingProps||On.current)Dr=!0;else{if(!(d.lanes&w)&&!(h.flags&128))return Dr=!1,yB(d,h,w);Dr=!!(d.flags&131072)}else Dr=!1,vn&&h.flags&1048576&&Yb(h,km,h.index);switch(h.lanes=0,h.tag){case 2:var T=h.type;d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),d=h.pendingProps;var C=ss(h,Dt.current);vu(h,w),C=j_(null,h,T,d,C,w);var L=X_();return h.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,fi(T)?(L=!0,Ti(h)):L=!1,h.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,D_(h),C.updater=Om,h.stateNode=C,C._reactInternals=h,N_(h,T,d,w),h=ex(null,h,T,!0,L,w)):(h.tag=0,vn&&L&&k_(h),Ki(null,h,C,w),h=h.child),h;case 16:T=h.elementType;e:{switch(d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),d=h.pendingProps,C=T._init,T=C(T._payload),h.type=T,C=h.tag=DB(T),d=Is(T,d),C){case 0:h=J_(null,h,T,d,w);break e;case 1:h=LA(null,h,T,d,w);break e;case 11:h=AA(null,h,T,d,w);break e;case 14:h=CA(null,h,T,Is(T.type,d),w);break e}throw Error(o(306,T,""))}return h;case 0:return T=h.type,C=h.pendingProps,C=h.elementType===T?C:Is(T,C),J_(d,h,T,C,w);case 1:return T=h.type,C=h.pendingProps,C=h.elementType===T?C:Is(T,C),LA(d,h,T,C,w);case 3:e:{if(DA(h),d===null)throw Error(o(387));T=h.pendingProps,L=h.memoizedState,C=L.element,Hb(d,h),Dm(h,T,null,w);var G=h.memoizedState;if(T=G.element,Se&&L.isDehydrated)if(L={element:T,isDehydrated:!1,cache:G.cache,transitions:G.transitions},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){C=Error(o(423)),h=OA(d,h,T,w,C);break e}else if(T!==C){C=Error(o(424)),h=OA(d,h,T,w,C);break e}else for(Se&&(Lr=Sm(h.stateNode.containerInfo),Ir=h,vn=!0,Ls=null,kd=!1),w=eA(h,null,T,w),h.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(xu(),T===C){h=ko(d,h,w);break e}Ki(d,h,T,w)}h=h.child}return h;case 5:return tA(h),d===null&&z_(h),T=h.type,C=h.pendingProps,L=d!==null?d.memoizedProps:null,G=C.children,ue(T,C)?G=null:L!==null&&ue(T,L)&&(h.flags|=32),IA(d,h),Ki(d,h,G,w),h.child;case 6:return d===null&&z_(h),null;case 13:return NA(d,h,w);case 4:return H_(h,h.stateNode.containerInfo),T=h.pendingProps,d===null?h.child=Su(h,null,T,w):Ki(d,h,T,w),h.child;case 11:return T=h.type,C=h.pendingProps,C=h.elementType===T?C:Is(T,C),AA(d,h,T,C,w);case 7:return Ki(d,h,h.pendingProps,w),h.child;case 8:return Ki(d,h,h.pendingProps.children,w),h.child;case 12:return Ki(d,h,h.pendingProps.children,w),h.child;case 10:e:{if(T=h.type._context,C=h.pendingProps,L=h.memoizedProps,G=C.value,Bb(h,T,G),L!==null)if(io(L.value,G)){if(L.children===C.children&&!On.current){h=ko(d,h,w);break e}}else for(L=h.child,L!==null&&(L.return=h);L!==null;){var J=L.dependencies;if(J!==null){G=L.child;for(var ge=J.firstContext;ge!==null;){if(ge.context===T){if(L.tag===1){ge=Lo(-1,w&-w),ge.tag=2;var Pe=L.updateQueue;if(Pe!==null){Pe=Pe.shared;var Ye=Pe.pending;Ye===null?ge.next=ge:(ge.next=Ye.next,Ye.next=ge),Pe.pending=ge}}L.lanes|=w,ge=L.alternate,ge!==null&&(ge.lanes|=w),L_(L.return,w,h),J.lanes|=w;break}ge=ge.next}}else if(L.tag===10)G=L.type===h.type?null:L.child;else if(L.tag===18){if(G=L.return,G===null)throw Error(o(341));G.lanes|=w,J=G.alternate,J!==null&&(J.lanes|=w),L_(G,w,h),G=L.sibling}else G=L.child;if(G!==null)G.return=L;else for(G=L;G!==null;){if(G===h){G=null;break}if(L=G.sibling,L!==null){L.return=G.return,G=L;break}G=G.return}L=G}Ki(d,h,C.children,w),h=h.child}return h;case 9:return C=h.type,T=h.pendingProps.children,vu(h,w),C=os(C),T=T(C),h.flags|=1,Ki(d,h,T,w),h.child;case 14:return T=h.type,C=Is(T,h.pendingProps),C=Is(T.type,C),CA(d,h,T,C,w);case 15:return RA(d,h,h.type,h.pendingProps,w);case 17:return T=h.type,C=h.pendingProps,C=h.elementType===T?C:Is(T,C),d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,fi(T)?(d=!0,Ti(h)):d=!1,vu(h,w),jb(h,T,C),N_(h,T,C,w),ex(null,h,T,!0,d,w);case 19:return zA(d,h,w);case 22:return PA(d,h,w)}throw Error(o(156,h.tag))};function c2(d,h){return M_(d,h)}function LB(d,h,w,T){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(d,h,w,T){return new LB(d,h,w,T)}function wx(d){return d=d.prototype,!(!d||!d.isReactComponent)}function DB(d){if(typeof d=="function")return wx(d)?1:0;if(d!=null){if(d=d.$$typeof,d===_)return 11;if(d===x)return 14}return 2}function Pa(d,h){var w=d.alternate;return w===null?(w=ds(d.tag,h,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=h,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,h=d.dependencies,w.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function pg(d,h,w,T,C,L){var G=2;if(T=d,typeof d=="function")wx(d)&&(G=1);else if(typeof d=="string")G=5;else e:switch(d){case u:return Xl(w.children,C,L,h);case f:G=8,C|=8;break;case p:return d=ds(12,w,h,C|2),d.elementType=p,d.lanes=L,d;case y:return d=ds(13,w,h,C),d.elementType=y,d.lanes=L,d;case g:return d=ds(19,w,h,C),d.elementType=g,d.lanes=L,d;case E:return mg(w,C,L,h);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case m:G=10;break e;case v:G=9;break e;case _:G=11;break e;case x:G=14;break e;case S:G=16,T=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return h=ds(G,w,h,C),h.elementType=d,h.type=T,h.lanes=L,h}function Xl(d,h,w,T){return d=ds(7,d,T,h),d.lanes=w,d}function mg(d,h,w,T){return d=ds(22,d,T,h),d.elementType=E,d.lanes=w,d.stateNode={},d}function Ex(d,h,w){return d=ds(6,d,null,h),d.lanes=w,d}function Tx(d,h,w){return h=ds(4,d.children!==null?d.children:[],d.key,h),h.lanes=w,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function OB(d,h,w,T,C){this.tag=h,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ze,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E_(0),this.expirationTimes=E_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E_(0),this.identifierPrefix=T,this.onRecoverableError=C,Se&&(this.mutableSourceEagerHydrationData=null)}function u2(d,h,w,T,C,L,G,J,ge){return d=new OB(d,h,w,J,ge),h===1?(h=1,L===!0&&(h|=8)):h=0,L=ds(3,null,null,h),d.current=L,L.stateNode=d,L.memoizedState={element:T,isDehydrated:w,cache:null,transitions:null},D_(L),d}function f2(d){if(!d)return rs;d=d._reactInternals;e:{if(O(d)!==d||d.tag!==1)throw Error(o(170));var h=d;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(fi(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(d.tag===1){var w=d.type;if(fi(w))return pu(d,w,h)}return h}function d2(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=U(h),d===null?null:d.stateNode}function h2(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<h?w:h}}function Mx(d,h){h2(d,h),(d=d.alternate)&&h2(d,h)}function NB(d){return d=U(d),d===null?null:d.stateNode}function kB(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var h=qi();fs(d,134217728,h),Mx(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var h=qi(),w=Ca(d);fs(d,w,h),Mx(d,w)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var h=d.stateNode;if(h.current.memoizedState.isDehydrated){var w=Od(h.pendingLanes);w!==0&&(T_(h,w|1),pr(h,di()),!(Ot&6)&&(Au(),ro()))}break;case 13:var T=qi();t2(function(){return fs(d,1,T)}),Mx(d,1)}},t.batchedUpdates=function(d,h){var w=Ot;Ot|=1;try{return d(h)}finally{Ot=w,Ot===0&&(Au(),Cm&&ro())}},t.createComponentSelector=function(d){return{$$typeof:eg,value:d}},t.createContainer=function(d,h,w,T,C,L,G){return u2(d,h,!1,null,w,T,C,L,G)},t.createHasPseudoClassSelector=function(d){return{$$typeof:tg,value:d}},t.createHydrationContainer=function(d,h,w,T,C,L,G,J,ge){return d=u2(w,T,!0,d,C,L,G,J,ge),d.context=f2(null),w=d.current,T=qi(),C=Ca(w),L=Lo(T,C),L.callback=h??null,Ma(w,L),d.current.lanes=C,Nd(d,C,T),pr(d,T),d},t.createPortal=function(d,h,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:T==null?null:""+T,children:d,containerInfo:h,implementation:w}},t.createRoleSelector=function(d){return{$$typeof:ng,value:d}},t.createTestNameSelector=function(d){return{$$typeof:ig,value:d}},t.createTextSelector=function(d){return{$$typeof:rg,value:d}},t.deferredUpdates=function(d){var h=$t,w=Wn.transition;try{return Wn.transition=null,$t=16,d()}finally{$t=h,Wn.transition=w}},t.discreteUpdates=function(d,h,w,T,C){var L=$t,G=Wn.transition;try{return Wn.transition=null,$t=1,d(h,w,T,C)}finally{$t=L,Wn.transition=G,Ot===0&&Au()}},t.findAllNodes=fx,t.findBoundingRects=function(d,h){if(!k)throw Error(o(363));h=fx(d,h),d=[];for(var w=0;w<h.length;w++)d.push(Te(h[w]));for(h=d.length-1;0<h;h--){w=d[h];for(var T=w.x,C=T+w.width,L=w.y,G=L+w.height,J=h-1;0<=J;J--)if(h!==J){var ge=d[J],Pe=ge.x,Ye=Pe+ge.width,wt=ge.y,ct=wt+ge.height;if(T>=Pe&&L>=wt&&C<=Ye&&G<=ct){d.splice(h,1);break}else if(T!==Pe||w.width!==ge.width||ct<L||wt>G){if(!(L!==wt||w.height!==ge.height||Ye<T||Pe>C)){Pe>T&&(ge.width+=Pe-T,ge.x=T),Ye<C&&(ge.width=C-Pe),d.splice(h,1);break}}else{wt>L&&(ge.height+=wt-L,ge.y=L),ct<G&&(ge.height=G-wt),d.splice(h,1);break}}}return d},t.findHostInstance=d2,t.findHostInstanceWithNoPortals=function(d){return d=I(d),d=d!==null?z(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return d2(d)},t.flushControlled=function(d){var h=Ot;Ot|=1;var w=Wn.transition,T=$t;try{Wn.transition=null,$t=1,d()}finally{$t=T,Wn.transition=w,Ot=h,Ot===0&&(Au(),ro())}},t.flushPassiveEffects=jl,t.flushSync=t2,t.focusWithin=function(d,h){if(!k)throw Error(o(363));for(d=lx(d),h=QA(d,h),h=Array.from(h),d=0;d<h.length;){var w=h[d++];if(!le(w)){if(w.tag===5&&be(w.stateNode))return!0;for(w=w.child;w!==null;)h.push(w),w=w.sibling}}return!1},t.getCurrentUpdatePriority=function(){return $t},t.getFindAllNodesFailureDescription=function(d,h){if(!k)throw Error(o(363));var w=0,T=[];d=[lx(d),0];for(var C=0;C<d.length;){var L=d[C++],G=d[C++],J=h[G];if((L.tag!==5||!le(L))&&(cx(L,J)&&(T.push(ux(J)),G++,G>w&&(w=G)),G<h.length))for(L=L.child;L!==null;)d.push(L,G),L=L.sibling}if(w<h.length){for(d=[];w<h.length;w++)d.push(ux(h[w]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return q(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:NB,findFiberByHostInstance:d.findFiberByHostInstance||kB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)d=!0;else{try{Am=h.inject(d),no=h}catch{}d=!!h.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,h,w,T){if(!k)throw Error(o(363));d=fx(d,h);var C=Oe(d,w,T).disconnect;return{disconnect:function(){C()}}},t.registerMutableSourceForHydration=function(d,h){var w=h._getVersion;w=w(h._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[h,w]:d.mutableSourceEagerHydrationData.push(h,w)},t.runWithPriority=function(d,h){var w=$t;try{return $t=d,h()}finally{$t=w}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,h,w,T){var C=h.current,L=qi(),G=Ca(C);return w=f2(w),h.context===null?h.context=w:h.pendingContext=w,h=Lo(L,G),h.payload={element:d},T=T===void 0?null:T,T!==null&&(h.callback=T),Ma(C,h),d=fs(C,G,L),d!==null&&Lm(d,C,G),G},t};pk.exports=nY;var iY=pk.exports;const rY=cd(iY);var mk={exports:{}},gk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,V){var W=N.length;N.push(V);e:for(;0<W;){var Q=W-1>>>1,ie=N[Q];if(0<r(ie,V))N[Q]=V,N[W]=ie,W=Q;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var V=N[0],W=N.pop();if(W!==V){N[0]=W;e:for(var Q=0,ie=N.length,Me=ie>>>1;Q<Me;){var te=2*(Q+1)-1,ue=N[te],xe=te+1,Re=N[xe];if(0>r(ue,W))xe<ie&&0>r(Re,ue)?(N[Q]=Re,N[xe]=W,Q=xe):(N[Q]=ue,N[te]=W,Q=te);else if(xe<ie&&0>r(Re,W))N[Q]=Re,N[xe]=W,Q=xe;else break e}}return V}function r(N,V){var W=N.sortIndex-V.sortIndex;return W!==0?W:N.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(N){for(var V=t(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=N)i(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(c)}}function E(N){if(_=!1,S(N),!v)if(t(l)!==null)v=!0,q(b);else{var V=t(c);V!==null&&ee(E,V.startTime-N)}}function b(N,V){v=!1,_&&(_=!1,g(D),D=-1),m=!0;var W=p;try{for(S(V),f=t(l);f!==null&&(!(f.expirationTime>V)||N&&!I());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,p=f.priorityLevel;var ie=Q(f.expirationTime<=V);V=n.unstable_now(),typeof ie=="function"?f.callback=ie:f===t(l)&&i(l),S(V)}else i(l);f=t(l)}if(f!==null)var Me=!0;else{var te=t(c);te!==null&&ee(E,te.startTime-V),Me=!1}return Me}finally{f=null,p=W,m=!1}}var A=!1,R=null,D=-1,O=5,M=-1;function I(){return!(n.unstable_now()-M<O)}function U(){if(R!==null){var N=n.unstable_now();M=N;var V=!0;try{V=R(!0,N)}finally{V?j():(A=!1,R=null)}}else A=!1}var j;if(typeof x=="function")j=function(){x(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,K=z.port2;z.port1.onmessage=U,j=function(){K.postMessage(null)}}else j=function(){y(U,0)};function q(N){R=N,A||(A=!0,j())}function ee(N,V){D=y(function(){N(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,q(b))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var W=p;p=V;try{return N()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=p;p=N;try{return V()}finally{p=W}},n.unstable_scheduleCallback=function(N,V,W){var Q=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Q+W:Q):W=Q,N){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=W+ie,N={id:u++,callback:V,priorityLevel:N,startTime:W,expirationTime:ie,sortIndex:-1},W>Q?(N.sortIndex=W,e(c,N),t(l)===null&&N===t(c)&&(_?(g(D),D=-1):_=!0,ee(E,W-Q))):(N.sortIndex=ie,e(l,N),v||m||(v=!0,q(b))),N},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(N){var V=p;return function(){var W=p;p=V;try{return N.apply(this,arguments)}finally{p=W}}}})(gk);mk.exports=gk;var hP=mk.exports;const sY=n=>typeof n=="object"&&typeof n.then=="function",Tc=[];function vk(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function yk(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Tc)if(vk(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Tc.indexOf(r);s!==-1&&Tc.splice(s,1)},promise:(sY(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Tc.push(r),!t)throw r.promise}const oY=(n,e,t)=>yk(n,e,!1,t),aY=(n,e,t)=>void yk(n,e,!0,t),lY=n=>{if(n===void 0||n.length===0)Tc.splice(0,Tc.length);else{const e=Tc.find(t=>vk(n,t.keys,t.equal));e&&e.remove()}},WM={},_k=n=>void Object.assign(WM,n);function cY(n,e){function t(u,{args:f=[],attach:p,...m},v){let _=`${u[0].toUpperCase()}${u.slice(1)}`,y;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;y=nf(g,{type:u,root:v,attach:p,primitive:!0})}else{const g=WM[_];if(!g)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=nf(new g(...f),{type:u,root:v,attach:p,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof Mt?y.__r3f.attach="geometry":y instanceof Bn&&(y.__r3f.attach="material")),_!=="inject"&&B1(y,m),y}function i(u,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?z1(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),p=!0),p||(v=u.__r3f)==null||v.objects.push(f),f.__r3f||nf(f,{}),f.__r3f.parent=u,uE(f),rf(f)}}function r(u,f,p){let m=!1;if(f){var v,_;if((v=f.__r3f)!=null&&v.attach)z1(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"});const y=u.children.filter(x=>x!==f),g=y.indexOf(p);u.children=[...y.slice(0,g),f,...y.slice(g)],m=!0}m||(_=u.__r3f)==null||_.objects.push(f),f.__r3f||nf(f,{}),f.__r3f.parent=u,uE(f),rf(f)}}function s(u,f,p=!1){u&&[...u].forEach(m=>o(f,m,p))}function o(u,f,p){if(f){var m,v,_;if(f.__r3f&&(f.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(E=>E!==f)),(v=f.__r3f)!=null&&v.attach)yP(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var y;u.remove(f),(y=f.__r3f)!=null&&y.root&&yY(iv(f),f)}const x=(_=f.__r3f)==null?void 0:_.primitive,S=!x&&(p===void 0?f.dispose!==null:p);if(!x){var g;s((g=f.__r3f)==null?void 0:g.objects,f,S),s(f.children,f,S)}if(delete f.__r3f,S&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?hP.unstable_scheduleCallback(hP.unstable_IdlePriority,E):E()}rf(u)}}function a(u,f,p,m){var v;const _=(v=u.__r3f)==null?void 0:v.parent;if(!_)return;const y=t(f,p,u.__r3f.root);if(u.children){for(const g of u.children)g.__r3f&&i(y,g);u.children=u.children.filter(g=>!g.__r3f)}u.__r3f.objects.forEach(g=>i(y,g)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(_,u),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),i(_,y),y.raycast&&y.__r3f.eventCount&&iv(y).getState().internal.interaction.push(y),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=y,g.ref&&(typeof g.ref=="function"?g.ref(y):g.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:rY({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,i(p,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,p)=>{if(!f||!p)return;const m=u.getState().scene;m.__r3f&&r(m,f,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,p,m){var v;if(((v=u==null?void 0:u.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:y=[],children:g,...x}=m,{args:S=[],children:E,...b}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((R,D)=>R!==S[D]))return[!0];const A=bk(u,x,b,!0);return A.changes.length?[!1,A]:null}},commitUpdate(u,[f,p],m,v,_,y){f?a(u,m,_,y):B1(u,p)},commitMount(u,f,p,m){var v;const _=(v=u.__r3f)!=null?v:{};u.raycast&&_.handlers&&_.eventCount&&iv(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>nf(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:p,parent:m}=(f=u.__r3f)!=null?f:{};p&&m&&yP(m,u,p),u.isObject3D&&(u.visible=!1),rf(u)},unhideInstance(u,f){var p;const{attach:m,parent:v}=(p=u.__r3f)!=null?p:{};m&&v&&z1(v,u,m),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),rf(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Sf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&pn.fun(performance.now)?performance.now:pn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:pn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:pn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:B1}}var pP,mP;const F1=n=>"colorSpace"in n||"outputColorSpace"in n,xk=()=>{var n;return(n=WM.ColorManagement)!=null?n:null},Sk=n=>n&&n.isOrthographicCamera,uY=n=>n&&n.hasOwnProperty("current"),wd=typeof window<"u"&&((pP=window.document)!=null&&pP.createElement||((mP=window.navigator)==null?void 0:mP.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function wk(n){const e=P.useRef(n);return wd(()=>void(e.current=n),[n]),e}function fY({set:n}){return wd(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class Ek extends P.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Ek.getDerivedStateFromError=()=>({error:!0});const Tk="__default",gP=new Map,dY=n=>n&&!!n.memoized&&!!n.changes;function Mk(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const _h=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function iv(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const pn={obj:n=>n===Object(n)&&!pn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(pn.str(n)||pn.num(n))return n===e;const s=pn.obj(n);if(s&&i==="reference")return n===e;const o=pn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!pn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(pn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function hY(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function pY(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function nf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function cE(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const vP=/-\d+$/;function z1(n,e,t){if(pn.str(t)){if(vP.test(t)){const s=t.replace(vP,""),{target:o,key:a}=cE(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=cE(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function yP(n,e,t){var i,r;if(pn.str(t)){const{target:s,key:o}=cE(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function bk(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var u;const f=(u=n==null?void 0:n.__r3f)!=null?u:{},p=Object.entries(r),m=[];if(c){const _=Object.keys(l);for(let y=0;y<_.length;y++)r.hasOwnProperty(_[y])||p.unshift([_[y],Tk+"remove"])}p.forEach(([_,y])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&_==="object"||pn.equ(y,l[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return m.push([_,y,!0,[]]);let x=[];_.includes("-")&&(x=_.split("-")),m.push([_,y,!1,x]);for(const S in r){const E=r[S];S.startsWith(`${_}-`)&&m.push([S,E,!1,S.split("-")])}});const v={...r};return f.memoizedProps&&f.memoizedProps.args&&(v.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(v.attach=f.memoizedProps.attach),{memoized:v,changes:m}}const mY=typeof process<"u"&&!1;function B1(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=dY(e)?e:bk(n,e),u=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,v,_,y]=c[p];if(F1(n)){const E="srgb",b="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?E:b):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?E:b)}let g=n,x=g[m];if(y.length&&(x=y.reduce((S,E)=>S[E],n),!(x&&x.set))){const[S,...E]=y.reverse();g=E.reverse().reduce((b,A)=>b[A],n),m=S}if(v===Tk+"remove")if(g.constructor){let S=gP.get(g.constructor);S||(S=new g.constructor,gP.set(g.constructor,S)),v=S[m]}else v=0;if(_)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Ic)){if(Array.isArray(v))x.fromArray?x.fromArray(v):x.set(...v);else if(x.copy&&v&&v.constructor&&(mY?x.constructor.name===v.constructor.name:x.constructor===v.constructor))x.copy(v);else if(v!==void 0){const S=x instanceof Ie;!S&&x.setScalar?x.setScalar(v):x instanceof Ic&&v instanceof Ic?x.mask=v.mask:x.set(v),!xk()&&!a.linear&&S&&x.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof rn&&g[m].format===ir&&g[m].type===Kn){const S=g[m];F1(S)&&F1(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}rf(n)}if(s.parent&&n.raycast&&u!==s.eventCount){const p=iv(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),s.eventCount&&p.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=n.__r3f)!=null&&r.parent&&uE(n),n}function rf(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function uE(n){n.onUpdate==null||n.onUpdate(n)}function gY(n,e){n.manual||(Sk(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function T0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function vY(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Sf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Sf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Sf.ContinuousEventPriority;default:return Sf.DefaultEventPriority}}function Ak(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function yY(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{Ak(t.capturedMap,e,i,r)})}function _Y(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),f=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<m.length;g++){const x=_h(m[g]);x&&(x.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(g){const x=_h(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var S;x.events.compute==null||x.events.compute(l,x,(S=x.previousRoot)==null?void 0:S.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let _=m.flatMap(v).sort((g,x)=>{const S=_h(g.object),E=_h(x.object);return!S||!E?g.distance-x.distance:E.events.priority-S.events.priority||g.distance-x.distance}).filter(g=>{const x=T0(g);return f.has(x)?!1:(f.add(x),!0)});u.events.filter&&(_=u.events.filter(_,u));for(const g of _){let x=g.object;for(;x;){var y;(y=x.__r3f)!=null&&y.eventCount&&p.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())f.has(T0(g.intersection))||p.push(g.intersection);return p}function r(l,c,u,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const _=_h(v.object)||p,{raycaster:y,pointer:g,camera:x,internal:S}=_,E=new H(g.x,g.y,0).unproject(x),b=M=>{var I,U;return(I=(U=S.capturedMap.get(M))==null?void 0:U.has(v.eventObject))!=null?I:!1},A=M=>{const I={intersection:v,target:c.target};S.capturedMap.has(M)?S.capturedMap.get(M).set(v.eventObject,I):S.capturedMap.set(M,new Map([[v.eventObject,I]])),c.target.setPointerCapture(M)},R=M=>{const I=S.capturedMap.get(M);I&&Ak(S.capturedMap,v.eventObject,I,M)};let D={};for(let M in c){let I=c[M];typeof I!="function"&&(D[M]=I)}let O={...v,...D,pointer:g,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:E,ray:y.ray,camera:x,stopPropagation(){const M="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!M||M.has(v.eventObject))&&(O.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(I=>I.eventObject===v.eventObject))){const I=l.slice(0,l.indexOf(v));s([...I,v])}},target:{hasPointerCapture:b,setPointerCapture:A,releasePointerCapture:R},currentTarget:{hasPointerCapture:b,setPointerCapture:A,releasePointerCapture:R},nativeEvent:c};if(f(O),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(T0(u)),p!=null&&p.eventCount){const v={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=u;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=i(u,m?t:void 0),g=v?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=y.map(S=>S.eventObject)),v&&!y.length&&g<=2&&(o(u,p.interaction),f&&f(u)),m&&s(y);function x(S){const E=S.eventObject,b=E.__r3f,A=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(m){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const R=T0(S),D=p.hovered.get(R);D?D.stopped&&S.stopPropagation():(p.hovered.set(R,S),A.onPointerOver==null||A.onPointerOver(S),A.onPointerEnter==null||A.onPointerEnter(S))}A.onPointerMove==null||A.onPointerMove(S)}else{const R=A[l];R?(!v||p.initialHits.includes(E))&&(o(u,p.interaction.filter(D=>!p.initialHits.includes(D))),R(S)):v&&p.initialHits.includes(E)&&o(u,p.interaction.filter(D=>!p.initialHits.includes(D)))}}r(y,u,g,x)}}return{handlePointer:a}}const Ck=n=>!!(n!=null&&n.render),Rk=P.createContext(null),xY=(n,e)=>{const t=hk((a,l)=>{const c=new H,u=new H,f=new H;function p(g=l().camera,x=u,S=l().size){const{width:E,height:b,top:A,left:R}=S,D=E/b;x instanceof H?f.copy(x):f.set(...x);const O=g.getWorldPosition(c).distanceTo(f);if(Sk(g))return{width:E/g.zoom,height:b/g.zoom,top:A,left:R,factor:1,distance:O,aspect:D};{const M=g.fov*Math.PI/180,I=2*Math.tan(M/2)*O,U=I*(E/b);return{width:U,height:I,top:A,left:R,factor:E/U,distance:O,aspect:D}}}let m;const v=g=>a(x=>({performance:{...x.performance,current:g}})),_=new he;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new HM,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,S,E,b)=>{const A=l().camera,R={width:g,height:x,top:E||0,left:b||0,updateStyle:S};a(D=>({size:R,viewport:{...D.viewport,...p(A,u,R)}}))},setDpr:g=>a(x=>{const S=Mk(g);return{viewport:{...x.viewport,dpr:S,initialDpr:x.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:P.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,S)=>{const E=l().internal;return E.priority=E.priority+(x>0?1:0),E.subscribers.push({ref:g,priority:x,store:S}),E.subscribers=E.subscribers.sort((b,A)=>b.priority-A.priority),()=>{const b=l().internal;b!=null&&b.subscribers&&(b.priority=b.priority-(x>0?1:0),b.subscribers=b.subscribers.filter(A=>A.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var p;r=l,s=c.dpr,gY(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let M0,SY=new Set,wY=new Set,EY=new Set;function H1(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function xh(n,e){switch(n){case"before":return H1(SY,e);case"after":return H1(wY,e);case"tail":return H1(EY,e)}}let V1,G1;function W1(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),V1=e.internal.subscribers,M0=0;M0<V1.length;M0++)G1=V1[M0],G1.ref.current(G1.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function TY(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,xh("before",l);for(const u of n.values()){var c;r=u.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(t+=W1(l,r))}if(xh("after",l),t===0)return xh("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var u;if(!l)return n.forEach(f=>o(f.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,f){if(c&&xh("before",l),u)W1(l,u,f);else for(const p of n.values())W1(l,p.store.getState());c&&xh("after",l)}return{loop:s,invalidate:o,advance:a}}function MY(n){const e=P.useRef(null);return wd(()=>void(e.current=n.current.__r3f),[n]),e}function Pk(){const n=P.useContext(Rk);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function zs(n=t=>t,e){return Pk()(n,e)}function Vv(n,e=0){const t=Pk(),i=t.getState().internal.subscribe,r=wk(n);return wd(()=>i(r,e,t),[e,i,t]),null}const _P=new WeakMap;function Ik(n,e){return function(t,...i){let r=_P.get(t);return r||(r=new t,_P.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,hY(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>r.dispose==null?void 0:r.dispose())}}function $M(n,e,t,i){const r=Array.isArray(e)?e:[e],s=oY(Ik(t,i),[n,...r],{equal:pn.equ});return Array.isArray(e)?s:s[0]}$M.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return aY(Ik(t),[n,...i])};$M.clear=function(n,e){const t=Array.isArray(e)?e:[e];return lY([n,...t])};const Jf=new Map,{invalidate:xP,advance:SP}=TY(Jf),{reconciler:Gv,applyProps:qu}=cY(Jf,vY),Zu={objects:"shallow",strict:!1},bY=(n,e)=>{const t=typeof n=="function"?n(e):n;return Ck(t)?t:new _M({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function AY(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function CY(n){const e=Jf.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||xY(xP,SP),o=t||Gv.createContainer(s,Sf.ConcurrentRoot,null,!1,null,"",r,null);e||Jf.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:p,scene:m,events:v,onCreated:_,shadows:y=!1,linear:g=!1,flat:x=!1,legacy:S=!1,orthographic:E=!1,frameloop:b="always",dpr:A=[1,2],performance:R,raycaster:D,camera:O,onPointerMissed:M}=u,I=s.getState(),U=I.gl;I.gl||I.set({gl:U=bY(f,n)});let j=I.raycaster;j||I.set({raycaster:j=new uk});const{params:z,...K}=D||{};if(pn.equ(K,j,Zu)||qu(j,{...K}),pn.equ(z,j.params,Zu)||qu(j,{params:{...j.params,...z}}),!I.camera||I.camera===c&&!pn.equ(c,O,Zu)){c=O;const ie=O instanceof gd,Me=ie?O:E?new _o(0,0,0,0,.1,1e3):new cn(75,0,.1,1e3);ie||(Me.position.z=5,O&&qu(Me,O),!I.camera&&!(O!=null&&O.rotation)&&Me.lookAt(0,0,0)),I.set({camera:Me}),j.camera=Me}if(!I.scene){let ie;m instanceof Zf?ie=m:(ie=new Zf,m&&qu(ie,m)),I.set({scene:nf(ie)})}if(!I.xr){var q;const ie=(ue,xe)=>{const Re=s.getState();Re.frameloop!=="never"&&SP(ue,!0,Re,xe)},Me=()=>{const ue=s.getState();ue.gl.xr.enabled=ue.gl.xr.isPresenting,ue.gl.xr.setAnimationLoop(ue.gl.xr.isPresenting?ie:null),ue.gl.xr.isPresenting||xP(ue)},te={connect(){const ue=s.getState().gl;ue.xr.addEventListener("sessionstart",Me),ue.xr.addEventListener("sessionend",Me)},disconnect(){const ue=s.getState().gl;ue.xr.removeEventListener("sessionstart",Me),ue.xr.removeEventListener("sessionend",Me)}};typeof((q=U.xr)==null?void 0:q.addEventListener)=="function"&&te.connect(),I.set({xr:te})}if(U.shadowMap){const ie=U.shadowMap.enabled,Me=U.shadowMap.type;if(U.shadowMap.enabled=!!y,pn.boo(y))U.shadowMap.type=Wh;else if(pn.str(y)){var ee;const te={basic:cO,percentage:Dy,soft:Wh,variance:Fs};U.shadowMap.type=(ee=te[y])!=null?ee:Wh}else pn.obj(y)&&Object.assign(U.shadowMap,y);(ie!==U.shadowMap.enabled||Me!==U.shadowMap.type)&&(U.shadowMap.needsUpdate=!0)}const N=xk();N&&("enabled"in N?N.enabled=!S:"legacyMode"in N&&(N.legacyMode=S)),qu(U,{outputEncoding:g?3e3:3001,toneMapping:x?$s:eM}),I.legacy!==S&&I.set(()=>({legacy:S})),I.linear!==g&&I.set(()=>({linear:g})),I.flat!==x&&I.set(()=>({flat:x})),f&&!pn.fun(f)&&!Ck(f)&&!pn.equ(f,U,Zu)&&qu(U,f),v&&!I.events.handlers&&I.set({events:v(s)});const Q=AY(n,p);return pn.equ(Q,I.size,Zu)||I.setSize(Q.width,Q.height,Q.updateStyle,Q.top,Q.left),A&&I.viewport.dpr!==Mk(A)&&I.setDpr(A),I.frameloop!==b&&I.setFrameloop(b),I.onPointerMissed||I.set({onPointerMissed:M}),R&&!pn.equ(R,I.performance,Zu)&&I.set(ie=>({performance:{...ie.performance,...R}})),a=_,l=!0,this},render(u){return l||this.configure(),Gv.updateContainer(P.createElement(RY,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){Lk(n)}}}function RY({store:n,children:e,onCreated:t,rootElement:i}){return wd(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),P.createElement(Rk.Provider,{value:n},e)}function Lk(n,e){const t=Jf.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Gv.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),pY(r),Jf.delete(n),e&&e(n)}catch{}},500)})}}Gv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:P.version});function Hn(){return Hn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Hn.apply(this,arguments)}function fE(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=t&&!i;return i||(i=setTimeout(l,e)),u&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}fE.debounce=fE;var PY=fE;const wP=cd(PY);function IY(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=P.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=P.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=P.useRef(!1);P.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,m,v]=P.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:S,top:E,width:b,height:A,bottom:R,right:D,x:O,y:M}=l.current.element.getBoundingClientRect(),I={left:S,top:E,width:b,height:A,bottom:R,right:D,x:O,y:M};l.current.element instanceof HTMLElement&&r&&(I.height=l.current.element.offsetHeight,I.width=l.current.element.offsetWidth),Object.freeze(I),f.current&&!NY(l.current.lastBounds,I)&&a(l.current.lastBounds=I)};return[x,u?wP(x,u):x,c?wP(x,c):x]},[a,r,c,u]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=x=>{!x||x===l.current.element||(_(),l.current.element=x,l.current.scrollContainers=Dk(x),y())};return DY(v,!!t),LY(m),P.useEffect(()=>{_(),y()},[t,v,m]),P.useEffect(()=>_,[]),[g,o,p]}function LY(n){P.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function DY(n,e){P.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Dk(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Dk(n.parentElement)]}const OY=["x","y","top","bottom","left","right","width","height"],NY=(n,e)=>OY.every(t=>n[t]===e[t]);var kY=Object.defineProperty,UY=Object.defineProperties,FY=Object.getOwnPropertyDescriptors,EP=Object.getOwnPropertySymbols,zY=Object.prototype.hasOwnProperty,BY=Object.prototype.propertyIsEnumerable,TP=(n,e,t)=>e in n?kY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,MP=(n,e)=>{for(var t in e||(e={}))zY.call(e,t)&&TP(n,t,e[t]);if(EP)for(var t of EP(e))BY.call(e,t)&&TP(n,t,e[t]);return n},HY=(n,e)=>UY(n,FY(e));function Ok(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=Ok(i,e,t);if(r)return r;i=e?null:i.sibling}}function Nk(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const jM=Nk(P.createContext(null));class kk extends P.Component{render(){return P.createElement(jM.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:bP,ReactCurrentDispatcher:AP}=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function VY(){const n=P.useContext(jM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=P.useId();return P.useMemo(()=>{for(const i of[bP==null?void 0:bP.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=Ok(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function GY(){var n,e;const t=VY(),[i]=P.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==jM&&!i.has(s)&&i.set(s,(e=AP==null?void 0:AP.current)==null?void 0:e.readContext(Nk(s))),r=r.return}return i}function WY(){const n=GY();return P.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>P.createElement(e,null,P.createElement(t.Provider,HY(MP({},i),{value:n.get(t)}))),e=>P.createElement(kk,MP({},e))),[n])}const $1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function $Y(n){const{handlePointer:e}=_Y(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys($1).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=$1[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=$1[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const jY=P.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=$Y,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:g,camera:x,scene:S,onPointerMissed:E,onCreated:b,...A},R){P.useMemo(()=>_k(ZX),[]);const D=WY(),[O,M]=IY({scroll:!0,debounce:{scroll:50,resize:0},...i}),I=P.useRef(null),U=P.useRef(null);P.useImperativeHandle(R,()=>I.current);const j=wk(E),[z,K]=P.useState(!1),[q,ee]=P.useState(!1);if(z)throw z;if(q)throw q;const N=P.useRef(null);wd(()=>{const W=I.current;M.width>0&&M.height>0&&W&&(N.current||(N.current=CY(W)),N.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:g,camera:x,scene:S,size:M,onPointerMissed:(...Q)=>j.current==null?void 0:j.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(a?uY(a)?a.current:a:U.current),l&&Q.setEvents({compute:(ie,Me)=>{const te=ie[l+"X"],ue=ie[l+"Y"];Me.pointer.set(te/Me.size.width*2-1,-(ue/Me.size.height)*2+1),Me.raycaster.setFromCamera(Me.pointer,Me.camera)}}),b==null||b(Q)}}),N.current.render(P.createElement(D,null,P.createElement(Ek,{set:ee},P.createElement(P.Suspense,{fallback:P.createElement(fY,{set:K})},e)))))}),P.useEffect(()=>{const W=I.current;if(W)return()=>Lk(W)},[]);const V=a?"none":"auto";return P.createElement("div",Hn({ref:U,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...r}},A),P.createElement("div",{ref:O,style:{width:"100%",height:"100%"}},P.createElement("canvas",{ref:I,style:{display:"block"}},t)))}),XY=P.forwardRef(function(e,t){return P.createElement(kk,null,P.createElement(jY,Hn({},e,{ref:t})))});function YY(n,e,t){return Math.max(e,Math.min(n,t))}const Vi={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function CP(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function RP(n,e,t,i=.15){return i===0?YY(n,e,t):n<e?-CP(e-n,t-e,i)+e:n>t?+CP(n-t,t-e,i)+t:n}function KY(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[RP(e,s,o,i),RP(t,a,l,r)]}function qY(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZY(n){var e=qY(n,"string");return typeof e=="symbol"?e:String(e)}function vr(n,e,t){return e=ZY(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function In(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(t),!0).forEach(function(i){vr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PP(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const Uk={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function IP(n){return n?n[0].toUpperCase()+n.slice(1):""}const QY=["enter","leave"];function JY(n=!1,e){return n&&!QY.includes(e)}function eK(n,e="",t=!1){const i=Uk[n],r=i&&i[e]||e;return"on"+IP(n)+IP(r)+(JY(t,r)?"Capture":"")}const tK=["gotpointercapture","lostpointercapture"];function nK(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=tK.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function iK(n,e=""){const t=Uk[n],i=t&&t[e]||e;return n+i}function l_(n){return"touches"in n}function Fk(n){return l_(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function rK(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function sK(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function zk(n){return l_(n)?sK(n)[0]:n}function oK(n){return rK(n).map(e=>e.identifier)}function j1(n){const e=zk(n);return l_(n)?e.identifier:e.pointerId}function LP(n){const e=zk(n);return[e.clientX,e.clientY]}function aK(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function Wv(n,...e){return typeof n=="function"?n(...e):n}function lK(){}function cK(...n){return n.length===0?lK:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function DP(n,e){return Object.assign({},e,n||{})}const uK=32;class fK{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?Wv(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,aK(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const A=t._delta.map(Math.abs);Vi.addTo(t._distance,A)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=i.threshold,{_step:u,values:f}=t;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[A,R]=f;p[0]=u[0]!==!1?A-u[0]:0,p[1]=u[1]!==!1?R-u[1]:0}else p[0]=u[0]!==!1?o-u[0]:0,p[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const m=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=Wv(i.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[_,y]=t.offset,[[g,x],[S,E]]=t._bounds;t.overflow=[_<g?-1:_>x?1:0,y<S?-1:y>E?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const b=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=KY(t._bounds,t.offset,b),t.delta=Vi.sub(t.offset,m),this.computeMovement(),v&&(!t.last||s>uK)){t.delta=Vi.sub(t.offset,m);const A=t.delta.map(Math.abs);Vi.addTo(t.distance,A),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[A[0]/s,A[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(In(In(In({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function dK([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class hK extends fK{constructor(...e){super(...e),vr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Vi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Vi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[Fk(e)]:i.axisThreshold;t.axis=dK(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const pK=n=>n,OP=.15,Bk={enabled(n=!0){return n},eventOptions(n,e,t){return In(In({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[OP,OP];case!1:return[0,0];default:return Vi.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Vi.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||pK},threshold(n){return Vi.toVector(n,0)}},mK=0,fm=In(In({},Bk),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=mK){return n},bounds(n={}){if(typeof n=="function")return s=>fm.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),NP={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class gK extends hK{constructor(...e){super(...e),vr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=fm.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=j1(e),i._pointerActive=!0,this.computeValues(LP(e)),this.computeInitial(),t.preventScrollAxis&&Fk(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=j1(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=LP(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Vi.sub(s,t._values),this.computeValues(s)),Vi.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=j1(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[f,p]=i.swipe.velocity,[m,v]=i.swipe.distance,_=i.swipe.duration;if(t.elapsedTime<_){const y=Math.abs(a/t.timeDelta),g=Math.abs(l/t.timeDelta);y>f&&Math.abs(c)>m&&(t.swipe[0]=Math.sign(a)),g>p&&Math.abs(u)>v&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,vK(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=NP[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,Vi.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in NP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function vK(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const dm=typeof window<"u"&&window.document&&window.document.createElement;function Hk(){return dm&&"ontouchstart"in window}function yK(){return Hk()||dm&&window.navigator.maxTouchPoints>1}function _K(){return dm&&"onpointerdown"in window}function xK(){return dm&&"exitPointerLock"in window.document}function SK(){try{return"constructor"in GestureEvent}catch{return!1}}const _s={isBrowser:dm,gesture:SK(),touch:Hk(),touchscreen:yK(),pointer:_K(),pointerLock:xK()},wK=250,EK=180,TK=.5,MK=50,bK=250,AK=10,kP={mouse:0,touch:0,pen:8},CK=In(In({},fm),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&_s.pointerLock,_s.touch&&t?"touch":this.pointerLock?"mouse":_s.pointer&&!r?"pointer":_s.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?wK:void 0,!(!_s.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=Vi.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=TK,distance:e=MK,duration:t=bK}={}){return{velocity:this.transform(Vi.toVector(n)),distance:this.transform(Vi.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return EK;case!1:return 0;default:return n}},axisThreshold(n){return n?In(In({},kP),n):kP},keyboardDisplacement(n=AK){return n}});In(In({},Bk),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!_s.touch&&_s.gesture)return"gesture";if(_s.touch&&i)return"touch";if(_s.touchscreen){if(_s.pointer)return"pointer";if(_s.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=DP(Wv(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=DP(Wv(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Vi.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});In(In({},fm),{},{mouseOnly:(n=!0)=>n});In(In({},fm),{},{mouseOnly:(n=!0)=>n});const Vk=new Map,dE=new Map;function RK(n){Vk.set(n.key,n.engine),dE.set(n.key,n.resolver)}const PK={key:"drag",engine:gK,resolver:CK};function IK(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function LK(n,e){if(n==null)return{};var t=IK(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const DK={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=_s.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},OK=["target","eventOptions","window","enabled","transform"];function rv(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=rv(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function NK(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=LK(i,OK);if(t.shared=rv({target:r,eventOptions:s,window:o,enabled:a,transform:l},DK),e){const u=dE.get(e);t[e]=rv(In({shared:t.shared},c),u)}else for(const u in c){const f=dE.get(u);f&&(t[u]=rv(In({shared:t.shared},c[u]),f))}return t}class Gk{constructor(e,t){vr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=iK(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=In(In({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class kK{constructor(){vr(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class UK{constructor(e){vr(this,"gestures",new Set),vr(this,"_targetEventStore",new Gk(this)),vr(this,"gestureEventStores",{}),vr(this,"gestureTimeoutStores",{}),vr(this,"handlers",{}),vr(this,"config",{}),vr(this,"pointerIds",new Set),vr(this,"touchIds",new Set),vr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),FK(this,e)}setEventIds(e){if(l_(e))return this.touchIds=new Set(oK(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=NK(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=UP(i,a.eventOptions,!!r);if(a.enabled){const c=Vk.get(o);new c(this,e,o).bind(l)}}const s=UP(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](In(In({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=cK(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=nK(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}}function Qu(n,e){n.gestures.add(e),n.gestureEventStores[e]=new Gk(n,e),n.gestureTimeoutStores[e]=new kK}function FK(n,e){e.drag&&Qu(n,"drag"),e.wheel&&Qu(n,"wheel"),e.scroll&&Qu(n,"scroll"),e.move&&Qu(n,"move"),e.pinch&&Qu(n,"pinch"),e.hover&&Qu(n,"hover")}const UP=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=a?i:eK(i,r,u);t&&f&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)};function zK(n,e={},t,i){const r=X.useMemo(()=>new UK(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),X.useEffect(r.effect.bind(r)),X.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function BK(n,e){return RK(PK),zK({drag:n},e||{},"drag")}const HK=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let f=o(i.getState());c=p=>{const m=o(p);if(!u(f,m)){const v=f;a(f=m,v)}},l!=null&&l.fireImmediately&&a(f,f)}return r(c)},n(e,t,i)};let Sh;function VK(){var n;if(Sh!==void 0)return Sh;try{let e;const t=document.createElement("canvas");return Sh=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))==null||n.loseContext()),Sh}catch{return Sh=!1}}var GK=Object.defineProperty,WK=(n,e,t)=>e in n?GK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gt=(n,e,t)=>(WK(n,typeof e!="symbol"?e+"":e,t),t);const b0=new su,FP=new Yo,$K=Math.cos(70*(Math.PI/180)),zP=(n,e)=>(n%e+e)%e;let jK=class extends ts{constructor(e,t){super(),gt(this,"object"),gt(this,"domElement"),gt(this,"enabled",!0),gt(this,"target",new H),gt(this,"minDistance",0),gt(this,"maxDistance",1/0),gt(this,"minZoom",0),gt(this,"maxZoom",1/0),gt(this,"minPolarAngle",0),gt(this,"maxPolarAngle",Math.PI),gt(this,"minAzimuthAngle",-1/0),gt(this,"maxAzimuthAngle",1/0),gt(this,"enableDamping",!1),gt(this,"dampingFactor",.05),gt(this,"enableZoom",!0),gt(this,"zoomSpeed",1),gt(this,"enableRotate",!0),gt(this,"rotateSpeed",1),gt(this,"enablePan",!0),gt(this,"panSpeed",1),gt(this,"screenSpacePanning",!0),gt(this,"keyPanSpeed",7),gt(this,"zoomToCursor",!1),gt(this,"autoRotate",!1),gt(this,"autoRotateSpeed",2),gt(this,"reverseOrbit",!1),gt(this,"reverseHorizontalOrbit",!1),gt(this,"reverseVerticalOrbit",!1),gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gt(this,"mouseButtons",{LEFT:uc.ROTATE,MIDDLE:uc.DOLLY,RIGHT:uc.PAN}),gt(this,"touches",{ONE:fc.ROTATE,TWO:fc.DOLLY_PAN}),gt(this,"target0"),gt(this,"position0"),gt(this,"zoom0"),gt(this,"_domElementKeyEvents",null),gt(this,"getPolarAngle"),gt(this,"getAzimuthalAngle"),gt(this,"setPolarAngle"),gt(this,"setAzimuthalAngle"),gt(this,"getDistance"),gt(this,"listenToKeyEvents"),gt(this,"stopListenToKeyEvents"),gt(this,"saveState"),gt(this,"reset"),gt(this,"update"),gt(this,"connect"),gt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Z=>{let _e=zP(Z,2*Math.PI),Ue=u.phi;Ue<0&&(Ue+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let Ge=Math.abs(_e-Ue);2*Math.PI-Ge<Ge&&(_e<Ue?_e+=2*Math.PI:Ue+=2*Math.PI),f.phi=_e-Ue,i.update()},this.setAzimuthalAngle=Z=>{let _e=zP(Z,2*Math.PI),Ue=u.theta;Ue<0&&(Ue+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let Ge=Math.abs(_e-Ue);2*Math.PI-Ge<Ge&&(_e<Ue?_e+=2*Math.PI:Ue+=2*Math.PI),f.theta=_e-Ue,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Z=>{Z.addEventListener("keydown",et),this._domElementKeyEvents=Z},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",et),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const Z=new H,_e=new H(0,1,0),Ue=new xi().setFromUnitVectors(e.up,_e),Ge=Ue.clone().invert(),mt=new H,$=new xi,Ae=2*Math.PI;return function(){const Ze=i.object.position;Ue.setFromUnitVectors(e.up,_e),Ge.copy(Ue).invert(),Z.copy(Ze).sub(i.target),Z.applyQuaternion(Ue),u.setFromVector3(Z),i.autoRotate&&l===a.NONE&&z(U()),i.enableDamping?(u.theta+=f.theta*i.dampingFactor,u.phi+=f.phi*i.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let Je=i.minAzimuthAngle,At=i.maxAzimuthAngle;isFinite(Je)&&isFinite(At)&&(Je<-Math.PI?Je+=Ae:Je>Math.PI&&(Je-=Ae),At<-Math.PI?At+=Ae:At>Math.PI&&(At-=Ae),Je<=At?u.theta=Math.max(Je,Math.min(At,u.theta)):u.theta=u.theta>(Je+At)/2?Math.max(Je,u.theta):Math.min(At,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&O||i.object.isOrthographicCamera?u.radius=ie(u.radius):u.radius=ie(u.radius*p),Z.setFromSpherical(u),Z.applyQuaternion(Ge),Ze.copy(i.target).add(Z),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let zt=!1;if(i.zoomToCursor&&O){let sn=null;if(i.object instanceof cn&&i.object.isPerspectiveCamera){const Vn=Z.length();sn=ie(Vn*p);const Gt=Vn-sn;i.object.position.addScaledVector(R,Gt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Vn=new H(D.x,D.y,0);Vn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),zt=!0;const Gt=new H(D.x,D.y,0);Gt.unproject(i.object),i.object.position.sub(Gt).add(Vn),i.object.updateMatrixWorld(),sn=Z.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;sn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(sn).add(i.object.position):(b0.origin.copy(i.object.position),b0.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(b0.direction))<$K?e.lookAt(i.target):(FP.setFromNormalAndCoplanarPoint(i.object.up,i.target),b0.intersectPlane(FP,i.target))))}else i.object instanceof _o&&i.object.isOrthographicCamera&&(zt=p!==1,zt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,O=!1,zt||mt.distanceToSquared(i.object.position)>c||8*(1-$.dot(i.object.quaternion))>c?(i.dispatchEvent(r),mt.copy(i.object.position),$.copy(i.object.quaternion),zt=!1,!0):!1}})(),this.connect=Z=>{Z===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=Z,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Pt),i.domElement.addEventListener("pointerdown",se),i.domElement.addEventListener("pointercancel",le),i.domElement.addEventListener("wheel",Oe)},this.dispose=()=>{var Z,_e,Ue,Ge,mt,$;(Z=i.domElement)==null||Z.removeEventListener("contextmenu",Pt),(_e=i.domElement)==null||_e.removeEventListener("pointerdown",se),(Ue=i.domElement)==null||Ue.removeEventListener("pointercancel",le),(Ge=i.domElement)==null||Ge.removeEventListener("wheel",Oe),(mt=i.domElement)==null||mt.ownerDocument.removeEventListener("pointermove",Te),($=i.domElement)==null||$.ownerDocument.removeEventListener("pointerup",re),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",et)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new lE,f=new lE;let p=1;const m=new H,v=new he,_=new he,y=new he,g=new he,x=new he,S=new he,E=new he,b=new he,A=new he,R=new H,D=new he;let O=!1;const M=[],I={};function U(){return 2*Math.PI/60/60*i.autoRotateSpeed}function j(){return Math.pow(.95,i.zoomSpeed)}function z(Z){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=Z:f.theta-=Z}function K(Z){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=Z:f.phi-=Z}const q=(()=>{const Z=new H;return function(Ue,Ge){Z.setFromMatrixColumn(Ge,0),Z.multiplyScalar(-Ue),m.add(Z)}})(),ee=(()=>{const Z=new H;return function(Ue,Ge){i.screenSpacePanning===!0?Z.setFromMatrixColumn(Ge,1):(Z.setFromMatrixColumn(Ge,0),Z.crossVectors(i.object.up,Z)),Z.multiplyScalar(Ue),m.add(Z)}})(),N=(()=>{const Z=new H;return function(Ue,Ge){const mt=i.domElement;if(mt&&i.object instanceof cn&&i.object.isPerspectiveCamera){const $=i.object.position;Z.copy($).sub(i.target);let Ae=Z.length();Ae*=Math.tan(i.object.fov/2*Math.PI/180),q(2*Ue*Ae/mt.clientHeight,i.object.matrix),ee(2*Ge*Ae/mt.clientHeight,i.object.matrix)}else mt&&i.object instanceof _o&&i.object.isOrthographicCamera?(q(Ue*(i.object.right-i.object.left)/i.object.zoom/mt.clientWidth,i.object.matrix),ee(Ge*(i.object.top-i.object.bottom)/i.object.zoom/mt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function V(Z){i.object instanceof cn&&i.object.isPerspectiveCamera||i.object instanceof _o&&i.object.isOrthographicCamera?p/=Z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function W(Z){i.object instanceof cn&&i.object.isPerspectiveCamera||i.object instanceof _o&&i.object.isOrthographicCamera?p*=Z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Q(Z){if(!i.zoomToCursor||!i.domElement)return;O=!0;const _e=i.domElement.getBoundingClientRect(),Ue=Z.clientX-_e.left,Ge=Z.clientY-_e.top,mt=_e.width,$=_e.height;D.x=Ue/mt*2-1,D.y=-(Ge/$)*2+1,R.set(D.x,D.y,1).unproject(i.object).sub(i.object.position).normalize()}function ie(Z){return Math.max(i.minDistance,Math.min(i.maxDistance,Z))}function Me(Z){v.set(Z.clientX,Z.clientY)}function te(Z){Q(Z),E.set(Z.clientX,Z.clientY)}function ue(Z){g.set(Z.clientX,Z.clientY)}function xe(Z){_.set(Z.clientX,Z.clientY),y.subVectors(_,v).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(z(2*Math.PI*y.x/_e.clientHeight),K(2*Math.PI*y.y/_e.clientHeight)),v.copy(_),i.update()}function Re(Z){b.set(Z.clientX,Z.clientY),A.subVectors(b,E),A.y>0?V(j()):A.y<0&&W(j()),E.copy(b),i.update()}function $e(Z){x.set(Z.clientX,Z.clientY),S.subVectors(x,g).multiplyScalar(i.panSpeed),N(S.x,S.y),g.copy(x),i.update()}function ze(Z){Q(Z),Z.deltaY<0?W(j()):Z.deltaY>0&&V(j()),i.update()}function ot(Z){let _e=!1;switch(Z.code){case i.keys.UP:N(0,i.keyPanSpeed),_e=!0;break;case i.keys.BOTTOM:N(0,-i.keyPanSpeed),_e=!0;break;case i.keys.LEFT:N(i.keyPanSpeed,0),_e=!0;break;case i.keys.RIGHT:N(-i.keyPanSpeed,0),_e=!0;break}_e&&(Z.preventDefault(),i.update())}function He(){if(M.length==1)v.set(M[0].pageX,M[0].pageY);else{const Z=.5*(M[0].pageX+M[1].pageX),_e=.5*(M[0].pageY+M[1].pageY);v.set(Z,_e)}}function Y(){if(M.length==1)g.set(M[0].pageX,M[0].pageY);else{const Z=.5*(M[0].pageX+M[1].pageX),_e=.5*(M[0].pageY+M[1].pageY);g.set(Z,_e)}}function Se(){const Z=M[0].pageX-M[1].pageX,_e=M[0].pageY-M[1].pageY,Ue=Math.sqrt(Z*Z+_e*_e);E.set(0,Ue)}function ve(){i.enableZoom&&Se(),i.enablePan&&Y()}function Ee(){i.enableZoom&&Se(),i.enableRotate&&He()}function ye(Z){if(M.length==1)_.set(Z.pageX,Z.pageY);else{const Ue=Ve(Z),Ge=.5*(Z.pageX+Ue.x),mt=.5*(Z.pageY+Ue.y);_.set(Ge,mt)}y.subVectors(_,v).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(z(2*Math.PI*y.x/_e.clientHeight),K(2*Math.PI*y.y/_e.clientHeight)),v.copy(_)}function Qe(Z){if(M.length==1)x.set(Z.pageX,Z.pageY);else{const _e=Ve(Z),Ue=.5*(Z.pageX+_e.x),Ge=.5*(Z.pageY+_e.y);x.set(Ue,Ge)}S.subVectors(x,g).multiplyScalar(i.panSpeed),N(S.x,S.y),g.copy(x)}function ke(Z){const _e=Ve(Z),Ue=Z.pageX-_e.x,Ge=Z.pageY-_e.y,mt=Math.sqrt(Ue*Ue+Ge*Ge);b.set(0,mt),A.set(0,Math.pow(b.y/E.y,i.zoomSpeed)),V(A.y),E.copy(b)}function F(Z){i.enableZoom&&ke(Z),i.enablePan&&Qe(Z)}function k(Z){i.enableZoom&&ke(Z),i.enableRotate&&ye(Z)}function se(Z){var _e,Ue;i.enabled!==!1&&(M.length===0&&((_e=i.domElement)==null||_e.ownerDocument.addEventListener("pointermove",Te),(Ue=i.domElement)==null||Ue.ownerDocument.addEventListener("pointerup",re)),yt(Z),Z.pointerType==="touch"?lt(Z):De(Z))}function Te(Z){i.enabled!==!1&&(Z.pointerType==="touch"?we(Z):be(Z))}function re(Z){var _e,Ue,Ge;at(Z),M.length===0&&((_e=i.domElement)==null||_e.releasePointerCapture(Z.pointerId),(Ue=i.domElement)==null||Ue.ownerDocument.removeEventListener("pointermove",Te),(Ge=i.domElement)==null||Ge.ownerDocument.removeEventListener("pointerup",re)),i.dispatchEvent(o),l=a.NONE}function le(Z){at(Z)}function De(Z){let _e;switch(Z.button){case 0:_e=i.mouseButtons.LEFT;break;case 1:_e=i.mouseButtons.MIDDLE;break;case 2:_e=i.mouseButtons.RIGHT;break;default:_e=-1}switch(_e){case uc.DOLLY:if(i.enableZoom===!1)return;te(Z),l=a.DOLLY;break;case uc.ROTATE:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(i.enablePan===!1)return;ue(Z),l=a.PAN}else{if(i.enableRotate===!1)return;Me(Z),l=a.ROTATE}break;case uc.PAN:if(Z.ctrlKey||Z.metaKey||Z.shiftKey){if(i.enableRotate===!1)return;Me(Z),l=a.ROTATE}else{if(i.enablePan===!1)return;ue(Z),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function be(Z){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;xe(Z);break;case a.DOLLY:if(i.enableZoom===!1)return;Re(Z);break;case a.PAN:if(i.enablePan===!1)return;$e(Z);break}}function Oe(Z){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Z.preventDefault(),i.dispatchEvent(s),ze(Z),i.dispatchEvent(o))}function et(Z){i.enabled===!1||i.enablePan===!1||ot(Z)}function lt(Z){switch(nt(Z),M.length){case 1:switch(i.touches.ONE){case fc.ROTATE:if(i.enableRotate===!1)return;He(),l=a.TOUCH_ROTATE;break;case fc.PAN:if(i.enablePan===!1)return;Y(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case fc.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ve(),l=a.TOUCH_DOLLY_PAN;break;case fc.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ee(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function we(Z){switch(nt(Z),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;ye(Z),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Qe(Z),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;F(Z),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;k(Z),i.update();break;default:l=a.NONE}}function Pt(Z){i.enabled!==!1&&Z.preventDefault()}function yt(Z){M.push(Z)}function at(Z){delete I[Z.pointerId];for(let _e=0;_e<M.length;_e++)if(M[_e].pointerId==Z.pointerId){M.splice(_e,1);return}}function nt(Z){let _e=I[Z.pointerId];_e===void 0&&(_e=new he,I[Z.pointerId]=_e),_e.set(Z.pageX,Z.pageY)}function Ve(Z){const _e=Z.pointerId===M[0].pointerId?M[1]:M[0];return I[_e.pointerId]}t!==void 0&&this.connect(t),this.update()}};function Wk(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}const XK=P.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=zs(A=>A.invalidate),p=zs(A=>A.camera),m=zs(A=>A.gl),v=zs(A=>A.events),_=zs(A=>A.setEvents),y=zs(A=>A.set),g=zs(A=>A.get),x=zs(A=>A.performance),S=e||p,E=i||v.connected||m.domElement,b=P.useMemo(()=>new jK(S),[S]);return Vv(()=>{b.enabled&&b.update()},-1),P.useEffect(()=>(s&&b.connect(s===!0?E:s),b.connect(E),()=>void b.dispose()),[s,E,t,b,f]),P.useEffect(()=>{const A=O=>{f(),t&&x.regress(),o&&o(O)},R=O=>{a&&a(O)},D=O=>{l&&l(O)};return b.addEventListener("change",A),b.addEventListener("start",R),b.addEventListener("end",D),()=>{b.removeEventListener("start",R),b.removeEventListener("end",D),b.removeEventListener("change",A)}},[o,a,l,b,f,_]),P.useEffect(()=>{if(n){const A=g().controls;return y({controls:b}),()=>y({controls:A})}},[n,b]),P.createElement("primitive",Hn({ref:u,object:b,enableDamping:r},c))});var $k={exports:{}},YK="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",KK=YK,qK=KK;function jk(){}function Xk(){}Xk.resetWarningCache=jk;var ZK=function(){function n(i,r,s,o,a,l){if(l!==qK){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Xk,resetWarningCache:jk};return t.PropTypes=t,t};$k.exports=ZK();var QK=$k.exports;const on=cd(QK);function BP(n,e){if(e===QO)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Fv||e===cM){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===Fv)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class JK extends fr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new rq(t)}),this.register(function(t){return new hq(t)}),this.register(function(t){return new pq(t)}),this.register(function(t){return new mq(t)}),this.register(function(t){return new oq(t)}),this.register(function(t){return new aq(t)}),this.register(function(t){return new lq(t)}),this.register(function(t){return new cq(t)}),this.register(function(t){return new iq(t)}),this.register(function(t){return new uq(t)}),this.register(function(t){return new sq(t)}),this.register(function(t){return new dq(t)}),this.register(function(t){return new fq(t)}),this.register(function(t){return new tq(t)}),this.register(function(t){return new gq(t)}),this.register(function(t){return new vq(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=gl.extractUrlBase(e);o=gl.resolveURL(c,this.path)}else o=gl.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ys(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===Yk){try{o[kt.KHR_BINARY_GLTF]=new yq(e)}catch(f){r&&r(f);return}s=JSON.parse(o[kt.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Iq(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](c);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,o[f.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const f=s.extensionsUsed[u],p=s.extensionsRequired||[];switch(f){case kt.KHR_MATERIALS_UNLIT:o[f]=new nq;break;case kt.KHR_DRACO_MESH_COMPRESSION:o[f]=new _q(s,this.dracoLoader);break;case kt.KHR_TEXTURE_TRANSFORM:o[f]=new xq;break;case kt.KHR_MESH_QUANTIZATION:o[f]=new Sq;break;default:p.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function eq(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const kt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class tq{constructor(e){this.parser=e,this.name=kt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ie(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],qn);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new zM(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new FM(u),c.distance=f;break;case"spot":c=new UM(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Xa(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class nq{constructor(){this.name=kt.KHR_MATERIALS_UNLIT}getMaterialType(){return $r}extendParams(e,t,i){const r=[];e.color=new Ie(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],qn),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,St))}return Promise.all(r)}}class iq{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class rq{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new he(a,a)}return Promise.all(s)}}class sq{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class oq{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ie(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],qn)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,St)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class aq{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class lq{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ie().setRGB(a[0],a[1],a[2],qn),Promise.all(s)}}class cq{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class uq{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ie().setRGB(a[0],a[1],a[2],qn),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,St)),Promise.all(s)}}class fq{constructor(e){this.parser=e,this.name=kt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class dq{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class hq{constructor(e){this.parser=e,this.name=kt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class pq{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class mq{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class gq{constructor(e){this.name=kt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(m),u,f,p,r.mode,r.filter),m})})}else return null}}class vq{constructor(e){this.name=kt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==gs.TRIANGLES&&c.mode!==gs.TRIANGLE_STRIP&&c.mode!==gs.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const v of f){const _=new ft,y=new H,g=new xi,x=new H(1,1,1),S=new wM(v.geometry,v.material,p);for(let E=0;E<p;E++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,E),l.SCALE&&x.fromBufferAttribute(l.SCALE,E),S.setMatrixAt(E,_.compose(y,g,x));for(const E in l)if(E==="_COLOR_0"){const b=l[E];S.instanceColor=new Xc(b.array,b.itemSize,b.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&v.geometry.setAttribute(E,l[E]);Vt.prototype.copy.call(S,v),this.parser.assignFinalMaterial(S),m.push(S)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const Yk="glTF",wh=12,HP={JSON:1313821514,BIN:5130562};class yq{constructor(e){this.name=kt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,wh),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Yk)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-wh,s=new DataView(e,wh);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===HP.JSON){const c=new Uint8Array(e,wh+o,a);this.content=i.decode(c)}else if(l===HP.BIN){const c=wh+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class _q{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=hE[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=hE[u]||u.toLowerCase();if(o[u]!==void 0){const p=i.accessors[e.attributes[u]],m=Df[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f,p){r.decodeDracoFile(u,function(m){for(const v in m.attributes){const _=m.attributes[v],y=l[v];y!==void 0&&(_.normalized=y)}f(m)},a,c,qn,p)})})}}class xq{constructor(){this.name=kt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Sq{constructor(){this.name=kt.KHR_MESH_QUANTIZATION}}class Kk extends Sd{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-t,f=(i-t)/u,p=f*f,m=p*f,v=e*c,_=v-c,y=-2*m+3*p,g=m-p,x=1-y,S=g-p+f;for(let E=0;E!==a;E++){const b=o[_+E+a],A=o[_+E+l]*u,R=o[v+E+a],D=o[v+E]*u;s[E]=x*b+S*A+y*R+g*D}return s}}const wq=new xi;class Eq extends Kk{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return wq.fromArray(s).normalize().toArray(s),s}}const gs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Df={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},VP={9728:en,9729:Zt,9984:Ep,9985:If,9986:Za,9987:Ss},GP={33071:Ai,33648:Xf,10497:da},X1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},hE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ha={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Tq={CUBICSPLINE:void 0,LINEAR:jc,STEP:Yf},Y1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Mq(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new xd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Xs})),n.DefaultMaterial}function rc(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Xa(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function bq(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(i){const p=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],p=c[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function Aq(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Cq(n){let e;const t=n.extensions&&n.extensions[kt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+K1(t.attributes):e=n.indices+":"+K1(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+K1(n.targets[i]);return e}function K1(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function pE(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Rq(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Pq=new ft;class Iq{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new eq,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new QN(this.options.manager):this.textureLoader=new ok(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ys(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return rc(s,a,r),Xa(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[kt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(gl.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=X1[r.type],a=Df[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new Ut(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=X1[r.type],c=Df[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let _,y;if(m&&m!==f){const g=Math.floor(p/m),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let S=t.cache.get(x);S||(_=new c(a,g*m,r.count*m/u),S=new om(_,m/u),t.cache.add(x,S)),y=new El(S,l,p%m/u,v)}else a===null?_=new c(r.count*l):_=new c(a,p,r.count*l),y=new Ut(_,l,v);if(r.sparse!==void 0){const g=X1.SCALAR,x=Df[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,b=new x(o[1],S,r.sparse.count*g),A=new c(o[2],E,r.sparse.count*l);a!==null&&(y=new Ut(y.array.slice(),y.itemSize,y.normalized));for(let R=0,D=b.length;R<D;R++){const O=b[R];if(y.setX(O,A[R*l]),l>=2&&y.setY(O,A[R*l+1]),l>=3&&y.setZ(O,A[R*l+2]),l>=4&&y.setW(O,A[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=VP[p.magFilter]||Zt,u.minFilter=VP[p.minFilter]||Ss,u.wrapS=GP[p.wrapS]||da,u.wrapT=GP[p.wrapT]||da,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(_){const y=new rn(_);y.needsUpdate=!0,p(y)}),t.load(gl.resolveURL(f,s.path),v,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),f.userData.mimeType=o.mimeType||Rq(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[kt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[kt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[kt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new $y,Bn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Xi,Bn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return xd}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[kt.KHR_MATERIALS_UNLIT]){const f=r[kt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Ie(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],qn),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,St)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=nr);const u=s.alphaMode||Y1.OPAQUE;if(u===Y1.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===Y1.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==$r&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new he(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==$r&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==$r){const f=s.emissiveFactor;a.emissive=new Ie().setRGB(f[0],f[1],f[2],qn)}return s.emissiveTexture!==void 0&&o!==$r&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,St)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Xa(f,s),t.associations.set(f,{materials:e}),s.extensions&&rc(r,f,s),f})}createUniqueName(e){const t=Ht.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[kt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return WP(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=Cq(c),f=r[u];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[kt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=WP(new Mt,c,t),r[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?Mq(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let m=0,v=u.length;m<v;m++){const _=u[m],y=o[m];let g;const x=c[m];if(y.mode===gs.TRIANGLES||y.mode===gs.TRIANGLE_STRIP||y.mode===gs.TRIANGLE_FAN||y.mode===void 0)g=s.isSkinnedMesh===!0?new SM(_,x):new Pn(_,x),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),y.mode===gs.TRIANGLE_STRIP?g.geometry=BP(g.geometry,cM):y.mode===gs.TRIANGLE_FAN&&(g.geometry=BP(g.geometry,Fv));else if(y.mode===gs.LINES)g=new qs(_,x);else if(y.mode===gs.LINE_STRIP)g=new ha(_,x);else if(y.mode===gs.LINE_LOOP)g=new EM(_,x);else if(y.mode===gs.POINTS)g=new TM(_,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(g.geometry.morphAttributes).length>0&&Aq(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Xa(g,s),y.extensions&&rc(r,g,y),t.assignFinalMaterial(g),f.push(g)}for(let m=0,v=f.length;m<v;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&rc(r,f[0],s),f[0];const p=new ta;s.extensions&&rc(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=f.length;m<v;m++)p.add(f[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new cn(aN.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new _o(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Xa(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const p=new ft;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new am(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let f=0,p=r.channels.length;f<p;f++){const m=r.channels[f],v=r.samplers[m.sampler],_=m.target,y=_.node,g=r.parameters!==void 0?r.parameters[v.input]:v.input,x=r.parameters!==void 0?r.parameters[v.output]:v.output;_.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",x)),c.push(v),u.push(_))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const p=f[0],m=f[1],v=f[2],_=f[3],y=f[4],g=[];for(let x=0,S=p.length;x<S;x++){const E=p[x],b=m[x],A=v[x],R=_[x],D=y[x];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const O=i._createAnimationTracks(E,b,A,R,D);if(O)for(let M=0;M<O.length;M++)g.push(O[M])}return new Qf(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,Pq)});for(let m=0,v=f.length;m<v;m++)u.add(f[m]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new Wy:c.length>1?u=new ta:c.length===1?u=c[0]:u=new Vt,u!==c[0])for(let f=0,p=c.length;f<p;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),Xa(u,s),s.extensions&&rc(i,u,s),s.matrix!==void 0){const f=new ft;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new ta;i.name&&(s.name=r.createUniqueName(i.name)),Xa(s,i),i.extensions&&rc(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[p,m]of r.associations)(p instanceof Bn||p instanceof rn)&&f.set(p,m);return u.traverse(p=>{const m=r.associations.get(p);m!=null&&f.set(p,m)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Ha[s.path]===Ha.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(Ha[s.path]){case Ha.weights:c=Kc;break;case Ha.rotation:c=Tl;break;case Ha.position:case Ha.scale:c=qc;break;default:switch(i.itemSize){case 1:c=Kc;break;case 2:case 3:default:c=qc;break}break}const u=r.interpolation!==void 0?Tq[r.interpolation]:jc,f=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const v=new c(l[p]+"."+Ha[s.path],t.array,f,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=pE(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Tl?Eq:Kk;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Lq(n,e,t){const i=e.attributes,r=new Gi;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new H(l[0],l[1],l[2]),new H(c[0],c[1],c[2])),a.normalized){const u=pE(Df[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new H,l=new H;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const _=pE(Df[p.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Ri;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function WP(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=hE[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Kt.workingColorSpace!==qn&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Kt.workingColorSpace}" not supported.`),Xa(n,e),Lq(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?bq(n,e.targets,t):n})}function Dq(n){const e=new Map,t=new Map,i=n.clone();return qk(n,i,function(r,s){e.set(s,r),t.set(r,s)}),i.traverse(function(r){if(!r.isSkinnedMesh)return;const s=r,o=e.get(r),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(l){return t.get(l)}),s.bind(s.skeleton,s.bindMatrix)}),i}function qk(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)qk(n.children[i],e.children[i],t)}function jo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Zk(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Kr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ed={duration:.5,overwrite:!1,delay:0},XM,Wi,_n,ws=1e8,ln=1/ws,mE=Math.PI*2,Oq=mE/4,Nq=0,Qk=Math.sqrt,kq=Math.cos,Uq=Math.sin,Si=function(e){return typeof e=="string"},zn=function(e){return typeof e=="function"},pa=function(e){return typeof e=="number"},YM=function(e){return typeof e>"u"},Ao=function(e){return typeof e=="object"},Mr=function(e){return e!==!1},KM=function(){return typeof window<"u"},A0=function(e){return zn(e)||Si(e)},Jk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},$i=Array.isArray,gE=/(?:-?\.?\d|\.)+/gi,eU=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,wf=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,q1=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,tU=/[+-]=-?[.\d]+/,nU=/[^,'"\[\]\s]+/gi,Fq=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,An,po,vE,qM,Qr={},$v={},iU,rU=function(e){return($v=Zc(e,Qr))&&Rr},ZM=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Up=function(e,t){return!t&&console.warn(e)},sU=function(e,t){return e&&(Qr[e]=t)&&$v&&($v[e]=t)||Qr},Fp=function(){return 0},zq={suppressEvents:!0,isStart:!0,kill:!1},sv={suppressEvents:!0,kill:!1},Bq={suppressEvents:!0},QM={},vl=[],yE={},oU,Fr={},Z1={},$P=30,ov=[],JM="",eb=function(e){var t=e[0],i,r;if(Ao(t)||zn(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=ov.length;r--&&!ov[r].targetTest(t););i=ov[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new PU(e[r],i)))||e.splice(r,1);return e},Oc=function(e){return e._gsap||eb(Es(e))[0]._gsap},aU=function(e,t,i){return(i=e[t])&&zn(i)?e[t]():YM(i)&&e.getAttribute&&e.getAttribute(t)||i},br=function(e,t){return(e=e.split(",")).forEach(t)||e},jn=function(e){return Math.round(e*1e5)/1e5||0},yi=function(e){return Math.round(e*1e7)/1e7||0},Of=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},Hq=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},jv=function(){var e=vl.length,t=vl.slice(0),i,r;for(yE={},vl.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},lU=function(e,t,i,r){vl.length&&!Wi&&jv(),e.render(t,i,r||Wi&&t<0&&(e._initted||e._startAt)),vl.length&&!Wi&&jv()},cU=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(nU).length<2?t:Si(e)?e.trim():e},uU=function(e){return e},Cs=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Vq=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Zc=function(e,t){for(var i in t)e[i]=t[i];return e},jP=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Ao(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Xv=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},Yh=function(e){var t=e.parent||An,i=e.keyframes?Vq($i(e.keyframes)):Cs;if(Mr(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Gq=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},fU=function(e,t,i,r,s){i===void 0&&(i="_first"),r===void 0&&(r="_last");var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},c_=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Ml=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Nc=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Wq=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},_E=function(e,t,i,r){return e._startAt&&(Wi?e._startAt.revert(sv):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},$q=function n(e){return!e||e._ts&&n(e.parent)},XP=function(e){return e._repeat?td(e._tTime,e=e.duration()+e._rDelay)*e:0},td=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Yv=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},u_=function(e){return e._end=yi(e._start+(e._tDur/Math.abs(e._ts||e._rts||ln)||0))},f_=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=yi(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),u_(e),i._dirty||Nc(i,e)),e},dU=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Yv(e.rawTime(),t),(!t._dur||hm(0,t.totalDuration(),i)-t._tTime>ln)&&t.render(i,!0)),Nc(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-ln}},go=function(e,t,i,r){return t.parent&&Ml(t),t._start=yi((pa(i)?i:i||e!==An?ms(e,i,t):e._time)+t._delay),t._end=yi(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),fU(e,t,"_first","_last",e._sort?"_start":0),xE(t)||(e._recent=t),r||dU(e,t),e._ts<0&&f_(e,e._tTime),e},hU=function(e,t){return(Qr.ScrollTrigger||ZM("scrollTrigger",t))&&Qr.ScrollTrigger.create(t,e)},pU=function(e,t,i,r,s){if(nb(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!Wi&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&oU!==Gr.frame)return vl.push(e),e._lazy=[s,r],1},jq=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},xE=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Xq=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&jq(e)&&!(!e._initted&&xE(e))||(e._ts<0||e._dp._ts<0)&&!xE(e))?0:1,a=e._rDelay,l=0,c,u,f;if(a&&e._repeat&&(l=hm(0,e._tDur,t),u=td(l,a),e._yoyo&&u&1&&(o=1-o),u!==td(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Wi||r||e._zTime===ln||!t&&e._zTime){if(!e._initted&&pU(e,t,r,i,l))return;for(f=e._zTime,e._zTime=t||(i?ln:0),i||(i=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&_E(e,t,i,!0),e._onUpdate&&!i&&jr(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&jr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Ml(e,1),!i&&!Wi&&(jr(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Yq=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},nd=function(e,t,i,r){var s=e._repeat,o=yi(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:yi(o*(s+1)+e._rDelay*s):o,a>0&&!r&&f_(e,e._tTime=e._tDur*a),e.parent&&u_(e),i||Nc(e.parent,e),e},YP=function(e){return e instanceof or?Nc(e):nd(e,e._dur)},Kq={_start:0,endTime:Fp,totalDuration:Fp},ms=function n(e,t,i){var r=e.labels,s=e._recent||Kq,o=e.duration()>=ws?s.endTime(!1):e._dur,a,l,c;return Si(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*($i(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},Kh=function(e,t,i){var r=pa(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Mr(l.vars.inherit)&&l.parent;o.immediateRender=Mr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new ei(t[0],o,t[s+1])},Fl=function(e,t){return e||e===0?t(e):t},hm=function(e,t,i){return i<e?e:i>t?t:i},Hi=function(e,t){return!Si(e)||!(t=Fq.exec(e))?"":t[1]},qq=function(e,t,i){return Fl(i,function(r){return hm(e,t,r)})},SE=[].slice,mU=function(e,t){return e&&Ao(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ao(e[0]))&&!e.nodeType&&e!==po},Zq=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return Si(r)&&!t||mU(r,1)?(s=i).push.apply(s,Es(r)):i.push(r)})||i},Es=function(e,t,i){return _n&&!t&&_n.selector?_n.selector(e):Si(e)&&!i&&(vE||!id())?SE.call((t||qM).querySelectorAll(e),0):$i(e)?Zq(e,i):mU(e)?SE.call(e,0):e?[e]:[]},wE=function(e){return e=Es(e)[0]||Up("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Es(t,i.querySelectorAll?i:i===e?Up("Invalid scope")||qM.createElement("div"):e)}},gU=function(e){return e.sort(function(){return .5-Math.random()})},vU=function(e){if(zn(e))return e;var t=Ao(e)?e:{each:e},i=kc(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,f=r;return Si(r)?u=f={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],f=r[1]),function(p,m,v){var _=(v||t).length,y=o[_],g,x,S,E,b,A,R,D,O;if(!y){if(O=t.grid==="auto"?0:(t.grid||[1,ws])[1],!O){for(R=-ws;R<(R=v[O++].getBoundingClientRect().left)&&O<_;);O<_&&O--}for(y=o[_]=[],g=l?Math.min(O,_)*u-.5:r%O,x=O===ws?0:l?_*f/O-.5:r/O|0,R=0,D=ws,A=0;A<_;A++)S=A%O-g,E=x-(A/O|0),y[A]=b=c?Math.abs(c==="y"?E:S):Qk(S*S+E*E),b>R&&(R=b),b<D&&(D=b);r==="random"&&gU(y),y.max=R-D,y.min=D,y.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(O>_?_-1:c?c==="y"?_/O:O:Math.max(O,_/O))||0)*(r==="edges"?-1:1),y.b=_<0?s-_:s,y.u=Hi(t.amount||t.each)||0,i=i&&_<0?AU(i):i}return _=(y[p]-y.min)/y.max||0,yi(y.b+(i?i(_):_)*y.v)+y.u}},EE=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=yi(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(pa(i)?0:Hi(i))}},yU=function(e,t){var i=$i(e),r,s;return!i&&Ao(e)&&(r=i=e.radius||ws,e.values?(e=Es(e.values),(s=!pa(e[0]))&&(r*=r)):e=EE(e.increment)),Fl(t,i?zn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=ws,u=0,f=e.length,p,m;f--;)s?(p=e[f].x-a,m=e[f].y-l,p=p*p+m*m):p=Math.abs(e[f]-a),p<c&&(c=p,u=f);return u=!r||c<=r?e[u]:o,s||u===o||pa(o)?u:u+Hi(o)}:EE(e))},_U=function(e,t,i,r){return Fl($i(e)?!t:i===!0?!!(i=0):!r,function(){return $i(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},Qq=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},Jq=function(e,t){return function(i){return e(parseFloat(i))+(t||Hi(i))}},eZ=function(e,t,i){return SU(e,t,0,1,i)},xU=function(e,t,i){return Fl(i,function(r){return e[~~t(r)]})},tZ=function n(e,t,i){var r=t-e;return $i(e)?xU(e,n(0,e.length),t):Fl(i,function(s){return(r+(s-e)%r)%r+e})},nZ=function n(e,t,i){var r=t-e,s=r*2;return $i(e)?xU(e,n(0,e.length-1),t):Fl(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},zp=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?nU:gE),i+=e.substr(t,r-t)+_U(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},SU=function(e,t,i,r,s){var o=t-e,a=r-i;return Fl(s,function(l){return i+((l-e)/o*a||0)})},iZ=function n(e,t,i,r){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=Si(e),a={},l,c,u,f,p;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if($i(e)&&!$i(t)){for(u=[],f=e.length,p=f-2,c=1;c<f;c++)u.push(n(e[c-1],e[c]));f--,s=function(v){v*=f;var _=Math.min(p,~~v);return u[_](v-_)},i=t}else r||(e=Zc($i(e)?[]:{},e));if(!u){for(l in t)tb.call(a,e,l,"get",t[l]);s=function(v){return sb(v,a)||(o?e.p:e)}}}return Fl(i,s)},KP=function(e,t,i){var r=e.labels,s=ws,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},jr=function(e,t,i){var r=e.vars,s=r[t],o=_n,a=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&vl.length&&jv(),a&&(_n=a),u=l?s.apply(c,l):s.call(c),_n=o,u},Lh=function(e){return Ml(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Wi),e.progress()<1&&jr(e,"onInterrupt"),e},Ef,wU=[],EU=function(e){if(e)if(e=!e.name&&e.default||e,KM()||e.headless){var t=e.name,i=zn(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:Fp,render:sb,add:tb,kill:_Z,modifier:yZ,rawVars:0},o={targetTest:0,get:0,getSetter:rb,aliases:{},register:0};if(id(),e!==r){if(Fr[t])return;Cs(r,Cs(Xv(e,s),o)),Zc(r.prototype,Zc(s,Xv(e,o))),Fr[r.prop=t]=r,e.targetTest&&(ov.push(r),QM[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}sU(t,r),e.register&&e.register(Rr,r,Ar)}else wU.push(e)},nn=255,Dh={aqua:[0,nn,nn],lime:[0,nn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,nn],navy:[0,0,128],white:[nn,nn,nn],olive:[128,128,0],yellow:[nn,nn,0],orange:[nn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[nn,0,0],pink:[nn,192,203],cyan:[0,nn,nn],transparent:[nn,nn,nn,0]},Q1=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*nn+.5|0},TU=function(e,t,i){var r=e?pa(e)?[e>>16,e>>8&nn,e&nn]:0:Dh.black,s,o,a,l,c,u,f,p,m,v;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Dh[e])r=Dh[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&nn,r&nn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&nn,e&nn]}else if(e.substr(0,3)==="hsl"){if(r=v=e.match(gE),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,r.length>3&&(r[3]*=1),r[0]=Q1(l+1/3,s,o),r[1]=Q1(l,s,o),r[2]=Q1(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(eU),i&&r.length<4&&(r[3]=1),r}else r=e.match(gE)||Dh.transparent;r=r.map(Number)}return t&&!v&&(s=r[0]/nn,o=r[1]/nn,a=r[2]/nn,f=Math.max(s,o,a),p=Math.min(s,o,a),u=(f+p)/2,f===p?l=c=0:(m=f-p,c=u>.5?m/(2-f-p):m/(f+p),l=f===s?(o-a)/m+(o<a?6:0):f===o?(a-s)/m+2:(s-o)/m+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),i&&r.length<4&&(r[3]=1),r},MU=function(e){var t=[],i=[],r=-1;return e.split(yl).forEach(function(s){var o=s.match(wf)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},qP=function(e,t,i){var r="",s=(e+r).match(yl),o=t?"hsla(":"rgba(",a=0,l,c,u,f;if(!s)return e;if(s=s.map(function(p){return(p=TU(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(u=MU(e),l=i.c,l.join(r)!==u.c.join(r)))for(c=e.replace(yl,"1").split(wf),f=c.length-1;a<f;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!c)for(c=e.split(yl),f=c.length-1;a<f;a++)r+=c[a]+s[a];return r+c[f]},yl=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Dh)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),rZ=/hsl[a]?\(/,bU=function(e){var t=e.join(" "),i;if(yl.lastIndex=0,yl.test(t))return i=rZ.test(t),e[1]=qP(e[1],i),e[0]=qP(e[0],i,MU(e[1])),!0},Bp,Gr=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,c,u,f,p,m,v=function _(y){var g=n()-r,x=y===!0,S,E,b,A;if((g>e||g<0)&&(i+=g-t),r+=g,b=r-i,S=b-o,(S>0||x)&&(A=++f.frame,p=b-f.time*1e3,f.time=b=b/1e3,o+=S+(S>=s?4:s-S),E=1),x||(l=c(_)),E)for(m=0;m<a.length;m++)a[m](b,p,A,y)};return f={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(y){return p/(1e3/(y||60))},wake:function(){iU&&(!vE&&KM()&&(po=vE=window,qM=po.document||{},Qr.gsap=Rr,(po.gsapVersions||(po.gsapVersions=[])).push(Rr.version),rU($v||po.GreenSockGlobals||!po.gsap&&po||{}),wU.forEach(EU)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&f.sleep(),c=u||function(y){return setTimeout(y,o-f.time*1e3+1|0)},Bp=1,v(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Bp=0,c=Fp},lagSmoothing:function(y,g){e=y||1/0,t=Math.min(g||33,e)},fps:function(y){s=1e3/(y||240),o=f.time*1e3+s},add:function(y,g,x){var S=g?function(E,b,A,R){y(E,b,A,R),f.remove(S)}:y;return f.remove(y),a[x?"unshift":"push"](S),id(),S},remove:function(y,g){~(g=a.indexOf(y))&&a.splice(g,1)&&m>=g&&m--},_listeners:a},f}(),id=function(){return!Bp&&Gr.wake()},Bt={},sZ=/^[\d.\-M][\d.\-,\s]/,oZ=/["']/g,aZ=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(oZ,"").trim():+c,r=l.substr(a+1).trim();return t},lZ=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},cZ=function(e){var t=(e+"").split("("),i=Bt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[aZ(t[1])]:lZ(e).split(",").map(cU)):Bt._CE&&sZ.test(e)?Bt._CE("",e):i},AU=function(e){return function(t){return 1-e(1-t)}},CU=function n(e,t){for(var i=e._first,r;i;)i instanceof or?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},kc=function(e,t){return e&&(zn(e)?e:Bt[e]||cZ(e))||t},uu=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return br(e,function(a){Bt[a]=Qr[a]=s,Bt[o=a.toLowerCase()]=i;for(var l in s)Bt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Bt[a+"."+l]=s[l]}),s},RU=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},J1=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/mE*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*Uq((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:RU(a);return s=mE/s,l.config=function(c,u){return n(e,c,u)},l},eS=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:RU(i);return r.config=function(s){return n(e,s)},r};br("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;uu(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Bt.Linear.easeNone=Bt.none=Bt.Linear.easeIn;uu("Elastic",J1("in"),J1("out"),J1());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};uu("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);uu("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});uu("Circ",function(n){return-(Qk(1-n*n)-1)});uu("Sine",function(n){return n===1?1:-kq(n*Oq)+1});uu("Back",eS("in"),eS("out"),eS());Bt.SteppedEase=Bt.steps=Qr.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-ln;return function(a){return((r*hm(0,o,a)|0)+s)*i}}};ed.ease=Bt["quad.out"];br("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return JM+=n+","+n+"Params,"});var PU=function(e,t){this.id=Nq++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:aU,this.set=t?t.getSetter:rb},Hp=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,nd(this,+t.duration,1,1),this.data=t.data,_n&&(this._ctx=_n,_n.data.push(this)),Bp||Gr.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,nd(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(id(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(f_(this,i),!s._dp||s.parent||dU(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&go(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===ln||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),lU(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+XP(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+XP(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?td(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-ln?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?Yv(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-ln?0:this._rts,this.totalTime(hm(-Math.abs(this._delay),this._tDur,s),r!==!1),u_(this),Wq(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(id(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ln&&(this._tTime-=ln)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&go(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Mr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Yv(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=Bq);var r=Wi;return Wi=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Wi=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,YP(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,YP(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(ms(this,i),Mr(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Mr(r))},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-ln:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ln,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-ln)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=zn(i)?i:uU,a=function(){var c=r.then;r.then=null,zn(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Lh(this)},n}();Cs(Hp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ln,_prom:0,_ps:!1,_rts:1});var or=function(n){Zk(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Mr(i.sortChildren),An&&go(i.parent||An,jo(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&hU(jo(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return Kh(0,arguments,this),this},t.from=function(r,s,o){return Kh(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Kh(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Yh(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new ei(r,s,ms(this,o),1),this},t.call=function(r,s,o){return go(this,ei.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new ei(r,o,ms(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,Yh(o).immediateRender=Mr(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,f){return a.startAt=o,Yh(a).immediateRender=Mr(a.immediateRender),this.staggerTo(r,s,a,l,c,u,f)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:yi(r),f=this._zTime<0!=r<0&&(this._initted||!c),p,m,v,_,y,g,x,S,E,b,A,R;if(this!==An&&u>l&&r>=0&&(u=l),u!==this._tTime||o||f){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),p=u,E=this._start,S=this._ts,g=!S,f&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(A=this._yoyo,y=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(y*100+r,s,o);if(p=yi(u%y),u===l?(_=this._repeat,p=c):(_=~~(u/y),_&&_===u/y&&(p=c,_--),p>c&&(p=c)),b=td(this._tTime,y),!a&&this._tTime&&b!==_&&this._tTime-b*y-this._dur<=0&&(b=_),A&&_&1&&(p=c-p,R=1),_!==b&&!this._lock){var D=A&&b&1,O=D===(A&&_&1);if(_<b&&(D=!D),a=D?0:u%c?c:u,this._lock=1,this.render(a||(R?0:yi(_*y)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&jr(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,O&&(this._lock=2,a=D?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;CU(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=Yq(this,yi(a),yi(p)),x&&(u-=p-(p=x._start))),this._tTime=u,this._time=p,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&p&&!s&&!_&&(jr(this,"onStart"),this._tTime!==u))return this;if(p>=a&&r>=0)for(m=this._first;m;){if(v=m._next,(m._act||p>=m._start)&&m._ts&&x!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!g){x=0,v&&(u+=this._zTime=-ln);break}}m=v}else{m=this._last;for(var M=r<0?r:p;m;){if(v=m._prev,(m._act||M<=m._end)&&m._ts&&x!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(M-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(M-m._start)*m._ts,s,o||Wi&&(m._initted||m._startAt)),p!==this._time||!this._ts&&!g){x=0,v&&(u+=this._zTime=M?-ln:ln);break}}m=v}}if(x&&!s&&(this.pause(),x.render(p>=a?0:-ln)._zTime=p>=a?1:-1,this._ts))return this._start=E,u_(this),this.render(r,s,o);this._onUpdate&&!s&&jr(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(E===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Ml(this,1),!s&&!(r<0&&!a)&&(u||a||!l)&&(jr(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(pa(s)||(s=ms(this,s,r)),!(r instanceof Hp)){if($i(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Si(r))return this.addLabel(r,s);if(zn(r))r=ei.delayedCall(0,r);else return this}return this!==r?go(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-ws);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof ei?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Si(r)?this.removeLabel(r):zn(r)?this.killTweensOf(r):(c_(this,r),r===this._recent&&(this._recent=this._last),Nc(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=yi(Gr.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=ms(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=ei.delayedCall(0,s||Fp,o);return a.data="isPause",this._hasPause=1,go(this,a,ms(this,r))},t.removePause=function(r){var s=this._first;for(r=ms(this,r);s;)s._start===r&&s.data==="isPause"&&Ml(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)tl!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=Es(r),l=this._first,c=pa(s),u;l;)l instanceof ei?Hq(l._targets,a)&&(c?(!tl||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=ms(o,r),l=s,c=l.startAt,u=l.onStart,f=l.onStartParams,p=l.immediateRender,m,v=ei.to(o,Cs({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||ln,onStart:function(){if(o.pause(),!m){var y=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());v._dur!==y&&nd(v,y,0,1).render(v._time,!0,!0),m=1}u&&u.apply(v,f||[])}},s));return p?v.render(0):v},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Cs({startAt:{time:ms(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),KP(this,ms(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),KP(this,ms(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+ln)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return Nc(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Nc(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=ws,c,u,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(f=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,go(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;nd(o,o===An&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(An._ts&&(lU(An,Yv(r,An)),oU=Gr.frame),Gr.frame>=$P){$P+=Kr.autoSleep||120;var s=An._first;if((!s||!s._ts)&&Kr.autoSleep&&Gr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Gr.sleep()}}},e}(Hp);Cs(or.prototype,{_lock:0,_hasPause:0,_forcing:0});var uZ=function(e,t,i,r,s,o,a){var l=new Ar(this._pt,e,t,0,1,kU,null,s),c=0,u=0,f,p,m,v,_,y,g,x;for(l.b=i,l.e=r,i+="",r+="",(g=~r.indexOf("random("))&&(r=zp(r)),o&&(x=[i,r],o(x,e,t),i=x[0],r=x[1]),p=i.match(q1)||[];f=q1.exec(r);)v=f[0],_=r.substring(c,f.index),m?m=(m+1)%5:_.substr(-5)==="rgba("&&(m=1),v!==p[u++]&&(y=parseFloat(p[u-1])||0,l._pt={_next:l._pt,p:_||u===1?_:",",s:y,c:v.charAt(1)==="="?Of(y,v)-y:parseFloat(v)-y,m:m&&m<4?Math.round:0},c=q1.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(tU.test(r)||g)&&(l.e=0),this._pt=l,l},tb=function(e,t,i,r,s,o,a,l,c,u){zn(r)&&(r=r(s||0,e,o));var f=e[t],p=i!=="get"?i:zn(f)?c?e[t.indexOf("set")||!zn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():f,m=zn(f)?c?mZ:OU:ib,v;if(Si(r)&&(~r.indexOf("random(")&&(r=zp(r)),r.charAt(1)==="="&&(v=Of(p,r)+(Hi(p)||0),(v||v===0)&&(r=v))),!u||p!==r||TE)return!isNaN(p*r)&&r!==""?(v=new Ar(this._pt,e,t,+p||0,r-(p||0),typeof f=="boolean"?vZ:NU,0,m),c&&(v.fp=c),a&&v.modifier(a,this,e),this._pt=v):(!f&&!(t in e)&&ZM(t,r),uZ.call(this,e,t,p,r,m,l||Kr.stringFilter,c))},fZ=function(e,t,i,r,s){if(zn(e)&&(e=qh(e,s,t,i,r)),!Ao(e)||e.style&&e.nodeType||$i(e)||Jk(e))return Si(e)?qh(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=qh(e[a],s,t,i,r);return o},IU=function(e,t,i,r,s,o){var a,l,c,u;if(Fr[e]&&(a=new Fr[e]).init(s,a.rawVars?t[e]:fZ(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new Ar(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==Ef))for(c=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},tl,TE,nb=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.runBackwards,f=r.yoyoEase,p=r.keyframes,m=r.autoRevert,v=e._dur,_=e._startAt,y=e._targets,g=e.parent,x=g&&g.data==="nested"?g.vars.targets:y,S=e._overwrite==="auto"&&!XM,E=e.timeline,b,A,R,D,O,M,I,U,j,z,K,q,ee;if(E&&(!p||!s)&&(s="none"),e._ease=kc(s,ed.ease),e._yEase=f?AU(kc(f===!0?s:f,ed.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!E&&!!r.runBackwards,!E||p&&!r.stagger){if(U=y[0]?Oc(y[0]).harness:0,q=U&&r[U.prop],b=Xv(r,QM),_&&(_._zTime<0&&_.progress(1),t<0&&u&&a&&!m?_.render(-1,!0):_.revert(u&&v?sv:zq),_._lazy=0),o){if(Ml(e._startAt=ei.set(y,Cs({data:"isStart",overwrite:!1,parent:g,immediateRender:!0,lazy:!_&&Mr(l),startAt:null,delay:0,onUpdate:c&&function(){return jr(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Wi||!a&&!m)&&e._startAt.revert(sv),a&&v&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&v&&!_){if(t&&(a=!1),R=Cs({overwrite:!1,data:"isFromStart",lazy:a&&!_&&Mr(l),immediateRender:a,stagger:0,parent:g},b),q&&(R[U.prop]=q),Ml(e._startAt=ei.set(y,R)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Wi?e._startAt.revert(sv):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,ln,ln);else if(!t)return}for(e._pt=e._ptCache=0,l=v&&Mr(l)||l&&!v,A=0;A<y.length;A++){if(O=y[A],I=O._gsap||eb(y)[A]._gsap,e._ptLookup[A]=z={},yE[I.id]&&vl.length&&jv(),K=x===y?A:x.indexOf(O),U&&(j=new U).init(O,q||b,e,K,x)!==!1&&(e._pt=D=new Ar(e._pt,O,j.name,0,1,j.render,j,0,j.priority),j._props.forEach(function(N){z[N]=D}),j.priority&&(M=1)),!U||q)for(R in b)Fr[R]&&(j=IU(R,b,e,K,O,x))?j.priority&&(M=1):z[R]=D=tb.call(e,O,R,"get",b[R],K,x,0,r.stringFilter);e._op&&e._op[A]&&e.kill(O,e._op[A]),S&&e._pt&&(tl=e,An.killTweensOf(O,z,e.globalTime(t)),ee=!e.parent,tl=0),e._pt&&l&&(yE[I.id]=1)}M&&UU(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!ee,p&&t<=0&&E.render(ws,!0,!0)},dZ=function(e,t,i,r,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,f,p,m;if(!c)for(c=e._ptCache[t]=[],p=e._ptLookup,m=e._targets.length;m--;){if(u=p[m][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return TE=1,e.vars[t]="+=0",nb(e,a),TE=0,l?Up(t+" not eligible for reset"):1;c.push(u)}for(m=c.length;m--;)f=c[m],u=f._pt||f,u.s=(r||r===0)&&!s?r:u.s+(r||0)+o*u.c,u.c=i-u.s,f.e&&(f.e=jn(i)+Hi(f.e)),f.b&&(f.b=u.s+Hi(f.b))},hZ=function(e,t){var i=e[0]?Oc(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=Zc({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},pZ=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if($i(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},qh=function(e,t,i,r,s){return zn(e)?e.call(t,i,r,s):Si(e)&&~e.indexOf("random(")?zp(e):e},LU=JM+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",DU={};br(LU+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return DU[n]=1});var ei=function(n){Zk(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:Yh(r))||this;var l=a.vars,c=l.duration,u=l.delay,f=l.immediateRender,p=l.stagger,m=l.overwrite,v=l.keyframes,_=l.defaults,y=l.scrollTrigger,g=l.yoyoEase,x=r.parent||An,S=($i(i)||Jk(i)?pa(i[0]):"length"in r)?[i]:Es(i),E,b,A,R,D,O,M,I;if(a._targets=S.length?eb(S):Up("GSAP target "+i+" not found. https://gsap.com",!Kr.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,v||p||A0(c)||A0(u)){if(r=a.vars,E=a.timeline=new or({data:"nested",defaults:_||{},targets:x&&x.data==="nested"?x.vars.targets:S}),E.kill(),E.parent=E._dp=jo(a),E._start=0,p||A0(c)||A0(u)){if(R=S.length,M=p&&vU(p),Ao(p))for(D in p)~LU.indexOf(D)&&(I||(I={}),I[D]=p[D]);for(b=0;b<R;b++)A=Xv(r,DU),A.stagger=0,g&&(A.yoyoEase=g),I&&Zc(A,I),O=S[b],A.duration=+qh(c,jo(a),b,O,S),A.delay=(+qh(u,jo(a),b,O,S)||0)-a._delay,!p&&R===1&&A.delay&&(a._delay=u=A.delay,a._start+=u,A.delay=0),E.to(O,A,M?M(b,O,S):0),E._ease=Bt.none;E.duration()?c=u=0:a.timeline=0}else if(v){Yh(Cs(E.vars.defaults,{ease:"none"})),E._ease=kc(v.ease||r.ease||"none");var U=0,j,z,K;if($i(v))v.forEach(function(q){return E.to(S,q,">")}),E.duration();else{A={};for(D in v)D==="ease"||D==="easeEach"||pZ(D,v[D],A,v.easeEach);for(D in A)for(j=A[D].sort(function(q,ee){return q.t-ee.t}),U=0,b=0;b<j.length;b++)z=j[b],K={ease:z.e,duration:(z.t-(b?j[b-1].t:0))/100*c},K[D]=z.v,E.to(S,K,U),U+=K.duration;E.duration()<c&&E.to({},{duration:c-E.duration()})}}c||a.duration(c=E.duration())}else a.timeline=0;return m===!0&&!XM&&(tl=jo(a),An.killTweensOf(S),tl=0),go(x,jo(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(f||!c&&!v&&a._start===yi(x._time)&&Mr(f)&&$q(jo(a))&&x.data!=="nested")&&(a._tTime=-ln,a.render(Math.max(0,-u)||0)),y&&hU(jo(a),y),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,u=r<0,f=r>l-ln&&!u?l:r<ln?0:r,p,m,v,_,y,g,x,S,E;if(!c)Xq(this,r,s,o);else if(f!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(p=f,S=this.timeline,this._repeat){if(_=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(_*100+r,s,o);if(p=yi(f%_),f===l?(v=this._repeat,p=c):(v=~~(f/_),v&&v===yi(f/_)&&(p=c,v--),p>c&&(p=c)),g=this._yoyo&&v&1,g&&(E=this._yEase,p=c-p),y=td(this._tTime,_),p===a&&!o&&this._initted&&v===y)return this._tTime=f,this;v!==y&&(S&&this._yEase&&CU(S,g),this.vars.repeatRefresh&&!g&&!this._lock&&this._time!==_&&this._initted&&(this._lock=o=1,this.render(yi(_*v),!0).invalidate()._lock=0))}if(!this._initted){if(pU(this,u?r:p,o,s,f))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&v!==y))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(E||this._ease)(p/c),this._from&&(this.ratio=x=1-x),p&&!a&&!s&&!v&&(jr(this,"onStart"),this._tTime!==f))return this;for(m=this._pt;m;)m.r(x,m.d),m=m._next;S&&S.render(r<0?r:S._dur*S._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&_E(this,r,s,o),jr(this,"onUpdate")),this._repeat&&v!==y&&this.vars.onRepeat&&!s&&this.parent&&jr(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&_E(this,r,!0,!0),(r||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Ml(this,1),!s&&!(u&&!a)&&(f||a||g)&&(jr(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){Bp||Gr.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||nb(this,c),u=this._ease(c/this._dur),dZ(this,r,s,o,a,u,c,l)?this.resetTo(r,s,o,a,1):(f_(this,0),this.parent||fU(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Lh(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,tl&&tl.vars.overwrite!==!0)._first||Lh(this),this.parent&&o!==this.timeline.totalDuration()&&nd(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?Es(r):a,c=this._ptLookup,u=this._pt,f,p,m,v,_,y,g;if((!s||s==="all")&&Gq(a,l))return s==="all"&&(this._pt=0),Lh(this);for(f=this._op=this._op||[],s!=="all"&&(Si(s)&&(_={},br(s,function(x){return _[x]=1}),s=_),s=hZ(a,s)),g=a.length;g--;)if(~l.indexOf(a[g])){p=c[g],s==="all"?(f[g]=s,v=p,m={}):(m=f[g]=f[g]||{},v=s);for(_ in v)y=p&&p[_],y&&((!("kill"in y.d)||y.d.kill(_)===!0)&&c_(this,y,"_pt"),delete p[_]),m!=="all"&&(m[_]=1)}return this._initted&&!this._pt&&u&&Lh(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Kh(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Kh(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return An.killTweensOf(r,s,o)},e}(Hp);Cs(ei.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});br("staggerTo,staggerFrom,staggerFromTo",function(n){ei[n]=function(){var e=new or,t=SE.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var ib=function(e,t,i){return e[t]=i},OU=function(e,t,i){return e[t](i)},mZ=function(e,t,i,r){return e[t](r.fp,i)},gZ=function(e,t,i){return e.setAttribute(t,i)},rb=function(e,t){return zn(e[t])?OU:YM(e[t])&&e.setAttribute?gZ:ib},NU=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},vZ=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},kU=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},sb=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},yZ=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},_Z=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?c_(this,t,"_pt"):t.dep||(i=1),t=r;return!i},xZ=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},UU=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},Ar=function(){function n(t,i,r,s,o,a,l,c,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||NU,this.d=l||this,this.set=c||ib,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=xZ,this.m=i,this.mt=s,this.tween=r},n}();br(JM+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return QM[n]=1});Qr.TweenMax=Qr.TweenLite=ei;Qr.TimelineLite=Qr.TimelineMax=or;An=new or({sortChildren:!1,defaults:ed,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Kr.stringFilter=bU;var Uc=[],av={},SZ=[],ZP=0,wZ=0,tS=function(e){return(av[e]||SZ).map(function(t){return t()})},ME=function(){var e=Date.now(),t=[];e-ZP>2&&(tS("matchMediaInit"),Uc.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,c;for(a in r)o=po.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),tS("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),ZP=e,tS("matchMedia"))},FU=function(){function n(t,i){this.selector=i&&wE(i),this.data=[],this._r=[],this.isReverted=!1,this.id=wZ++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){zn(i)&&(s=r,r=i,i=zn);var o=this,a=function(){var c=_n,u=o.selector,f;return c&&c!==o&&c.data.push(o),s&&(o.selector=wE(s)),_n=o,f=r.apply(o,arguments),zn(f)&&o._r.push(f),_n=c,o.selector=u,o.isReverted=!1,f};return o.last=a,i===zn?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=_n;_n=null,i(this),_n=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof ei&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,f){return f.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof or?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof ei)&&c.revert&&c.revert(i);s._r.forEach(function(u){return u(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=Uc.length;o--;)Uc[o].id===this.id&&Uc.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),EZ=function(){function n(t){this.contexts=[],this.scope=t,_n&&_n.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){Ao(i)||(i={matches:i});var o=new FU(0,s||this.scope),a=o.conditions={},l,c,u;_n&&!o.selector&&(o.selector=_n.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(c in i)c==="all"?u=1:(l=po.matchMedia(i[c]),l&&(Uc.indexOf(o)<0&&Uc.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(ME):l.addEventListener("change",ME)));return u&&r(o,function(f){return o.add(null,f)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),Kv={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return EU(r)})},timeline:function(e){return new or(e)},getTweensOf:function(e,t){return An.getTweensOf(e,t)},getProperty:function(e,t,i,r){Si(e)&&(e=Es(e)[0]);var s=Oc(e||{}).get,o=i?uU:cU;return i==="native"&&(i=""),e&&(t?o((Fr[t]&&Fr[t].get||s)(e,t,i,r)):function(a,l,c){return o((Fr[a]&&Fr[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=Es(e),e.length>1){var r=e.map(function(u){return Rr.quickSetter(u,t,i)}),s=r.length;return function(u){for(var f=s;f--;)r[f](u)}}e=e[0]||{};var o=Fr[t],a=Oc(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var f=new o;Ef._pt=0,f.init(e,i?u+i:u,Ef,0,[e]),f.render(1,f),Ef._pt&&sb(1,Ef)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=Rr.to(e,Zc((r={},r[t]="+=0.1",r.paused=!0,r),i||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return An.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=kc(e.ease,ed.ease)),jP(ed,e||{})},config:function(e){return jP(Kr,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Fr[a]&&!Qr[a]&&Up(t+" effect requires "+a+" plugin.")}),Z1[t]=function(a,l,c){return i(Es(a),Cs(l||{},s),c)},o&&(or.prototype[t]=function(a,l,c){return this.add(Z1[t](a,Ao(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Bt[e]=kc(t)},parseEase:function(e,t){return arguments.length?kc(e,t):Bt},getById:function(e){return An.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new or(e),r,s;for(i.smoothChildTiming=Mr(e.smoothChildTiming),An.remove(i),i._dp=0,i._time=i._tTime=An._time,r=An._first;r;)s=r._next,(t||!(!r._dur&&r instanceof ei&&r.vars.onComplete===r._targets[0]))&&go(i,r,r._start-r._delay),r=s;return go(An,i,0),i},context:function(e,t){return e?new FU(e,t):_n},matchMedia:function(e){return new EZ(e)},matchMediaRefresh:function(){return Uc.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||ME()},addEventListener:function(e,t){var i=av[e]||(av[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=av[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:tZ,wrapYoyo:nZ,distribute:vU,random:_U,snap:yU,normalize:eZ,getUnit:Hi,clamp:qq,splitColor:TU,toArray:Es,selector:wE,mapRange:SU,pipe:Qq,unitize:Jq,interpolate:iZ,shuffle:gU},install:rU,effects:Z1,ticker:Gr,updateRoot:or.updateRoot,plugins:Fr,globalTimeline:An,core:{PropTween:Ar,globals:sU,Tween:ei,Timeline:or,Animation:Hp,getCache:Oc,_removeLinkedListItem:c_,reverting:function(){return Wi},context:function(e){return e&&_n&&(_n.data.push(e),e._ctx=_n),_n},suppressOverwrites:function(e){return XM=e}}};br("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Kv[n]=ei[n]});Gr.add(or.updateRoot);Ef=Kv.to({},{duration:0});var TZ=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},MZ=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=TZ(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},nS=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(Si(s)&&(l={},br(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}MZ(a,s)}}}},Rr=Kv.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Wi?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},nS("roundProps",EE),nS("modifiers"),nS("snap",yU))||Kv;ei.version=or.version=Rr.version="3.12.5";iU=1;KM()&&id();Bt.Power0;Bt.Power1;Bt.Power2;Bt.Power3;Bt.Power4;Bt.Linear;Bt.Quad;Bt.Cubic;Bt.Quart;Bt.Quint;Bt.Strong;Bt.Elastic;Bt.Back;Bt.SteppedEase;Bt.Bounce;Bt.Sine;Bt.Expo;Bt.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var QP,nl,Nf,ob,Mc,JP,ab,bZ=function(){return typeof window<"u"},ma={},pc=180/Math.PI,kf=Math.PI/180,Ju=Math.atan2,eI=1e8,lb=/([A-Z])/g,AZ=/(left|right|width|margin|padding|x)/i,CZ=/[\s,\(]\S/,xo={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},bE=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},RZ=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},PZ=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},IZ=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},zU=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},BU=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},LZ=function(e,t,i){return e.style[t]=i},DZ=function(e,t,i){return e.style.setProperty(t,i)},OZ=function(e,t,i){return e._gsap[t]=i},NZ=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},kZ=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},UZ=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},Rn="transform",Cr=Rn+"Origin",FZ=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in ma&&s){if(this.tfm=this.tfm||{},e!=="transform")e=xo[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=Ko(r,a)}):this.tfm[e]=o.x?o[e]:Ko(r,e),e===Cr&&(this.tfm.zOrigin=o.zOrigin);else return xo.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(Rn)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Cr,t,"")),e=Rn}(s||t)&&this.props.push(e,t,s[e])},HU=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},zZ=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(lb,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=ab(),(!s||!s.isStart)&&!i[Rn]&&(HU(i),r.zOrigin&&i[Cr]&&(i[Cr]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},VU=function(e,t){var i={target:e,props:[],revert:zZ,save:FZ};return e._gsap||Rr.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},GU,AE=function(e,t){var i=nl.createElementNS?nl.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):nl.createElement(e);return i&&i.style?i:nl.createElement(e)},To=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(lb,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,rd(t)||t,1)||""},tI="O,Moz,ms,Ms,Webkit".split(","),rd=function(e,t,i){var r=t||Mc,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(tI[o]+e in s););return o<0?null:(o===3?"ms":o>=0?tI[o]:"")+e},CE=function(){bZ()&&window.document&&(QP=window,nl=QP.document,Nf=nl.documentElement,Mc=AE("div")||{style:{}},AE("div"),Rn=rd(Rn),Cr=Rn+"Origin",Mc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",GU=!!rd("perspective"),ab=Rr.core.reverting,ob=1)},iS=function n(e){var t=AE("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Nf.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Nf.removeChild(t),this.style.cssText=s,o},nI=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},WU=function(e){var t;try{t=e.getBBox()}catch{t=iS.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===iS||(t=iS.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+nI(e,["x","cx","x1"])||0,y:+nI(e,["y","cy","y1"])||0,width:0,height:0}:t},$U=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&WU(e))},Qc=function(e,t){if(t){var i=e.style,r;t in ma&&t!==Cr&&(t=Rn),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(lb,"-$1").toLowerCase())):i.removeAttribute(t)}},il=function(e,t,i,r,s,o){var a=new Ar(e._pt,t,i,0,1,o?BU:zU);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},iI={deg:1,rad:1,turn:1},BZ={grid:1,flex:1},bl=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Mc.style,l=AZ.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),f=100,p=r==="px",m=r==="%",v,_,y,g;if(r===o||!s||iI[r]||iI[o])return s;if(o!=="px"&&!p&&(s=n(e,t,i,"px")),g=e.getCTM&&$U(e),(m||o==="%")&&(ma[t]||~t.indexOf("adius")))return v=g?e.getBBox()[l?"width":"height"]:e[u],jn(m?s/v*f:s/100*v);if(a[l?"width":"height"]=f+(p?o:r),_=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,g&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===nl||!_.appendChild)&&(_=nl.body),y=_._gsap,y&&m&&y.width&&l&&y.time===Gr.time&&!y.uncache)return jn(s/y.width*f);if(m&&(t==="height"||t==="width")){var x=e.style[t];e.style[t]=f+r,v=e[u],x?e.style[t]=x:Qc(e,t)}else(m||o==="%")&&!BZ[To(_,"display")]&&(a.position=To(e,"position")),_===e&&(a.position="static"),_.appendChild(Mc),v=Mc[u],_.removeChild(Mc),a.position="absolute";return l&&m&&(y=Oc(_),y.time=Gr.time,y.width=_[u]),jn(p?v*s/f:v&&s?f/v*s:0)},Ko=function(e,t,i,r){var s;return ob||CE(),t in xo&&t!=="transform"&&(t=xo[t],~t.indexOf(",")&&(t=t.split(",")[0])),ma[t]&&t!=="transform"?(s=Gp(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Zv(To(e,Cr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=qv[t]&&qv[t](e,t,i)||To(e,t)||aU(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?bl(e,t,s,i)+i:s},HZ=function(e,t,i,r){if(!i||i==="none"){var s=rd(t,e,1),o=s&&To(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=To(e,"borderTopColor"))}var a=new Ar(this._pt,e.style,t,0,1,kU),l=0,c=0,u,f,p,m,v,_,y,g,x,S,E,b;if(a.b=i,a.e=r,i+="",r+="",r==="auto"&&(_=e.style[t],e.style[t]=r,r=To(e,t)||r,_?e.style[t]=_:Qc(e,t)),u=[i,r],bU(u),i=u[0],r=u[1],p=i.match(wf)||[],b=r.match(wf)||[],b.length){for(;f=wf.exec(r);)y=f[0],x=r.substring(l,f.index),v?v=(v+1)%5:(x.substr(-5)==="rgba("||x.substr(-5)==="hsla(")&&(v=1),y!==(_=p[c++]||"")&&(m=parseFloat(_)||0,E=_.substr((m+"").length),y.charAt(1)==="="&&(y=Of(m,y)+E),g=parseFloat(y),S=y.substr((g+"").length),l=wf.lastIndex-S.length,S||(S=S||Kr.units[t]||E,l===r.length&&(r+=S,a.e+=S)),E!==S&&(m=bl(e,t,_,S)||0),a._pt={_next:a._pt,p:x||c===1?x:",",s:m,c:g-m,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?BU:zU;return tU.test(r)&&(a.e=0),this._pt=a,a},rI={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},VZ=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=rI[i]||i,t[1]=rI[r]||r,t.join(" ")},GZ=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],ma[a]&&(l=1,a=a==="transformOrigin"?Cr:Rn),Qc(i,a);l&&(Qc(i,Rn),o&&(o.svg&&i.removeAttribute("transform"),Gp(i,1),o.uncache=1,HU(r)))}},qv={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new Ar(e._pt,t,i,0,0,GZ);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},Vp=[1,0,0,1,0,0],jU={},XU=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},sI=function(e){var t=To(e,Rn);return XU(t)?Vp:t.substr(7).match(eU).map(jn)},cb=function(e,t){var i=e._gsap||Oc(e),r=e.style,s=sI(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Vp:s):(s===Vp&&!e.offsetParent&&e!==Nf&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,Nf.appendChild(e)),s=sI(e),l?r.display=l:Qc(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Nf.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},RE=function(e,t,i,r,s,o){var a=e._gsap,l=s||cb(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,p=a.yOffset||0,m=l[0],v=l[1],_=l[2],y=l[3],g=l[4],x=l[5],S=t.split(" "),E=parseFloat(S[0])||0,b=parseFloat(S[1])||0,A,R,D,O;i?l!==Vp&&(R=m*y-v*_)&&(D=E*(y/R)+b*(-_/R)+(_*x-y*g)/R,O=E*(-v/R)+b*(m/R)-(m*x-v*g)/R,E=D,b=O):(A=WU(e),E=A.x+(~S[0].indexOf("%")?E/100*A.width:E),b=A.y+(~(S[1]||S[0]).indexOf("%")?b/100*A.height:b)),r||r!==!1&&a.smooth?(g=E-c,x=b-u,a.xOffset=f+(g*m+x*_)-g,a.yOffset=p+(g*v+x*y)-x):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=b,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[Cr]="0px 0px",o&&(il(o,a,"xOrigin",c,E),il(o,a,"yOrigin",u,b),il(o,a,"xOffset",f,a.xOffset),il(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",E+" "+b)},Gp=function(e,t){var i=e._gsap||new PU(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=To(e,Cr)||"0",u,f,p,m,v,_,y,g,x,S,E,b,A,R,D,O,M,I,U,j,z,K,q,ee,N,V,W,Q,ie,Me,te,ue;return u=f=p=_=y=g=x=S=E=0,m=v=1,i.svg=!!(e.getCTM&&$U(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[Rn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Rn]!=="none"?l[Rn]:"")),r.scale=r.rotate=r.translate="none"),R=cb(e,i.svg),i.svg&&(i.uncache?(N=e.getBBox(),c=i.xOrigin-N.x+"px "+(i.yOrigin-N.y)+"px",ee=""):ee=!t&&e.getAttribute("data-svg-origin"),RE(e,ee||c,!!ee||i.originIsAbsolute,i.smooth!==!1,R)),b=i.xOrigin||0,A=i.yOrigin||0,R!==Vp&&(I=R[0],U=R[1],j=R[2],z=R[3],u=K=R[4],f=q=R[5],R.length===6?(m=Math.sqrt(I*I+U*U),v=Math.sqrt(z*z+j*j),_=I||U?Ju(U,I)*pc:0,x=j||z?Ju(j,z)*pc+_:0,x&&(v*=Math.abs(Math.cos(x*kf))),i.svg&&(u-=b-(b*I+A*j),f-=A-(b*U+A*z))):(ue=R[6],Me=R[7],W=R[8],Q=R[9],ie=R[10],te=R[11],u=R[12],f=R[13],p=R[14],D=Ju(ue,ie),y=D*pc,D&&(O=Math.cos(-D),M=Math.sin(-D),ee=K*O+W*M,N=q*O+Q*M,V=ue*O+ie*M,W=K*-M+W*O,Q=q*-M+Q*O,ie=ue*-M+ie*O,te=Me*-M+te*O,K=ee,q=N,ue=V),D=Ju(-j,ie),g=D*pc,D&&(O=Math.cos(-D),M=Math.sin(-D),ee=I*O-W*M,N=U*O-Q*M,V=j*O-ie*M,te=z*M+te*O,I=ee,U=N,j=V),D=Ju(U,I),_=D*pc,D&&(O=Math.cos(D),M=Math.sin(D),ee=I*O+U*M,N=K*O+q*M,U=U*O-I*M,q=q*O-K*M,I=ee,K=N),y&&Math.abs(y)+Math.abs(_)>359.9&&(y=_=0,g=180-g),m=jn(Math.sqrt(I*I+U*U+j*j)),v=jn(Math.sqrt(q*q+ue*ue)),D=Ju(K,q),x=Math.abs(D)>2e-4?D*pc:0,E=te?1/(te<0?-te:te):0),i.svg&&(ee=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!XU(To(e,Rn)),ee&&e.setAttribute("transform",ee))),Math.abs(x)>90&&Math.abs(x)<270&&(s?(m*=-1,x+=_<=0?180:-180,_+=_<=0?180:-180):(v*=-1,x+=x<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=f-((i.yPercent=f&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=jn(m),i.scaleY=jn(v),i.rotation=jn(_)+a,i.rotationX=jn(y)+a,i.rotationY=jn(g)+a,i.skewX=x+a,i.skewY=S+a,i.transformPerspective=E+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[Cr]=Zv(c)),i.xOffset=i.yOffset=0,i.force3D=Kr.force3D,i.renderTransform=i.svg?$Z:GU?YU:WZ,i.uncache=0,i},Zv=function(e){return(e=e.split(" "))[0]+" "+e[1]},rS=function(e,t,i){var r=Hi(t);return jn(parseFloat(t)+parseFloat(bl(e,"x",i+"px",r)))+r},WZ=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,YU(e,t)},sc="0deg",Eh="0px",oc=") ",YU=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,f=i.rotationX,p=i.skewX,m=i.skewY,v=i.scaleX,_=i.scaleY,y=i.transformPerspective,g=i.force3D,x=i.target,S=i.zOrigin,E="",b=g==="auto"&&e&&e!==1||g===!0;if(S&&(f!==sc||u!==sc)){var A=parseFloat(u)*kf,R=Math.sin(A),D=Math.cos(A),O;A=parseFloat(f)*kf,O=Math.cos(A),o=rS(x,o,R*O*-S),a=rS(x,a,-Math.sin(A)*-S),l=rS(x,l,D*O*-S+S)}y!==Eh&&(E+="perspective("+y+oc),(r||s)&&(E+="translate("+r+"%, "+s+"%) "),(b||o!==Eh||a!==Eh||l!==Eh)&&(E+=l!==Eh||b?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+oc),c!==sc&&(E+="rotate("+c+oc),u!==sc&&(E+="rotateY("+u+oc),f!==sc&&(E+="rotateX("+f+oc),(p!==sc||m!==sc)&&(E+="skew("+p+", "+m+oc),(v!==1||_!==1)&&(E+="scale("+v+", "+_+oc),x.style[Rn]=E||"translate(0, 0)"},$Z=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,f=i.scaleX,p=i.scaleY,m=i.target,v=i.xOrigin,_=i.yOrigin,y=i.xOffset,g=i.yOffset,x=i.forceCSS,S=parseFloat(o),E=parseFloat(a),b,A,R,D,O;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=kf,c*=kf,b=Math.cos(l)*f,A=Math.sin(l)*f,R=Math.sin(l-c)*-p,D=Math.cos(l-c)*p,c&&(u*=kf,O=Math.tan(c-u),O=Math.sqrt(1+O*O),R*=O,D*=O,u&&(O=Math.tan(u),O=Math.sqrt(1+O*O),b*=O,A*=O)),b=jn(b),A=jn(A),R=jn(R),D=jn(D)):(b=f,D=p,A=R=0),(S&&!~(o+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(S=bl(m,"x",o,"px"),E=bl(m,"y",a,"px")),(v||_||y||g)&&(S=jn(S+v-(v*b+_*R)+y),E=jn(E+_-(v*A+_*D)+g)),(r||s)&&(O=m.getBBox(),S=jn(S+r/100*O.width),E=jn(E+s/100*O.height)),O="matrix("+b+","+A+","+R+","+D+","+S+","+E+")",m.setAttribute("transform",O),x&&(m.style[Rn]=O)},jZ=function(e,t,i,r,s){var o=360,a=Si(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?pc:1),c=l-r,u=r+c+"deg",f,p;return a&&(f=s.split("_")[1],f==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),f==="cw"&&c<0?c=(c+o*eI)%o-~~(c/o)*o:f==="ccw"&&c>0&&(c=(c-o*eI)%o-~~(c/o)*o)),e._pt=p=new Ar(e._pt,t,i,r,c,RZ),p.e=u,p.u="deg",e._props.push(i),p},oI=function(e,t){for(var i in t)e[i]=t[i];return e},XZ=function(e,t,i){var r=oI({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,f,p,m,v;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[Rn]=t,a=Gp(i,1),Qc(i,Rn),i.setAttribute("transform",c)):(c=getComputedStyle(i)[Rn],o[Rn]=t,a=Gp(i,1),o[Rn]=c);for(l in ma)c=r[l],u=a[l],c!==u&&s.indexOf(l)<0&&(m=Hi(c),v=Hi(u),f=m!==v?bl(i,l,c,v):parseFloat(c),p=parseFloat(u),e._pt=new Ar(e._pt,a,l,f,p-f,bE),e._pt.u=v||0,e._props.push(l));oI(a,r)};br("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});qv[e>1?"border"+n:n]=function(a,l,c,u,f){var p,m;if(arguments.length<4)return p=o.map(function(v){return Ko(a,v,c)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(u+"").split(" "),m={},o.forEach(function(v,_){return m[v]=p[_]=p[_]||p[(_-1)/2|0]}),a.init(l,m,f)}});var KU={name:"css",register:CE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,c,u,f,p,m,v,_,y,g,x,S,E,b,A,R,D;ob||CE(),this.styles=this.styles||VU(e),D=this.styles.props,this.tween=i;for(_ in t)if(_!=="autoRound"&&(u=t[_],!(Fr[_]&&IU(_,t,i,r,e,s)))){if(m=typeof u,v=qv[_],m==="function"&&(u=u.call(i,r,e,s),m=typeof u),m==="string"&&~u.indexOf("random(")&&(u=zp(u)),v)v(this,e,_,u,i)&&(R=1);else if(_.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(_)+"").trim(),u+="",yl.lastIndex=0,yl.test(c)||(y=Hi(c),g=Hi(u)),g?y!==g&&(c=bl(e,_,c,g)+g):y&&(u+=y),this.add(a,"setProperty",c,u,r,s,0,0,_),o.push(_),D.push(_,0,a[_]);else if(m!=="undefined"){if(l&&_ in l?(c=typeof l[_]=="function"?l[_].call(i,r,e,s):l[_],Si(c)&&~c.indexOf("random(")&&(c=zp(c)),Hi(c+"")||c==="auto"||(c+=Kr.units[_]||Hi(Ko(e,_))||""),(c+"").charAt(1)==="="&&(c=Ko(e,_))):c=Ko(e,_),p=parseFloat(c),x=m==="string"&&u.charAt(1)==="="&&u.substr(0,2),x&&(u=u.substr(2)),f=parseFloat(u),_ in xo&&(_==="autoAlpha"&&(p===1&&Ko(e,"visibility")==="hidden"&&f&&(p=0),D.push("visibility",0,a.visibility),il(this,a,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),_!=="scale"&&_!=="transform"&&(_=xo[_],~_.indexOf(",")&&(_=_.split(",")[0]))),S=_ in ma,S){if(this.styles.save(_),E||(b=e._gsap,b.renderTransform&&!t.parseTransform||Gp(e,t.parseTransform),A=t.smoothOrigin!==!1&&b.smooth,E=this._pt=new Ar(this._pt,a,Rn,0,1,b.renderTransform,b,0,-1),E.dep=1),_==="scale")this._pt=new Ar(this._pt,b,"scaleY",b.scaleY,(x?Of(b.scaleY,x+f):f)-b.scaleY||0,bE),this._pt.u=0,o.push("scaleY",_),_+="X";else if(_==="transformOrigin"){D.push(Cr,0,a[Cr]),u=VZ(u),b.svg?RE(e,u,0,A,0,this):(g=parseFloat(u.split(" ")[2])||0,g!==b.zOrigin&&il(this,b,"zOrigin",b.zOrigin,g),il(this,a,_,Zv(c),Zv(u)));continue}else if(_==="svgOrigin"){RE(e,u,1,A,0,this);continue}else if(_ in jU){jZ(this,b,_,p,x?Of(p,x+u):u);continue}else if(_==="smoothOrigin"){il(this,b,"smooth",b.smooth,u);continue}else if(_==="force3D"){b[_]=u;continue}else if(_==="transform"){XZ(this,u,e);continue}}else _ in a||(_=rd(_)||_);if(S||(f||f===0)&&(p||p===0)&&!CZ.test(u)&&_ in a)y=(c+"").substr((p+"").length),f||(f=0),g=Hi(u)||(_ in Kr.units?Kr.units[_]:y),y!==g&&(p=bl(e,_,c,g)),this._pt=new Ar(this._pt,S?b:a,_,p,(x?Of(p,x+f):f)-p,!S&&(g==="px"||_==="zIndex")&&t.autoRound!==!1?IZ:bE),this._pt.u=g||0,y!==g&&g!=="%"&&(this._pt.b=c,this._pt.r=PZ);else if(_ in a)HZ.call(this,e,_,c,x?x+u:u);else if(_ in e)this.add(e,_,c||e[_],x?x+u:u,r,s);else if(_!=="parseTransform"){ZM(_,u);continue}S||(_ in a?D.push(_,0,a[_]):D.push(_,1,c||e[_])),o.push(_)}}R&&UU(this)},render:function(e,t){if(t.tween._time||!ab())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Ko,aliases:xo,getSetter:function(e,t,i){var r=xo[t];return r&&r.indexOf(",")<0&&(t=r),t in ma&&t!==Cr&&(e._gsap.x||Ko(e,"x"))?i&&JP===i?t==="scale"?NZ:OZ:(JP=i||{})&&(t==="scale"?kZ:UZ):e.style&&!YM(e.style[t])?LZ:~t.indexOf("-")?DZ:rb(e,t)},core:{_removeProperty:Qc,_getMatrix:cb}};Rr.utils.checkPrefix=rd;Rr.core.getStyleSaver=VU;(function(n,e,t,i){var r=br(n+","+e+","+t,function(s){ma[s]=1});br(e,function(s){Kr.units[s]="deg",jU[s]=1}),xo[r[13]]=n+","+e,br(i,function(s){var o=s.split(":");xo[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");br("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Kr.units[n]="px"});Rr.registerPlugin(KU);var qU=Rr.registerPlugin(KU)||Rr;qU.core.Tween;const YZ=({url:n,name:e,position:t,scale:i,onSelect:r,onHover:s,isSelected:o,isHovered:a,resetPosition:l=!1})=>{const c=$M(JK,n),u=P.useMemo(()=>Dq(c.scene),[c.scene]),f=P.useRef(null);P.useEffect(()=>{f.current&&console.log(`模型 ${e} 的引用:`,f.current)},[e]);const[p,m]=P.useMemo(()=>[new H(Math.random()*.01,Math.random()*.01,Math.random()*.01),new H(Math.random()*.04-.02,Math.random()*.04-.02,Math.random()*.04-.02)],[]);Vv(()=>{if(f.current){const x={minX:-20,maxX:20,minY:-15,maxY:15,minZ:-20,maxZ:20};f.current.rotation.x+=p.x,f.current.rotation.y+=p.y,f.current.rotation.z+=p.z;const S=f.current.position.x+m.x,E=f.current.position.y+m.y,b=f.current.position.z+m.z;(S<x.minX||S>x.maxX)&&(m.x*=-1),(E<x.minY||E>x.maxY)&&(m.y*=-1),(b<x.minZ||b>x.maxZ)&&(m.z*=-1),f.current.position.x+=m.x,f.current.position.y+=m.y,f.current.position.z+=m.z}}),P.useEffect(()=>{l&&f.current&&qU.to(f.current.position,{x:t[0],y:t[1],z:t[2],duration:1,ease:"power3.out"})},[l,t]);const v=P.useMemo(()=>new Tr({color:new Ie("#ffffff"),metalness:0,roughness:1,transmission:0,transparent:!1,reflectivity:3,clearcoat:0,clearcoatRoughness:0}),[]),_=P.useMemo(()=>new Tr({color:new Ie("#454545"),metalness:0,roughness:0,transmission:0,transparent:!1,reflectivity:3,clearcoat:0,clearcoatRoughness:0}),[]),y=P.useMemo(()=>new xd({color:new Ie("#B4FF00"),transparent:!0,opacity:.5}),[]),g=P.useMemo(()=>new Tr({color:new Ie("#CCFF00"),metalness:0,roughness:1,transmission:0,transparent:!1,reflectivity:0,clearcoat:0,clearcoatRoughness:0}),[]);return P.useEffect(()=>{u.traverse(x=>{x instanceof Pn&&(x.name==="Mesh_0001_1"?x.material=_:x.material=o?g:a?y:v)})},[u,o,a,v,_,y,g]),Vv(()=>{f.current&&(f.current.name=e)}),ae.jsx("primitive",{object:u,ref:f,position:t,onPointerOver:()=>s(e),onPointerOut:()=>s(null),onClick:()=>r(e),scale:i})},KZ="_canvas3D_1wdfp_1",qZ={canvas3D:KZ};function ZZ(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function ZU(...n){return e=>n.forEach(t=>ZZ(t,e))}function Ed(...n){return P.useCallback(ZU(...n),n)}const QU=P.forwardRef((n,e)=>{const{children:t,...i}=n,r=P.Children.toArray(t),s=r.find(QZ);if(s){const o=s.props.children,a=r.map(l=>l===s?P.Children.count(o)>1?P.Children.only(null):P.isValidElement(o)?o.props.children:null:l);return P.createElement(PE,Hn({},i,{ref:e}),P.isValidElement(o)?P.cloneElement(o,void 0,a):null)}return P.createElement(PE,Hn({},i,{ref:e}),t)});QU.displayName="Slot";const PE=P.forwardRef((n,e)=>{const{children:t,...i}=n;return P.isValidElement(t)?P.cloneElement(t,{...JZ(i,t.props),ref:e?ZU(e,t.ref):t.ref}):P.Children.count(t)>1?P.Children.only(null):null});PE.displayName="SlotClone";const JU=({children:n})=>P.createElement(P.Fragment,null,n);function QZ(n){return P.isValidElement(n)&&n.type===JU}function JZ(n,e){const t={...e};for(const i in e){const r=n[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?t[i]=(...a)=>{s(...a),r(...a)}:r&&(t[i]=r):i==="style"?t[i]={...r,...s}:i==="className"&&(t[i]=[r,s].filter(Boolean).join(" "))}return{...n,...t}}const eQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],fu=eQ.reduce((n,e)=>{const t=P.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?QU:e;return P.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),P.createElement(a,Hn({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function tQ(n,e){n&&Jp.flushSync(()=>n.dispatchEvent(e))}const nQ=P.forwardRef((n,e)=>{var t;const{container:i=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=n;return i?cH.createPortal(P.createElement(fu.div,Hn({},r,{ref:e})),i):null}),iQ=nQ;var aI=Object.prototype.hasOwnProperty;function Qv(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&Qv(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(aI.call(n,t)&&++i&&!aI.call(e,t)||!(t in e)||!Qv(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}var d_=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};d_.prototype._test=function(e){var t=this.fn;try{Uf(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Uf(this.modifiers.slice(),t,this)(e)}catch{return!1}};d_.prototype._check=function(e){try{Uf(this.modifiers.slice(),this.fn,this)(e)}catch{if(Uf(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!Uf(this.modifiers.slice(),this.fn,this)(e))throw null};d_.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){tF(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):r(null)}).catch(function(s){return r(s)})})};function eF(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Uf(n,e,t){if(n.length){var i=n.shift(),r=Uf(n,e,t);return i.perform(r,t)}else return eF(e)}function tF(n,e,t){if(n.length){var i=n.shift(),r=tF(n,e,t);return i.performAsync(r,t)}else return function(s){return Promise.resolve(eF(e,"async")(s))}}var rQ=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},ub=function(n){function e(t,i,r,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),Co=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Co.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return i.chain.push(new d_(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};Co.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new rQ(t,e.simple,e.async)),this};Co.prototype._clone=function(){return new Co(this.chain.slice(),this.nextRuleModifiers.slice())};Co.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Co.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new ub(i,e,r))}}),t};Co.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new ub(t,e,i)}})};Co.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){nF(e,t.chain.slice(),i,r)})};function nF(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){nF(n,e,t,i)},function(s){i(new ub(r,n,s))})}else t(n)}var lI=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function sQ(n,e){return e===void 0&&(e=!1),{simple:function(t){return lI(t,e)||n.check(t)===void 0},async:function(t){return lI(t,e)||n.testAsync(t)}}}function xr(){return typeof Proxy<"u"?iF(new Co):IE(new Co)}var Wp={};xr.extend=function(n){Object.assign(Wp,n)};xr.clearCustomRules=function(){Wp={}};function iF(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=iF(n._clone());if(i in Jv)return r._applyModifier(Jv[i],i);if(i in Wp)return r._applyRule(Wp[i],i);if(i in LE)return r._applyRule(LE[i],i)}})}function IE(n){var e=function(r,s){return Object.keys(r).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=IE(s._clone()),u=c._applyRule(r[o],o).apply(void 0,a);return u}}),s},t=e(LE,n),i=e(Wp,t);return Object.keys(Jv).forEach(function(r){Object.defineProperty(i,r,{get:function(){var s=IE(i._clone());return s._applyModifier(Jv[r],r)}})}),i}var Jv={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return C0(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(C0(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&C0(e).every(n)}},async:function(n){return function(e){return Promise.all(C0(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return cI(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return cI(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function cI(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function C0(n){return typeof n=="string"?n.split(""):n}var LE={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||oQ;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return ef("string")},boolean:function(){return ef("boolean")},undefined:function(){return ef("undefined")},null:function(){return ef("null")},array:function(){return ef("array")},object:function(){return ef("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return aQ(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:sQ};function ef(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function oQ(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function aQ(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(s){s.target=i,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var s=n[r];return s.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var Jt="colors",Qi="sizes",Ke="space",lQ={gap:Ke,gridGap:Ke,columnGap:Ke,gridColumnGap:Ke,rowGap:Ke,gridRowGap:Ke,inset:Ke,insetBlock:Ke,insetBlockEnd:Ke,insetBlockStart:Ke,insetInline:Ke,insetInlineEnd:Ke,insetInlineStart:Ke,margin:Ke,marginTop:Ke,marginRight:Ke,marginBottom:Ke,marginLeft:Ke,marginBlock:Ke,marginBlockEnd:Ke,marginBlockStart:Ke,marginInline:Ke,marginInlineEnd:Ke,marginInlineStart:Ke,padding:Ke,paddingTop:Ke,paddingRight:Ke,paddingBottom:Ke,paddingLeft:Ke,paddingBlock:Ke,paddingBlockEnd:Ke,paddingBlockStart:Ke,paddingInline:Ke,paddingInlineEnd:Ke,paddingInlineStart:Ke,top:Ke,right:Ke,bottom:Ke,left:Ke,scrollMargin:Ke,scrollMarginTop:Ke,scrollMarginRight:Ke,scrollMarginBottom:Ke,scrollMarginLeft:Ke,scrollMarginX:Ke,scrollMarginY:Ke,scrollMarginBlock:Ke,scrollMarginBlockEnd:Ke,scrollMarginBlockStart:Ke,scrollMarginInline:Ke,scrollMarginInlineEnd:Ke,scrollMarginInlineStart:Ke,scrollPadding:Ke,scrollPaddingTop:Ke,scrollPaddingRight:Ke,scrollPaddingBottom:Ke,scrollPaddingLeft:Ke,scrollPaddingX:Ke,scrollPaddingY:Ke,scrollPaddingBlock:Ke,scrollPaddingBlockEnd:Ke,scrollPaddingBlockStart:Ke,scrollPaddingInline:Ke,scrollPaddingInlineEnd:Ke,scrollPaddingInlineStart:Ke,fontSize:"fontSizes",background:Jt,backgroundColor:Jt,backgroundImage:Jt,borderImage:Jt,border:Jt,borderBlock:Jt,borderBlockEnd:Jt,borderBlockStart:Jt,borderBottom:Jt,borderBottomColor:Jt,borderColor:Jt,borderInline:Jt,borderInlineEnd:Jt,borderInlineStart:Jt,borderLeft:Jt,borderLeftColor:Jt,borderRight:Jt,borderRightColor:Jt,borderTop:Jt,borderTopColor:Jt,caretColor:Jt,color:Jt,columnRuleColor:Jt,fill:Jt,outline:Jt,outlineColor:Jt,stroke:Jt,textDecorationColor:Jt,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Qi,minBlockSize:Qi,maxBlockSize:Qi,inlineSize:Qi,minInlineSize:Qi,maxInlineSize:Qi,width:Qi,minWidth:Qi,maxWidth:Qi,height:Qi,minHeight:Qi,maxHeight:Qi,flexBasis:Qi,gridTemplateColumns:Qi,gridTemplateRows:Qi,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},cQ=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Td=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(s=>JSON.stringify(s,cQ))(e);return r in n?n[r]:n[r]=t(e,...i)}},Fc=Symbol.for("sxs.internal"),fb=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),uI=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:uQ}=Object.prototype,DE=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),fQ=/\s+(?![^()]*\))/,tf=n=>e=>n(...typeof e=="string"?String(e).split(fQ):[e]),fI={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:tf((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:tf((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:tf((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:tf((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:tf((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:tf((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},sS=/([\d.]+)([^]*)/,dQ=(n,e)=>n.length?n.reduce((t,i)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r)),t),[]):e,hQ=(n,e)=>n in pQ&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,i,r,s)=>i+(r==="stretch"?`-moz-available${s};${DE(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${DE(n)}:${i}fit-content`)+s):String(e),pQ={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},ga=n=>n?n+"-":"",rF=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,r,s,o,a)=>o=="$"==!!s?i:(r||o=="--"?"calc(":"")+"var(--"+(o==="$"?ga(e)+(a.includes("$")?"":ga(t))+a.replace(/\$/g,"-"):a)+")"+(r||o=="--"?"*"+(r||"")+(s||"1")+")":"")),mQ=/\s*,\s*(?![^()]*\))/,gQ=Object.prototype.toString,Tf=(n,e,t,i,r)=>{let s,o,a;const l=(c,u,f)=>{let p,m;const v=_=>{for(p in _){const x=p.charCodeAt(0)===64,S=x&&Array.isArray(_[p])?_[p]:[_[p]];for(m of S){const E=/[A-Z]/.test(g=p)?g:g.replace(/-[^]/g,A=>A[1].toUpperCase()),b=typeof m=="object"&&m&&m.toString===gQ&&(!i.utils[E]||!u.length);if(E in i.utils&&!b){const A=i.utils[E];if(A!==o){o=A,v(A(m)),o=null;continue}}else if(E in fI){const A=fI[E];if(A!==a){a=A,v(A(m)),a=null;continue}}if(x&&(y=p.slice(1)in i.media?"@media "+i.media[p.slice(1)]:p,p=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(A,R,D,O,M,I)=>{const U=sS.test(R),j=.0625*(U?-1:1),[z,K]=U?[O,R]:[R,O];return"("+(D[0]==="="?"":D[0]===">"===U?"max-":"min-")+z+":"+(D[0]!=="="&&D.length===1?K.replace(sS,(q,ee,N)=>Number(ee)+j*(D===">"?1:-1)+N):K)+(M?") and ("+(M[0]===">"?"min-":"max-")+z+":"+(M.length===1?I.replace(sS,(q,ee,N)=>Number(ee)+j*(M===">"?-1:1)+N):I):"")+")"})),b){const A=x?f.concat(p):[...f],R=x?[...u]:dQ(u,p.split(mQ));s!==void 0&&r(dI(...s)),s=void 0,l(m,R,A)}else s===void 0&&(s=[[],u,f]),p=x||p.charCodeAt(0)!==36?p:`--${ga(i.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=b?m:typeof m=="number"?m&&E in vQ?String(m)+"px":String(m):rF(hQ(E,m??""),i.prefix,i.themeMap[E]),s[0].push(`${x?`${p} `:`${DE(p)}:`}${m}`)}}var y,g};v(c),s!==void 0&&r(dI(...s)),s=void 0};l(n,e,t)},dI=(n,e,t)=>`${t.map(i=>`${i}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,vQ={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},hI=n=>String.fromCharCode(n+(n>25?39:97)),zc=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=hI(t%52)+i;return hI(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),Oh=["themed","global","styled","onevar","resonevar","allvar","inline"],yQ=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},_Q=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(r[o-1]&&(l=r[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},i=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const r=Object(n).styleSheets||[];for(const a of r)if(yQ(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const f=Object(c[l+1]);if(f.type!==4)continue;++l;const{cssText:p}=u;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),v=Oh[m[0]];v&&(e||(e={sheet:a,reset:i,rules:{},toString:t}),e.rules[v]={group:f,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,f){this.cssRules.splice(f,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:o}=e;for(let a=Oh.length-1;a>=0;--a){const l=Oh[a];if(!o[l]){const c=Oh[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}xQ(o[l])}};return i(),e},xQ=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},Th=Symbol(),SQ=Td(),pI=(n,e)=>SQ(n,()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[Fc]){i.type==null&&(i.type=r[Fc].type);for(const s of r[Fc].composers)i.composers.add(s)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(wQ(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),EQ(n,i,e)}),wQ=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const s=`${ga(r.prefix)}c-${zc(i)}`,o=[],a=[],l=Object.create(null),c=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){u=l,f=p,uQ.call(u,f)||(l[p]="undefined");const m=n[p];for(const v in m){const _={[p]:String(v)};String(v)==="undefined"&&c.push(p);const y=m[v],g=[_,y,!uI(y)];o.push(g)}}var u,f;if(typeof e=="object"&&e)for(const p of e){let{css:m,...v}=p;m=typeof m=="object"&&m||{};for(const y in v)v[y]=String(v[y]);const _=[v,m,!uI(m)];a.push(_)}return[s,i,o,a,l,c]},EQ=(n,e,t)=>{const[i,r,s,o]=TQ(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function p(){for(let m=0;m<p[Th].length;m++){const[v,_]=p[Th][m];f.rules[v].apply(_)}return p[Th]=[],null}return p[Th]=[],p.rules={},Oh.forEach(m=>p.rules[m]={apply:v=>p[Th].push([m,v])}),p})(t):null,l=(a||t).rules,c=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,u=f=>{f=typeof f=="object"&&f||MQ;const{css:p,...m}=f,v={};for(const g in s)if(delete m[g],g in f){let x=f[g];typeof x=="object"&&x?v[g]={"@initial":s[g],...x}:(x=String(x),v[g]=x!=="undefined"||o.has(g)?x:s[g])}else v[g]=s[g];const _=new Set([...r]);for(const[g,x,S,E]of e.composers){t.rules.styled.cache.has(g)||(t.rules.styled.cache.add(g),Tf(x,[`.${g}`],[],n,R=>{l.styled.apply(R)}));const b=mI(S,v,n.media),A=mI(E,v,n.media,!0);for(const R of b)if(R!==void 0)for(const[D,O,M]of R){const I=`${g}-${zc(O)}-${D}`;_.add(I);const U=(M?t.rules.resonevar:t.rules.onevar).cache,j=M?l.resonevar:l.onevar;U.has(I)||(U.add(I),Tf(O,[`.${I}`],[],n,z=>{j.apply(z)}))}for(const R of A)if(R!==void 0)for(const[D,O]of R){const M=`${g}-${zc(O)}-${D}`;_.add(M),t.rules.allvar.cache.has(M)||(t.rules.allvar.cache.add(M),Tf(O,[`.${M}`],[],n,I=>{l.allvar.apply(I)}))}}if(typeof p=="object"&&p){const g=`${i}-i${zc(p)}-css`;_.add(g),t.rules.inline.cache.has(g)||(t.rules.inline.cache.add(g),Tf(p,[`.${g}`],[],n,x=>{l.inline.apply(x)}))}for(const g of String(f.className||"").trim().split(/\s+/))g&&_.add(g);const y=m.className=[..._].join(" ");return{type:e.type,className:y,selector:c,props:m,toString:()=>y,deferredInjector:a}};return fb(u,{className:i,selector:c,[Fc]:e,toString:()=>(t.rules.styled.cache.has(i)||u(),i)})},TQ=n=>{let e="";const t=[],i={},r=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),r.push(...a);for(const l in o){const c=o[l];(i[l]===void 0||c!=="undefined"||a.includes(c))&&(i[l]=c)}}return[e,t,i,new Set(r)]},mI=(n,e,t,i)=>{const r=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,u=!1;for(l in s){const f=s[l];let p=e[l];if(p!==f){if(typeof p!="object"||!p)continue e;{let m,v,_=0;for(const y in p){if(f===String(p[y])){if(y!=="@initial"){const g=y.slice(1);(v=v||[]).push(g in t?t[g]:y.replace(/^@media ?/,"")),u=!0}c+=_,m=!0}++_}if(v&&v.length&&(o={["@media "+v.join(", ")]:o}),!m)continue e}}}(r[c]=r[c]||[]).push([i?"cv":`${l}-${s[l]}`,o,u])}return r},MQ={},bQ=Td(),AQ=(n,e)=>bQ(n,()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=zc(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(r["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete r["@import"]}Tf(r,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return fb(i,{toString:i})}),CQ=Td(),RQ=(n,e)=>CQ(n,()=>t=>{const i=`${ga(n.prefix)}k-${zc(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];Tf(t,[],[],n,a=>s.push(a));const o=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(o)}return i};return fb(r,{get name(){return r()},toString:r})}),PQ=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+ga(this.prefix)+ga(this.scale)+this.token}toString(){return this.computedValue}},IQ=Td(),LQ=(n,e)=>IQ(n,()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${ga(n.prefix)}t-${zc(i)}`}`,s={},o=[];for(const l in i){s[l]={};for(const c in i[l]){const u=`--${ga(n.prefix)}${l}-${c}`,f=rF(String(i[l][c]),n.prefix,l);s[l][c]=new PQ(c,f,l,n.prefix),o.push(`${u}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${i===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:r,toString:a}}),DQ=Td(),OQ=Td(),NQ=n=>{const e=(t=>{let i=!1;const r=DQ(t,s=>{i=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...lQ},utils:typeof s.utils=="object"&&s.utils||{}},f=_Q(l),p={css:pI(u,f),globalCss:AQ(u,f),keyframes:RQ(u,f),createTheme:LQ(u,f),reset(){f.reset(),p.theme.toString()},theme:{},sheet:f,config:u,prefix:o,getCssText:f.toString,toString:f.toString};return String(p.theme=p.createTheme(c)),p});return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>OQ(t,()=>{const r=pI(t,i);return(...s)=>{const o=r(...s),a=o[Fc].type,l=X.forwardRef((c,u)=>{const f=c&&c.as||a,{props:p,deferredInjector:m}=o(c);return delete p.as,p.ref=u,m?X.createElement(X.Fragment,null,X.createElement(f,p),X.createElement(m,null)):X.createElement(f,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Fc]=o[Fc],l}}))(e),e};function qo(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function sF(n,e=[]){let t=[];function i(s,o){const a=P.createContext(o),l=t.length;t=[...t,o];function c(f){const{scope:p,children:m,...v}=f,_=(p==null?void 0:p[n][l])||a,y=P.useMemo(()=>v,Object.values(v));return P.createElement(_.Provider,{value:y},m)}function u(f,p){const m=(p==null?void 0:p[n][l])||a,v=P.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const r=()=>{const s=t.map(o=>P.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return P.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[i,kQ(r,...e)]}function kQ(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Md(n){const e=P.useRef(n);return P.useEffect(()=>{e.current=n}),P.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function UQ(n,e=globalThis==null?void 0:globalThis.document){const t=Md(n);P.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[t,e])}const OE="dismissableLayer.update",FQ="dismissableLayer.pointerDownOutside",zQ="dismissableLayer.focusOutside";let gI;const BQ=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),HQ=P.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,u=P.useContext(BQ),[f,p]=P.useState(null),m=(t=f==null?void 0:f.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,v]=P.useState({}),_=Ed(e,D=>p(D)),y=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(g),S=f?y.indexOf(f):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,b=S>=x,A=VQ(D=>{const O=D.target,M=[...u.branches].some(I=>I.contains(O));!b||M||(s==null||s(D),a==null||a(D),D.defaultPrevented||l==null||l())},m),R=GQ(D=>{const O=D.target;[...u.branches].some(I=>I.contains(O))||(o==null||o(D),a==null||a(D),D.defaultPrevented||l==null||l())},m);return UQ(D=>{S===u.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&l&&(D.preventDefault(),l()))},m),P.useEffect(()=>{if(f)return i&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(gI=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),vI(),()=>{i&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=gI)}},[f,m,i,u]),P.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),vI())},[f,u]),P.useEffect(()=>{const D=()=>v({});return document.addEventListener(OE,D),()=>document.removeEventListener(OE,D)},[]),P.createElement(fu.div,Hn({},c,{ref:_,style:{pointerEvents:E?b?"auto":"none":void 0,...n.style},onFocusCapture:qo(n.onFocusCapture,R.onFocusCapture),onBlurCapture:qo(n.onBlurCapture,R.onBlurCapture),onPointerDownCapture:qo(n.onPointerDownCapture,A.onPointerDownCapture)}))});function VQ(n,e=globalThis==null?void 0:globalThis.document){const t=Md(n),i=P.useRef(!1),r=P.useRef(()=>{});return P.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let u=function(){oF(FQ,t,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=u,e.addEventListener("click",r.current,{once:!0})):u()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function GQ(n,e=globalThis==null?void 0:globalThis.document){const t=Md(n),i=P.useRef(!1);return P.useEffect(()=>{const r=s=>{s.target&&!i.current&&oF(zQ,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function vI(){const n=new CustomEvent(OE);document.dispatchEvent(n)}function oF(n,e,t,{discrete:i}){const r=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?tQ(r,s):r.dispatchEvent(s)}const sd=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{},WQ=HL.useId||(()=>{});let $Q=0;function jQ(n){const[e,t]=P.useState(WQ());return sd(()=>{n||t(i=>i??String($Q++))},[n]),n||(e?`radix-${e}`:"")}const XQ=["top","right","bottom","left"],Al=Math.min,Br=Math.max,ey=Math.round,R0=Math.floor,Cl=n=>({x:n,y:n}),YQ={left:"right",right:"left",bottom:"top",top:"bottom"},KQ={start:"end",end:"start"};function NE(n,e,t){return Br(n,Al(e,t))}function va(n,e){return typeof n=="function"?n(e):n}function ya(n){return n.split("-")[0]}function bd(n){return n.split("-")[1]}function db(n){return n==="x"?"y":"x"}function hb(n){return n==="y"?"height":"width"}function Ad(n){return["top","bottom"].includes(ya(n))?"y":"x"}function pb(n){return db(Ad(n))}function qQ(n,e,t){t===void 0&&(t=!1);const i=bd(n),r=pb(n),s=hb(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ty(o)),[o,ty(o)]}function ZQ(n){const e=ty(n);return[kE(n),e,kE(e)]}function kE(n){return n.replace(/start|end/g,e=>KQ[e])}function QQ(n,e,t){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function JQ(n,e,t,i){const r=bd(n);let s=QQ(ya(n),t==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(kE)))),s}function ty(n){return n.replace(/left|right|bottom|top/g,e=>YQ[e])}function eJ(n){return{top:0,right:0,bottom:0,left:0,...n}}function aF(n){return typeof n!="number"?eJ(n):{top:n,right:n,bottom:n,left:n}}function ny(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function yI(n,e,t){let{reference:i,floating:r}=n;const s=Ad(e),o=pb(e),a=hb(o),l=ya(e),c=s==="y",u=i.x+i.width/2-r.width/2,f=i.y+i.height/2-r.height/2,p=i[a]/2-r[a]/2;let m;switch(l){case"top":m={x:u,y:i.y-r.height};break;case"bottom":m={x:u,y:i.y+i.height};break;case"right":m={x:i.x+i.width,y:f};break;case"left":m={x:i.x-r.width,y:f};break;default:m={x:i.x,y:i.y}}switch(bd(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const tJ=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:u,y:f}=yI(c,i,l),p=i,m={},v=0;for(let _=0;_<a.length;_++){const{name:y,fn:g}=a[_],{x,y:S,data:E,reset:b}=await g({x:u,y:f,initialPlacement:i,placement:p,strategy:r,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});u=x??u,f=S??f,m={...m,[y]:{...m[y],...E}},b&&v<=50&&(v++,typeof b=="object"&&(b.placement&&(p=b.placement),b.rects&&(c=b.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):b.rects),{x:u,y:f}=yI(c,p,l)),_=-1)}return{x:u,y:f,placement:p,strategy:r,middlewareData:m}};async function $p(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=va(e,n),v=aF(m),y=a[p?f==="floating"?"reference":"floating":f],g=ny(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=f==="floating"?{...o.floating,x:i,y:r}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},b=ny(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:S,strategy:l}):x);return{top:(g.top-b.top+v.top)/E.y,bottom:(b.bottom-g.bottom+v.bottom)/E.y,left:(g.left-b.left+v.left)/E.x,right:(b.right-g.right+v.right)/E.x}}const nJ=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=va(n,e)||{};if(c==null)return{};const f=aF(u),p={x:t,y:i},m=pb(r),v=hb(m),_=await o.getDimensions(c),y=m==="y",g=y?"top":"left",x=y?"bottom":"right",S=y?"clientHeight":"clientWidth",E=s.reference[v]+s.reference[m]-p[m]-s.floating[v],b=p[m]-s.reference[m],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let R=A?A[S]:0;(!R||!await(o.isElement==null?void 0:o.isElement(A)))&&(R=a.floating[S]||s.floating[v]);const D=E/2-b/2,O=R/2-_[v]/2-1,M=Al(f[g],O),I=Al(f[x],O),U=M,j=R-_[v]-I,z=R/2-_[v]/2+D,K=NE(U,z,j),q=!l.arrow&&bd(r)!=null&&z!==K&&s.reference[v]/2-(z<U?M:I)-_[v]/2<0,ee=q?z<U?z-U:z-j:0;return{[m]:p[m]+ee,data:{[m]:K,centerOffset:z-K-ee,...q&&{alignmentOffset:ee}},reset:q}}}),iJ=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:_=!0,...y}=va(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=ya(r),x=ya(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=p||(x||!_?[ty(a)]:ZQ(a));!p&&v!=="none"&&E.push(...JQ(a,_,v,S));const b=[a,...E],A=await $p(e,y),R=[];let D=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&R.push(A[g]),f){const U=qQ(r,o,S);R.push(A[U[0]],A[U[1]])}if(D=[...D,{placement:r,overflows:R}],!R.every(U=>U<=0)){var O,M;const U=(((O=s.flip)==null?void 0:O.index)||0)+1,j=b[U];if(j)return{data:{index:U,overflows:D},reset:{placement:j}};let z=(M=D.filter(K=>K.overflows[0]<=0).sort((K,q)=>K.overflows[1]-q.overflows[1])[0])==null?void 0:M.placement;if(!z)switch(m){case"bestFit":{var I;const K=(I=D.map(q=>[q.placement,q.overflows.filter(ee=>ee>0).reduce((ee,N)=>ee+N,0)]).sort((q,ee)=>q[1]-ee[1])[0])==null?void 0:I[0];K&&(z=K);break}case"initialPlacement":z=a;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function _I(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function xI(n){return XQ.some(e=>n[e]>=0)}const rJ=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...r}=va(n,e);switch(i){case"referenceHidden":{const s=await $p(e,{...r,elementContext:"reference"}),o=_I(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:xI(o)}}}case"escaped":{const s=await $p(e,{...r,altBoundary:!0}),o=_I(s,t.floating);return{data:{escapedOffsets:o,escaped:xI(o)}}}default:return{}}}}};async function sJ(n,e){const{placement:t,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=ya(t),a=bd(t),l=Ad(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,f=va(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const oJ=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await sJ(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},aJ=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:x}=y;return{x:g,y:x}}},...l}=va(n,e),c={x:t,y:i},u=await $p(e,l),f=Ad(ya(r)),p=db(f);let m=c[p],v=c[f];if(s){const y=p==="y"?"top":"left",g=p==="y"?"bottom":"right",x=m+u[y],S=m-u[g];m=NE(x,m,S)}if(o){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",x=v+u[y],S=v-u[g];v=NE(x,v,S)}const _=a.fn({...e,[p]:m,[f]:v});return{..._,data:{x:_.x-t,y:_.y-i}}}}},lJ=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=va(n,e),u={x:t,y:i},f=Ad(r),p=db(f);let m=u[p],v=u[f];const _=va(a,e),y=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const S=p==="y"?"height":"width",E=s.reference[p]-s.floating[S]+y.mainAxis,b=s.reference[p]+s.reference[S]-y.mainAxis;m<E?m=E:m>b&&(m=b)}if(c){var g,x;const S=p==="y"?"width":"height",E=["top","left"].includes(ya(r)),b=s.reference[f]-s.floating[S]+(E&&((g=o.offset)==null?void 0:g[f])||0)+(E?0:y.crossAxis),A=s.reference[f]+s.reference[S]+(E?0:((x=o.offset)==null?void 0:x[f])||0)-(E?y.crossAxis:0);v<b?v=b:v>A&&(v=A)}return{[p]:m,[f]:v}}}},cJ=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...a}=va(n,e),l=await $p(e,a),c=ya(t),u=bd(t),f=Ad(t)==="y",{width:p,height:m}=i.floating;let v,_;c==="top"||c==="bottom"?(v=c,_=u===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(_=c,v=u==="end"?"top":"bottom");const y=m-l[v],g=p-l[_],x=!e.middlewareData.shift;let S=y,E=g;if(f){const A=p-l.left-l.right;E=u||x?Al(g,A):A}else{const A=m-l.top-l.bottom;S=u||x?Al(y,A):A}if(x&&!u){const A=Br(l.left,0),R=Br(l.right,0),D=Br(l.top,0),O=Br(l.bottom,0);f?E=p-2*(A!==0||R!==0?A+R:Br(l.left,l.right)):S=m-2*(D!==0||O!==0?D+O:Br(l.top,l.bottom))}await o({...e,availableWidth:E,availableHeight:S});const b=await r.getDimensions(s.floating);return p!==b.width||m!==b.height?{reset:{rects:!0}}:{}}}};function Rl(n){return lF(n)?(n.nodeName||"").toLowerCase():"#document"}function qr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Sa(n){var e;return(e=(lF(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function lF(n){return n instanceof Node||n instanceof qr(n).Node}function _a(n){return n instanceof Element||n instanceof qr(n).Element}function Ro(n){return n instanceof HTMLElement||n instanceof qr(n).HTMLElement}function SI(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof qr(n).ShadowRoot}function pm(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=Rs(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function uJ(n){return["table","td","th"].includes(Rl(n))}function mb(n){const e=gb(),t=Rs(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function fJ(n){let e=od(n);for(;Ro(e)&&!h_(e);){if(mb(e))return e;e=od(e)}return null}function gb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function h_(n){return["html","body","#document"].includes(Rl(n))}function Rs(n){return qr(n).getComputedStyle(n)}function p_(n){return _a(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function od(n){if(Rl(n)==="html")return n;const e=n.assignedSlot||n.parentNode||SI(n)&&n.host||Sa(n);return SI(e)?e.host:e}function cF(n){const e=od(n);return h_(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ro(e)&&pm(e)?e:cF(e)}function jp(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=cF(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),o=qr(r);return s?e.concat(o,o.visualViewport||[],pm(r)?r:[],o.frameElement&&t?jp(o.frameElement):[]):e.concat(r,jp(r,[],t))}function uF(n){const e=Rs(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Ro(n),s=r?n.offsetWidth:t,o=r?n.offsetHeight:i,a=ey(t)!==s||ey(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function vb(n){return _a(n)?n:n.contextElement}function Ff(n){const e=vb(n);if(!Ro(e))return Cl(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=uF(e);let o=(s?ey(t.width):t.width)/i,a=(s?ey(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const dJ=Cl(0);function fF(n){const e=qr(n);return!gb()||!e.visualViewport?dJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function hJ(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==qr(n)?!1:e}function Jc(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=vb(n);let o=Cl(1);e&&(i?_a(i)&&(o=Ff(i)):o=Ff(n));const a=hJ(s,t,i)?fF(s):Cl(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,f=r.height/o.y;if(s){const p=qr(s),m=i&&_a(i)?qr(i):i;let v=p,_=v.frameElement;for(;_&&i&&m!==v;){const y=Ff(_),g=_.getBoundingClientRect(),x=Rs(_),S=g.left+(_.clientLeft+parseFloat(x.paddingLeft))*y.x,E=g.top+(_.clientTop+parseFloat(x.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,f*=y.y,l+=S,c+=E,v=qr(_),_=v.frameElement}}return ny({width:u,height:f,x:l,y:c})}const pJ=[":popover-open",":modal"];function dF(n){return pJ.some(e=>{try{return n.matches(e)}catch{return!1}})}function mJ(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const s=r==="fixed",o=Sa(i),a=e?dF(e.floating):!1;if(i===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=Cl(1);const u=Cl(0),f=Ro(i);if((f||!f&&!s)&&((Rl(i)!=="body"||pm(o))&&(l=p_(i)),Ro(i))){const p=Jc(i);c=Ff(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x,y:t.y*c.y-l.scrollTop*c.y+u.y}}function gJ(n){return Array.from(n.getClientRects())}function hF(n){return Jc(Sa(n)).left+p_(n).scrollLeft}function vJ(n){const e=Sa(n),t=p_(n),i=n.ownerDocument.body,r=Br(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Br(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+hF(n);const a=-t.scrollTop;return Rs(i).direction==="rtl"&&(o+=Br(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function yJ(n,e){const t=qr(n),i=Sa(n),r=t.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=gb();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function _J(n,e){const t=Jc(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=Ro(n)?Ff(n):Cl(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function wI(n,e,t){let i;if(e==="viewport")i=yJ(n,t);else if(e==="document")i=vJ(Sa(n));else if(_a(e))i=_J(e,t);else{const r=fF(n);i={...e,x:e.x-r.x,y:e.y-r.y}}return ny(i)}function pF(n,e){const t=od(n);return t===e||!_a(t)||h_(t)?!1:Rs(t).position==="fixed"||pF(t,e)}function xJ(n,e){const t=e.get(n);if(t)return t;let i=jp(n,[],!1).filter(a=>_a(a)&&Rl(a)!=="body"),r=null;const s=Rs(n).position==="fixed";let o=s?od(n):n;for(;_a(o)&&!h_(o);){const a=Rs(o),l=mb(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||pm(o)&&!l&&pF(n,o))?i=i.filter(u=>u!==o):r=a,o=od(o)}return e.set(n,i),i}function SJ(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const o=[...t==="clippingAncestors"?xJ(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((c,u)=>{const f=wI(e,u,r);return c.top=Br(f.top,c.top),c.right=Al(f.right,c.right),c.bottom=Al(f.bottom,c.bottom),c.left=Br(f.left,c.left),c},wI(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function wJ(n){const{width:e,height:t}=uF(n);return{width:e,height:t}}function EJ(n,e,t){const i=Ro(e),r=Sa(e),s=t==="fixed",o=Jc(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Cl(0);if(i||!i&&!s)if((Rl(e)!=="body"||pm(r))&&(a=p_(e)),i){const f=Jc(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else r&&(l.x=hF(r));const c=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function EI(n,e){return!Ro(n)||Rs(n).position==="fixed"?null:e?e(n):n.offsetParent}function mF(n,e){const t=qr(n);if(!Ro(n)||dF(n))return t;let i=EI(n,e);for(;i&&uJ(i)&&Rs(i).position==="static";)i=EI(i,e);return i&&(Rl(i)==="html"||Rl(i)==="body"&&Rs(i).position==="static"&&!mb(i))?t:i||fJ(n)||t}const TJ=async function(n){const e=this.getOffsetParent||mF,t=this.getDimensions;return{reference:EJ(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,...await t(n.floating)}}};function MJ(n){return Rs(n).direction==="rtl"}const bJ={convertOffsetParentRelativeRectToViewportRelativeRect:mJ,getDocumentElement:Sa,getClippingRect:SJ,getOffsetParent:mF,getElementRects:TJ,getClientRects:gJ,getDimensions:wJ,getScale:Ff,isElement:_a,isRTL:MJ};function AJ(n,e){let t=null,i;const r=Sa(n);function s(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:f,height:p}=n.getBoundingClientRect();if(a||e(),!f||!p)return;const m=R0(u),v=R0(r.clientWidth-(c+f)),_=R0(r.clientHeight-(u+p)),y=R0(c),x={rootMargin:-m+"px "+-v+"px "+-_+"px "+-y+"px",threshold:Br(0,Al(1,l))||1};let S=!0;function E(b){const A=b[0].intersectionRatio;if(A!==l){if(!S)return o();A?o(!1,A):i=setTimeout(()=>{o(!1,1e-7)},100)}S=!1}try{t=new IntersectionObserver(E,{...x,root:r.ownerDocument})}catch{t=new IntersectionObserver(E,x)}t.observe(n)}return o(!0),s}function CJ(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=vb(n),u=r||s?[...c?jp(c):[],...jp(e)]:[];u.forEach(g=>{r&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const f=c&&a?AJ(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[x]=g;x&&x.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let v,_=l?Jc(n):null;l&&y();function y(){const g=Jc(n);_&&(g.x!==_.x||g.y!==_.y||g.width!==_.width||g.height!==_.height)&&t(),_=g,v=requestAnimationFrame(y)}return t(),()=>{var g;u.forEach(x=>{r&&x.removeEventListener("scroll",t),s&&x.removeEventListener("resize",t)}),f==null||f(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const RJ=aJ,PJ=iJ,IJ=cJ,LJ=rJ,TI=nJ,DJ=lJ,OJ=(n,e,t)=>{const i=new Map,r={platform:bJ,...t},s={...r.platform,_c:i};return tJ(n,e,{...r,platform:s})},NJ=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:r}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?TI({element:i.current,padding:r}).fn(t):{}:i?TI({element:i,padding:r}).fn(t):{}}}};var lv=typeof document<"u"?P.useLayoutEffect:P.useEffect;function iy(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!iy(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!iy(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function gF(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function MI(n,e){const t=gF(n);return Math.round(e*t)/t}function bI(n){const e=P.useRef(n);return lv(()=>{e.current=n}),e}function kJ(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[u,f]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=P.useState(i);iy(p,i)||m(i);const[v,_]=P.useState(null),[y,g]=P.useState(null),x=P.useCallback(ee=>{ee!==A.current&&(A.current=ee,_(ee))},[]),S=P.useCallback(ee=>{ee!==R.current&&(R.current=ee,g(ee))},[]),E=s||v,b=o||y,A=P.useRef(null),R=P.useRef(null),D=P.useRef(u),O=l!=null,M=bI(l),I=bI(r),U=P.useCallback(()=>{if(!A.current||!R.current)return;const ee={placement:e,strategy:t,middleware:p};I.current&&(ee.platform=I.current),OJ(A.current,R.current,ee).then(N=>{const V={...N,isPositioned:!0};j.current&&!iy(D.current,V)&&(D.current=V,Jp.flushSync(()=>{f(V)}))})},[p,e,t,I]);lv(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,f(ee=>({...ee,isPositioned:!1})))},[c]);const j=P.useRef(!1);lv(()=>(j.current=!0,()=>{j.current=!1}),[]),lv(()=>{if(E&&(A.current=E),b&&(R.current=b),E&&b){if(M.current)return M.current(E,b,U);U()}},[E,b,U,M,O]);const z=P.useMemo(()=>({reference:A,floating:R,setReference:x,setFloating:S}),[x,S]),K=P.useMemo(()=>({reference:E,floating:b}),[E,b]),q=P.useMemo(()=>{const ee={position:t,left:0,top:0};if(!K.floating)return ee;const N=MI(K.floating,u.x),V=MI(K.floating,u.y);return a?{...ee,transform:"translate("+N+"px, "+V+"px)",...gF(K.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:N,top:V}},[t,a,K.floating,u.x,u.y]);return P.useMemo(()=>({...u,update:U,refs:z,elements:K,floatingStyles:q}),[u,U,z,K,q])}const UJ=P.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...s}=n;return P.createElement(fu.svg,Hn({},s,{ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:P.createElement("polygon",{points:"0,0 30,0 15,10"}))}),FJ=UJ;function zJ(n){const[e,t]=P.useState(void 0);return sd(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}const vF="Popper",[yF,_F]=sF(vF),[BJ,xF]=yF(vF),HJ=n=>{const{__scopePopper:e,children:t}=n,[i,r]=P.useState(null);return P.createElement(BJ,{scope:e,anchor:i,onAnchorChange:r},t)},VJ="PopperAnchor",GJ=P.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,s=xF(VJ,t),o=P.useRef(null),a=Ed(e,o);return P.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:P.createElement(fu.div,Hn({},r,{ref:a}))}),SF="PopperContent",[WJ,$J]=yF(SF),jJ=P.forwardRef((n,e)=>{var t,i,r,s,o,a,l,c;const{__scopePopper:u,side:f="bottom",sideOffset:p=0,align:m="center",alignOffset:v=0,arrowPadding:_=0,avoidCollisions:y=!0,collisionBoundary:g=[],collisionPadding:x=0,sticky:S="partial",hideWhenDetached:E=!1,updatePositionStrategy:b="optimized",onPlaced:A,...R}=n,D=xF(SF,u),[O,M]=P.useState(null),I=Ed(e,Ee=>M(Ee)),[U,j]=P.useState(null),z=zJ(U),K=(t=z==null?void 0:z.width)!==null&&t!==void 0?t:0,q=(i=z==null?void 0:z.height)!==null&&i!==void 0?i:0,ee=f+(m!=="center"?"-"+m:""),N=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},V=Array.isArray(g)?g:[g],W=V.length>0,Q={padding:N,boundary:V.filter(qJ),altBoundary:W},{refs:ie,floatingStyles:Me,placement:te,isPositioned:ue,middlewareData:xe}=kJ({strategy:"fixed",placement:ee,whileElementsMounted:(...Ee)=>CJ(...Ee,{animationFrame:b==="always"}),elements:{reference:D.anchor},middleware:[oJ({mainAxis:p+q,alignmentAxis:v}),y&&RJ({mainAxis:!0,crossAxis:!1,limiter:S==="partial"?DJ():void 0,...Q}),y&&PJ({...Q}),IJ({...Q,apply:({elements:Ee,rects:ye,availableWidth:Qe,availableHeight:ke})=>{const{width:F,height:k}=ye.reference,se=Ee.floating.style;se.setProperty("--radix-popper-available-width",`${Qe}px`),se.setProperty("--radix-popper-available-height",`${ke}px`),se.setProperty("--radix-popper-anchor-width",`${F}px`),se.setProperty("--radix-popper-anchor-height",`${k}px`)}}),U&&NJ({element:U,padding:_}),ZJ({arrowWidth:K,arrowHeight:q}),E&&LJ({strategy:"referenceHidden",...Q})]}),[Re,$e]=wF(te),ze=Md(A);sd(()=>{ue&&(ze==null||ze())},[ue,ze]);const ot=(r=xe.arrow)===null||r===void 0?void 0:r.x,He=(s=xe.arrow)===null||s===void 0?void 0:s.y,Y=((o=xe.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Se,ve]=P.useState();return sd(()=>{O&&ve(window.getComputedStyle(O).zIndex)},[O]),P.createElement("div",{ref:ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...Me,transform:ue?Me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Se,"--radix-popper-transform-origin":[(a=xe.transformOrigin)===null||a===void 0?void 0:a.x,(l=xe.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},P.createElement(WJ,{scope:u,placedSide:Re,onArrowChange:j,arrowX:ot,arrowY:He,shouldHideArrow:Y},P.createElement(fu.div,Hn({"data-side":Re,"data-align":$e},R,{ref:I,style:{...R.style,animation:ue?void 0:"none",opacity:(c=xe.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),XJ="PopperArrow",YJ={top:"bottom",right:"left",bottom:"top",left:"right"},KJ=P.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,s=$J(XJ,i),o=YJ[s.placedSide];return P.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},P.createElement(FJ,Hn({},r,{ref:t,style:{...r.style,display:"block"}})))});function qJ(n){return n!==null}const ZJ=n=>({name:"transformOrigin",options:n,fn(e){var t,i,r,s,o;const{placement:a,rects:l,middlewareData:c}=e,f=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,p=f?0:n.arrowWidth,m=f?0:n.arrowHeight,[v,_]=wF(a),y={start:"0%",center:"50%",end:"100%"}[_],g=((i=(r=c.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+p/2,x=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let S="",E="";return v==="bottom"?(S=f?y:`${g}px`,E=`${-m}px`):v==="top"?(S=f?y:`${g}px`,E=`${l.floating.height+m}px`):v==="right"?(S=`${-m}px`,E=f?y:`${x}px`):v==="left"&&(S=`${l.floating.width+m}px`,E=f?y:`${x}px`),{data:{x:S,y:E}}}});function wF(n){const[e,t="center"]=n.split("-");return[e,t]}const QJ=HJ,JJ=GJ,eee=jJ,tee=KJ;function nee(n,e){return P.useReducer((t,i)=>{const r=e[t][i];return r??t},n)}const EF=n=>{const{present:e,children:t}=n,i=iee(e),r=typeof t=="function"?t({present:i.isPresent}):P.Children.only(t),s=Ed(i.ref,r.ref);return typeof t=="function"||i.isPresent?P.cloneElement(r,{ref:s}):null};EF.displayName="Presence";function iee(n){const[e,t]=P.useState(),i=P.useRef({}),r=P.useRef(n),s=P.useRef("none"),o=n?"mounted":"unmounted",[a,l]=nee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const c=P0(i.current);s.current=a==="mounted"?c:"none"},[a]),sd(()=>{const c=i.current,u=r.current;if(u!==n){const p=s.current,m=P0(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),sd(()=>{if(e){const c=f=>{const m=P0(i.current).includes(f.animationName);f.target===e&&m&&Jp.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(s.current=P0(i.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:P.useCallback(c=>{c&&(i.current=getComputedStyle(c)),t(c)},[])}}function P0(n){return(n==null?void 0:n.animationName)||"none"}function ree({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,r]=see({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:i,a=Md(t),l=P.useCallback(c=>{if(s){const f=typeof c=="function"?c(n):c;f!==n&&a(f)}else r(c)},[s,n,r,a]);return[o,l]}function see({defaultProp:n,onChange:e}){const t=P.useState(n),[i]=t,r=P.useRef(i),s=Md(e);return P.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),t}const oee=P.forwardRef((n,e)=>P.createElement(fu.span,Hn({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),aee=oee,[m_,ice]=sF("Tooltip",[_F]),g_=_F(),lee="TooltipProvider",UE="tooltip.open",[rce,yb]=m_(lee),_b="Tooltip",[cee,v_]=m_(_b),uee=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=yb(_b,n.__scopeTooltip),c=g_(e),[u,f]=P.useState(null),p=jQ(),m=P.useRef(0),v=o??l.disableHoverableContent,_=a??l.delayDuration,y=P.useRef(!1),[g=!1,x]=ree({prop:i,defaultProp:r,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(UE))):l.onClose(),s==null||s(R)}}),S=P.useMemo(()=>g?y.current?"delayed-open":"instant-open":"closed",[g]),E=P.useCallback(()=>{window.clearTimeout(m.current),y.current=!1,x(!0)},[x]),b=P.useCallback(()=>{window.clearTimeout(m.current),x(!1)},[x]),A=P.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,x(!0)},_)},[_,x]);return P.useEffect(()=>()=>window.clearTimeout(m.current),[]),P.createElement(QJ,c,P.createElement(cee,{scope:e,contentId:p,open:g,stateAttribute:S,trigger:u,onTriggerChange:f,onTriggerEnter:P.useCallback(()=>{l.isOpenDelayed?A():E()},[l.isOpenDelayed,A,E]),onTriggerLeave:P.useCallback(()=>{v?b():window.clearTimeout(m.current)},[b,v]),onOpen:E,onClose:b,disableHoverableContent:v},t))},AI="TooltipTrigger",fee=P.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=v_(AI,t),s=yb(AI,t),o=g_(t),a=P.useRef(null),l=Ed(e,a,r.onTriggerChange),c=P.useRef(!1),u=P.useRef(!1),f=P.useCallback(()=>c.current=!1,[]);return P.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),P.createElement(JJ,Hn({asChild:!0},o),P.createElement(fu.button,Hn({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},i,{ref:l,onPointerMove:qo(n.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:qo(n.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:qo(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:qo(n.onFocus,()=>{c.current||r.onOpen()}),onBlur:qo(n.onBlur,r.onClose),onClick:qo(n.onClick,r.onClose)})))}),dee="TooltipPortal",[sce,hee]=m_(dee,{forceMount:void 0}),Xp="TooltipContent",pee=P.forwardRef((n,e)=>{const t=hee(Xp,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...s}=n,o=v_(Xp,n.__scopeTooltip);return P.createElement(EF,{present:i||o.open},o.disableHoverableContent?P.createElement(TF,Hn({side:r},s,{ref:e})):P.createElement(mee,Hn({side:r},s,{ref:e})))}),mee=P.forwardRef((n,e)=>{const t=v_(Xp,n.__scopeTooltip),i=yb(Xp,n.__scopeTooltip),r=P.useRef(null),s=Ed(e,r),[o,a]=P.useState(null),{trigger:l,onClose:c}=t,u=r.current,{onPointerInTransitChange:f}=i,p=P.useCallback(()=>{a(null),f(!1)},[f]),m=P.useCallback((v,_)=>{const y=v.currentTarget,g={x:v.clientX,y:v.clientY},x=xee(g,y.getBoundingClientRect()),S=See(g,x),E=wee(_.getBoundingClientRect()),b=Tee([...S,...E]);a(b),f(!0)},[f]);return P.useEffect(()=>()=>p(),[p]),P.useEffect(()=>{if(l&&u){const v=y=>m(y,u),_=y=>m(y,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",_)}}},[l,u,m,p]),P.useEffect(()=>{if(o){const v=_=>{const y=_.target,g={x:_.clientX,y:_.clientY},x=(l==null?void 0:l.contains(y))||(u==null?void 0:u.contains(y)),S=!Eee(g,o);x?p():S&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,c,p]),P.createElement(TF,Hn({},n,{ref:s}))}),[gee,vee]=m_(_b,{isInside:!1}),TF=P.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=v_(Xp,t),c=g_(t),{onClose:u}=l;return P.useEffect(()=>(document.addEventListener(UE,u),()=>document.removeEventListener(UE,u)),[u]),P.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),P.createElement(HQ,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u},P.createElement(eee,Hn({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),P.createElement(JU,null,i),P.createElement(gee,{scope:t,isInside:!0},P.createElement(aee,{id:l.contentId,role:"tooltip"},r||i))))}),yee="TooltipArrow",_ee=P.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=g_(t);return vee(yee,t).isInside?null:P.createElement(tee,Hn({},r,i,{ref:e}))});function xee(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,i,r,s)){case s:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function See(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function wee(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function Eee(n,e){const{x:t,y:i}=n;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>i!=u>i&&t<(c-a)*(i-l)/(u-l)+a&&(r=!r)}return r}function Tee(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),Mee(e)}function Mee(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const bee=uee,Aee=fee,Cee=pee,Ree=_ee;function Pee(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function fn(n,e){if(n==null)return{};var t=Pee(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}let Mn;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Mn||(Mn={}));const Iee={[Mn.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Mn.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Mn.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Mn.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Mn.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Mn.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Mn.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Mn.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Mn.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Mn.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Mn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function MF(n,e,...t){const[i,...r]=Iee[e](...t);console[n]("LEVA: "+i,...r)}const Qo=MF.bind(null,"warn"),Lee=MF.bind(null,"log"),Dee=["value"],Oee=["schema"],Nee=["value"],bF=[],eu={};function CI(n){let{value:e}=n,t=fn(n,Dee);for(let i of bF){const r=i(e,t);if(r)return r}}function wa(n,e){let{schema:t}=e,i=fn(e,Oee);if(n in eu){Qo(Mn.ALREADY_REGISTERED_TYPE,n);return}bF.push((r,s)=>t(r,s)&&n),eu[n]=i}function oS(n,e,t,i){const{normalize:r}=eu[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=fn(e,Nee);return{value:s,settings:o}}function kee(n,e,t,i,r,s){const{sanitize:o}=eu[n];return o?o(e,t,i,r,s):e}function RI(n,e,t){const{format:i}=eu[n];return i?i(e,t):e}function Uee(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Tt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PI(Object(t),!0).forEach(function(i){Uee(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const Pl=(n,e,t)=>n>t?t:n<e?e:n,Fee=n=>{if(n===""||typeof n=="number")return n;try{const e=Wa(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},zee=Math.log(10);function II(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/zee)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const ry=(n,e,t)=>t===e?0:(Pl(n,e,t)-e)/(t-e),sy=(n,e,t)=>n*(t-e)+e,Bee=()=>"_"+Math.random().toString(36).substr(2,9),LI=/\(([0-9+\-*/^ .]+)\)/,DI=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,OI=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,NI=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,kI=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,UI=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Wa(n){if(isNaN(Number(n)))if(LI.test(n)){const e=n.replace(LI,(t,i)=>String(Wa(i)));return Wa(e)}else if(DI.test(n)){const e=n.replace(DI,(t,i,r)=>String(Math.pow(Number(i),Number(r))));return Wa(e)}else if(OI.test(n)){const e=n.replace(OI,(t,i,r)=>String(Number(i)*Number(r)));return Wa(e)}else if(NI.test(n)){const e=n.replace(NI,(t,i,r)=>{if(r!=0)return String(Number(i)/Number(r));throw new Error("Division by zero")});return Wa(e)}else if(kI.test(n)){const e=n.replace(kI,(t,i,r)=>String(Number(i)+Number(r)));return Wa(e)}else if(UI.test(n)){const e=n.replace(UI,(t,i,r)=>String(Number(i)-Number(r)));return Wa(e)}else return Number(n);return Number(n)}function Hee(n,e){const t=Tt({},n);return e.forEach(i=>i in n&&delete t[i]),t}function Vee(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function AF(n){return Object.prototype.toString.call(n)==="[object Object]"}const Gee=n=>AF(n)&&Object.keys(n).length===0;let Mo;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Mo||(Mo={}));let Ks;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Ks||(Ks={}));const Wee=["type","__customInput"],$ee=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],jee=["type"];function CF(n,e,t={},i){var r,s;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:Tt({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:b,__customInput:A}=n,R=fn(n,Wee);return CF(A,e,R,b)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:f,onChange:p,onEditStart:m,onEditEnd:v,transient:_}=n,y=fn(n,$ee),g=Tt({render:o,key:e,label:a??e,hint:f,transient:_??!!p,onEditStart:m,onEditEnd:v,disabled:u,optional:l,order:c},t);let{type:x}=y,S=fn(y,jee);if(x=i??x,x in Mo)return{type:x,input:S,options:g};let E;return i&&AF(S)&&"value"in S?E=S.value:E=Gee(S)?void 0:S,{type:x,input:E,options:Tt(Tt({},g),{},{onChange:p,optional:(r=g.optional)!==null&&r!==void 0?r:!1,disabled:(s=g.disabled)!==null&&s!==void 0?s:!1})}}function Xee(n,e,t,i){const r=CF(n,e),{type:s,input:o,options:a}=r;if(s)return s in Mo?r:{type:s,input:oS(s,o,t,i),options:a};let l=CI(o);return l?{type:l,input:oS(l,o,t,i),options:a}:(l=CI({value:o}),l?{type:l,input:oS(l,{value:o},t,i),options:a}:!1)}function FI(n,e,t,i,r){const{value:s,type:o,settings:a}=n;n.value=RF({type:o,value:s,settings:a},e,t,i),n.fromPanel=r}const Yee=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function RF({type:n,value:e,settings:t},i,r,s){const o=n!=="SELECT"&&typeof i=="function"?i(e):i;let a;try{a=kee(n,o,t,e,r,s)}catch(l){throw new Yee(`The value \`${i}\` did not result in a correct value.`,e,l)}return Qv(a,e)?e:a}const PF=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,s=t&&!i,o=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(o,e),s&&o()}},IF=n=>n.shiftKey?5:n.altKey?1/5:1,Kee=["value"],qee=["min","max"],Zee=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},LF=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const s=Pl(r,e,t);return i?s+i:s},Qee=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},DF=n=>{let{value:e}=n,t=fn(n,Kee);const{min:i=-1/0,max:r=1/0}=t,s=fn(t,qee);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Pl(o,i,r);let l=t.step;l||(Number.isFinite(i)?Number.isFinite(r)?l=+(Math.abs(r-i)/100).toPrecision(1):l=+(Math.abs(o-i)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-o)/100).toPrecision(1)));const c=l?II(l)*10:II(o);l=l||c/10;const u=Math.round(Pl(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:Tt({initialValue:o,step:l,pad:u,min:i,max:r,suffix:a},s)}},OF=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var NF=Object.freeze({__proto__:null,schema:Zee,sanitize:LF,format:Qee,normalize:DF,sanitizeStep:OF});function ii(){return ii=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ii.apply(this,arguments)}const kF=P.createContext({});function Yi(){return P.useContext(kF)}const UF=P.createContext(null),FF=P.createContext(null),zF=P.createContext(null);function mm(){return P.useContext(FF)}function Jee(){return P.useContext(zF)}const ete=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function I0(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const Mh={$inputStyle:()=>n=>I0(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>I0(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>I0(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>I0(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:ut,css:oce,createTheme:ace,globalCss:tte,keyframes:lce}=NQ({prefix:"leva",theme:ete(),utils:Tt(Tt({},Mh),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Mh.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Mh.$focusStyle()(n)}),$hover:n=>({"&:hover":Mh.$hoverStyle()(n)}),$active:n=>({"&:active":Mh.$activeStyle()(n)})})}),nte=tte({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function oa(n,e){const{theme:t}=P.useContext(UF);if(!(n in t)||!(e in t[n]))return Qo(Mn.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const BF=ut("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),HF=ut("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${BF}`]:{paddingLeft:0}}),ite=ut(HF,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),rte=ut("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),ste=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],ote=["onUpdate"];function xb(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=n,u=fn(n,ste);const{id:f,emitOnEditStart:p,emitOnEditEnd:m,disabled:v}=Yi(),_=a||f,y=P.useRef(null),g=c>0,x=g?"textarea":"input",S=P.useCallback(A=>R=>{const D=R.currentTarget.value;A(D)},[]);X.useEffect(()=>{const A=y.current,R=S(D=>{i(D),m()});return A==null||A.addEventListener("blur",R),()=>A==null?void 0:A.removeEventListener("blur",R)},[S,i,m]);const E=P.useCallback(A=>{A.key==="Enter"&&S(i)(A)},[S,i]),b=Object.assign({as:x},g?{rows:c}:{},u);return X.createElement(rte,{textArea:g},e&&typeof e=="string"?X.createElement(HF,null,e):e,X.createElement(BF,ii({levaType:o,ref:y,id:_,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:S(r),onFocus:()=>p(),onKeyPress:E,onKeyDown:s,disabled:v},b)))}function ate(n){let{onUpdate:e}=n,t=fn(n,ote);const i=P.useCallback(s=>e(Fee(s)),[e]),r=P.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return X.createElement(xb,ii({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const oy=ut("div",{}),FE=ut("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),lte=ut("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${FE}::after`]:{opacity:.6},[`${oy}:hover > & + ${FE}::after`]:{opacity:.6},[`${oy}:hover > & > svg`]:{opacity:1}}),VF=ut("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${oy}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),GF=ut("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${VF} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),WF=ut(GF,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),cte=ut("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),ute=ut("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),zE=ut("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),fte=ut("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${zE}`]:{pointerEvents:"auto"}}}}}),$F=ut("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),dte=ut("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),hte=ut(Ree,{fill:"$toolTipBackground"});function Sb({children:n}){const{className:e}=P.useContext(UF);return X.createElement(iQ,{className:e},n)}const pte=["align"];function mte(){const{id:n,disable:e,disabled:t}=Yi();return X.createElement(X.Fragment,null,X.createElement(ute,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),X.createElement("label",{htmlFor:n+"__disable"}))}function gte(n){const{id:e,optional:t,hint:i}=Yi(),r=n.htmlFor||(e?{htmlFor:e}:null),s=!i&&typeof n.children=="string"?{title:n.children}:null;return X.createElement(X.Fragment,null,t&&X.createElement(mte,null),i!==void 0?X.createElement(bee,null,X.createElement(Aee,{asChild:!0},X.createElement(zE,ii({},r,n))),X.createElement(Cee,{side:"top",sideOffset:2},X.createElement(dte,null,i,X.createElement(hte,null)))):X.createElement(zE,ii({},r,s,n)))}function Js(n){let{align:e}=n,t=fn(n,pte);const{value:i,label:r,key:s,disabled:o}=Yi(),{hideCopyButton:a}=Jee(),l=!a&&s!==void 0,[c,u]=P.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:i??""})),u(!0)}catch{Qo(Mn.CLIPBOARD_ERROR,{[s]:i})}};return X.createElement(cte,{align:e,onPointerLeave:()=>u(!1)},X.createElement(gte,t),l&&!o&&X.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},c?X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},X.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),X.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):X.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},X.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),X.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const vte=["toggled"],yte=ut("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function wb(n){let{toggled:e}=n,t=fn(n,vte);return X.createElement(yte,ii({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),X.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const _te=["input"];function Ps(n){let{input:e}=n,t=fn(n,_te);return e?X.createElement(WF,t):X.createElement(GF,t)}function jF({value:n,type:e,settings:t,setValue:i}){const[r,s]=P.useState(RI(e,n,t)),o=P.useRef(n),a=P.useRef(t);a.current=t;const l=P.useCallback(u=>s(RI(e,u,a.current)),[e]),c=P.useCallback(u=>{try{i(u)}catch(f){const{type:p,previousValue:m}=f;if(p!=="LEVA_ERROR")throw f;l(m)}},[l,i]);return P.useEffect(()=>{Qv(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:r,onChange:s,onUpdate:c}}function gm(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=Yi();return BK(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i==null||i()),s},e)}function xte(n){const e=P.useRef(null),t=P.useRef(null),i=P.useRef(!1);return P.useEffect(()=>{const r=PF(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),P.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function XF(){const n=P.useRef(null),e=P.useRef({x:0,y:0}),t=P.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const Ste=["__refCount"],aS=(n,e)=>{if(!n[e])return null;const t=n[e];return fn(t,Ste)};function wte(n){const e=mm(),[t,i]=P.useState(aS(e.getData(),n)),r=P.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=P.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),o=P.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),a=P.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=P.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return P.useEffect(()=>{i(aS(e.getData(),n));const c=e.useStore.subscribe(u=>aS(u.data,n),i,{equalityFn:Wk});return()=>c()},[e,n]),[t,{set:r,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const Ete=ut("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),YF=ut("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),BE=ut("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),KF=ut("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),qF=ut("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Tte({value:n,min:e,max:t,onDrag:i,step:r,initialValue:s}){const o=P.useRef(null),a=P.useRef(null),l=P.useRef(0),c=oa("sizes","scrubberWidth"),u=gm(({event:p,first:m,xy:[v],movement:[_],memo:y})=>{if(m){const{width:x,left:S}=o.current.getBoundingClientRect();l.current=x-parseFloat(c),y=(p==null?void 0:p.target)===a.current?n:sy((v-S)/x,e,t)}const g=y+sy(_/l.current,0,t-e);return i(OF(g,{step:r,initialValue:s})),y}),f=ry(n,e,t);return X.createElement(KF,ii({ref:o},u()),X.createElement(YF,null,X.createElement(qF,{style:{left:0,right:`${(1-f)*100}%`}})),X.createElement(BE,{ref:a,style:{left:`calc(${f} * (100% - ${c}))`}}))}const Mte=X.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,s]=P.useState(!1),o=gm(({active:a,delta:[l],event:c,memo:u=0})=>(s(a),u+=l/2,Math.abs(u)>=1&&(e(f=>parseFloat(f)+Math.floor(u)*t*IF(c)),u=0),u));return X.createElement(ite,ii({dragging:r,title:n.length>1?n:""},o()),n.slice(0,i))});function ZF({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:s,innerLabelTrim:o=1}){const a=o>0&&X.createElement(Mte,{label:n,step:s.step,onUpdate:i,innerLabelTrim:o});return X.createElement(ate,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:a})}function bte(){const n=Yi(),{label:e,value:t,onUpdate:i,settings:r,id:s}=n,{min:o,max:a}=r,l=a!==1/0&&o!==-1/0;return X.createElement(Ps,{input:!0},X.createElement(Js,null,e),X.createElement(Ete,{hasRange:l},l&&X.createElement(Tte,ii({value:parseFloat(t),onDrag:i},r)),X.createElement(ZF,ii({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:Ate}=NF,Cte=fn(NF,["sanitizeStep"]);var Rte=Tt({component:bte},Cte);const Pte=(n,e)=>xr().schema({options:xr().passesAnyOf(xr().object(),xr().array())}).test(e),Ite=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},Lte=(n,{values:e})=>e.indexOf(n),Dte=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(s=>String(s))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var Ote=Object.freeze({__proto__:null,schema:Pte,sanitize:Ite,format:Lte,normalize:Dte});const Nte=ut("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),HE=ut("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),kte=ut("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${HE}:focus + &`]:{$focusStyle:""},[`${HE}:hover + &`]:{$hoverStyle:""}});function Ute({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:s}){const{keys:o,values:a}=r,l=P.useRef();return e===a[n]&&(l.current=o[n]),X.createElement(Nte,null,X.createElement(HE,{id:i,value:n,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>X.createElement("option",{key:c,value:u},c))),X.createElement(kte,null,l.current),X.createElement(wb,{toggled:!0}))}function Fte(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:s,settings:o}=Yi();return X.createElement(Ps,{input:!0},X.createElement(Js,null,n),X.createElement(Ute,{id:r,value:e,displayValue:t,onUpdate:i,settings:o,disabled:s}))}var zte=Tt({component:Fte},Ote);const Bte=n=>xr().string().test(n),Hte=n=>{if(typeof n!="string")throw Error("Invalid string");return n},Vte=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var Gte=Object.freeze({__proto__:null,schema:Bte,sanitize:Hte,normalize:Vte});const Wte=["displayValue","onUpdate","onChange","editable"],$te=ut("div",{whiteSpace:"pre-wrap"});function jte(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,s=fn(n,Wte);return r?X.createElement(xb,ii({value:e,onUpdate:t,onChange:i},s)):X.createElement($te,null,e)}function Xte(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=Yi();return X.createElement(Ps,{input:!0},X.createElement(Js,null,n),X.createElement(jte,ii({displayValue:t,onUpdate:i,onChange:r},e)))}var Yte=Tt({component:Xte},Gte);const Kte=n=>xr().boolean().test(n),qte=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var Zte=Object.freeze({__proto__:null,schema:Kte,sanitize:qte});const Qte=ut("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Jte({value:n,onUpdate:e,id:t,disabled:i}){return X.createElement(Qte,null,X.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),X.createElement("label",{htmlFor:t},X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},X.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function ene(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=Yi();return X.createElement(Ps,{input:!0},X.createElement(Js,null,n),X.createElement(Jte,{value:e,onUpdate:t,id:r,disabled:i}))}var tne=Tt({component:ene},Zte);const nne=["locked"];function ine({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:s}){const o=P.useRef(n[t]);o.current=n[t];const a=P.useCallback(c=>r({[t]:RF({type:"NUMBER",value:o.current,settings:i},c)}),[r,i,t]),l=jF({type:"NUMBER",value:n[t],settings:i,setValue:a});return X.createElement(ZF,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:i,innerLabelTrim:s})}const rne=ut("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function sne(n){let{locked:e}=n,t=fn(n,nne);return X.createElement("svg",ii({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?X.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):X.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Eb({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:s}=Yi(),{lock:o,locked:a}=t;return X.createElement(rne,{withLock:o},o&&X.createElement(sne,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,c)=>X.createElement(ine,{id:c===0?r:`${r}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:i})))}const QF=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=DF(Tt({value:o},e[s])).settings,i=Math.max(i,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=i,t[s].pad=r)}return t},one=["lock"],ane=["value"];function lne(n){const e=xr().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(s=>isFinite(s))};return i=>e.test(i)||t(i)}function cne(n){return Array.isArray(n)?"array":"object"}function Zh(n,e,t){return cne(n)===e?n:e==="array"?Object.values(n):Vee(n,t)}const une=(n,e,t)=>{const i=Zh(n,"object",e.keys);for(let o in i)i[o]=LF(i[o],e[o]);const r=Object.keys(i);let s={};if(r.length===e.keys.length)s=i;else{const o=Zh(t,"object",e.keys);if(r.length===1&&e.locked){const a=r[0],l=i[a],c=o[a],u=c!==0?l/c:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*u}else s=Tt(Tt({},o),i)}return Zh(s,e.format,e.keys)},fne=(n,e)=>Zh(n,"object",e.keys),dne=n=>!!n&&("step"in n||"min"in n||"max"in n);function hne(n,e,t=[]){const{lock:i=!1}=e,r=fn(e,one),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=Zh(n,"object",o),l=dne(r)?o.reduce((u,f)=>Object.assign(u,{[f]:r}),{}):r,c=QF(a,l);return{value:s==="array"?n:a,settings:Tt(Tt({},c),{},{format:s,keys:o,lock:i,locked:!1})}}function JF(n){return{schema:lne(n.length),normalize:e=>{let{value:t}=e,i=fn(e,ane);return hne(t,i,n)},format:(e,t)=>fne(e,t),sanitize:(e,t,i)=>une(e,t,i)}}var pne={grad:.9,turn:360,rad:360/(2*Math.PI)},Go=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},vi=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Ts=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},ez=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},zI=function(n){return{r:Ts(n.r,0,255),g:Ts(n.g,0,255),b:Ts(n.b,0,255),a:Ts(n.a)}},lS=function(n){return{r:vi(n.r),g:vi(n.g),b:vi(n.b),a:vi(n.a,3)}},mne=/^#([0-9a-f]{3,8})$/i,L0=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},tz=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},nz=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:255*[i,a,o,o,l,i][c],g:255*[l,i,i,a,o,o][c],b:255*[o,o,l,i,i,a][c],a:r}},BI=function(n){return{h:ez(n.h),s:Ts(n.s,0,100),l:Ts(n.l,0,100),a:Ts(n.a)}},HI=function(n){return{h:vi(n.h),s:vi(n.s),l:vi(n.l),a:vi(n.a,3)}},VI=function(n){return nz((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Qh=function(n){return{h:(e=tz(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},gne=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vne=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yne=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_ne=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,VE={string:[[function(n){var e=mne.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?vi(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?vi(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=yne.exec(n)||_ne.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:zI({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=gne.exec(n)||vne.exec(n);if(!e)return null;var t,i,r=BI({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(pne[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return VI(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return Go(e)&&Go(t)&&Go(i)?zI({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!Go(e)||!Go(t)||!Go(i))return null;var o=BI({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return VI(o)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!Go(e)||!Go(t)||!Go(i))return null;var o=function(a){return{h:ez(a.h),s:Ts(a.s,0,100),v:Ts(a.v,0,100),a:Ts(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return nz(o)},"hsv"]]},GI=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},iz=function(n){return typeof n=="string"?GI(n.trim(),VE.string):typeof n=="object"&&n!==null?GI(n,VE.object):[null,void 0]},xne=function(n){return iz(n)[1]},cS=function(n,e){var t=Qh(n);return{h:t.h,s:Ts(t.s+100*e,0,100),l:t.l,a:t.a}},uS=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},WI=function(n,e){var t=Qh(n);return{h:t.h,s:t.s,l:Ts(t.l+100*e,0,100),a:t.a}},GE=function(){function n(e){this.parsed=iz(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return vi(uS(this.rgba),2)},n.prototype.isDark=function(){return uS(this.rgba)<.5},n.prototype.isLight=function(){return uS(this.rgba)>=.5},n.prototype.toHex=function(){return e=lS(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?L0(vi(255*s)):"","#"+L0(t)+L0(i)+L0(r)+o;var e,t,i,r,s,o},n.prototype.toRgb=function(){return lS(this.rgba)},n.prototype.toRgbString=function(){return e=lS(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return HI(Qh(this.rgba))},n.prototype.toHslString=function(){return e=HI(Qh(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=tz(this.rgba),{h:vi(e.h),s:vi(e.s),v:vi(e.v),a:vi(e.a,3)};var e},n.prototype.invert=function(){return tr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),tr(cS(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),tr(cS(this.rgba,-e))},n.prototype.grayscale=function(){return tr(cS(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),tr(WI(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),tr(WI(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?tr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):vi(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Qh(this.rgba);return typeof e=="number"?tr({h:e,s:t.s,l:t.l,a:t.a}):vi(t.h)},n.prototype.isEqual=function(e){return this.toHex()===tr(e).toHex()},n}(),tr=function(n){return n instanceof GE?n:new GE(n)},$I=[],Sne=function(n){n.forEach(function(e){$I.indexOf(e)<0&&(e(GE,VE),$I.push(e))})};function wne(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=i[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),f=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var v in t){var _=(a=u,l=s[v],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));_<f&&(f=_,p=v)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function Cd(){return(Cd=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function Tb(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function WE(n){var e=P.useRef(n),t=P.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var ad=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Jh=function(n){return"touches"in n},$E=function(n){return n&&n.ownerDocument.defaultView||self},jI=function(n,e,t){var i=n.getBoundingClientRect(),r=Jh(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:ad((r.pageX-(i.left+$E(n).pageXOffset))/i.width),top:ad((r.pageY-(i.top+$E(n).pageYOffset))/i.height)}},XI=function(n){!Jh(n)&&n.preventDefault()},Mb=X.memo(function(n){var e=n.onMove,t=n.onKey,i=Tb(n,["onMove","onKey"]),r=P.useRef(null),s=WE(e),o=WE(t),a=P.useRef(null),l=P.useRef(!1),c=P.useMemo(function(){var m=function(y){XI(y),(Jh(y)?y.touches.length>0:y.buttons>0)&&r.current?s(jI(r.current,y,a.current)):_(!1)},v=function(){return _(!1)};function _(y){var g=l.current,x=$E(r.current),S=y?x.addEventListener:x.removeEventListener;S(g?"touchmove":"mousemove",m),S(g?"touchend":"mouseup",v)}return[function(y){var g=y.nativeEvent,x=r.current;if(x&&(XI(g),!function(E,b){return b&&!Jh(E)}(g,l.current)&&x)){if(Jh(g)){l.current=!0;var S=g.changedTouches||[];S.length&&(a.current=S[0].identifier)}x.focus(),s(jI(x,g,a.current)),_(!0)}},function(y){var g=y.which||y.keyCode;g<37||g>40||(y.preventDefault(),o({left:g===39?.05:g===37?-.05:0,top:g===40?.05:g===38?-.05:0}))},_]},[o,s]),u=c[0],f=c[1],p=c[2];return P.useEffect(function(){return p},[p]),X.createElement("div",Cd({},i,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:r,onKeyDown:f,tabIndex:0,role:"slider"}))}),vm=function(n){return n.filter(Boolean).join(" ")},bb=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,s=vm(["react-colorful__pointer",n.className]);return X.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},X.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},ar=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},rz=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:ar(n.h),s:ar(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:ar(r/2),a:ar(i,2)}},jE=function(n){var e=rz(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},fS=function(n){var e=rz(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},sz=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:ar(255*[i,a,o,o,l,i][c]),g:ar(255*[l,i,i,a,o,o][c]),b:ar(255*[o,o,l,i,i,a][c]),a:ar(r,2)}},oz=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:ar(60*(a<0?a+6:a)),s:ar(s?o/s*100:0),v:ar(s/255*100),a:r}},az=X.memo(function(n){var e=n.hue,t=n.onChange,i=vm(["react-colorful__hue",n.className]);return X.createElement("div",{className:i},X.createElement(Mb,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:ad(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":ar(e),"aria-valuemax":"360","aria-valuemin":"0"},X.createElement(bb,{className:"react-colorful__hue-pointer",left:e/360,color:jE({h:e,s:100,v:100,a:1})})))}),lz=X.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:jE({h:e.h,s:100,v:100,a:1})};return X.createElement("div",{className:"react-colorful__saturation",style:i},X.createElement(Mb,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:ad(e.s+100*r.left,0,100),v:ad(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ar(e.s)+"%, Brightness "+ar(e.v)+"%"},X.createElement(bb,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:jE(e)})))}),Ab=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function cz(n,e,t){var i=WE(t),r=P.useState(function(){return n.toHsva(e)}),s=r[0],o=r[1],a=P.useRef({color:e,hsva:s});P.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),P.useEffect(function(){var c;Ab(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},i(c))},[s,n,i]);var l=P.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var Ene=typeof window<"u"?P.useLayoutEffect:P.useEffect,Tne=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},YI=new Map,uz=function(n){Ene(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!YI.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,YI.set(e,t);var i=Tne();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},Mne=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=Tb(n,["className","colorModel","color","onChange"]),a=P.useRef(null);uz(a);var l=cz(t,r,s),c=l[0],u=l[1],f=vm(["react-colorful",e]);return X.createElement("div",Cd({},o,{ref:a,className:f}),X.createElement(lz,{hsva:c,onChange:u}),X.createElement(az,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},bne=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+fS(Object.assign({},t,{a:0}))+", "+fS(Object.assign({},t,{a:1}))+")"},s=vm(["react-colorful__alpha",e]),o=ar(100*t.a);return X.createElement("div",{className:s},X.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),X.createElement(Mb,{onMove:function(a){i({a:a.left})},onKey:function(a){i({a:ad(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},X.createElement(bb,{className:"react-colorful__alpha-pointer",left:t.a,color:fS(t)})))},Ane=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=Tb(n,["className","colorModel","color","onChange"]),a=P.useRef(null);uz(a);var l=cz(t,r,s),c=l[0],u=l[1],f=vm(["react-colorful",e]);return X.createElement("div",Cd({},o,{ref:a,className:f}),X.createElement(lz,{hsva:c,onChange:u}),X.createElement(az,{hue:c.h,onChange:u}),X.createElement(bne,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},Cne={defaultColor:{r:0,g:0,b:0,a:1},toHsva:oz,fromHsva:sz,equal:Ab},Rne=function(n){return X.createElement(Ane,Cd({},n,{colorModel:Cne}))},Pne={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return oz({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=sz(n)).r,g:e.g,b:e.b};var e},equal:Ab},Ine=function(n){return X.createElement(Mne,Cd({},n,{colorModel:Pne}))};function Rd(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function Pd(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(i=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],r=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Lne(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s}function Dne(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Lne(arguments[e]));return n}var One=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ym(n,e){var t=Nne(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Nne(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=One.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var kne=[".DS_Store","Thumbs.db"];function Une(n){return Rd(this,void 0,void 0,function(){return Pd(this,function(e){return ay(n)&&Fne(n)?[2,Vne(n.dataTransfer,n.type)]:zne(n)?[2,Bne(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Hne(n)]:[2,[]]})})}function Fne(n){return ay(n.dataTransfer)}function zne(n){return ay(n)&&ay(n.target)}function ay(n){return typeof n=="object"&&n!==null}function Bne(n){return XE(n.target.files).map(function(e){return ym(e)})}function Hne(n){return Rd(this,void 0,void 0,function(){var e;return Pd(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return ym(i)})]}})})}function Vne(n,e){return Rd(this,void 0,void 0,function(){var t,i;return Pd(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=XE(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Gne))]):[3,2];case 1:return i=r.sent(),[2,KI(fz(i))];case 2:return[2,KI(XE(n.files).map(function(s){return ym(s)}))]}})})}function KI(n){return n.filter(function(e){return kne.indexOf(e.name)===-1})}function XE(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function Gne(n){if(typeof n.webkitGetAsEntry!="function")return qI(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?dz(e):qI(n)}function fz(n){return n.reduce(function(e,t){return Dne(e,Array.isArray(t)?fz(t):[t])},[])}function qI(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=ym(e);return Promise.resolve(t)}function Wne(n){return Rd(this,void 0,void 0,function(){return Pd(this,function(e){return[2,n.isDirectory?dz(n):$ne(n)]})})}function dz(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function s(){var o=this;e.readEntries(function(a){return Rd(o,void 0,void 0,function(){var l,c,u;return Pd(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l=f.sent(),t(l),[3,4];case 3:return c=f.sent(),i(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(Wne)),r.push(u),s(),f.label=6;case 6:return[2]}})})},function(a){i(a)})}s()})}function $ne(n){return Rd(this,void 0,void 0,function(){return Pd(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var s=ym(r,n.fullPath);t(s)},function(r){i(r)})})]})})}var jne=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?i.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):r===a})}return!0};function ZI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function QI(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZI(Object(t),!0).forEach(function(i){hz(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function hz(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JI(n,e){return qne(n)||Kne(n,e)||Yne(n,e)||Xne()}function Xne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yne(n,e){if(n){if(typeof n=="string")return eL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return eL(n,e)}}function eL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Kne(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function qne(n){if(Array.isArray(n))return n}var Zne="file-invalid-type",Qne="file-too-large",Jne="file-too-small",eie="too-many-files",tie=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Zne,message:"File type must be ".concat(t)}},tL=function(e){return{code:Qne,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},nL=function(e){return{code:Jne,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},nie={code:eie,message:"Too many files"};function pz(n,e){var t=n.type==="application/x-moz-file"||jne(n,e);return[t,t?null:tie(e)]}function mz(n,e,t){if(bh(n.size))if(bh(e)&&bh(t)){if(n.size>t)return[!1,tL(t)];if(n.size<e)return[!1,nL(e)]}else{if(bh(e)&&n.size<e)return[!1,nL(e)];if(bh(t)&&n.size>t)return[!1,tL(t)]}return[!0,null]}function bh(n){return n!=null}function iie(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=pz(a,t),c=JI(l,1),u=c[0],f=mz(a,i,r),p=JI(f,1),m=p[0];return u&&m})}function ly(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function D0(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function iL(n){n.preventDefault()}function rie(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function sie(n){return n.indexOf("Edge/")!==-1}function oie(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return rie(n)||sie(n)}function fo(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return e.some(function(a){return!ly(i)&&a&&a.apply(void 0,[i].concat(s)),ly(i)})}}function aie(){return"showOpenFilePicker"in window}function lie(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return QI(QI({},e),{},hz({},t,[]))},{}):{}}]}function cie(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function uie(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var fie=["children"],die=["open"],hie=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],pie=["refKey","onChange","onClick"];function mie(n){return yie(n)||vie(n)||gz(n)||gie()}function gie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function yie(n){if(Array.isArray(n))return YE(n)}function dS(n,e){return Sie(n)||xie(n,e)||gz(n,e)||_ie()}function _ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gz(n,e){if(n){if(typeof n=="string")return YE(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return YE(n,e)}}function YE(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function xie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function Sie(n){if(Array.isArray(n))return n}function rL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Tn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(t),!0).forEach(function(i){KE(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rL(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function KE(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cy(n,e){if(n==null)return{};var t=wie(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function wie(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var Cb=P.forwardRef(function(n,e){var t=n.children,i=cy(n,fie),r=yz(i),s=r.open,o=cy(r,die);return P.useImperativeHandle(e,function(){return{open:s}},[s]),X.createElement(P.Fragment,null,t(Tn(Tn({},o),{},{open:s})))});Cb.displayName="Dropzone";var vz={disabled:!1,getFilesFromEvent:Une,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Cb.defaultProps=vz;Cb.propTypes={children:on.func,accept:on.oneOfType([on.string,on.arrayOf(on.string)]),multiple:on.bool,preventDropOnDocument:on.bool,noClick:on.bool,noKeyboard:on.bool,noDrag:on.bool,noDragEventsBubbling:on.bool,minSize:on.number,maxSize:on.number,maxFiles:on.number,disabled:on.bool,getFilesFromEvent:on.func,onFileDialogCancel:on.func,onFileDialogOpen:on.func,useFsAccessApi:on.bool,onDragEnter:on.func,onDragLeave:on.func,onDragOver:on.func,onDrop:on.func,onDropAccepted:on.func,onDropRejected:on.func,validator:on.func};var qE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function yz(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Tn(Tn({},vz),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,f=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,_=e.onFileDialogCancel,y=e.onFileDialogOpen,g=e.useFsAccessApi,x=e.preventDropOnDocument,S=e.noClick,E=e.noKeyboard,b=e.noDrag,A=e.noDragEventsBubbling,R=e.validator,D=P.useMemo(function(){return typeof y=="function"?y:sL},[y]),O=P.useMemo(function(){return typeof _=="function"?_:sL},[_]),M=P.useRef(null),I=P.useRef(null),U=P.useReducer(Eie,qE),j=dS(U,2),z=j[0],K=j[1],q=z.isFocused,ee=z.isFileDialogActive,N=z.draggedFiles,V=P.useRef(typeof window<"u"&&window.isSecureContext&&g&&aie()),W=function(){!V.current&&ee&&setTimeout(function(){if(I.current){var le=I.current.files;le.length||(K({type:"closeDialog"}),O())}},300)};P.useEffect(function(){return window.addEventListener("focus",W,!1),function(){window.removeEventListener("focus",W,!1)}},[I,ee,O,V]);var Q=P.useRef([]),ie=function(le){M.current&&M.current.contains(le.target)||(le.preventDefault(),Q.current=[])};P.useEffect(function(){return x&&(document.addEventListener("dragover",iL,!1),document.addEventListener("drop",ie,!1)),function(){x&&(document.removeEventListener("dragover",iL),document.removeEventListener("drop",ie))}},[M,x]);var Me=P.useCallback(function(re){re.preventDefault(),re.persist(),ye(re),Q.current=[].concat(mie(Q.current),[re.target]),D0(re)&&Promise.resolve(r(re)).then(function(le){ly(re)&&!A||(K({draggedFiles:le,isDragActive:!0,type:"setDraggedFiles"}),c&&c(re))})},[r,c,A]),te=P.useCallback(function(re){re.preventDefault(),re.persist(),ye(re);var le=D0(re);if(le&&re.dataTransfer)try{re.dataTransfer.dropEffect="copy"}catch{}return le&&f&&f(re),!1},[f,A]),ue=P.useCallback(function(re){re.preventDefault(),re.persist(),ye(re);var le=Q.current.filter(function(be){return M.current&&M.current.contains(be)}),De=le.indexOf(re.target);De!==-1&&le.splice(De,1),Q.current=le,!(le.length>0)&&(K({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),D0(re)&&u&&u(re))},[M,u,A]),xe=P.useCallback(function(re,le){var De=[],be=[];re.forEach(function(Oe){var et=pz(Oe,t),lt=dS(et,2),we=lt[0],Pt=lt[1],yt=mz(Oe,o,s),at=dS(yt,2),nt=at[0],Ve=at[1],Z=R?R(Oe):null;if(we&&nt&&!Z)De.push(Oe);else{var _e=[Pt,Ve];Z&&(_e=_e.concat(Z)),be.push({file:Oe,errors:_e.filter(function(Ue){return Ue})})}}),(!a&&De.length>1||a&&l>=1&&De.length>l)&&(De.forEach(function(Oe){be.push({file:Oe,errors:[nie]})}),De.splice(0)),K({acceptedFiles:De,fileRejections:be,type:"setFiles"}),p&&p(De,be,le),be.length>0&&v&&v(be,le),De.length>0&&m&&m(De,le)},[K,a,t,o,s,l,p,m,v,R]),Re=P.useCallback(function(re){re.preventDefault(),re.persist(),ye(re),Q.current=[],D0(re)&&Promise.resolve(r(re)).then(function(le){ly(re)&&!A||xe(le,re)}),K({type:"reset"})},[r,xe,A]),$e=P.useCallback(function(){if(V.current){K({type:"openDialog"}),D();var re={multiple:a,types:lie(t)};window.showOpenFilePicker(re).then(function(le){return r(le)}).then(function(le){xe(le,null),K({type:"closeDialog"})}).catch(function(le){cie(le)?(O(le),K({type:"closeDialog"})):uie(le)&&(V.current=!1,I.current&&(I.current.value=null,I.current.click()))});return}I.current&&(K({type:"openDialog"}),D(),I.current.value=null,I.current.click())},[K,D,O,g,xe,t,a]),ze=P.useCallback(function(re){!M.current||!M.current.isEqualNode(re.target)||(re.key===" "||re.key==="Enter"||re.keyCode===32||re.keyCode===13)&&(re.preventDefault(),$e())},[M,$e]),ot=P.useCallback(function(){K({type:"focus"})},[]),He=P.useCallback(function(){K({type:"blur"})},[]),Y=P.useCallback(function(){S||(oie()?setTimeout($e,0):$e())},[S,$e]),Se=function(le){return i?null:le},ve=function(le){return E?null:Se(le)},Ee=function(le){return b?null:Se(le)},ye=function(le){A&&le.stopPropagation()},Qe=P.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},le=re.refKey,De=le===void 0?"ref":le,be=re.role,Oe=re.onKeyDown,et=re.onFocus,lt=re.onBlur,we=re.onClick,Pt=re.onDragEnter,yt=re.onDragOver,at=re.onDragLeave,nt=re.onDrop,Ve=cy(re,hie);return Tn(Tn(KE({onKeyDown:ve(fo(Oe,ze)),onFocus:ve(fo(et,ot)),onBlur:ve(fo(lt,He)),onClick:Se(fo(we,Y)),onDragEnter:Ee(fo(Pt,Me)),onDragOver:Ee(fo(yt,te)),onDragLeave:Ee(fo(at,ue)),onDrop:Ee(fo(nt,Re)),role:typeof be=="string"&&be!==""?be:"button"},De,M),!i&&!E?{tabIndex:0}:{}),Ve)}},[M,ze,ot,He,Y,Me,te,ue,Re,E,b,i]),ke=P.useCallback(function(re){re.stopPropagation()},[]),F=P.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},le=re.refKey,De=le===void 0?"ref":le,be=re.onChange,Oe=re.onClick,et=cy(re,pie),lt=KE({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:Se(fo(be,Re)),onClick:Se(fo(Oe,ke)),tabIndex:-1},De,I);return Tn(Tn({},lt),et)}},[I,t,a,Re,i]),k=N.length,se=k>0&&iie({files:N,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),Te=k>0&&!se;return Tn(Tn({},z),{},{isDragAccept:se,isDragReject:Te,isFocused:q&&!i,getRootProps:Qe,getInputProps:F,rootRef:M,inputRef:I,open:Se($e)})}function Eie(n,e){switch(e.type){case"focus":return Tn(Tn({},n),{},{isFocused:!0});case"blur":return Tn(Tn({},n),{},{isFocused:!1});case"openDialog":return Tn(Tn({},qE),{},{isFileDialogActive:!0});case"closeDialog":return Tn(Tn({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return Tn(Tn({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return Tn(Tn({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Tn({},qE);default:return n}}function sL(){}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Tie=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Mie=Tie;function oL(n){return Mie(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var _z=function(e){var t,i;return!(oL(e)===!1||(t=e.constructor,typeof t!="function")||(i=t.prototype,oL(i)===!1)||i.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var bie=_z,Rb=function(e){return bie(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Aie=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break},Cie=Rb,Rie=Aie;function xz(n,e){for(var t=arguments.length,i=0;++i<t;){var r=arguments[i];ZE(r)&&Rie(r,Pie,n)}return n}function Pie(n,e){if(Iie(e)){var t=this[e];ZE(n)&&ZE(t)?xz(t,n):this[e]=n}}function ZE(n){return Cie(n)&&!Array.isArray(n)}function Iie(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var Lie=xz;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Die=function(n,e,t,i,r){if(!Oie(n)||!e)return n;if(e=O0(e),t&&(e+="."+O0(t)),i&&(e+="."+O0(i)),r&&(e+="."+O0(r)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function Oie(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function O0(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Nie=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,s=0;++s<r;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(i[c]=o[c])}return i},kie=Rb,Uie=Nie,Fie=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");aL(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];Bie(t)&&(t=Hie(t)),aL(t)&&(zie(n,t),Uie(n,t))}return n};function zie(n,e){for(var t in e)Vie(e,t)&&(n[t]=e[t])}function Bie(n){return n&&typeof n=="string"}function Hie(n){var e={};for(var t in n)e[t]=n[t];return e}function aL(n){return n&&typeof n=="object"||kie(n)}function Vie(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Gie=Fie,Wie=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var i=Gie({sep:"."},e),r=i.quotes||['"',"'","`"],s;i.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:i.brackets&&(s=i.brackets);var o=[],a=[],l=[""],c=i.sep,u=n.length,f=-1,p;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<u;){var v=n[f],_=n[f+1],y={val:v,idx:f,arr:l,str:n};if(o.push(y),v==="\\"){y.val=jie(i,n,f)===!0?v+_:_,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,f++;continue}if(s&&s[v]){a.push(v);var g=m(),x=f+1;if(n.indexOf(g,x+1)!==-1)for(;a.length&&x<u;){var S=n[++x];if(S==="\\"){S++;continue}if(r.indexOf(S)!==-1){x=QE(n,S,x+1);continue}if(g=m(),a.length&&n.indexOf(g,x+1)===-1)break;if(s[S]){a.push(S);continue}g===S&&a.pop()}if(p=x,p===-1){l[l.length-1]+=v;continue}v=n.slice(f,p+1),y.val=v,y.idx=f=p}if(r.indexOf(v)!==-1){if(p=QE(n,v,f+1),p===-1){l[l.length-1]+=v;continue}$ie(v,i)===!0?v=n.slice(f,p+1):v=n.slice(f+1,p),y.val=v,y.idx=f=p}if(typeof t=="function"&&(t(y,o),v=y.val,f=y.idx),y.val===c&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function QE(n,e,t,i){var r=n.indexOf(e,t);return n.charAt(r-1)==="\\"?QE(n,e,r+1):r}function $ie(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function jie(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Xie=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},lL=Xie,Yie=function(e){lL(e)||(e={});for(var t=arguments.length,i=1;i<t;i++){var r=arguments[i];lL(r)&&Kie(e,r)}return e};function Kie(n,e){for(var t in e)qie(e,t)&&(n[t]=e[t])}function qie(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Zie=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Qie=Wie,Jie=Yie,cL=_z,uL=Zie,ere=function(n,e,t){if(!uL(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var i=Qie(e,{sep:".",brackets:!0}).filter(tre),r=i.length,s=-1,o=n;++s<r;){var a=i[s];if(s!==r-1){uL(o[a])||(o[a]={}),o=o[a];continue}cL(o[a])&&cL(t)?o[a]=Jie({},o[a],t):o[a]=t}return n};function tre(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var hS=Rb,fL=Lie,nre=Die,dL=ere,ire=function(e,t,i){if(!hS(e))throw new TypeError("expected an object");if(typeof t!="string"||i==null)return fL.apply(null,arguments);if(typeof i=="string")return dL(e,t,i),e;var r=nre(e,t);return hS(i)&&hS(r)&&(i=fL({},r,i)),dL(e,t,i),e};const rre=cd(ire),Pb=(...n)=>n.filter(Boolean).join(".");function sre(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function ore(n){const e=P.useRef(null),t=P.useRef(null),i=P.useRef(!0);return P.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),P.useEffect(()=>{if(i.current){i.current=!1;return}let r;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const are=n=>{const[e,t]=P.useState(n.getVisiblePaths());return P.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:Wk});return()=>i()},[n]),e};function Sz(n=3){const e=P.useRef(null),t=P.useRef(null),[i,r]=P.useState(!1),s=P.useCallback(()=>r(!0),[]),o=P.useCallback(()=>r(!1),[]);return P.useLayoutEffect(()=>{if(i){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),f=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:s,hide:o}}Sne([wne]);const lre={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};xr.extend({color:()=>n=>tr(n).isValid()});const cre=n=>xr().color().test(n);function wz(n,{format:e,hasAlpha:t,isString:i}){const r=lre[e]+(i&&e!=="hex"?"String":""),s=n[r]();return typeof s=="object"&&!t?Hee(s,["a"]):s}const Ez=(n,e)=>{const t=tr(n);if(!t.isValid())throw Error("Invalid color");return wz(t,e)},ure=(n,e)=>wz(tr(n),Tt(Tt({},e),{},{isString:!0,format:"hex"})),fre=({value:n})=>{const e=xne(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:Ez(n,r),settings:r}};var dre=Object.freeze({__proto__:null,schema:cre,sanitize:Ez,format:ure,normalize:fre});const hre=ut("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),pre=ut("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),mre=ut("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function hL(n,e){return e!=="rgb"?tr(n).toRgb():n}function gre({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:s}=Yi(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:u,show:f,hide:p}=Sz(),m=P.useRef(0),[v,_]=P.useState(()=>hL(n,o)),y=a?Rne:Ine,g=()=>{_(hL(n,o)),f(),r()},x=()=>{p(),s(),window.clearTimeout(m.current)},S=()=>{m.current=window.setTimeout(x,500)};return P.useEffect(()=>()=>window.clearTimeout(m.current),[]),X.createElement(X.Fragment,null,X.createElement(hre,{ref:l,active:u,onClick:()=>g(),style:{color:e}}),u&&X.createElement(Sb,null,X.createElement($F,{onPointerUp:x}),X.createElement(mre,{ref:c,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:E=>E.buttons===0&&S()},X.createElement(y,{color:v,onChange:i}))))}function vre(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:s}=Yi();return X.createElement(Ps,{input:!0},X.createElement(Js,null,t),X.createElement(pre,null,X.createElement(gre,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:s}),X.createElement(xb,{value:e,onChange:i,onUpdate:r})))}var yre=Tt({component:vre},dre);function _re(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Yi();return X.createElement(Ps,{input:!0},X.createElement(Js,null,n),X.createElement(Eb,{value:e,settings:i,onUpdate:t}))}var xre=Tt({component:_re},JF(["x","y","z"]));const Sre=ut("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),wre=ut("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Ere({value:n,settings:e,onUpdate:t}){const i=P.useRef(),r=P.useRef(0),s=P.useRef(0),o=P.useRef(1),[a,l]=P.useState(!1),[c,u]=P.useState(!1),[f,p]=XF(),m=P.useRef(null),v=P.useRef(null);P.useLayoutEffect(()=>{if(a){const{top:U,left:j,width:z,height:K}=m.current.getBoundingClientRect();v.current.style.left=j+z/2+"px",v.current.style.top=U+K/2+"px"}},[a]);const{keys:[_,y],joystick:g}=e,x=g==="invertY"?1:-1,{[_]:{step:S},[y]:{step:E}}=e,b=oa("sizes","joystickWidth"),A=oa("sizes","joystickHeight"),R=parseFloat(b)*.8/2,D=parseFloat(A)*.8/2,O=P.useCallback(()=>{i.current||(u(!0),r.current&&p({x:r.current*R}),s.current&&p({y:s.current*-D}),i.current=window.setInterval(()=>{t(U=>{const j=S*r.current*o.current,z=x*E*s.current*o.current;return Array.isArray(U)?{[_]:U[0]+j,[y]:U[1]+z}:{[_]:U[_]+j,[y]:U[y]+z}})},16))},[R,D,t,p,S,E,_,y,x]),M=P.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,u(!1)},[]);P.useEffect(()=>{function U(j){o.current=IF(j)}return window.addEventListener("keydown",U),window.addEventListener("keyup",U),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",U),window.removeEventListener("keyup",U)}},[]);const I=gm(({first:U,active:j,delta:[z,K],movement:[q,ee]})=>{U&&l(!0);const N=Pl(q,-R,R),V=Pl(ee,-D,D);r.current=Math.abs(q)>Math.abs(N)?Math.sign(q-N):0,s.current=Math.abs(ee)>Math.abs(V)?Math.sign(V-ee):0;let W=n[_],Q=n[y];j?(r.current||(W+=z*S*o.current,p({x:N})),s.current||(Q-=x*K*E*o.current,p({y:V})),r.current||s.current?O():M(),t({[_]:W,[y]:Q})):(l(!1),r.current=0,s.current=0,p({x:0,y:0}),M())});return X.createElement(Sre,ii({ref:m},I()),a&&X.createElement(Sb,null,X.createElement(wre,{ref:v,isOutOfBounds:c},X.createElement("div",null),X.createElement("span",{ref:f}))))}const Tre=ut("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Mre(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Yi();return X.createElement(Ps,{input:!0},X.createElement(Js,null,n),X.createElement(Tre,{withJoystick:!!i.joystick},i.joystick&&X.createElement(Ere,{value:e,settings:i,onUpdate:t}),X.createElement(Eb,{value:e,settings:i,onUpdate:t})))}const bre=["joystick"],Tz=JF(["x","y"]),Are=n=>{let{joystick:e=!0}=n,t=fn(n,bre);const{value:i,settings:r}=Tz.normalize(t);return{value:i,settings:Tt(Tt({},r),{},{joystick:e})}};var Cre=Tt(Tt({component:Mre},Tz),{},{normalize:Are});const Rre=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob | File].")}},Pre=(n,e)=>typeof e=="object"&&"image"in e,Ire=({image:n})=>({value:n});var Lre=Object.freeze({__proto__:null,sanitize:Rre,schema:Pre,normalize:Ire});const Dre=ut("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Ore=ut("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Nre=ut("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),kre=ut("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Ure=ut("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Fre=ut("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function zre(){const{label:n,value:e,onUpdate:t,disabled:i}=Yi(),{popinRef:r,wrapperRef:s,shown:o,show:a,hide:l}=Sz(),c=P.useCallback(v=>{v.length&&t(v[0])},[t]),u=P.useCallback(v=>{v.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:p,isDragAccept:m}=yz({maxFiles:1,accept:"image/*",onDrop:c,disabled:i});return X.createElement(Ps,{input:!0},X.createElement(Js,null,n),X.createElement(Dre,null,X.createElement(Nre,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&X.createElement(Sb,null,X.createElement($F,{onPointerUp:l,style:{cursor:"pointer"}}),X.createElement(kre,{ref:s,style:{backgroundImage:`url(${e})`}})),X.createElement(Ore,f({isDragAccept:m}),X.createElement("input",p()),X.createElement(Ure,null,m?"drop image":"click or drop")),X.createElement(Fre,{onClick:u,disabled:!e})))}var Bre=Tt({component:zre},Lre);const pL=xr().number(),Hre=(n,e)=>xr().array().length(2).every.number().test(n)&&xr().schema({min:pL,max:pL}).test(e),uy=n=>({min:n[0],max:n[1]}),Mz=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?uy(n):n,s={min:i[0],max:i[1]},{min:o,max:a}=Tt(Tt({},s),r);return[Pl(Number(o),e,Math.max(e,a)),Pl(Number(a),Math.min(t,o),t)]},Vre=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=QF(uy(n),{min:i,max:i}),s=[e,t],o=Tt(Tt({},r),{},{bounds:s});return{value:Mz(uy(n),o,n),settings:o}};var Gre=Object.freeze({__proto__:null,schema:Hre,format:uy,sanitize:Mz,normalize:Vre});const Wre=["value","bounds","onDrag"],$re=["bounds"],jre=ut("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Xre(n){let{value:e,bounds:[t,i],onDrag:r}=n,s=fn(n,Wre);const o=P.useRef(null),a=P.useRef(null),l=P.useRef(null),c=P.useRef(0),u=oa("sizes","scrubberWidth"),f=gm(({event:v,first:_,xy:[y],movement:[g],memo:x={}})=>{if(_){const{width:E,left:b}=o.current.getBoundingClientRect();c.current=E-parseFloat(u);const A=(v==null?void 0:v.target)===a.current||(v==null?void 0:v.target)===l.current;x.pos=sy((y-b)/E,t,i);const R=Math.abs(x.pos-e.min)-Math.abs(x.pos-e.max);x.key=R<0||R===0&&x.pos<=e.min?"min":"max",A&&(x.pos=e[x.key])}const S=x.pos+sy(g/c.current,0,i-t);return r({[x.key]:Ate(S,s[x.key])}),x}),p=`calc(${ry(e.min,t,i)} * (100% - ${u} - 8px) + 4px)`,m=`calc(${1-ry(e.max,t,i)} * (100% - ${u} - 8px) + 4px)`;return X.createElement(KF,ii({ref:o},f()),X.createElement(YF,null,X.createElement(qF,{style:{left:p,right:m}})),X.createElement(BE,{position:"left",ref:a,style:{left:p}}),X.createElement(BE,{position:"right",ref:l,style:{right:m}}))}function Yre(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Yi(),r=fn(i,$re);return X.createElement(X.Fragment,null,X.createElement(Ps,{input:!0},X.createElement(Js,null,n),X.createElement(jre,null,X.createElement(Xre,ii({value:e},i,{onDrag:t})),X.createElement(Eb,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var Kre=Tt({component:Yre},Gre);const qre=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},Zre=["type","value"],Qre=["onChange","transient","onEditStart","onEditEnd"],Jre=function(){const e=hk(HK(()=>({data:{}}))),t=qre();this.storeId=Bee(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(i).forEach(([u,f])=>{f.render&&a.some(p=>p.indexOf(u)===0)&&!f.render(this.get)&&l.push(u+".")});const c=[];return r.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(f=>u.indexOf(f)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>r.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in Mo&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>i[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{let p=c[u];if(p){const{type:m,value:v}=f,_=fn(f,Zre);m!==p.type?Qo(Mn.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,_),p.__refCount++)}else c[u]=Tt(Tt({},f),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return FI(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=Tt(Tt({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{try{FI(c[u],f,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{Qo(Mn.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,Tt(Tt({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,Tt(Tt({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,f])=>{if(u==="")return Qo(Mn.EMPTY_KEY);let p=Pb(a,u);if(f.type===Mo.FOLDER){const m=s(f.schema,p,l);Object.assign(c,m),p in i||(i[p]=f.settings)}else if(u in l)Qo(Mn.DUPLICATE_KEYS,u,p,l[u].path);else{const m=Xee(f,u,p,c);if(m){const{type:v,options:_,input:y}=m,{onChange:g,transient:x,onEditStart:S,onEditEnd:E}=_,b=fn(_,Qre);c[p]=Tt(Tt(Tt({type:v},b),y),{},{fromPanel:!0}),l[u]={path:p,onChange:g,transient:x,onEditStart:S,onEditEnd:E}}else Qo(Mn.UNKNOWN_INPUT,p,f)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}};new Jre;const mL=n=>"__levaInput"in n,ese=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[s,o]=sre(r);(!i||s.toLowerCase().indexOf(i)>-1)&&rre(t,o,{[s]:{__levaInput:!0,path:r}})}),t},tse=["type","label","path","valueKey","value","settings","setValue","disabled"];function nse(n){let{type:e,label:t,path:i,valueKey:r,value:s,settings:o,setValue:a,disabled:l}=n,c=fn(n,tse);const{displayValue:u,onChange:f,onUpdate:p}=jF({type:e,value:s,settings:o,setValue:a}),m=eu[e].component;return m?X.createElement(kF.Provider,{value:Tt({key:r,path:i,id:""+i,label:t,displayValue:u,value:s,onChange:f,onUpdate:p,settings:o,setValue:a,disabled:l},c)},X.createElement(fte,{disabled:l},X.createElement(m,null))):(Qo(Mn.NO_COMPONENT_FOR_TYPE,e,i),null)}const ise=ut("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function rse({onClick:n,settings:e,label:t}){const i=mm();return X.createElement(Ps,null,X.createElement(ise,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const sse=ut("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),ose=ut("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),ase=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function lse(n){const{label:e,opts:t}=ase(n),i=mm();return X.createElement(Ps,{input:!!e},e&&X.createElement(Js,null,e),X.createElement(sse,null,Object.entries(t).map(([r,s])=>X.createElement(ose,{key:r,onClick:()=>s(i.get)},r))))}const cse=ut("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),bz=100;function use(n,e){n.push(e),n.length>bz&&n.shift()}const fse=P.forwardRef(function({initialValue:n},e){const t=oa("colors","highlight3"),i=oa("colors","elevation2"),r=oa("colors","highlight1"),[s,o]=P.useMemo(()=>[tr(r).alpha(.4).toRgbString(),tr(r).alpha(.1).toRgbString()],[r]),a=P.useRef([n]),l=P.useRef(n),c=P.useRef(n),u=P.useRef(),f=P.useCallback((v,_)=>{if(!v)return;const{width:y,height:g}=v,x=new Path2D,S=y/bz,E=g*.05;for(let R=0;R<a.current.length;R++){const D=ry(a.current[R],l.current,c.current),O=S*R,M=g-D*(g-E*2)-E;x.lineTo(O,M)}_.clearRect(0,0,y,g);const b=new Path2D(x);b.lineTo(S*(a.current.length+1),g),b.lineTo(0,g),b.lineTo(0,0);const A=_.createLinearGradient(0,0,0,g);A.addColorStop(0,s),A.addColorStop(1,o),_.fillStyle=A,_.fill(b),_.strokeStyle=i,_.lineJoin="round",_.lineWidth=14,_.stroke(x),_.strokeStyle=t,_.lineWidth=2,_.stroke(x)},[t,i,s,o]),[p,m]=xte(f);return P.useImperativeHandle(e,()=>({frame:v=>{(l.current===void 0||v<l.current)&&(l.current=v),(c.current===void 0||v>c.current)&&(c.current=v),use(a.current,v),u.current=requestAnimationFrame(()=>f(p.current,m.current))}}),[p,m,f]),P.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),X.createElement(cse,{ref:p})}),gL=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),dse=P.forwardRef(function({initialValue:n},e){const[t,i]=P.useState(gL(n));return P.useImperativeHandle(e,()=>({frame:r=>i(gL(r))}),[]),X.createElement("div",null,t)});function vL(n){return typeof n=="function"?n():n.current}function hse({label:n,objectOrFn:e,settings:t}){const i=P.useRef(),r=P.useRef(vL(e));return P.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=i.current)===null||o===void 0||o.frame(vL(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),X.createElement(Ps,{input:!0},X.createElement(Js,{align:"top"},n),t.graph?X.createElement(fse,{ref:i,initialValue:r.current}):X.createElement(dse,{ref:i,initialValue:r.current}))}const pse=["type","label","key"],mse={[Mo.BUTTON]:rse,[Mo.BUTTON_GROUP]:lse,[Mo.MONITOR]:hse},gse=X.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=wte(n);if(!e)return null;const{type:l,label:c,key:u}=e,f=fn(e,pse);if(l in Mo){const p=mse[l];return X.createElement(p,ii({label:c,path:n},f))}return l in eu?X.createElement(nse,ii({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:u,setValue:t,setSettings:i,disable:r,emitOnEditStart:o,emitOnEditEnd:a},f)):(Lee(Mn.UNSUPPORTED_INPUT,l,n),null)});function vse({toggle:n,toggled:e,name:t}){return X.createElement(lte,{onClick:()=>n()},X.createElement(wb,{toggled:e}),X.createElement("div",null,t))}const yse=({name:n,path:e,tree:t})=>{const i=mm(),r=Pb(e,n),{collapsed:s,color:o}=i.getFolderSettings(r),[a,l]=P.useState(!s),c=P.useRef(null),u=oa("colors","folderWidgetColor"),f=oa("colors","folderTextColor");return P.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,u,f]),X.createElement(oy,{ref:c},X.createElement(vse,{name:n,toggled:a,toggle:()=>l(p=>!p)}),X.createElement(Az,{parent:r,tree:t,toggled:a}))},Az=X.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:s})=>{const{wrapperRef:o,contentRef:a}=ore(s),l=mm(),c=([f,p])=>{var m;return(mL(p)?(m=l.getInput(p.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(Pb(i,f)).order)||0},u=Object.entries(r).sort((f,p)=>c(f)-c(p));return X.createElement(FE,{ref:o,isRoot:n,fill:e,flat:t},X.createElement(VF,{ref:a,isRoot:n,toggled:s},u.map(([f,p])=>mL(p)?X.createElement(gse,{key:p.path,valueKey:p.valueKey,path:p.path}):X.createElement(yse,{key:f,name:f,path:i,tree:p}))))}),_se=ut("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${WF}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),Cz=40,fy=ut("i",{$flexCenter:"",width:Cz,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),xse=ut("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Sse=ut("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${fy}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),wse=ut("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Ese=ut("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:Cz}}}}),Tse=X.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=P.useState(""),s=P.useMemo(()=>PF(n,250),[n]),o=()=>{n(""),r("")},a=l=>{const c=l.currentTarget.value;e(!0),r(c)};return P.useEffect(()=>{s(i)},[i,s]),X.createElement(X.Fragment,null,X.createElement(wse,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),X.createElement(fy,{onClick:()=>o(),style:{visibility:i?"visible":"hidden"}},X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function Mse({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,f]=P.useState(!1),p=P.useRef(null);P.useEffect(()=>{var v,_;u?(v=p.current)===null||v===void 0||v.focus():(_=p.current)===null||_===void 0||_.blur()},[u]);const m=gm(({offset:[v,_],first:y,last:g})=>{e({x:v,y:_}),y&&t({x:v,y:_}),g&&i({x:v,y:_})},{filterTaps:!0,from:({offset:[v,_]})=>[(c==null?void 0:c.x)||v,(c==null?void 0:c.y)||_]});return P.useEffect(()=>{const v=_=>{_.key==="L"&&_.shiftKey&&_.metaKey&&f(y=>!y)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),X.createElement(X.Fragment,null,X.createElement(xse,{mode:a?"drag":void 0},X.createElement(fy,{active:!s,onClick:()=>r()},X.createElement(wb,{toggled:s,width:12,height:8})),X.createElement(Ese,ii({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?X.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},X.createElement("circle",{cx:"2",cy:"2",r:"2"}),X.createElement("circle",{cx:"14",cy:"2",r:"2"}),X.createElement("circle",{cx:"26",cy:"2",r:"2"}),X.createElement("circle",{cx:"2",cy:"12",r:"2"}),X.createElement("circle",{cx:"14",cy:"12",r:"2"}),X.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&X.createElement(fy,{active:u,onClick:()=>f(v=>!v)},X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},X.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),X.createElement(Sse,{toggled:u},X.createElement(Tse,{ref:p,setFilter:n,toggle:r})))}X.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,f;const p=are(n),[m,v]=P.useState(""),_=P.useMemo(()=>ese(p,m),[p,m]),[y,g]=XF(),x=r||p.length>0,S=typeof o=="object"&&o.title||void 0,E=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,b=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,A=typeof o=="object"&&o.position||void 0,R=typeof o=="object"&&o.onDrag||void 0,D=typeof o=="object"&&o.onDragStart||void 0,O=typeof o=="object"&&o.onDragEnd||void 0;return X.useEffect(()=>{g({x:A==null?void 0:A.x,y:A==null?void 0:A.y})},[A,g]),nte(),X.createElement(zF.Provider,{value:{hideCopyButton:a}},X.createElement(_se,{ref:y,className:e,fill:t,flat:i,oneLineLabels:s,hideTitleBar:!o,style:{display:x?"block":"none"}},o&&X.createElement(Mse,{onDrag:M=>{g(M),R==null||R(M)},onDragStart:M=>D==null?void 0:D(M),onDragEnd:M=>O==null?void 0:O(M),setFilter:v,toggle:M=>c(I=>M??!I),toggled:l,title:S,drag:E,filterEnabled:b,from:A}),x&&X.createElement(FF.Provider,{value:n},X.createElement(Az,{isRoot:!0,fill:t,flat:i,tree:_,toggled:l}))))});wa(Ks.SELECT,zte);wa(Ks.IMAGE,Bre);wa(Ks.NUMBER,Rte);wa(Ks.COLOR,yre);wa(Ks.STRING,Yte);wa(Ks.BOOLEAN,tne);wa(Ks.INTERVAL,Kre);wa(Ks.VECTOR3D,xre);wa(Ks.VECTOR2D,Cre);const bse=P.createContext(null);class Ase{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=pS(),this._delta=0,this._elapsed=0,this._timescale=1,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=Cse.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=pS()-this._startTime,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}update(e){return this._usePageVisibilityAPI===!0&&document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:pS())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function pS(){return(typeof performance>"u"?Date:performance).now()}function Cse(){document.hidden===!1&&this.reset()}/**
 * postprocessing v6.35.1 build Tue Mar 05 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van Rüschen
 * @license Zlib
 */var _m="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Rse=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 cocNearFar=texture2D(cocBuffer,vUv).rg*scale;float coc=cocNearFar.x;
#else
float coc=texture2D(cocBuffer,vUv).g*scale;
#endif
if(coc==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(cocNearFar.x,cocNearFar.y);
#else
vec2 step=texelSize*coc;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,N0=class extends Sn{constructor(n=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:n?"2":"1"},uniforms:{inputBuffer:new qe(null),cocBuffer:new qe(null),texelSize:new qe(new he),kernel64:new qe(null),kernel16:new qe(null),scale:new qe(1)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Rse,vertexShader:_m}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set cocBuffer(n){this.uniforms.cocBuffer.value=n}setCoCBuffer(n){this.uniforms.cocBuffer.value=n}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(n){return this.scale}setScale(n){this.scale=n}generateKernel(){const n=2.39996323,e=new Float64Array(128),t=new Float64Array(32);let i=0,r=0;for(let s=0,o=Math.sqrt(80);s<80;++s){const a=s*n,l=Math.sqrt(s)/o,c=l*Math.cos(a),u=l*Math.sin(a);s%5===0?(t[r++]=c,t[r++]=u):(e[i++]=c,e[i++]=u)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=t}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}};function yL(n,e,t){return n*(e-t)-e}function JE(n,e,t){return Math.min(Math.max((n+e)/(e-t),0),1)}var Pse=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#ifdef LOG_DEPTH
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#endif
return depth;}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,Ise=class extends Sn{constructor(n){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new qe(null),focusDistance:new qe(0),focusRange:new qe(0),cameraNear:new qe(.3),cameraFar:new qe(1e3)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Pse,vertexShader:_m}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(n)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Po){this.depthBuffer=n,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(n){this.uniforms.focusDistance.value=n}get worldFocusDistance(){return-yL(this.focusDistance,this.near,this.far)}set worldFocusDistance(n){this.focusDistance=JE(-n,this.near,this.far)}getFocusDistance(n){this.uniforms.focusDistance.value=n}setFocusDistance(n){this.uniforms.focusDistance.value=n}get focalLength(){return this.focusRange}set focalLength(n){this.focusRange=n}get focusRange(){return this.uniforms.focusRange.value}set focusRange(n){this.uniforms.focusRange.value=n}get worldFocusRange(){return-yL(this.focusRange,this.near,this.far)}set worldFocusRange(n){this.focusRange=JE(-n,this.near,this.far)}getFocalLength(n){return this.focusRange}setFocalLength(n){this.focusRange=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof cn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Rt={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Rz={RED:0,GREEN:1,BLUE:2,ALPHA:3},bo={NONE:0,DEPTH:1,CONVOLUTION:2},Yt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},xm={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Ib={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2,MULTIPLY_RGB:3},Lse=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Dse="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Ose=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Nse=class extends Sn{constructor(n=new qt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new qe(null),texelSize:new qe(new qt),scale:new qe(1),kernel:new qe(0)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Lse,vertexShader:Dse}),this.setTexelSize(n.x,n.y),this.kernelSize=xm.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return Ose[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},kse=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,Pz=class extends Sn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new qe(null),opacity:new qe(1)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kse,vertexShader:_m})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},Use=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,Fse=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,zse=class extends Sn{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new qe(null),cameraNear:new qe(.3),cameraFar:new qe(1e3)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Use,vertexShader:Fse}),this.depthBuffer=n,this.depthPacking=Mp,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Mp){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof cn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Bse=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Hse="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Vse=class extends Sn{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new qe(null),normalBuffer:new qe(null),texelSize:new qe(new he)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Bse,vertexShader:Hse})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Po){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Gse=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Wse="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",$se=class extends Sn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new qe(null),texelSize:new qe(new he)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Gse,vertexShader:Wse})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},jse=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Xse="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Yse=class extends Sn{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:pd.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new qe(null),depthBuffer:new qe(null),resolution:new qe(new he),texelSize:new qe(new he),cameraNear:new qe(.3),cameraFar:new qe(1e3),aspect:new qe(1),time:new qe(0)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Po){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=jse.replace(Yt.FRAGMENT_HEAD,n.get(Yt.FRAGMENT_HEAD)||"").replace(Yt.FRAGMENT_MAIN_UV,n.get(Yt.FRAGMENT_MAIN_UV)||"").replace(Yt.FRAGMENT_MAIN_IMAGE,n.get(Yt.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Xse.replace(Yt.VERTEX_HEAD,n.get(Yt.VERTEX_HEAD)||"").replace(Yt.VERTEX_MAIN_SUPPORT,n.get(Yt.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof cn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return Yt}},Kse=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,qse=class extends Sn{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:pd.replace(/\D+/g,"")},uniforms:{inputBuffer:new qe(null),threshold:new qe(0),smoothing:new qe(1),range:new qe(null)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Kse,vertexShader:_m}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},Zse=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 3
vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=vec4(mask*texel.rgb,texel.a);
#elif MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,Qse=class extends Sn{constructor(n=null){super({name:"MaskMaterial",uniforms:{maskTexture:new qe(n),inputBuffer:new qe(null),strength:new qe(1)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Zse,vertexShader:_m}),this.colorChannel=Rz.RED,this.maskFunction=Ib.DISCARD}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set maskTexture(n){this.uniforms.maskTexture.value=n,delete this.defines.MASK_PRECISION_HIGH,n.type!==Kn&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(n){this.maskTexture=n}set colorChannel(n){this.defines.COLOR_CHANNEL=n.toFixed(0),this.needsUpdate=!0}setColorChannel(n){this.colorChannel=n}set maskFunction(n){this.defines.MASK_FUNCTION=n.toFixed(0),this.needsUpdate=!0}setMaskFunction(n){this.maskFunction=n}get inverted(){return this.defines.INVERTED!==void 0}set inverted(n){this.inverted&&!n?delete this.defines.INVERTED:n&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(n){this.inverted=n}get strength(){return this.uniforms.strength.value}set strength(n){this.uniforms.strength.value=n}getStrength(){return this.strength}setStrength(n){this.strength=n}},Jse="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",eoe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",toe=class extends Sn{constructor(n=new he){super({name:"OutlineMaterial",uniforms:{inputBuffer:new qe(null),texelSize:new qe(new he)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Jse,vertexShader:eoe}),this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},noe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,ioe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",roe=class extends Sn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new qe(null),supportBuffer:new qe(null),texelSize:new qe(new he),radius:new qe(.85)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:noe,vertexShader:ioe})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},soe=new gd,Va=null;function ooe(){if(Va===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Va=new Mt,Va.setAttribute!==void 0?(Va.setAttribute("position",new Ut(n,3)),Va.setAttribute("uv",new Ut(e,2))):(Va.addAttribute("position",new Ut(n,3)),Va.addAttribute("uv",new Ut(e,2)))}return Va}var dr=class Iz{constructor(e="Pass",t=new Zf,i=soe){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Pn(ooe(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Zf),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Po){}render(e,t,i,r,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof gn||t instanceof Bn||t instanceof rn||t instanceof Iz)&&this[e].dispose()}}},aoe=class extends dr{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new Pz,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new gn(1,1,{minFilter:Zt,magFilter:Zt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Kn?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputColorSpace===St&&(this.renderTarget.texture.colorSpace=St))}},loe=class extends dr{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},_L=new Ie,Lb=class extends dr{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,c=o>=0;l?(n.getClearColor(_L),n.setClearColor(s,c?o:a)):c&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(_L,a):c&&n.setClearAlpha(a)}},y_=class extends dr{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Lb,this.overrideMaterialManager=t===null?null:new SL(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new SL(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,u=n.shadowMap.autoUpdate,f=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(f),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=c,n.shadowMap.autoUpdate=u}},coe=class extends dr{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=xn.AUTO_SIZE,height:s=xn.AUTO_SIZE,resolutionX:o=r,resolutionY:a=s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new y_(n,e,new Hy({depthPacking:Mp}));const l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;const c=l.clearPass;c.overrideClearColor=new Ie(16777215),c.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new gn(1,1,{minFilter:en,magFilter:en}),this.renderTarget.texture.name="DepthPass.Target");const u=this.resolution=new xn(this,o,a,i);u.addEventListener("change",f=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},uoe=class extends dr{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=xn.AUTO_SIZE,height:i=xn.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("DepthDownsamplingPass");const o=new Vse;o.normalBuffer=n,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new gn(1,1,{minFilter:en,magFilter:en,depthBuffer:!1,type:Hr}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new xn(this,r,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Po){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function xL(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,r))}}function foe(n,e,t){let i=e.getFragmentShader(),r=e.getVertexShader();const s=i!==void 0&&/mainImage/.test(i),o=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&t.attributes&bo.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let c=l.get(Yt.FRAGMENT_HEAD)||"",u=l.get(Yt.FRAGMENT_MAIN_UV)||"",f=l.get(Yt.FRAGMENT_MAIN_IMAGE)||"",p=l.get(Yt.VERTEX_HEAD)||"",m=l.get(Yt.VERTEX_MAIN_SUPPORT)||"";const v=new Set,_=new Set;if(o&&(u+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const x=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);m+=`	${n}MainSupport(`,m+=x?`vUv);
`:`);
`;for(const S of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const E of S[1].split(/\s*,\s*/))t.varyings.add(E),v.add(E),_.add(E);for(const S of r.matchAll(a))_.add(S[1])}for(const x of i.matchAll(a))_.add(x[1]);for(const x of e.defines.keys())_.add(x.replace(/\([\w\s,]*\)/g,""));for(const x of e.uniforms.keys())_.add(x);_.delete("while"),_.delete("for"),_.delete("if"),e.uniforms.forEach((x,S)=>t.uniforms.set(n+S.charAt(0).toUpperCase()+S.slice(1),x)),e.defines.forEach((x,S)=>t.defines.set(n+S.charAt(0).toUpperCase()+S.slice(1),x));const y=new Map([["fragment",i],["vertex",r]]);xL(n,_,t.defines),xL(n,_,y),i=y.get("fragment"),r=y.get("vertex");const g=e.blendMode;if(t.blendModes.set(g.blendFunction,g),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(f+=e.inputColorSpace===St?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==rr?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const x=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;f+=`${n}MainImage(color0, UV, `,t.attributes&bo.DEPTH&&x.test(i)&&(f+="depth, ",t.readDepth=!0),f+=`color1);
	`;const S=n+"BlendOpacity";t.uniforms.set(S,g.opacity),f+=`color0 = blend${g.blendFunction}(color0, color1, ${S});

	`,c+=`uniform float ${S};

`}if(c+=i+`
`,r!==null&&(p+=r+`
`),l.set(Yt.FRAGMENT_HEAD,c),l.set(Yt.FRAGMENT_MAIN_UV,u),l.set(Yt.FRAGMENT_MAIN_IMAGE,f),l.set(Yt.VERTEX_HEAD,p),l.set(Yt.VERTEX_MAIN_SUPPORT,m),e.extensions!==null)for(const x of e.extensions)t.extensions.add(x)}}var doe=class extends dr{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Yse(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new yoe;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===Rt.DST)n.attributes|=o.getAttributes()&bo.DEPTH;else{if(n.attributes&o.getAttributes()&bo.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);foe("e"+e++,o,n)}let t=n.shaderParts.get(Yt.FRAGMENT_HEAD),i=n.shaderParts.get(Yt.FRAGMENT_MAIN_IMAGE),r=n.shaderParts.get(Yt.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;n.attributes&bo.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===St&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(Yt.FRAGMENT_HEAD,t),n.shaderParts.set(Yt.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(Yt.FRAGMENT_MAIN_UV,r);for(const[o,a]of n.shaderParts)a!==null&&n.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Po){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const s of this.effects)s.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==Kn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},Db=class extends dr{constructor({kernelSize:n=xm.MEDIUM,resolutionScale:e=.5,width:t=xn.AUTO_SIZE,height:i=xn.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("KawaseBlurPass"),this.renderTargetA=new gn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new xn(this,r,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new Nse,this._blurMaterial.kernelSize=n,this.copyMaterial=new Pz}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let f=e;this.fullscreenMaterial=c;for(let p=0,m=u.length;p<m;++p){const v=p&1?l:a;c.kernel=u[p],c.inputBuffer=f.texture,n.setRenderTarget(v),n.render(s,o),f=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Kn?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputColorSpace===St&&(this.renderTargetA.texture.colorSpace=St,this.renderTargetB.texture.colorSpace=St))}static get AUTO_SIZE(){return xn.AUTO_SIZE}},hoe=class extends dr{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:r=xn.AUTO_SIZE,height:s=xn.AUTO_SIZE,resolutionX:o=r,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new qse(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new gn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new xn(this,o,a,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==Kn&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},poe=class extends dr{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Lb(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,f=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,u,4294967295),o.stencil.setClear(f),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(n,null):(c.render(n,e),c.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},moe=class extends dr{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new gn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new $se,this.upsamplingMaterial=new roe,this.resolution=new he}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,r){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let f=e;this.fullscreenMaterial=a;for(let p=0,m=c.length;p<m;++p){const v=c[p];a.setSize(f.width,f.height),a.inputBuffer=f.texture,n.setRenderTarget(v),n.render(s,o),f=v}this.fullscreenMaterial=l;for(let p=u.length-1;p>=0;--p){const m=u[p];l.setSize(f.width,f.height),l.inputBuffer=f.texture,l.supportBuffer=c[p].texture,n.setRenderTarget(m),n.render(s,o),f=m}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,r=t.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[s].setSize(i,r),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(i,r)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=t;if(t!==Kn)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n.outputColorSpace===St)for(const r of i)r.texture.colorSpace=St}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},goe=class extends dr{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=xn.AUTO_SIZE,height:s=xn.AUTO_SIZE,resolutionX:o=r,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new y_(n,e,new IM);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new Ie(7829503),c.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new gn(1,1,{minFilter:en,magFilter:en}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new xn(this,o,a,i);u.addEventListener("change",f=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},mc=class extends dr{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,r){const s=this.fullscreenMaterial.uniforms;e!==null&&s!==void 0&&s[this.input]!==void 0&&(s[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==Kn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},voe=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,i,s,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new aoe,this.depthTexture=null,this.passes=[],this.timer=new Ase,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new he),i=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===Kn&&e.outputColorSpace===St&&(this.inputBuffer.texture.colorSpace=St,this.outputBuffer.texture.colorSpace=St,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,i,r)}}replaceRenderer(e,t=!0){const i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){const e=this.depthTexture=new zy;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=wl,e.type=sa):e.type=vo,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r){const s=this.renderer,o=s===null?new he:s.getDrawingBufferSize(new he),a={minFilter:Zt,magFilter:Zt,stencilBuffer:t,depthBuffer:e,type:i},l=new gn(o.width,o.height,a);return r>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=r),i===Kn&&s.outputColorSpace===St&&(l.texture.colorSpace=St),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const i=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new he),o=r.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(s.width,s.height),e.initialize(r,o,a),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of i)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){const o=(l,c)=>l||c.needsDepthTexture;t.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,i=this.copyPass;let r=this.inputBuffer,s=this.outputBuffer,o=!1,a,l,c;e===void 0&&(this.timer.update(),e=this.timer.getDelta());for(const u of this.passes)u.enabled&&(u.render(t,r,s,e,o),u.needsSwap&&(o&&(i.renderToScreen=u.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),i.render(t,r,s,e,o),l.setFunc(a.EQUAL,1,4294967295)),c=r,r=s,s=c),u instanceof poe?o=!0:u instanceof loe&&(o=!1))}setSize(e,t,i){const r=this.renderer,s=r.getSize(new he);(e===void 0||t===void 0)&&(e=s.width,t=s.height),(s.width!==e||s.height!==t)&&r.setSize(e,t,i);const o=r.getDrawingBufferSize(new he);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},yoe=class{constructor(){this.shaderParts=new Map([[Yt.FRAGMENT_HEAD,null],[Yt.FRAGMENT_MAIN_UV,null],[Yt.FRAGMENT_MAIN_IMAGE,null],[Yt.VERTEX_HEAD,null],[Yt.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=bo.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=qn}},mS=!1,SL=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case nr:t=this.materialsFlatShadedDoubleSide;break;case ai:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case nr:t=this.materialsDoubleSide;break;case ai:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof Sn))return n.clone();const e=n.uniforms,t=new Map;for(const r in e){const s=e[r].value;s.isRenderTargetTexture&&(e[r].value=null,t.set(r,s))}const i=n.clone();for(const r of t)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=Xs;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=ai,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=nr,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=ai,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=nr,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,mS){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return mS}static set workaroundEnabled(n){mS=n}},Ga=-1,xn=class extends ts{constructor(n,e=Ga,t=Ga,i=1){super(),this.resizable=n,this.baseSize=new he(1,1),this.preferredSize=new he(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new he,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Ga?t.width=e.width:e.height!==Ga?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==Ga?t.height=e.height:e.width!==Ga?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Ga),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ga}},_oe=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},xoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Soe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",woe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Eoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Toe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Moe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",boe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Aoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Coe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Roe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Poe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Ioe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Loe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Doe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Ooe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Noe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",koe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",Uoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Foe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",zoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Boe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Hoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Voe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Goe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Woe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",$oe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",joe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Xoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",Yoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",Koe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",qoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Zoe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Qoe=new Map([[Rt.ADD,xoe],[Rt.ALPHA,Soe],[Rt.AVERAGE,woe],[Rt.COLOR,Eoe],[Rt.COLOR_BURN,Toe],[Rt.COLOR_DODGE,Moe],[Rt.DARKEN,boe],[Rt.DIFFERENCE,Aoe],[Rt.DIVIDE,Coe],[Rt.DST,null],[Rt.EXCLUSION,Roe],[Rt.HARD_LIGHT,Poe],[Rt.HARD_MIX,Ioe],[Rt.HUE,Loe],[Rt.INVERT,Doe],[Rt.INVERT_RGB,Ooe],[Rt.LIGHTEN,Noe],[Rt.LINEAR_BURN,koe],[Rt.LINEAR_DODGE,Uoe],[Rt.LINEAR_LIGHT,Foe],[Rt.LUMINOSITY,zoe],[Rt.MULTIPLY,Boe],[Rt.NEGATION,Hoe],[Rt.NORMAL,Voe],[Rt.OVERLAY,Goe],[Rt.PIN_LIGHT,Woe],[Rt.REFLECT,$oe],[Rt.SATURATION,joe],[Rt.SCREEN,Xoe],[Rt.SOFT_LIGHT,Yoe],[Rt.SRC,Koe],[Rt.SUBTRACT,qoe],[Rt.VIVID_LIGHT,Zoe]]),Joe=class extends ts{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new qe(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return Qoe.get(this.blendFunction)}},ld=class extends ts{constructor(n,e,{attributes:t=bo.NONE,blendFunction:i=Rt.NORMAL,defines:r=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=r,this.uniforms=s,this.extensions=o,this.blendMode=new Joe(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=qn,this._outputColorSpace=rr}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Po){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof gn||e instanceof Bn||e instanceof rn||e instanceof dr)&&this[n].dispose()}}},eae=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,tae=class extends ld{constructor({blendFunction:n=Rt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:r=1,radius:s=.85,levels:o=8,kernelSize:a=xm.LARGE,resolutionScale:l=.5,width:c=xn.AUTO_SIZE,height:u=xn.AUTO_SIZE,resolutionX:f=c,resolutionY:p=u}={}){super("BloomEffect",eae,{blendFunction:n,uniforms:new Map([["map",new qe(null)],["intensity",new qe(r)]])}),this.renderTarget=new gn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Db({kernelSize:a}),this.luminancePass=new hoe({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new moe,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new xn(this,f,p,l);m.addEventListener("change",v=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,r.renderTarget):this.blurPass.render(n,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n.outputColorSpace===St&&(this.renderTarget.texture.colorSpace=St))}},nae=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform lowp sampler2D farCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);
#if MASK_FUNCTION == 1
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,colorFar.a);cocNearFar.x=min(cocNearFar.x*scale,1.0);
#else
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,texture2D(farCoCBuffer,uv).g);cocNearFar=min(cocNearFar*scale,1.0);
#endif
vec4 result=inputColor*(1.0-cocNearFar.y)+colorFar;result=mix(result,colorNear,cocNearFar.x);outputColor=result;}`,iae=class extends ld{constructor(n,{blendFunction:e,worldFocusDistance:t,worldFocusRange:i,focusDistance:r=0,focalLength:s=.1,focusRange:o=s,bokehScale:a=1,resolutionScale:l=1,width:c=xn.AUTO_SIZE,height:u=xn.AUTO_SIZE,resolutionX:f=c,resolutionY:p=u}={}){super("DepthOfFieldEffect",nae,{blendFunction:e,attributes:bo.DEPTH,uniforms:new Map([["nearColorBuffer",new qe(null)],["farColorBuffer",new qe(null)],["nearCoCBuffer",new qe(null)],["farCoCBuffer",new qe(null)],["scale",new qe(1)]])}),this.camera=n,this.renderTarget=new gn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.uniforms.get("farCoCBuffer").value=this.renderTargetCoC.texture,this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new mc(new Ise(n));const m=this.cocMaterial;m.focusDistance=r,m.focusRange=o,t!==void 0&&(m.worldFocusDistance=t),i!==void 0&&(m.worldFocusRange=i),this.blurPass=new Db({resolutionScale:l,resolutionX:f,resolutionY:p,kernelSize:xm.MEDIUM}),this.maskPass=new mc(new Qse(this.renderTargetCoC.texture));const v=this.maskPass.fullscreenMaterial;v.colorChannel=Rz.GREEN,this.maskFunction=Ib.MULTIPLY_RGB,this.bokehNearBasePass=new mc(new N0(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new mc(new N0(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new mc(new N0(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new mc(new N0(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const _=this.resolution=new xn(this,f,p,l);_.addEventListener("change",y=>this.setSize(_.baseWidth,_.baseHeight)),this.bokehScale=a}set mainCamera(n){this.camera=n,this.cocMaterial.copyCameraSettings(n)}get cocTexture(){return this.renderTargetCoC.texture}get maskFunction(){return this.maskPass.fullscreenMaterial.maskFunction}set maskFunction(n){this.maskFunction!==n&&(this.defines.set("MASK_FUNCTION",n.toFixed(0)),this.maskPass.fullscreenMaterial.maskFunction=n,this.setChanged())}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.cocMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(n){this.bokehNearBasePass.fullscreenMaterial.scale=n,this.bokehNearFillPass.fullscreenMaterial.scale=n,this.bokehFarBasePass.fullscreenMaterial.scale=n,this.bokehFarFillPass.fullscreenMaterial.scale=n,this.maskPass.fullscreenMaterial.strength=n,this.uniforms.get("scale").value=n}getBokehScale(){return this.bokehScale}setBokehScale(n){this.bokehScale=n}getTarget(){return this.target}setTarget(n){this.target=n}calculateFocusDistance(n){const e=this.camera,t=e.position.distanceTo(n);return JE(-t,e.near,e.far)}setDepthTexture(n,e=Po){this.cocMaterial.depthBuffer=n,this.cocMaterial.depthPacking=e}update(n,e,t){const i=this.renderTarget,r=this.renderTargetCoC,s=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){const a=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=a}this.cocPass.render(n,null,r),this.blurPass.render(n,r,s),this.maskPass.render(n,e,o),this.bokehFarBasePass.render(n,o,i),this.bokehFarFillPass.render(n,i,this.renderTargetFar),this.bokehNearBasePass.render(n,e,i),this.bokehNearFillPass.render(n,i,this.renderTargetNear)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.cocPass.setSize(n,e),this.blurPass.setSize(n,e),this.maskPass.setSize(n,e),this.renderTargetFar.setSize(n,e),this.renderTargetCoC.setSize(n,e),this.renderTargetMasked.setSize(n,e),this.renderTarget.setSize(i,r),this.renderTargetNear.setSize(i,r),this.renderTargetCoCBlurred.setSize(i,r),this.bokehNearBasePass.fullscreenMaterial.setSize(n,e),this.bokehNearFillPass.fullscreenMaterial.setSize(n,e),this.bokehFarBasePass.fullscreenMaterial.setSize(n,e),this.bokehFarFillPass.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){this.cocPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.bokehNearBasePass.initialize(n,e,t),this.bokehNearFillPass.initialize(n,e,t),this.bokehFarBasePass.initialize(n,e,t),this.bokehFarFillPass.initialize(n,e,t),this.blurPass.initialize(n,e,Kn),n.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTarget.texture.type=t,this.renderTargetNear.texture.type=t,this.renderTargetFar.texture.type=t,this.renderTargetMasked.texture.type=t,n.outputColorSpace===St&&(this.renderTarget.texture.colorSpace=St,this.renderTargetNear.texture.colorSpace=St,this.renderTargetFar.texture.colorSpace=St,this.renderTargetMasked.texture.colorSpace=St))}},rae=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,sae=class extends ld{constructor({blendFunction:n=Rt.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",rae,{blendFunction:n}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(n){this.premultiply!==n&&(n?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(n){this.premultiply=n}},oae=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,aae="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",lae=class extends ld{constructor(n,e,{blendFunction:t=Rt.SCREEN,patternTexture:i=null,patternScale:r=1,edgeStrength:s=1,pulseSpeed:o=0,visibleEdgeColor:a=16777215,hiddenEdgeColor:l=2230538,kernelSize:c=xm.VERY_SMALL,blur:u=!1,xRay:f=!0,multisampling:p=0,resolutionScale:m=.5,width:v=xn.AUTO_SIZE,height:_=xn.AUTO_SIZE,resolutionX:y=v,resolutionY:g=_}={}){super("OutlineEffect",oae,{uniforms:new Map([["maskTexture",new qe(null)],["edgeTexture",new qe(null)],["edgeStrength",new qe(s)],["visibleEdgeColor",new qe(new Ie(a))],["hiddenEdgeColor",new qe(new Ie(l))],["pulse",new qe(1)],["patternScale",new qe(r)],["patternTexture",new qe(null)]])}),this.blendMode.addEventListener("change",b=>{this.blendMode.blendFunction===Rt.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=t,this.patternTexture=i,this.xRay=f,this.scene=n,this.camera=e,this.renderTargetMask=new gn(1,1),this.renderTargetMask.samples=p,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new gn(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new Lb,this.clearPass.overrideClearColor=new Ie(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new coe(n,e),this.maskPass=new y_(n,e,new zse(this.depthPass.texture,e));const x=this.maskPass.clearPass;x.overrideClearColor=new Ie(16777215),x.overrideClearAlpha=1,this.blurPass=new Db({resolutionScale:m,resolutionX:y,resolutionY:g,kernelSize:c}),this.blurPass.enabled=u;const S=this.blurPass.resolution;S.addEventListener("change",b=>this.setSize(S.baseWidth,S.baseHeight)),this.outlinePass=new mc(new toe);const E=this.outlinePass.fullscreenMaterial;E.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new _oe,this.selection.layer=10,this.pulseSpeed=o}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){n!==null?(n.wrapS=n.wrapT=da,this.defines.set("USE_PATTERN","1"),this.setVertexShader(aae)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const i=this.scene,r=this.camera,s=this.selection,a=this.uniforms.get("pulse"),l=i.background,c=r.layers.mask;(this.forceUpdate||s.size>0)&&(i.background=null,a.value=1,this.pulseSpeed>0&&(a.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.time+=t,s.setVisible(!1),this.depthPass.render(n),s.setVisible(!0),r.layers.set(s.layer),this.maskPass.render(n,this.renderTargetMask),r.layers.mask=c,i.background=l,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=s.size>0}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.depthPass.setSize(i,r),this.renderTargetOutline.setSize(i,r),this.outlinePass.fullscreenMaterial.setSize(i,r)}initialize(n,e,t){this.blurPass.initialize(n,e,Kn),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}};const Ob=P.createContext(null),wL=n=>(n.getAttributes()&bo.CONVOLUTION)===bo.CONVOLUTION,cae=X.memo(P.forwardRef(({children:n,camera:e,scene:t,resolutionScale:i,enabled:r=!0,renderPriority:s=1,autoClear:o=!0,depthBuffer:a,enableNormalPass:l,stencilBuffer:c,multisampling:u=8,frameBufferType:f=$c},p)=>{const{gl:m,scene:v,camera:_,size:y}=zs(),g=t||v,x=e||_,[S,E,b]=P.useMemo(()=>{const O=VK(),M=new voe(m,{depthBuffer:a,stencilBuffer:c,multisampling:u>0&&O?u:0,frameBufferType:f});M.addPass(new y_(g,x));let I=null,U=null;return l&&(U=new goe(g,x),U.enabled=!1,M.addPass(U),i!==void 0&&O&&(I=new uoe({normalBuffer:U.texture,resolutionScale:i}),I.enabled=!1,M.addPass(I))),[M,U,I]},[x,m,a,c,u,f,g,l,i]);P.useEffect(()=>S==null?void 0:S.setSize(y.width,y.height),[S,y]),Vv((O,M)=>{if(r){const I=m.autoClear;m.autoClear=o,c&&!o&&m.clearStencil(),S.render(M),m.autoClear=I}},r?s:0);const A=P.useRef(null),R=MY(A);P.useLayoutEffect(()=>{const O=[];if(A.current&&R.current&&S){const M=R.current.objects;for(let I=0;I<M.length;I++){const U=M[I];if(U instanceof ld){const j=[U];if(!wL(U)){let K=null;for(;(K=M[I+1])instanceof ld&&!wL(K);)j.push(K),I++}const z=new doe(x,...j);O.push(z)}else U instanceof dr&&O.push(U)}for(const I of O)S==null||S.addPass(I);E&&(E.enabled=!0),b&&(b.enabled=!0)}return()=>{for(const M of O)S==null||S.removePass(M);E&&(E.enabled=!1),b&&(b.enabled=!1)}},[S,n,x,E,b,R]),P.useEffect(()=>{const O=m.toneMapping;return m.toneMapping=$s,()=>{m.toneMapping=O}},[]);const D=P.useMemo(()=>({composer:S,normalPass:E,downSamplingPass:b,resolutionScale:i,camera:x,scene:g}),[S,E,b,i,x,g]);return P.useImperativeHandle(p,()=>S,[S]),ae.jsx(Ob.Provider,{value:D,children:ae.jsx("group",{ref:A,children:n})})})),EL=n=>typeof n=="object"&&n!=null&&"current"in n?n.current:n;let uae=0;const TL=new WeakMap,Lz=(n,e)=>X.forwardRef(function({blendFunction:i=e==null?void 0:e.blendFunction,opacity:r=e==null?void 0:e.opacity,...s},o){let a=TL.get(n);if(!a){const u=`@react-three/postprocessing/${n.name}-${uae++}`;_k({[u]:n}),TL.set(n,a=u)}const l=zs(u=>u.camera),c=X.useMemo(()=>{var u,f;return[...(u=e==null?void 0:e.args)!=null?u:[],...(f=s.args)!=null?f:[{...e,...s}]]},[JSON.stringify(s)]);return ae.jsx(a,{camera:l,"blendMode-blendFunction":i,"blendMode-opacity-value":r,...s,ref:o,args:c})}),fae=P.forwardRef(function({blendFunction:e,worldFocusDistance:t,worldFocusRange:i,focusDistance:r,focusRange:s,focalLength:o,bokehScale:a,resolutionScale:l,resolutionX:c,resolutionY:u,width:f,height:p,target:m,depthTexture:v,..._},y){const{camera:g}=P.useContext(Ob),x=m!=null,S=P.useMemo(()=>{const E=new iae(g,{blendFunction:e,worldFocusDistance:t,worldFocusRange:i,focusDistance:r,focusRange:s,focalLength:o,bokehScale:a,resolutionScale:l,resolutionX:c,resolutionY:u,width:f,height:p});x&&(E.target=new H),v&&E.setDepthTexture(v.texture,v.packing);const b=E.maskPass;return b.maskFunction=Ib.MULTIPLY_RGB_SET_ALPHA,E},[g,e,t,i,r,s,o,a,l,c,u,f,p,x,v]);return P.useEffect(()=>()=>{S.dispose()},[S]),ae.jsx("primitive",{..._,ref:y,object:S,target:m})}),dae=Lz(tae,{blendFunction:Rt.ADD}),hae=Lz(sae,{blendFunction:Rt.COLOR_DODGE}),pae=P.forwardRef(function({selection:e=[],selectionLayer:t=10,blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:l,width:c,height:u,kernelSize:f,blur:p,xRay:m,...v},_){const y=zs(b=>b.invalidate),{scene:g,camera:x}=P.useContext(Ob),S=P.useMemo(()=>new lae(g,x,{blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:l,width:c,height:u,kernelSize:f,blur:p,xRay:m,...v}),[i,p,x,s,u,l,f,r,o,g,a,c,m]),E=P.useContext(bse);return P.useEffect(()=>{if(!E&&e)return S.selection.set(Array.isArray(e)?e.map(EL):[EL(e)]),y(),()=>{S.selection.clear(),y()}},[S,e,E,y]),P.useEffect(()=>{S.selectionLayer=t,y()},[S,y,t]),P.useRef(),P.useEffect(()=>{var b;if(E&&E.enabled&&(b=E.selected)!=null&&b.length)return S.selection.set(E.selected),y(),()=>{S.selection.clear(),y()}},[E,S.selection,y]),P.useEffect(()=>()=>{S.dispose()},[S]),ae.jsx("primitive",{ref:_,object:S})}),mae=({isInteractive:n})=>{const[e,t]=P.useState([]),[i,r]=P.useState(null),[s,o]=P.useState(!1),{color:a,intensity:l,position:c}={color:"#ffffff",intensity:1,position:[0,10,5]},u=P.useMemo(()=>[{name:"boy1",url:"/model/boy.gltf",position:[-1,-6,-2],scale:[10,10,10]},{name:"boy2",url:"/model/boy.gltf",position:[1,6,2],scale:[10,10,10]},{name:"boy3",url:"/model/boy.gltf",position:[12,6,-10],scale:[10,10,10]},{name:"data1",url:"/model/pc.gltf",position:[5,10,0],scale:[.5,.5,.5]},{name:"data2",url:"/model/pc.gltf",position:[8,-6,-6],scale:[.5,.5,.5]},{name:"data3",url:"/model/pc.gltf",position:[-15,2,-6],scale:[.5,.5,.5]},{name:"earth1",url:"/model/earth.gltf",position:[-10,-6,-6],scale:[.5,.5,.5]},{name:"earth2",url:"/model/earth.gltf",position:[10,-1,2],scale:[.5,.5,.5]},{name:"earth3",url:"/model/earth.gltf",position:[10,12,-15],scale:[.5,.5,.5]},{name:"file1",url:"/model/file.gltf",position:[0,-8,0],scale:[4,4,4]},{name:"file2",url:"/model/file.gltf",position:[-8,8,-10],scale:[4,4,4]},{name:"file3",url:"/model/file.gltf",position:[-8,19,-10],scale:[4,4,4]}],[]),f=m=>{n&&t(v=>v.includes(m)?v.filter(y=>y!==m):v.length<2?[...v,m]:v)},p=m=>{n&&r(m)};return P.useEffect(()=>{n||(t([]),r(null))},[n]),P.useEffect(()=>{n&&(o(!0),setTimeout(()=>o(!1),0))},[n]),ae.jsxs(XY,{onPointerMissed:()=>t([]),camera:{position:[0,-1,25],fov:75},className:qZ.canvas3D,children:[ae.jsx("directionalLight",{color:a,intensity:l,position:c}),ae.jsx("ambientLight",{intensity:2}),n?ae.jsx(XK,{}):null,u.map(m=>ae.jsx(YZ,{url:m.url,name:m.name,position:m.position,scale:m.scale,onSelect:f,onHover:p,isSelected:e.includes(m.name),isHovered:i===m.name,resetPosition:s},m.name)),ae.jsxs(cae,{children:[ae.jsx(fae,{focusDistance:0,focalLength:.02,bokehScale:2,height:480}),ae.jsx(dae,{luminanceThreshold:.6,luminanceSmoothing:.9,height:300}),ae.jsx(hae,{opacity:.2}),ae.jsx(pae,{edgeStrength:10,visibleEdgeColor:16777215,hiddenEdgeColor:16777215})]})]})};function gae(){const[n,e]=P.useState(!1),[t,i]=P.useState(!1),[r,s]=P.useState(""),[o,a]=P.useState("");P.useEffect(()=>{n?(s("headerFadeOut"),a("headerFadeIn")):(s("headerFadeIn"),a("headerFadeOut"))},[n]);const l=()=>{e(!n),t||i(!0)};return ae.jsxs("div",{className:"appContainer",children:[ae.jsx(oO,{}),ae.jsx("div",{className:`${o} headerLogo`,children:ae.jsx(c6,{})}),ae.jsx("div",{className:`${r} header`,children:ae.jsx(ZG,{})}),ae.jsx(s6,{onToggle:l}),t&&ae.jsx(mae,{isInteractive:n}),ae.jsx(iO,{is3DEnabled:n})]})}function ML(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function Nb(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:ML(e[t])&&ML(n[t])&&Object.keys(e[t]).length>0&&Nb(n[t],e[t])})}const Dz={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Id(){const n=typeof document<"u"?document:{};return Nb(n,Dz),n}const vae={document:Dz,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function ns(){const n=typeof window<"u"?window:{};return Nb(n,vae),n}function yae(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function _ae(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function eT(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function dy(){return Date.now()}function xae(n){const e=ns();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function Sae(n,e){e===void 0&&(e="x");const t=ns();let i,r,s;const o=xae(n);return t.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function k0(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function wae(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function zr(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!wae(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,o=r.length;s<o;s+=1){const a=r[s],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(k0(n[a])&&k0(i[a])?i[a].__swiper__?n[a]=i[a]:zr(n[a],i[a]):!k0(n[a])&&k0(i[a])?(n[a]={},i[a].__swiper__?n[a]=i[a]:zr(n[a],i[a])):n[a]=i[a])}}}return n}function U0(n,e,t){n.style.setProperty(e,t)}function Oz(n){let{swiper:e,targetPosition:t,side:i}=n;const r=ns(),s=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",u=(p,m)=>c==="next"&&p>=m||c==="prev"&&p<=m,f=()=>{a=new Date().getTime(),o===null&&(o=a);const p=Math.max(Math.min((a-o)/l,1),0),m=.5-Math.cos(p*Math.PI)/2;let v=s+m*(t-s);if(u(v,t)&&(v=t),e.wrapperEl.scrollTo({[i]:v}),u(v,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:v})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(f)};f()}function ia(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function hy(n){try{console.warn(n);return}catch{}}function tT(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:yae(e)),t}function Eae(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Tae(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function rl(n,e){return ns().getComputedStyle(n,null).getPropertyValue(e)}function bL(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Mae(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function AL(n,e,t){const i=ns();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}let gS;function bae(){const n=ns(),e=Id();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function Nz(){return gS||(gS=bae()),gS}let vS;function Aae(n){let{userAgent:e}=n===void 0?{}:n;const t=Nz(),i=ns(),r=i.navigator.platform,s=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let u=s.match(/(iPad).*OS\s([\d_]+)/);const f=s.match(/(iPod)(.*OS\s([\d_]+))?/),p=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m=r==="Win32";let v=r==="MacIntel";const _=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&v&&t.touch&&_.indexOf(`${a}x${l}`)>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),v=!1),c&&!m&&(o.os="android",o.android=!0),(u||p||f)&&(o.os="ios",o.ios=!0),o}function kz(n){return n===void 0&&(n={}),vS||(vS=Aae(n)),vS}let yS;function Cae(){const n=ns(),e=kz();let t=!1;function i(){const a=n.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(i()){const a=String(n.navigator.userAgent);if(a.includes("Version/")){const[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&c<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),s=i(),o=s||r&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:o,isWebView:r}}function Rae(){return yS||(yS=Cae()),yS}function Pae(n){let{swiper:e,on:t,emit:i}=n;const r=ns();let s=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(f=>{o=r.requestAnimationFrame(()=>{const{width:p,height:m}=e;let v=p,_=m;f.forEach(y=>{let{contentBoxSize:g,contentRect:x,target:S}=y;S&&S!==e.el||(v=x?x.width:(g[0]||g).inlineSize,_=x?x.height:(g[0]||g).blockSize)}),(v!==p||_!==m)&&a()})}),s.observe(e.el))},c=()=>{o&&r.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",a),r.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",u)})}function Iae(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],o=ns(),a=function(u,f){f===void 0&&(f={});const p=o.MutationObserver||o.WebkitMutationObserver,m=new p(v=>{if(e.__preventObserver__)return;if(v.length===1){r("observerUpdate",v[0]);return}const _=function(){r("observerUpdate",v[0])};o.requestAnimationFrame?o.requestAnimationFrame(_):o.setTimeout(_,0)});m.observe(u,{attributes:typeof f.attributes>"u"?!0:f.attributes,childList:typeof f.childList>"u"?!0:f.childList,characterData:typeof f.characterData>"u"?!0:f.characterData}),s.push(m)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=Mae(e.hostEl);for(let f=0;f<u.length;f+=1)a(u[f])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var Lae={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(i,o)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function Dae(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(rl(i,"padding-left")||0,10)-parseInt(rl(i,"padding-right")||0,10),t=t-parseInt(rl(i,"padding-top")||0,10)-parseInt(rl(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function Oae(){const n=this;function e(M,I){return parseFloat(M.getPropertyValue(n.getDirectionLabel(I))||0)}const t=n.params,{wrapperEl:i,slidesEl:r,size:s,rtlTranslate:o,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,u=ia(r,`.${n.params.slideClass}, swiper-slide`),f=l?n.virtual.slides.length:u.length;let p=[];const m=[],v=[];let _=t.slidesOffsetBefore;typeof _=="function"&&(_=t.slidesOffsetBefore.call(n));let y=t.slidesOffsetAfter;typeof y=="function"&&(y=t.slidesOffsetAfter.call(n));const g=n.snapGrid.length,x=n.slidesGrid.length;let S=t.spaceBetween,E=-_,b=0,A=0;if(typeof s>"u")return;typeof S=="string"&&S.indexOf("%")>=0?S=parseFloat(S.replace("%",""))/100*s:typeof S=="string"&&(S=parseFloat(S)),n.virtualSize=-S,u.forEach(M=>{o?M.style.marginLeft="":M.style.marginRight="",M.style.marginBottom="",M.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(U0(i,"--swiper-centered-offset-before",""),U0(i,"--swiper-centered-offset-after",""));const R=t.grid&&t.grid.rows>1&&n.grid;R?n.grid.initSlides(u):n.grid&&n.grid.unsetSlides();let D;const O=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(M=>typeof t.breakpoints[M].slidesPerView<"u").length>0;for(let M=0;M<f;M+=1){D=0;let I;if(u[M]&&(I=u[M]),R&&n.grid.updateSlide(M,I,u),!(u[M]&&rl(I,"display")==="none")){if(t.slidesPerView==="auto"){O&&(u[M].style[n.getDirectionLabel("width")]="");const U=getComputedStyle(I),j=I.style.transform,z=I.style.webkitTransform;if(j&&(I.style.transform="none"),z&&(I.style.webkitTransform="none"),t.roundLengths)D=n.isHorizontal()?AL(I,"width",!0):AL(I,"height",!0);else{const K=e(U,"width"),q=e(U,"padding-left"),ee=e(U,"padding-right"),N=e(U,"margin-left"),V=e(U,"margin-right"),W=U.getPropertyValue("box-sizing");if(W&&W==="border-box")D=K+N+V;else{const{clientWidth:Q,offsetWidth:ie}=I;D=K+q+ee+N+V+(ie-Q)}}j&&(I.style.transform=j),z&&(I.style.webkitTransform=z),t.roundLengths&&(D=Math.floor(D))}else D=(s-(t.slidesPerView-1)*S)/t.slidesPerView,t.roundLengths&&(D=Math.floor(D)),u[M]&&(u[M].style[n.getDirectionLabel("width")]=`${D}px`);u[M]&&(u[M].swiperSlideSize=D),v.push(D),t.centeredSlides?(E=E+D/2+b/2+S,b===0&&M!==0&&(E=E-s/2-S),M===0&&(E=E-s/2-S),Math.abs(E)<1/1e3&&(E=0),t.roundLengths&&(E=Math.floor(E)),A%t.slidesPerGroup===0&&p.push(E),m.push(E)):(t.roundLengths&&(E=Math.floor(E)),(A-Math.min(n.params.slidesPerGroupSkip,A))%n.params.slidesPerGroup===0&&p.push(E),m.push(E),E=E+D+S),n.virtualSize+=D+S,b=D,A+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+y,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+S}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+S}px`),R&&n.grid.updateWrapperSize(D,p),!t.centeredSlides){const M=[];for(let I=0;I<p.length;I+=1){let U=p[I];t.roundLengths&&(U=Math.floor(U)),p[I]<=n.virtualSize-s&&M.push(U)}p=M,Math.floor(n.virtualSize-s)-Math.floor(p[p.length-1])>1&&p.push(n.virtualSize-s)}if(l&&t.loop){const M=v[0]+S;if(t.slidesPerGroup>1){const I=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),U=M*t.slidesPerGroup;for(let j=0;j<I;j+=1)p.push(p[p.length-1]+U)}for(let I=0;I<n.virtual.slidesBefore+n.virtual.slidesAfter;I+=1)t.slidesPerGroup===1&&p.push(p[p.length-1]+M),m.push(m[m.length-1]+M),n.virtualSize+=M}if(p.length===0&&(p=[0]),S!==0){const M=n.isHorizontal()&&o?"marginLeft":n.getDirectionLabel("marginRight");u.filter((I,U)=>!t.cssMode||t.loop?!0:U!==u.length-1).forEach(I=>{I.style[M]=`${S}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let M=0;v.forEach(U=>{M+=U+(S||0)}),M-=S;const I=M-s;p=p.map(U=>U<=0?-_:U>I?I+y:U)}if(t.centerInsufficientSlides){let M=0;if(v.forEach(I=>{M+=I+(S||0)}),M-=S,M<s){const I=(s-M)/2;p.forEach((U,j)=>{p[j]=U-I}),m.forEach((U,j)=>{m[j]=U+I})}}if(Object.assign(n,{slides:u,snapGrid:p,slidesGrid:m,slidesSizesGrid:v}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){U0(i,"--swiper-centered-offset-before",`${-p[0]}px`),U0(i,"--swiper-centered-offset-after",`${n.size/2-v[v.length-1]/2}px`);const M=-n.snapGrid[0],I=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(U=>U+M),n.slidesGrid=n.slidesGrid.map(U=>U+I)}if(f!==c&&n.emit("slidesLengthChange"),p.length!==g&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),m.length!==x&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const M=`${t.containerModifierClass}backface-hidden`,I=n.el.classList.contains(M);f<=t.maxBackfaceHiddenSlides?I||n.el.classList.add(M):I&&n.el.classList.remove(M)}}function Nae(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!i)break;t.push(o(a))}else t.push(o(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const a=t[s].offsetHeight;r=a>r?a:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function kae(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}function Uae(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;r&&(o=n),i.forEach(l=>{l.classList.remove(t.slideVisibleClass,t.slideFullyVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){const c=i[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=i[0].swiperSlideOffset);const f=(o+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),p=(o-s[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),m=-(o-u),v=m+e.slidesSizesGrid[l],_=m>=0&&m<=e.size-e.slidesSizesGrid[l];(m>=0&&m<e.size-1||v>1&&v<=e.size||m<=0&&v>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),i[l].classList.add(t.slideVisibleClass)),_&&i[l].classList.add(t.slideFullyVisibleClass),c.progress=r?-f:f,c.originalProgress=r?-p:p}}function Fae(n){const e=this;if(typeof n>"u"){const u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(i===0)r=0,s=!0,o=!0;else{r=(n-e.minTranslate())/i;const u=Math.abs(n-e.minTranslate())<1,f=Math.abs(n-e.maxTranslate())<1;s=u||r<=0,o=f||r>=1,u&&(r=0),f&&(r=1)}if(t.loop){const u=e.getSlideIndexByData(0),f=e.getSlideIndexByData(e.slides.length-1),p=e.slidesGrid[u],m=e.slidesGrid[f],v=e.slidesGrid[e.slidesGrid.length-1],_=Math.abs(n);_>=p?a=(_-p)/v:a=(_+v-m)/v,a>1&&(a-=1)}Object.assign(e,{progress:r,progressLoop:a,isBeginning:s,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",r)}function zae(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,a=f=>ia(i,`.${t.slideClass}${f}, swiper-slide${f}`)[0];e.forEach(f=>{f.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let l,c,u;if(s)if(t.loop){let f=r-n.virtual.slidesBefore;f<0&&(f=n.virtual.slides.length+f),f>=n.virtual.slides.length&&(f-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${f}"]`)}else l=a(`[data-swiper-slide-index="${r}"]`);else o?(l=e.filter(f=>f.column===r)[0],u=e.filter(f=>f.column===r+1)[0],c=e.filter(f=>f.column===r-1)[0]):l=e[r];l&&(l.classList.add(t.slideActiveClass),o?(u&&u.classList.add(t.slideNextClass),c&&c.classList.add(t.slidePrevClass)):(u=Tae(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),u&&u.classList.add(t.slideNextClass),c=Eae(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(t.slidePrevClass))),n.emitSlidesClasses()}const cv=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},_S=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},nT=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const o=r,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+i+c)),n.slides.forEach((l,c)=>{a.includes(l.column)&&_S(n,c)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let o=r-e;o<=s+e;o+=1){const a=(o%t+t)%t;(a<r||a>s)&&_S(n,a)}else for(let o=Math.max(r-e,0);o<=Math.min(s+e,t-1);o+=1)o!==r&&(o>s||o<r)&&_S(n,o)};function Bae(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function Hae(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=n,c;const u=m=>{let v=m-e.virtual.slidesBefore;return v<0&&(v=e.virtual.slides.length+v),v>=e.virtual.slides.length&&(v-=e.virtual.slides.length),v};if(typeof l>"u"&&(l=Bae(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const m=Math.min(r.slidesPerGroupSkip,l);c=m+Math.floor((l-m)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}const f=e.grid&&r.grid&&r.grid.rows>1;let p;if(e.virtual&&r.virtual.enabled&&r.loop)p=u(l);else if(f){const m=e.slides.filter(_=>_.column===l)[0];let v=parseInt(m.getAttribute("data-swiper-slide-index"),10);Number.isNaN(v)&&(v=Math.max(e.slides.indexOf(m),0)),p=Math.floor(v/r.grid.rows)}else if(e.slides[l]){const m=e.slides[l].getAttribute("data-swiper-slide-index");m?p=parseInt(m,10):p=l}else p=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:p,previousIndex:s,activeIndex:l}),e.initialized&&nT(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==p&&e.emit("realIndexChange"),e.emit("slideChange"))}function Vae(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!r&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(r=a)});let s=!1,o;if(r){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===r){s=!0,o=a;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var Gae={updateSize:Dae,updateSlides:Oae,updateAutoHeight:Nae,updateSlidesOffset:kae,updateSlidesProgress:Uae,updateProgress:Fae,updateSlidesClasses:zae,updateActiveIndex:Hae,updateClickedSlide:Vae};function Wae(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let o=Sae(s,n);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function $ae(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:o}=t;let a=0,l=0;const c=0;t.isHorizontal()?a=i?-n:n:l=n,r.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:r.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let u;const f=t.maxTranslate()-t.minTranslate();f===0?u=0:u=(n-t.minTranslate())/f,u!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function jae(){return-this.snapGrid[0]}function Xae(){return-this.snapGrid[this.snapGrid.length-1]}function Yae(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(i&&n>l?u=l:i&&n<c?u=c:u=n,s.updateProgress(u),o.cssMode){const f=s.isHorizontal();if(e===0)a[f?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return Oz({swiper:s,targetPosition:-u,side:f?"left":"top"}),!0;a.scrollTo({[f?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(p){!s||s.destroyed||p.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var Kae={getTranslate:Wae,setTranslate:$ae,minTranslate:jae,maxTranslate:Xae,translateTo:Yae};function qae(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function Uz(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:o}=e;let a=i;if(a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${r}`),t&&s!==o){if(a==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),a==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function Zae(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),Uz({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function Qae(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),Uz({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var Jae={setTransition:qae,transitionStart:Zae,transitionEnd:Qae};function ele(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let o=n;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:f,rtlTranslate:p,wrapperEl:m,enabled:v}=s;if(s.animating&&a.preventInteractionOnTransition||!v&&!i&&!r||s.destroyed)return!1;const _=Math.min(s.params.slidesPerGroupSkip,o);let y=_+Math.floor((o-_)/s.params.slidesPerGroup);y>=l.length&&(y=l.length-1);const g=-l[y];if(a.normalizeSlideIndex)for(let S=0;S<c.length;S+=1){const E=-Math.floor(g*100),b=Math.floor(c[S]*100),A=Math.floor(c[S+1]*100);typeof c[S+1]<"u"?E>=b&&E<A-(A-b)/2?o=S:E>=b&&E<A&&(o=S+1):E>=b&&(o=S)}if(s.initialized&&o!==f&&(!s.allowSlideNext&&(p?g>s.translate&&g>s.minTranslate():g<s.translate&&g<s.minTranslate())||!s.allowSlidePrev&&g>s.translate&&g>s.maxTranslate()&&(f||0)!==o))return!1;o!==(u||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(g);let x;if(o>f?x="next":o<f?x="prev":x="reset",p&&-g===s.translate||!p&&g===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(g),x!=="reset"&&(s.transitionStart(t,x),s.transitionEnd(t,x)),!1;if(a.cssMode){const S=s.isHorizontal(),E=p?g:-g;if(e===0){const b=s.virtual&&s.params.virtual.enabled;b&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),b&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{m[S?"scrollLeft":"scrollTop"]=E})):m[S?"scrollLeft":"scrollTop"]=E,b&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return Oz({swiper:s,targetPosition:E,side:S?"left":"top"}),!0;m.scrollTo({[S?"left":"top"]:E,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(g),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,x),e===0?s.transitionEnd(t,x):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(E){!s||s.destroyed||E.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,x))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function tle(n,e,t,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;if(r.destroyed)return;const s=r.grid&&r.params.grid&&r.params.grid.rows>1;let o=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o=o+r.virtual.slidesBefore;else{let a;if(s){const p=o*r.params.grid.rows;a=r.slides.filter(m=>m.getAttribute("data-swiper-slide-index")*1===p)[0].column}else a=r.getSlideIndexByData(o);const l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params;let u=r.params.slidesPerView;u==="auto"?u=r.slidesPerViewDynamic():(u=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let f=l-a<u;if(c&&(f=f||a<Math.ceil(u/2)),f){const p=c?a<r.activeIndex?"prev":"next":a-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:p,slideTo:!0,activeSlideIndex:p==="next"?a+1:a-l+1,slideRealIndex:p==="next"?r.realIndex:void 0})}if(s){const p=o*r.params.grid.rows;o=r.slides.filter(m=>m.getAttribute("data-swiper-slide-index")*1===p)[0].column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,e,t,i)}),r}function nle(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:o}=i;if(!r||i.destroyed)return i;let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:a,c=i.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function ile(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;const u=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const f=a?i.translate:-i.translate;function p(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const m=p(f),v=s.map(g=>p(g));let _=s[v.indexOf(m)-1];if(typeof _>"u"&&r.cssMode){let g;s.forEach((x,S)=>{m>=x&&(g=S)}),typeof g<"u"&&(_=s[g>0?g-1:g])}let y=0;if(typeof _<"u"&&(y=o.indexOf(_),y<0&&(y=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(y=y-i.slidesPerViewDynamic("previous",!0)+1,y=Math.max(y,0))),r.rewind&&i.isBeginning){const g=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(g,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(y,n,e,t)}),!0;return i.slideTo(y,n,e,t)}function rle(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this;if(!i.destroyed)return i.slideTo(i.activeIndex,n,e,t)}function sle(n,e,t,i){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;if(r.destroyed)return;let s=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){const c=r.snapGrid[a],u=r.snapGrid[a+1];l-c>(u-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[a-1],u=r.snapGrid[a];l-c<=(u-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function ole(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,s;const o=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(ia(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),eT(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(ia(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),eT(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var ale={slideTo:ele,slideToLoop:tle,slideNext:nle,slidePrev:ile,slideReset:rle,slideToClosest:sle,slideToClickedSlide:ole};function lle(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const r=()=>{ia(i,`.${t.slideClass}, swiper-slide`).forEach((f,p)=>{f.setAttribute("data-swiper-slide-index",p)})},s=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(s?t.grid.rows:1),a=e.slides.length%o!==0,l=s&&e.slides.length%t.grid.rows!==0,c=u=>{for(let f=0;f<u;f+=1){const p=e.isElement?tT("swiper-slide",[t.slideBlankClass]):tT("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(p)}};if(a){if(t.loopAddBlankSlides){const u=o-e.slides.length%o;c(u),e.recalcSlides(),e.updateSlides()}else hy("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(t.loopAddBlankSlides){const u=t.grid.rows-e.slides.length%t.grid.rows;c(u),e.recalcSlides(),e.updateSlides()}else hy("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function cle(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:o,byMousewheel:a}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:f,slidesEl:p,params:m}=l,{centeredSlides:v}=m;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&m.virtual.enabled){t&&(!m.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):m.centeredSlides&&l.snapIndex<m.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=f,l.emit("loopFix");return}let _=m.slidesPerView;_==="auto"?_=l.slidesPerViewDynamic():(_=Math.ceil(parseFloat(m.slidesPerView,10)),v&&_%2===0&&(_=_+1));const y=m.slidesPerGroupAuto?_:m.slidesPerGroup;let g=y;g%y!==0&&(g+=y-g%y),g+=m.loopAdditionalSlides,l.loopedSlides=g;const x=l.grid&&m.grid&&m.grid.rows>1;c.length<_+g?hy("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):x&&m.grid.fill==="row"&&hy("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const S=[],E=[];let b=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(c.filter(j=>j.classList.contains(m.slideActiveClass))[0]):b=s;const A=i==="next"||!i,R=i==="prev"||!i;let D=0,O=0;const M=x?Math.ceil(c.length/m.grid.rows):c.length,U=(x?c[s].column:s)+(v&&typeof r>"u"?-_/2+.5:0);if(U<g){D=Math.max(g-U,y);for(let j=0;j<g-U;j+=1){const z=j-Math.floor(j/M)*M;if(x){const K=M-z-1;for(let q=c.length-1;q>=0;q-=1)c[q].column===K&&S.push(q)}else S.push(M-z-1)}}else if(U+_>M-g){O=Math.max(U-(M-g*2),y);for(let j=0;j<O;j+=1){const z=j-Math.floor(j/M)*M;x?c.forEach((K,q)=>{K.column===z&&E.push(q)}):E.push(z)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),R&&S.forEach(j=>{c[j].swiperLoopMoveDOM=!0,p.prepend(c[j]),c[j].swiperLoopMoveDOM=!1}),A&&E.forEach(j=>{c[j].swiperLoopMoveDOM=!0,p.append(c[j]),c[j].swiperLoopMoveDOM=!1}),l.recalcSlides(),m.slidesPerView==="auto"?l.updateSlides():x&&(S.length>0&&R||E.length>0&&A)&&l.slides.forEach((j,z)=>{l.grid.updateSlide(z,j,l.slides)}),m.watchSlidesProgress&&l.updateSlidesOffset(),t){if(S.length>0&&R){if(typeof e>"u"){const j=l.slidesGrid[b],K=l.slidesGrid[b+D]-j;a?l.setTranslate(l.translate-K):(l.slideTo(b+Math.ceil(D),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-K,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-K))}else if(r){const j=x?S.length/m.grid.rows:S.length;l.slideTo(l.activeIndex+j,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(E.length>0&&A)if(typeof e>"u"){const j=l.slidesGrid[b],K=l.slidesGrid[b-O]-j;a?l.setTranslate(l.translate-K):(l.slideTo(b-O,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-K,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-K))}else{const j=x?E.length/m.grid.rows:E.length;l.slideTo(l.activeIndex-j,0,!1,!0)}}if(l.allowSlidePrev=u,l.allowSlideNext=f,l.controller&&l.controller.control&&!o){const j={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(z=>{!z.destroyed&&z.params.loop&&z.loopFix({...j,slideTo:z.params.slidesPerView===m.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...j,slideTo:l.controller.control.params.slidesPerView===m.slidesPerView?t:!1})}l.emit("loopFix")}function ule(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var fle={loopCreate:lle,loopFix:cle,loopDestroy:ule};function dle(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function hle(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var ple={setGrabCursor:dle,unsetGrabCursor:hle};function mle(n,e){e===void 0&&(e=this);function t(i){if(!i||i===Id()||i===ns())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function CL(n,e,t){const i=ns(),{params:r}=n,s=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return s&&(t<=o||t>=i.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function gle(n){const e=this,t=Id();let i=n;i.originalEvent&&(i=i.originalEvent);const r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){CL(e,i,i.targetTouches[0].pageX);return}const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(l)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",u=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&u&&(l=u[0]);const f=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,p=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(p?mle(f,l):l.closest(f))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;const m=o.currentX,v=o.currentY;if(!CL(e,i,m))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=m,o.startY=v,r.touchStartTime=dy(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let _=!0;l.matches(r.focusableElements)&&(_=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l&&t.activeElement.blur();const y=_&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||y)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function vle(n){const e=Id(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:a}=t;if(!a||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(A=>A.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const u=c.pageX,f=c.pageY;if(l.preventedByNestedSwiper){s.startX=u,s.startY=f;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:u,startY:f,currentX:u,currentY:f}),i.touchStartTime=dy());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(f<s.startY&&t.translate<=t.maxTranslate()||f>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(u<s.startX&&t.translate<=t.maxTranslate()||u>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=u,s.currentY=f;const p=s.currentX-s.startX,m=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(p**2+m**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let A;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:p*p+m*m>=25&&(A=Math.atan2(Math.abs(m),Math.abs(p))*180/Math.PI,i.isScrolling=t.isHorizontal()?A>r.touchAngle:90-A>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let v=t.isHorizontal()?p:m,_=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(v=Math.abs(v)*(o?1:-1),_=Math.abs(_)*(o?1:-1)),s.diff=v,v*=r.touchRatio,o&&(v=-v,_=-_);const y=t.touchesDirection;t.swipeDirection=v>0?"prev":"next",t.touchesDirection=_>0?"prev":"next";const g=t.params.loop&&!r.cssMode,x=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(g&&x&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const A=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(A)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let S;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&y!==t.touchesDirection&&g&&x&&Math.abs(v)>=1){Object.assign(s,{startX:u,startY:f,currentX:u,currentY:f,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=v+i.startTranslate;let E=!0,b=r.resistanceRatio;if(r.touchReleaseOnEdges&&(b=0),v>0?(g&&x&&!S&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(E=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+v)**b))):v<0&&(g&&x&&!S&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(E=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-v)**b))),E&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(v)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function yle(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].filter(b=>b.identifier===t.touchId)[0],!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!o.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const f=dy(),p=f-t.touchStartTime;if(e.allowClick){const b=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(b&&b[0]||i.target,b),e.emit("tap click",i),p<300&&f-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=dy(),eT(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let m;if(o.followFinger?m=l?e.translate:-e.translate:m=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:m});return}const v=m>=-e.maxTranslate()&&!e.params.loop;let _=0,y=e.slidesSizesGrid[0];for(let b=0;b<c.length;b+=b<o.slidesPerGroupSkip?1:o.slidesPerGroup){const A=b<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[b+A]<"u"?(v||m>=c[b]&&m<c[b+A])&&(_=b,y=c[b+A]-c[b]):(v||m>=c[b])&&(_=b,y=c[c.length-1]-c[c.length-2])}let g=null,x=null;o.rewind&&(e.isBeginning?x=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(g=0));const S=(m-c[_])/y,E=_<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(p>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(S>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?g:_+E):e.slideTo(_)),e.swipeDirection==="prev"&&(S>1-o.longSwipesRatio?e.slideTo(_+E):x!==null&&S<0&&Math.abs(S)>o.longSwipesRatio?e.slideTo(x):e.slideTo(_))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(_+E):e.slideTo(_):(e.swipeDirection==="next"&&e.slideTo(g!==null?g:_+E),e.swipeDirection==="prev"&&e.slideTo(x!==null?x:_))}}function RL(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function _le(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function xle(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function Sle(n){const e=this;cv(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function wle(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const Fz=(n,e)=>{const t=Id(),{params:i,el:r,wrapperEl:s,device:o}=n,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),r[l]("touchstart",n.onTouchStart,{passive:!1}),r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",RL,!0):n[c]("observerUpdate",RL,!0),r[l]("load",n.onLoad,{capture:!0})};function Ele(){const n=this,{params:e}=n;n.onTouchStart=gle.bind(n),n.onTouchMove=vle.bind(n),n.onTouchEnd=yle.bind(n),n.onDocumentTouchStart=wle.bind(n),e.cssMode&&(n.onScroll=xle.bind(n)),n.onClick=_le.bind(n),n.onLoad=Sle.bind(n),Fz(n,"on")}function Tle(){Fz(this,"off")}var Mle={attachEvents:Ele,detachEvents:Tle};const PL=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function ble(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!o||n.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||n.originalParams,c=PL(n,i),u=PL(n,l),f=i.enabled;c&&!u?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&u&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(g=>{if(typeof l[g]>"u")return;const x=i[g]&&i[g].enabled,S=l[g]&&l[g].enabled;x&&!S&&n[g].disable(),!x&&S&&n[g].enable()});const p=l.direction&&l.direction!==i.direction,m=i.loop&&(l.slidesPerView!==i.slidesPerView||p),v=i.loop;p&&t&&n.changeDirection(),zr(n.params,l);const _=n.params.enabled,y=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),f&&!_?n.disable():!f&&_&&n.enable(),n.currentBreakpoint=o,n.emit("_beforeBreakpoint",l),t&&(m?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!v&&y?(n.loopCreate(e),n.updateSlides()):v&&!y&&n.loopDestroy()),n.emit("breakpoint",l)}function Ale(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=ns(),s=e==="window"?r.innerHeight:t.clientHeight,o=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var Cle={setBreakpoint:ble,getBreakpoint:Ale};function Rle(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function Ple(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,o=Rle(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),r.classList.add(...e),n.emitContainerClasses()}function Ile(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var Lle={addClasses:Ple,removeClasses:Ile};function Dle(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var Ole={checkOverflow:Dle},iT={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Nle(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){zr(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){zr(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),zr(e,i)}}const xS={eventsEmitter:Lae,update:Gae,translate:Kae,transition:Jae,slide:ale,loop:fle,grabCursor:ple,events:Mle,breakpoints:Cle,checkOverflow:Ole,classes:Lle},SS={};let kb=class Wo{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=zr({},t),e&&!t.el&&(t.el=e);const o=Id();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){const u=[];return o.querySelectorAll(t.el).forEach(f=>{const p=zr({},t,{el:f});u.push(new Wo(p))}),u}const a=this;a.__swiper__=!0,a.support=Nz(),a.device=kz({userAgent:t.userAgent}),a.browser=Rae(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const l={};a.modules.forEach(u=>{u({params:t,swiper:a,extendParams:Nle(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const c=zr({},iT,l);return a.params=zr({},c,SS,t),a.originalParams=zr({},a.params),a.passedParams=zr({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(u=>{a.on(u,a.params.on[u])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=ia(t,`.${i.slideClass}, swiper-slide`),s=bL(r[0]);return bL(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=ia(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),o=(i.maxTranslate()-r)*e+r;i.translateTo(o,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=i;let u=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let f=s[c]?Math.ceil(s[c].swiperSlideSize):0,p;for(let m=c+1;m<s.length;m+=1)s[m]&&!p&&(f+=Math.ceil(s[m].swiperSlideSize),u+=1,f>l&&(p=!0));for(let m=c-1;m>=0;m-=1)s[m]&&!p&&(f+=s[m].swiperSlideSize,u+=1,f>l&&(p=!0))}else if(e==="current")for(let f=c+1;f<s.length;f+=1)(t?o[f]+a[f]-o[c]<l:o[f]-o[c]<l)&&(u+=1);else for(let f=c-1;f>=0;f-=1)o[c]-o[f]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&cv(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):ia(i,r())[0];return!o&&t.params.createElements&&(o=tT("div",t.params.wrapperClass),i.append(o),ia(i,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:i,wrapperEl:o,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||rl(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||rl(i,"direction")==="rtl"),wrongRTL:rl(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?cv(t,s):s.addEventListener("load",o=>{cv(t,o.target)})}),nT(t),t.initialized=!0,nT(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,_ae(i)),i.destroyed=!0),null}static extendDefaults(e){zr(SS,e)}static get extendedDefaults(){return SS}static get defaults(){return iT}static installModule(e){Wo.prototype.__modules__||(Wo.prototype.__modules__=[]);const t=Wo.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Wo.installModule(t)),Wo):(Wo.installModule(e),Wo)}};Object.keys(xS).forEach(n=>{Object.keys(xS[n]).forEach(e=>{kb.prototype[e]=xS[n][e]})});kb.use([Pae,Iae]);const zz=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function tu(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function zf(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:tu(e[i])&&tu(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:zf(n[i],e[i]):n[i]=e[i]})}function Bz(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function Hz(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function Vz(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function Gz(n){n===void 0&&(n="");const e=n.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function kle(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function Ule(n){let{swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=n;const c=r.filter(O=>O!=="children"&&O!=="direction"&&O!=="wrapperClass"),{params:u,pagination:f,navigation:p,scrollbar:m,virtual:v,thumbs:_}=e;let y,g,x,S,E,b,A,R;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(y=!0),r.includes("controller")&&i.controller&&i.controller.control&&u.controller&&!u.controller.control&&(g=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(u.pagination||u.pagination===!1)&&f&&!f.el&&(x=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||a)&&(u.scrollbar||u.scrollbar===!1)&&m&&!m.el&&(S=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||o)&&(i.navigation.nextEl||s)&&(u.navigation||u.navigation===!1)&&p&&!p.prevEl&&!p.nextEl&&(E=!0);const D=O=>{e[O]&&(e[O].destroy(),O==="navigation"?(e.isElement&&(e[O].prevEl.remove(),e[O].nextEl.remove()),u[O].prevEl=void 0,u[O].nextEl=void 0,e[O].prevEl=void 0,e[O].nextEl=void 0):(e.isElement&&e[O].el.remove(),u[O].el=void 0,e[O].el=void 0))};r.includes("loop")&&e.isElement&&(u.loop&&!i.loop?b=!0:!u.loop&&i.loop?A=!0:R=!0),c.forEach(O=>{if(tu(u[O])&&tu(i[O]))Object.assign(u[O],i[O]),(O==="navigation"||O==="pagination"||O==="scrollbar")&&"enabled"in i[O]&&!i[O].enabled&&D(O);else{const M=i[O];(M===!0||M===!1)&&(O==="navigation"||O==="pagination"||O==="scrollbar")?M===!1&&D(O):u[O]=i[O]}}),c.includes("controller")&&!g&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),r.includes("children")&&t&&v&&u.virtual.enabled?(v.slides=t,v.update(!0)):r.includes("virtual")&&v&&u.virtual.enabled&&(t&&(v.slides=t),v.update(!0)),r.includes("children")&&t&&u.loop&&(R=!0),y&&_.init()&&_.update(!0),g&&(e.controller.control=u.controller.control),x&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),f.init(),f.render(),f.update()),S&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(u.scrollbar.el=a),m.init(),m.updateSize(),m.setTranslate()),E&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),s&&(u.navigation.nextEl=s),o&&(u.navigation.prevEl=o),p.init(),p.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(b||R)&&e.loopDestroy(),(A||R)&&e.loopCreate(),e.update()}function Fle(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},i={},r={};zf(t,iT),t._emitClasses=!0,t.init=!1;const s={},o=zz.map(l=>l.replace(/_/,"")),a=Object.assign({},n);return Object.keys(a).forEach(l=>{typeof n[l]>"u"||(o.indexOf(l)>=0?tu(n[l])?(t[l]={},r[l]={},zf(t[l],n[l]),zf(r[l],n[l])):(t[l]=n[l],r[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:s[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:r,rest:s,events:i}}function zle(n,e){let{el:t,nextEl:i,prevEl:r,paginationEl:s,scrollbarEl:o,swiper:a}=n;Bz(e)&&i&&r&&(a.params.navigation.nextEl=i,a.originalParams.navigation.nextEl=i,a.params.navigation.prevEl=r,a.originalParams.navigation.prevEl=r),Hz(e)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),Vz(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(t)}function Ble(n,e,t,i,r){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(t&&i){const l=i.map(r),c=t.map(r);l.join("")!==c.join("")&&o("children"),i.length!==t.length&&o("children")}return zz.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(tu(n[l])&&tu(e[l])){const c=Object.keys(n[l]),u=Object.keys(e[l]);c.length!==u.length?o(l):(c.forEach(f=>{n[l][f]!==e[l][f]&&o(l)}),u.forEach(f=>{n[l][f]!==e[l][f]&&o(l)}))}else n[l]!==e[l]&&o(l)}),s}const Hle=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function py(){return py=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},py.apply(this,arguments)}function Wz(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function $z(n){const e=[];return X.Children.toArray(n).forEach(t=>{Wz(t)?e.push(t):t.props&&t.props.children&&$z(t.props.children).forEach(i=>e.push(i))}),e}function Vle(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return X.Children.toArray(n).forEach(i=>{if(Wz(i))e.push(i);else if(i.props&&i.props.slot&&t[i.props.slot])t[i.props.slot].push(i);else if(i.props&&i.props.children){const r=$z(i.props.children);r.length>0?r.forEach(s=>e.push(s)):t["container-end"].push(i)}else t["container-end"].push(i)}),{slides:e,slots:t}}function Gle(n,e,t){if(!t)return null;const i=u=>{let f=u;return u<0?f=e.length+u:f>=e.length&&(f=f-e.length),f},r=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:s,to:o}=t,a=n.params.loop?-e.length:0,l=n.params.loop?e.length*2:e.length,c=[];for(let u=a;u<l;u+=1)u>=s&&u<=o&&c.push(e[i(u)]);return c.map((u,f)=>X.cloneElement(u,{swiper:n,style:r,key:u.props.virtualIndex||u.key||`slide-${f}`}))}function ep(n,e){return typeof window>"u"?P.useEffect(n,e):P.useLayoutEffect(n,e)}const IL=P.createContext(null),Wle=P.createContext(null),jz=P.forwardRef(function(n,e){let{className:t,tag:i="div",wrapperTag:r="div",children:s,onSwiper:o,...a}=n===void 0?{}:n,l=!1;const[c,u]=P.useState("swiper"),[f,p]=P.useState(null),[m,v]=P.useState(!1),_=P.useRef(!1),y=P.useRef(null),g=P.useRef(null),x=P.useRef(null),S=P.useRef(null),E=P.useRef(null),b=P.useRef(null),A=P.useRef(null),R=P.useRef(null),{params:D,passedParams:O,rest:M,events:I}=Fle(a),{slides:U,slots:j}=Vle(s),z=()=>{v(!m)};Object.assign(D.on,{_containerClasses(V,W){u(W)}});const K=()=>{Object.assign(D.on,I),l=!0;const V={...D};if(delete V.wrapperClass,g.current=new kb(V),g.current.virtual&&g.current.params.virtual.enabled){g.current.virtual.slides=U;const W={cache:!1,slides:U,renderExternal:p,renderExternalUpdate:!1};zf(g.current.params.virtual,W),zf(g.current.originalParams.virtual,W)}};y.current||K(),g.current&&g.current.on("_beforeBreakpoint",z);const q=()=>{l||!I||!g.current||Object.keys(I).forEach(V=>{g.current.on(V,I[V])})},ee=()=>{!I||!g.current||Object.keys(I).forEach(V=>{g.current.off(V,I[V])})};P.useEffect(()=>()=>{g.current&&g.current.off("_beforeBreakpoint",z)}),P.useEffect(()=>{!_.current&&g.current&&(g.current.emitSlidesClasses(),_.current=!0)}),ep(()=>{if(e&&(e.current=y.current),!!y.current)return g.current.destroyed&&K(),zle({el:y.current,nextEl:E.current,prevEl:b.current,paginationEl:A.current,scrollbarEl:R.current,swiper:g.current},D),o&&!g.current.destroyed&&o(g.current),()=>{g.current&&!g.current.destroyed&&g.current.destroy(!0,!1)}},[]),ep(()=>{q();const V=Ble(O,x.current,U,S.current,W=>W.key);return x.current=O,S.current=U,V.length&&g.current&&!g.current.destroyed&&Ule({swiper:g.current,slides:U,passedParams:O,changedParams:V,nextEl:E.current,prevEl:b.current,scrollbarEl:R.current,paginationEl:A.current}),()=>{ee()}}),ep(()=>{Hle(g.current)},[f]);function N(){return D.virtual?Gle(g.current,U,f):U.map((V,W)=>X.cloneElement(V,{swiper:g.current,swiperSlideIndex:W}))}return X.createElement(i,py({ref:y,className:Gz(`${c}${t?` ${t}`:""}`)},M),X.createElement(Wle.Provider,{value:g.current},j["container-start"],X.createElement(r,{className:kle(D.wrapperClass)},j["wrapper-start"],N(),j["wrapper-end"]),Bz(D)&&X.createElement(X.Fragment,null,X.createElement("div",{ref:b,className:"swiper-button-prev"}),X.createElement("div",{ref:E,className:"swiper-button-next"})),Vz(D)&&X.createElement("div",{ref:R,className:"swiper-scrollbar"}),Hz(D)&&X.createElement("div",{ref:A,className:"swiper-pagination"}),j["container-end"]))});jz.displayName="Swiper";const Xz=P.forwardRef(function(n,e){let{tag:t="div",children:i,className:r="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:c,...u}=n===void 0?{}:n;const f=P.useRef(null),[p,m]=P.useState("swiper-slide"),[v,_]=P.useState(!1);function y(E,b,A){b===f.current&&m(A)}ep(()=>{if(typeof c<"u"&&(f.current.swiperSlideIndex=c),e&&(e.current=f.current),!(!f.current||!s)){if(s.destroyed){p!=="swiper-slide"&&m("swiper-slide");return}return s.on("_slideClass",y),()=>{s&&s.off("_slideClass",y)}}}),ep(()=>{s&&f.current&&!s.destroyed&&m(s.getSlideClasses(f.current))},[s]);const g={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},x=()=>typeof i=="function"?i(g):i,S=()=>{_(!0)};return X.createElement(t,py({ref:f,className:Gz(`${p}${r?` ${r}`:""}`),"data-swiper-slide-index":l,onLoad:S},u),o&&X.createElement(IL.Provider,{value:g},X.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},x(),a&&!v&&X.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&X.createElement(IL.Provider,{value:g},x(),a&&!v&&X.createElement("div",{className:"swiper-lazy-preloader"})))});Xz.displayName="SwiperSlide";const $le="_workDetail_bmz6w_1",jle="_mainContainer_bmz6w_5",Xle="_subContainer_bmz6w_15",Yle="_leftSide_bmz6w_24",Kle="_rightSide_bmz6w_30",qle="_backBtn_bmz6w_56",ac={workDetail:$le,mainContainer:jle,subContainer:Xle,leftSide:Yle,rightSide:Kle,backBtn:qle},Zle=()=>{const{workId:n}=zH(),e=sO.find(t=>t.id===n);return e?ae.jsxs("div",{className:ac.workDetail,children:[ae.jsx(oO,{}),ae.jsx(jz,{spaceBetween:30,slidesPerView:1,pagination:{clickable:!0},children:e.workImages.map((t,i)=>ae.jsx(Xz,{children:ae.jsx("img",{src:t,alt:`Work ${n} Slide ${i}`,style:{width:"100%",height:"auto"}})},i))}),ae.jsxs("div",{className:ac.mainContainer,children:[ae.jsxs("div",{className:ac.subContainer,children:[ae.jsxs("div",{className:ac.leftSide,children:[ae.jsx(rO,{id:e.id,authorName:e.authorName,authorNameEn:e.authorNameEn,researchTheme:e.researchTheme,researchThemeEn:e.researchThemeEn,iconPhoto:e.iconPhoto})," "]}),ae.jsxs("div",{className:ac.rightSide,children:[ae.jsx("div",{children:ae.jsx("div",{className:ac.nameContent,children:ae.jsxs("h1",{children:[e.authorName," (",e.authorNameEn,")"]})})}),ae.jsxs("div",{children:[ae.jsx("h2",{children:e.researchTheme}),ae.jsx("h2",{children:e.researchThemeEn})]}),ae.jsxs("div",{children:[ae.jsx("h3",{children:"研究キーワード"}),ae.jsx("p",{children:e.researchKeywords.join(", ")})]}),ae.jsxs("div",{children:[ae.jsx("h3",{children:"研究概要"}),ae.jsxs("p",{children:[" ",e.researchSummary]})]}),ae.jsxs("div",{children:[ae.jsx("h3",{children:"研究紹介"}),ae.jsx("p",{children:e.workIntroduction})]})]})]}),ae.jsxs("div",{className:ac.backBtn,children:[" ",ae.jsx(_w,{to:"/",children:"← Back"})]})]}),ae.jsx(iO,{is3DEnabled:!1})]}):ae.jsx("div",{children:"Work not found"})},Qle=wS.createRoot(document.getElementById("root"));Qle.render(ae.jsx(X.StrictMode,{children:ae.jsx(aV,{children:ae.jsxs(eV,{children:[ae.jsx(gw,{path:"/",element:ae.jsx(gae,{})}),ae.jsx(gw,{path:"/work/:workId",element:ae.jsx(Zle,{})})]})})}));
